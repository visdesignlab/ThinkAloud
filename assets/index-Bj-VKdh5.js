var Hje=Object.defineProperty;var qje=(e,t,n)=>t in e?Hje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gu=(e,t,n)=>qje(e,typeof t!="symbol"?t+"":t,n);var gln=Wje((_cn,Eie)=>{function Gje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ol(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mye(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Lye={exports:{}},zM={},Fye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=Symbol.for("react.element"),Yje=Symbol.for("react.portal"),Kje=Symbol.for("react.fragment"),Xje=Symbol.for("react.strict_mode"),Qje=Symbol.for("react.profiler"),Jje=Symbol.for("react.provider"),Zje=Symbol.for("react.context"),e9e=Symbol.for("react.forward_ref"),t9e=Symbol.for("react.suspense"),n9e=Symbol.for("react.memo"),r9e=Symbol.for("react.lazy"),Uie=Symbol.iterator;function i9e(e){return e===null||typeof e!="object"?null:(e=Uie&&e[Uie]||e["@@iterator"],typeof e=="function"?e:null)}var jye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bye=Object.assign,Uye={};function wx(e,t,n){this.props=e,this.context=t,this.refs=Uye,this.updater=n||jye}wx.prototype.isReactComponent={};wx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zye(){}zye.prototype=wx.prototype;function Oq(e,t,n){this.props=e,this.context=t,this.refs=Uye,this.updater=n||jye}var Dq=Oq.prototype=new zye;Dq.constructor=Oq;Bye(Dq,wx.prototype);Dq.isPureReactComponent=!0;var zie=Array.isArray,Vye=Object.prototype.hasOwnProperty,$q={current:null},Hye={key:!0,ref:!0,__self:!0,__source:!0};function qye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Vye.call(t,r)&&!Hye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:PI,type:e,key:s,ref:o,props:i,_owner:$q.current}}function s9e(e,t){return{$$typeof:PI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mq(e){return typeof e=="object"&&e!==null&&e.$$typeof===PI}function o9e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vie=/\/+/g;function G5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?o9e(""+e.key):t.toString(36)}function LP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case PI:case Yje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+G5(o,0):r,zie(i)?(n="",e!=null&&(n=e.replace(Vie,"$&/")+"/"),LP(i,t,n,"",function(l){return l})):i!=null&&(Mq(i)&&(i=s9e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",zie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+G5(s,a);o+=LP(s,t,n,u,i)}else if(u=i9e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+G5(s,a++),o+=LP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zR(e,t,n){if(e==null)return e;var r=[],i=0;return LP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function a9e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var au={current:null},FP={transition:null},u9e={ReactCurrentDispatcher:au,ReactCurrentBatchConfig:FP,ReactCurrentOwner:$q};function Wye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:zR,forEach:function(e,t,n){zR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zR(e,function(){t++}),t},toArray:function(e){return zR(e,function(t){return t})||[]},only:function(e){if(!Mq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=wx;Mn.Fragment=Kje;Mn.Profiler=Qje;Mn.PureComponent=Oq;Mn.StrictMode=Xje;Mn.Suspense=t9e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u9e;Mn.act=Wye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=$q.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Vye.call(t,u)&&!Hye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:PI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:Zje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jje,_context:e},e.Consumer=e};Mn.createElement=qye;Mn.createFactory=function(e){var t=qye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:e9e,render:e}};Mn.isValidElement=Mq;Mn.lazy=function(e){return{$$typeof:r9e,_payload:{_status:-1,_result:e},_init:a9e}};Mn.memo=function(e,t){return{$$typeof:n9e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=FP.transition;FP.transition={};try{e()}finally{FP.transition=t}};Mn.unstable_act=Wye;Mn.useCallback=function(e,t){return au.current.useCallback(e,t)};Mn.useContext=function(e){return au.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return au.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return au.current.useEffect(e,t)};Mn.useId=function(){return au.current.useId()};Mn.useImperativeHandle=function(e,t,n){return au.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return au.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return au.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return au.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return au.current.useReducer(e,t,n)};Mn.useRef=function(e){return au.current.useRef(e)};Mn.useState=function(e){return au.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return au.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return au.current.useTransition()};Mn.version="18.3.1";Fye.exports=Mn;var I=Fye.exports;const xi=ol(I),oD=Gje({__proto__:null,default:xi},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l9e=I,c9e=Symbol.for("react.element"),f9e=Symbol.for("react.fragment"),d9e=Object.prototype.hasOwnProperty,h9e=l9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p9e={key:!0,ref:!0,__self:!0,__source:!0};function Gye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)d9e.call(t,r)&&!p9e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:c9e,type:e,key:s,ref:o,props:i,_owner:h9e.current}}zM.Fragment=f9e;zM.jsx=Gye;zM.jsxs=Gye;Lye.exports=zM;var _=Lye.exports,zB={},Yye={exports:{}},Ql={},Kye={exports:{}},Xye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,V){var O=U.length;U.push(V);e:for(;0<O;){var z=O-1>>>1,W=U[z];if(0<i(W,V))U[z]=V,U[O]=W,O=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],O=U.pop();if(O!==V){U[0]=O;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var H=2*(z+1)-1,G=U[H],te=H+1,he=U[te];if(0>i(G,O))te<W&&0>i(he,G)?(U[z]=he,U[te]=O,z=te):(U[z]=G,U[H]=O,z=H);else if(te<W&&0>i(he,O))U[z]=he,U[te]=O,z=te;else break e}}return V}function i(U,V){var O=U.sortIndex-V.sortIndex;return O!==0?O:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=U)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,L(E);else{var V=n(l);V!==null&&B(w,V.startTime-U)}}function E(U,V){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var O=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||U&&!P());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var H=n(l);H!==null&&B(w,H.startTime-V),j=!1}return j}finally{f=null,d=O,h=!1}}var S=!1,x=null,C=-1,A=5,R=-1;function P(){return!(e.unstable_now()-R<A)}function $(){if(x!==null){var U=e.unstable_now();R=U;var V=!0;try{V=x(!0,U)}finally{V?k():(S=!1,x=null)}}else S=!1}var k;if(typeof v=="function")k=function(){v($)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,M=D.port2;D.port1.onmessage=$,k=function(){M.postMessage(null)}}else k=function(){g($,0)};function L(U){x=U,S||(S=!0,k())}function B(U,V){C=g(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var O=d;d=V;try{return U()}finally{d=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var O=d;d=U;try{return V()}finally{d=O}},e.unstable_scheduleCallback=function(U,V,O){var z=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?z+O:z):O=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=O+W,U={id:c++,callback:V,priorityLevel:U,startTime:O,expirationTime:W,sortIndex:-1},O>z?(U.sortIndex=O,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,O-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var V=d;return function(){var O=d;d=V;try{return U.apply(this,arguments)}finally{d=O}}}})(Xye);Kye.exports=Xye;var m9e=Kye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g9e=I,Ml=m9e;function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qye=new Set,U2={};function hb(e,t){tE(e,t),tE(e+"Capture",t)}function tE(e,t){for(U2[e]=t,e=0;e<t.length;e++)Qye.add(t[e])}var pm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VB=Object.prototype.hasOwnProperty,y9e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hie={},qie={};function v9e(e){return VB.call(qie,e)?!0:VB.call(Hie,e)?!1:y9e.test(e)?qie[e]=!0:(Hie[e]=!0,!1)}function b9e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _9e(e,t,n,r){if(t===null||typeof t>"u"||b9e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function uu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new uu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new uu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new uu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new uu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new uu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new uu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new uu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new uu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new uu(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lq=/[\-:]([a-z])/g;function Fq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lq,Fq);Lo[t]=new uu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lq,Fq);Lo[t]=new uu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lq,Fq);Lo[t]=new uu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new uu(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new uu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new uu(e,1,!1,e.toLowerCase(),null,!0,!0)});function jq(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_9e(t,n,i,r)&&(n=null),r||i===null?v9e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Um=g9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,VR=Symbol.for("react.element"),W_=Symbol.for("react.portal"),G_=Symbol.for("react.fragment"),Bq=Symbol.for("react.strict_mode"),HB=Symbol.for("react.profiler"),Jye=Symbol.for("react.provider"),Zye=Symbol.for("react.context"),Uq=Symbol.for("react.forward_ref"),qB=Symbol.for("react.suspense"),WB=Symbol.for("react.suspense_list"),zq=Symbol.for("react.memo"),kg=Symbol.for("react.lazy"),eve=Symbol.for("react.offscreen"),Wie=Symbol.iterator;function VS(e){return e===null||typeof e!="object"?null:(e=Wie&&e[Wie]||e["@@iterator"],typeof e=="function"?e:null)}var Li=Object.assign,Y5;function VT(e){if(Y5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Y5=t&&t[1]||""}return`
`+Y5+e}var K5=!1;function X5(e,t){if(!e||K5)return"";K5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{K5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?VT(e):""}function w9e(e){switch(e.tag){case 5:return VT(e.type);case 16:return VT("Lazy");case 13:return VT("Suspense");case 19:return VT("SuspenseList");case 0:case 2:case 15:return e=X5(e.type,!1),e;case 11:return e=X5(e.type.render,!1),e;case 1:return e=X5(e.type,!0),e;default:return""}}function GB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G_:return"Fragment";case W_:return"Portal";case HB:return"Profiler";case Bq:return"StrictMode";case qB:return"Suspense";case WB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zye:return(e.displayName||"Context")+".Consumer";case Jye:return(e._context.displayName||"Context")+".Provider";case Uq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zq:return t=e.displayName||null,t!==null?t:GB(e.type)||"Memo";case kg:t=e._payload,e=e._init;try{return GB(e(t))}catch{}}return null}function E9e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return GB(t);case 8:return t===Bq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function D0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tve(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function x9e(e){var t=tve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function HR(e){e._valueTracker||(e._valueTracker=x9e(e))}function nve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=tve(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function aD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function YB(e,t){var n=t.checked;return Li({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=D0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rve(e,t){t=t.checked,t!=null&&jq(e,"checked",t,!1)}function KB(e,t){rve(e,t);var n=D0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?XB(e,t.type,n):t.hasOwnProperty("defaultValue")&&XB(e,t.type,D0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function XB(e,t,n){(t!=="number"||aD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var HT=Array.isArray;function vw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+D0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function QB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return Li({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(it(92));if(HT(n)){if(1<n.length)throw Error(it(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:D0(n)}}function ive(e,t){var n=D0(t.value),r=D0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sve(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sve(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qR,ove=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qR=qR||document.createElement("div"),qR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function z2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var UC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S9e=["Webkit","ms","Moz","O"];Object.keys(UC).forEach(function(e){S9e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),UC[t]=UC[e]})});function ave(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||UC.hasOwnProperty(e)&&UC[e]?(""+t).trim():t+"px"}function uve(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ave(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var T9e=Li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZB(e,t){if(t){if(T9e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function eU(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tU=null;function Vq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nU=null,bw=null,_w=null;function Qie(e){if(e=$I(e)){if(typeof nU!="function")throw Error(it(280));var t=e.stateNode;t&&(t=GM(t),nU(e.stateNode,e.type,t))}}function lve(e){bw?_w?_w.push(e):_w=[e]:bw=e}function cve(){if(bw){var e=bw,t=_w;if(_w=bw=null,Qie(e),t)for(e=0;e<t.length;e++)Qie(t[e])}}function fve(e,t){return e(t)}function dve(){}var Q5=!1;function hve(e,t,n){if(Q5)return e(t,n);Q5=!0;try{return fve(e,t,n)}finally{Q5=!1,(bw!==null||_w!==null)&&(dve(),cve())}}function V2(e,t){var n=e.stateNode;if(n===null)return null;var r=GM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(it(231,t,typeof n));return n}var rU=!1;if(pm)try{var HS={};Object.defineProperty(HS,"passive",{get:function(){rU=!0}}),window.addEventListener("test",HS,HS),window.removeEventListener("test",HS,HS)}catch{rU=!1}function C9e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var zC=!1,uD=null,lD=!1,iU=null,A9e={onError:function(e){zC=!0,uD=e}};function I9e(e,t,n,r,i,s,o,a,u){zC=!1,uD=null,C9e.apply(A9e,arguments)}function k9e(e,t,n,r,i,s,o,a,u){if(I9e.apply(this,arguments),zC){if(zC){var l=uD;zC=!1,uD=null}else throw Error(it(198));lD||(lD=!0,iU=l)}}function pb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pve(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jie(e){if(pb(e)!==e)throw Error(it(188))}function R9e(e){var t=e.alternate;if(!t){if(t=pb(e),t===null)throw Error(it(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jie(i),e;if(s===r)return Jie(i),t;s=s.sibling}throw Error(it(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(it(189))}}if(n.alternate!==r)throw Error(it(190))}if(n.tag!==3)throw Error(it(188));return n.stateNode.current===n?e:t}function mve(e){return e=R9e(e),e!==null?gve(e):null}function gve(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gve(e);if(t!==null)return t;e=e.sibling}return null}var yve=Ml.unstable_scheduleCallback,Zie=Ml.unstable_cancelCallback,N9e=Ml.unstable_shouldYield,P9e=Ml.unstable_requestPaint,ls=Ml.unstable_now,O9e=Ml.unstable_getCurrentPriorityLevel,Hq=Ml.unstable_ImmediatePriority,vve=Ml.unstable_UserBlockingPriority,cD=Ml.unstable_NormalPriority,D9e=Ml.unstable_LowPriority,bve=Ml.unstable_IdlePriority,VM=null,fh=null;function $9e(e){if(fh&&typeof fh.onCommitFiberRoot=="function")try{fh.onCommitFiberRoot(VM,e,void 0,(e.current.flags&128)===128)}catch{}}var Bf=Math.clz32?Math.clz32:F9e,M9e=Math.log,L9e=Math.LN2;function F9e(e){return e>>>=0,e===0?32:31-(M9e(e)/L9e|0)|0}var WR=64,GR=4194304;function qT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qT(a):(s&=o,s!==0&&(r=qT(s)))}else o=n&~i,o!==0?r=qT(o):s!==0&&(r=qT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Bf(t),i=1<<n,r|=e[n],t&=~i;return r}function j9e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B9e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Bf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=j9e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function sU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _ve(){var e=WR;return WR<<=1,!(WR&4194240)&&(WR=64),e}function J5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function OI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bf(t),e[t]=n}function U9e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Bf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function qq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Bf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Mr=0;function wve(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Eve,Wq,xve,Sve,Tve,oU=!1,YR=[],c0=null,f0=null,d0=null,H2=new Map,q2=new Map,Fg=[],z9e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ese(e,t){switch(e){case"focusin":case"focusout":c0=null;break;case"dragenter":case"dragleave":f0=null;break;case"mouseover":case"mouseout":d0=null;break;case"pointerover":case"pointerout":H2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":q2.delete(t.pointerId)}}function qS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=$I(t),t!==null&&Wq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function V9e(e,t,n,r,i){switch(t){case"focusin":return c0=qS(c0,e,t,n,r,i),!0;case"dragenter":return f0=qS(f0,e,t,n,r,i),!0;case"mouseover":return d0=qS(d0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return H2.set(s,qS(H2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,q2.set(s,qS(q2.get(s)||null,e,t,n,r,i)),!0}return!1}function Cve(e){var t=qv(e.target);if(t!==null){var n=pb(t);if(n!==null){if(t=n.tag,t===13){if(t=pve(n),t!==null){e.blockedOn=t,Tve(e.priority,function(){xve(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=aU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);tU=r,n.target.dispatchEvent(r),tU=null}else return t=$I(n),t!==null&&Wq(t),e.blockedOn=n,!1;t.shift()}return!0}function tse(e,t,n){jP(e)&&n.delete(t)}function H9e(){oU=!1,c0!==null&&jP(c0)&&(c0=null),f0!==null&&jP(f0)&&(f0=null),d0!==null&&jP(d0)&&(d0=null),H2.forEach(tse),q2.forEach(tse)}function WS(e,t){e.blockedOn===t&&(e.blockedOn=null,oU||(oU=!0,Ml.unstable_scheduleCallback(Ml.unstable_NormalPriority,H9e)))}function W2(e){function t(i){return WS(i,e)}if(0<YR.length){WS(YR[0],e);for(var n=1;n<YR.length;n++){var r=YR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(c0!==null&&WS(c0,e),f0!==null&&WS(f0,e),d0!==null&&WS(d0,e),H2.forEach(t),q2.forEach(t),n=0;n<Fg.length;n++)r=Fg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fg.length&&(n=Fg[0],n.blockedOn===null);)Cve(n),n.blockedOn===null&&Fg.shift()}var ww=Um.ReactCurrentBatchConfig,dD=!0;function q9e(e,t,n,r){var i=Mr,s=ww.transition;ww.transition=null;try{Mr=1,Gq(e,t,n,r)}finally{Mr=i,ww.transition=s}}function W9e(e,t,n,r){var i=Mr,s=ww.transition;ww.transition=null;try{Mr=4,Gq(e,t,n,r)}finally{Mr=i,ww.transition=s}}function Gq(e,t,n,r){if(dD){var i=aU(e,t,n,r);if(i===null)u8(e,t,r,hD,n),ese(e,r);else if(V9e(i,e,t,n,r))r.stopPropagation();else if(ese(e,r),t&4&&-1<z9e.indexOf(e)){for(;i!==null;){var s=$I(i);if(s!==null&&Eve(s),s=aU(e,t,n,r),s===null&&u8(e,t,r,hD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else u8(e,t,r,null,n)}}var hD=null;function aU(e,t,n,r){if(hD=null,e=Vq(r),e=qv(e),e!==null)if(t=pb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=pve(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hD=e,null}function Ave(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O9e()){case Hq:return 1;case vve:return 4;case cD:case D9e:return 16;case bve:return 536870912;default:return 16}default:return 16}}var Kg=null,Yq=null,BP=null;function Ive(){if(BP)return BP;var e,t=Yq,n=t.length,r,i="value"in Kg?Kg.value:Kg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return BP=i.slice(e,1<r?1-r:void 0)}function UP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function KR(){return!0}function nse(){return!1}function Jl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?KR:nse,this.isPropagationStopped=nse,this}return Li(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=KR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=KR)},persist:function(){},isPersistent:KR}),t}var Ex={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kq=Jl(Ex),DI=Li({},Ex,{view:0,detail:0}),G9e=Jl(DI),Z5,e8,GS,HM=Li({},DI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==GS&&(GS&&e.type==="mousemove"?(Z5=e.screenX-GS.screenX,e8=e.screenY-GS.screenY):e8=Z5=0,GS=e),Z5)},movementY:function(e){return"movementY"in e?e.movementY:e8}}),rse=Jl(HM),Y9e=Li({},HM,{dataTransfer:0}),K9e=Jl(Y9e),X9e=Li({},DI,{relatedTarget:0}),t8=Jl(X9e),Q9e=Li({},Ex,{animationName:0,elapsedTime:0,pseudoElement:0}),J9e=Jl(Q9e),Z9e=Li({},Ex,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eBe=Jl(Z9e),tBe=Li({},Ex,{data:0}),ise=Jl(tBe),nBe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rBe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iBe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sBe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iBe[e])?!!t[e]:!1}function Xq(){return sBe}var oBe=Li({},DI,{key:function(e){if(e.key){var t=nBe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=UP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rBe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xq,charCode:function(e){return e.type==="keypress"?UP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?UP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aBe=Jl(oBe),uBe=Li({},HM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sse=Jl(uBe),lBe=Li({},DI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xq}),cBe=Jl(lBe),fBe=Li({},Ex,{propertyName:0,elapsedTime:0,pseudoElement:0}),dBe=Jl(fBe),hBe=Li({},HM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pBe=Jl(hBe),mBe=[9,13,27,32],Qq=pm&&"CompositionEvent"in window,VC=null;pm&&"documentMode"in document&&(VC=document.documentMode);var gBe=pm&&"TextEvent"in window&&!VC,kve=pm&&(!Qq||VC&&8<VC&&11>=VC),ose=" ",ase=!1;function Rve(e,t){switch(e){case"keyup":return mBe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nve(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Y_=!1;function yBe(e,t){switch(e){case"compositionend":return Nve(t);case"keypress":return t.which!==32?null:(ase=!0,ose);case"textInput":return e=t.data,e===ose&&ase?null:e;default:return null}}function vBe(e,t){if(Y_)return e==="compositionend"||!Qq&&Rve(e,t)?(e=Ive(),BP=Yq=Kg=null,Y_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kve&&t.locale!=="ko"?null:t.data;default:return null}}var bBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function use(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bBe[e.type]:t==="textarea"}function Pve(e,t,n,r){lve(r),t=pD(t,"onChange"),0<t.length&&(n=new Kq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var HC=null,G2=null;function _Be(e){Vve(e,0)}function qM(e){var t=Q_(e);if(nve(t))return e}function wBe(e,t){if(e==="change")return t}var Ove=!1;if(pm){var n8;if(pm){var r8="oninput"in document;if(!r8){var lse=document.createElement("div");lse.setAttribute("oninput","return;"),r8=typeof lse.oninput=="function"}n8=r8}else n8=!1;Ove=n8&&(!document.documentMode||9<document.documentMode)}function cse(){HC&&(HC.detachEvent("onpropertychange",Dve),G2=HC=null)}function Dve(e){if(e.propertyName==="value"&&qM(G2)){var t=[];Pve(t,G2,e,Vq(e)),hve(_Be,t)}}function EBe(e,t,n){e==="focusin"?(cse(),HC=t,G2=n,HC.attachEvent("onpropertychange",Dve)):e==="focusout"&&cse()}function xBe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qM(G2)}function SBe(e,t){if(e==="click")return qM(t)}function TBe(e,t){if(e==="input"||e==="change")return qM(t)}function CBe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qf=typeof Object.is=="function"?Object.is:CBe;function Y2(e,t){if(Qf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!VB.call(t,i)||!Qf(e[i],t[i]))return!1}return!0}function fse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dse(e,t){var n=fse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fse(n)}}function $ve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$ve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mve(){for(var e=window,t=aD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=aD(e.document)}return t}function Jq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ABe(e){var t=Mve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$ve(n.ownerDocument.documentElement,n)){if(r!==null&&Jq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dse(n,s);var o=dse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var IBe=pm&&"documentMode"in document&&11>=document.documentMode,K_=null,uU=null,qC=null,lU=!1;function hse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lU||K_==null||K_!==aD(r)||(r=K_,"selectionStart"in r&&Jq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qC&&Y2(qC,r)||(qC=r,r=pD(uU,"onSelect"),0<r.length&&(t=new Kq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=K_)))}function XR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var X_={animationend:XR("Animation","AnimationEnd"),animationiteration:XR("Animation","AnimationIteration"),animationstart:XR("Animation","AnimationStart"),transitionend:XR("Transition","TransitionEnd")},i8={},Lve={};pm&&(Lve=document.createElement("div").style,"AnimationEvent"in window||(delete X_.animationend.animation,delete X_.animationiteration.animation,delete X_.animationstart.animation),"TransitionEvent"in window||delete X_.transitionend.transition);function WM(e){if(i8[e])return i8[e];if(!X_[e])return e;var t=X_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lve)return i8[e]=t[n];return e}var Fve=WM("animationend"),jve=WM("animationiteration"),Bve=WM("animationstart"),Uve=WM("transitionend"),zve=new Map,pse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function by(e,t){zve.set(e,t),hb(t,[e])}for(var s8=0;s8<pse.length;s8++){var o8=pse[s8],kBe=o8.toLowerCase(),RBe=o8[0].toUpperCase()+o8.slice(1);by(kBe,"on"+RBe)}by(Fve,"onAnimationEnd");by(jve,"onAnimationIteration");by(Bve,"onAnimationStart");by("dblclick","onDoubleClick");by("focusin","onFocus");by("focusout","onBlur");by(Uve,"onTransitionEnd");tE("onMouseEnter",["mouseout","mouseover"]);tE("onMouseLeave",["mouseout","mouseover"]);tE("onPointerEnter",["pointerout","pointerover"]);tE("onPointerLeave",["pointerout","pointerover"]);hb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hb("onBeforeInput",["compositionend","keypress","textInput","paste"]);hb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var WT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(WT));function mse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,k9e(r,t,void 0,e),e.currentTarget=null}function Vve(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;mse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;mse(i,a,l),s=u}}}if(lD)throw e=iU,lD=!1,iU=null,e}function ci(e,t){var n=t[pU];n===void 0&&(n=t[pU]=new Set);var r=e+"__bubble";n.has(r)||(Hve(t,e,2,!1),n.add(r))}function a8(e,t,n){var r=0;t&&(r|=4),Hve(n,e,r,t)}var QR="_reactListening"+Math.random().toString(36).slice(2);function K2(e){if(!e[QR]){e[QR]=!0,Qye.forEach(function(n){n!=="selectionchange"&&(NBe.has(n)||a8(n,!1,e),a8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[QR]||(t[QR]=!0,a8("selectionchange",!1,t))}}function Hve(e,t,n,r){switch(Ave(t)){case 1:var i=q9e;break;case 4:i=W9e;break;default:i=Gq}n=i.bind(null,t,n,e),i=void 0,!rU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function u8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=qv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hve(function(){var l=s,c=Vq(n),f=[];e:{var d=zve.get(e);if(d!==void 0){var h=Kq,p=e;switch(e){case"keypress":if(UP(n)===0)break e;case"keydown":case"keyup":h=aBe;break;case"focusin":p="focus",h=t8;break;case"focusout":p="blur",h=t8;break;case"beforeblur":case"afterblur":h=t8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=rse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=K9e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=cBe;break;case Fve:case jve:case Bve:h=J9e;break;case Uve:h=dBe;break;case"scroll":h=G9e;break;case"wheel":h=pBe;break;case"copy":case"cut":case"paste":h=eBe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=sse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=V2(v,y),w!=null&&m.push(X2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==tU&&(p=n.relatedTarget||n.fromElement)&&(qv(p)||p[mm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?qv(p):null,p!==null&&(g=pb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=rse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=sse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Q_(h),b=p==null?d:Q_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,qv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Zb(b))v++;for(b=0,w=y;w;w=Zb(w))b++;for(;0<v-b;)m=Zb(m),v--;for(;0<b-v;)y=Zb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Zb(m),y=Zb(y)}m=null}else m=null;h!==null&&gse(f,d,h,m,!1),p!==null&&g!==null&&gse(f,g,p,m,!0)}}e:{if(d=l?Q_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=wBe;else if(use(d))if(Ove)E=TBe;else{E=xBe;var S=EBe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=SBe);if(E&&(E=E(e,l))){Pve(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&XB(d,"number",d.value)}switch(S=l?Q_(l):window,e){case"focusin":(use(S)||S.contentEditable==="true")&&(K_=S,uU=l,qC=null);break;case"focusout":qC=uU=K_=null;break;case"mousedown":lU=!0;break;case"contextmenu":case"mouseup":case"dragend":lU=!1,hse(f,n,c);break;case"selectionchange":if(IBe)break;case"keydown":case"keyup":hse(f,n,c)}var x;if(Qq)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Y_?Rve(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(kve&&n.locale!=="ko"&&(Y_||C!=="onCompositionStart"?C==="onCompositionEnd"&&Y_&&(x=Ive()):(Kg=c,Yq="value"in Kg?Kg.value:Kg.textContent,Y_=!0)),S=pD(l,C),0<S.length&&(C=new ise(C,e,null,n,c),f.push({event:C,listeners:S}),x?C.data=x:(x=Nve(n),x!==null&&(C.data=x)))),(x=gBe?yBe(e,n):vBe(e,n))&&(l=pD(l,"onBeforeInput"),0<l.length&&(c=new ise("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}Vve(f,t)})}function X2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=V2(e,n),s!=null&&r.unshift(X2(e,s,i)),s=V2(e,t),s!=null&&r.push(X2(e,s,i))),e=e.return}return r}function Zb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=V2(n,s),u!=null&&o.unshift(X2(n,u,a))):i||(u=V2(n,s),u!=null&&o.push(X2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var PBe=/\r\n?/g,OBe=/\u0000|\uFFFD/g;function yse(e){return(typeof e=="string"?e:""+e).replace(PBe,`
`).replace(OBe,"")}function JR(e,t,n){if(t=yse(t),yse(e)!==t&&n)throw Error(it(425))}function mD(){}var cU=null,fU=null;function dU(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hU=typeof setTimeout=="function"?setTimeout:void 0,DBe=typeof clearTimeout=="function"?clearTimeout:void 0,vse=typeof Promise=="function"?Promise:void 0,$Be=typeof queueMicrotask=="function"?queueMicrotask:typeof vse<"u"?function(e){return vse.resolve(null).then(e).catch(MBe)}:hU;function MBe(e){setTimeout(function(){throw e})}function l8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),W2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);W2(t)}function h0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xx=Math.random().toString(36).slice(2),Wd="__reactFiber$"+xx,Q2="__reactProps$"+xx,mm="__reactContainer$"+xx,pU="__reactEvents$"+xx,LBe="__reactListeners$"+xx,FBe="__reactHandles$"+xx;function qv(e){var t=e[Wd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mm]||n[Wd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bse(e);e!==null;){if(n=e[Wd])return n;e=bse(e)}return t}e=n,n=e.parentNode}return null}function $I(e){return e=e[Wd]||e[mm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Q_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function GM(e){return e[Q2]||null}var mU=[],J_=-1;function _y(e){return{current:e}}function gi(e){0>J_||(e.current=mU[J_],mU[J_]=null,J_--)}function ni(e,t){J_++,mU[J_]=e.current,e.current=t}var $0={},Ea=_y($0),Bu=_y(!1),x1=$0;function nE(e,t){var n=e.type.contextTypes;if(!n)return $0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Uu(e){return e=e.childContextTypes,e!=null}function gD(){gi(Bu),gi(Ea)}function _se(e,t,n){if(Ea.current!==$0)throw Error(it(168));ni(Ea,t),ni(Bu,n)}function qve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(it(108,E9e(e)||"Unknown",i));return Li({},n,r)}function yD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$0,x1=Ea.current,ni(Ea,e),ni(Bu,Bu.current),!0}function wse(e,t,n){var r=e.stateNode;if(!r)throw Error(it(169));n?(e=qve(e,t,x1),r.__reactInternalMemoizedMergedChildContext=e,gi(Bu),gi(Ea),ni(Ea,e)):gi(Bu),ni(Bu,n)}var Pp=null,YM=!1,c8=!1;function Wve(e){Pp===null?Pp=[e]:Pp.push(e)}function jBe(e){YM=!0,Wve(e)}function wy(){if(!c8&&Pp!==null){c8=!0;var e=0,t=Mr;try{var n=Pp;for(Mr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Pp=null,YM=!1}catch(i){throw Pp!==null&&(Pp=Pp.slice(e+1)),yve(Hq,wy),i}finally{Mr=t,c8=!1}}return null}var Z_=[],ew=0,vD=null,bD=0,fc=[],dc=0,S1=null,zp=1,Vp="";function yv(e,t){Z_[ew++]=bD,Z_[ew++]=vD,vD=e,bD=t}function Gve(e,t,n){fc[dc++]=zp,fc[dc++]=Vp,fc[dc++]=S1,S1=e;var r=zp;e=Vp;var i=32-Bf(r)-1;r&=~(1<<i),n+=1;var s=32-Bf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zp=1<<32-Bf(t)+i|n<<i|r,Vp=s+e}else zp=1<<s|n<<i|r,Vp=e}function Zq(e){e.return!==null&&(yv(e,1),Gve(e,1,0))}function eW(e){for(;e===vD;)vD=Z_[--ew],Z_[ew]=null,bD=Z_[--ew],Z_[ew]=null;for(;e===S1;)S1=fc[--dc],fc[dc]=null,Vp=fc[--dc],fc[dc]=null,zp=fc[--dc],fc[dc]=null}var Pl=null,Sl=null,wi=!1,Tf=null;function Yve(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ese(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pl=e,Sl=h0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pl=e,Sl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=S1!==null?{id:zp,overflow:Vp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_c(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pl=e,Sl=null,!0):!1;default:return!1}}function gU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yU(e){if(wi){var t=Sl;if(t){var n=t;if(!Ese(e,t)){if(gU(e))throw Error(it(418));t=h0(n.nextSibling);var r=Pl;t&&Ese(e,t)?Yve(r,n):(e.flags=e.flags&-4097|2,wi=!1,Pl=e)}}else{if(gU(e))throw Error(it(418));e.flags=e.flags&-4097|2,wi=!1,Pl=e}}}function xse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pl=e}function ZR(e){if(e!==Pl)return!1;if(!wi)return xse(e),wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dU(e.type,e.memoizedProps)),t&&(t=Sl)){if(gU(e))throw Kve(),Error(it(418));for(;t;)Yve(e,t),t=h0(t.nextSibling)}if(xse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Sl=h0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Sl=null}}else Sl=Pl?h0(e.stateNode.nextSibling):null;return!0}function Kve(){for(var e=Sl;e;)e=h0(e.nextSibling)}function rE(){Sl=Pl=null,wi=!1}function tW(e){Tf===null?Tf=[e]:Tf.push(e)}var BBe=Um.ReactCurrentBatchConfig;function YS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(it(309));var r=n.stateNode}if(!r)throw Error(it(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(it(284));if(!n._owner)throw Error(it(290,e))}return e}function eN(e,t){throw e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sse(e){var t=e._init;return t(e._payload)}function Xve(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=y0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=y8(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===G_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kg&&Sse(E)===v.type)?(w=i(v,b.props),w.ref=YS(y,v,b),w.return=y,w):(w=YP(b.type,b.key,b.props,null,y.mode,w),w.ref=YS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=v8(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=a1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=y8(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case VR:return b=YP(v.type,v.key,v.props,null,y.mode,b),b.ref=YS(y,null,v),b.return=y,b;case W_:return v=v8(v,y.mode,b),v.return=y,v;case kg:var w=v._init;return f(y,w(v._payload),b)}if(HT(v)||VS(v))return v=a1(v,y.mode,b,null),v.return=y,v;eN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case VR:return b.key===E?u(y,v,b,w):null;case W_:return b.key===E?l(y,v,b,w):null;case kg:return E=b._init,d(y,v,E(b._payload),w)}if(HT(b)||VS(b))return E!==null?null:c(y,v,b,w,null);eN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case VR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case W_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case kg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(HT(w)||VS(w))return y=y.get(b)||null,c(v,y,w,E,null);eN(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,x=v,C=v=0,A=null;x!==null&&C<b.length;C++){x.index>C?(A=x,x=null):A=x.sibling;var R=d(y,x,b[C],w);if(R===null){x===null&&(x=A);break}e&&x&&R.alternate===null&&t(y,x),v=s(R,v,C),S===null?E=R:S.sibling=R,S=R,x=A}if(C===b.length)return n(y,x),wi&&yv(y,C),E;if(x===null){for(;C<b.length;C++)x=f(y,b[C],w),x!==null&&(v=s(x,v,C),S===null?E=x:S.sibling=x,S=x);return wi&&yv(y,C),E}for(x=r(y,x);C<b.length;C++)A=h(x,y,C,b[C],w),A!==null&&(e&&A.alternate!==null&&x.delete(A.key===null?C:A.key),v=s(A,v,C),S===null?E=A:S.sibling=A,S=A);return e&&x.forEach(function(P){return t(y,P)}),wi&&yv(y,C),E}function m(y,v,b,w){var E=VS(b);if(typeof E!="function")throw Error(it(150));if(b=E.call(b),b==null)throw Error(it(151));for(var S=E=null,x=v,C=v=0,A=null,R=b.next();x!==null&&!R.done;C++,R=b.next()){x.index>C?(A=x,x=null):A=x.sibling;var P=d(y,x,R.value,w);if(P===null){x===null&&(x=A);break}e&&x&&P.alternate===null&&t(y,x),v=s(P,v,C),S===null?E=P:S.sibling=P,S=P,x=A}if(R.done)return n(y,x),wi&&yv(y,C),E;if(x===null){for(;!R.done;C++,R=b.next())R=f(y,R.value,w),R!==null&&(v=s(R,v,C),S===null?E=R:S.sibling=R,S=R);return wi&&yv(y,C),E}for(x=r(y,x);!R.done;C++,R=b.next())R=h(x,y,C,R.value,w),R!==null&&(e&&R.alternate!==null&&x.delete(R.key===null?C:R.key),v=s(R,v,C),S===null?E=R:S.sibling=R,S=R);return e&&x.forEach(function($){return t(y,$)}),wi&&yv(y,C),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===G_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case VR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===G_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kg&&Sse(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=YS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===G_?(v=a1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=YP(b.type,b.key,b.props,null,y.mode,w),w.ref=YS(y,v,b),w.return=y,y=w)}return o(y);case W_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=v8(b,y.mode,w),v.return=y,y=v}return o(y);case kg:return S=b._init,g(y,v,S(b._payload),w)}if(HT(b))return p(y,v,b,w);if(VS(b))return m(y,v,b,w);eN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=y8(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var iE=Xve(!0),Qve=Xve(!1),_D=_y(null),wD=null,tw=null,nW=null;function rW(){nW=tw=wD=null}function iW(e){var t=_D.current;gi(_D),e._currentValue=t}function vU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ew(e,t){wD=e,nW=tw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Du=!0),e.firstContext=null)}function Dc(e){var t=e._currentValue;if(nW!==e)if(e={context:e,memoizedValue:t,next:null},tw===null){if(wD===null)throw Error(it(308));tw=e,wD.dependencies={lanes:0,firstContext:e}}else tw=tw.next=e;return t}var Wv=null;function sW(e){Wv===null?Wv=[e]:Wv.push(e)}function Jve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,sW(t)):(n.next=i.next,i.next=n),t.interleaved=n,gm(e,r)}function gm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rg=!1;function oW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function em(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function p0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,lr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,gm(e,n)}return i=r.interleaved,i===null?(t.next=t,sW(r)):(t.next=i.next,i.next=t),r.interleaved=t,gm(e,n)}function zP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qq(e,n)}}function Tse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ED(e,t,n,r){var i=e.updateQueue;Rg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Li({},f,d);break e;case 2:Rg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);C1|=o,e.lanes=o,e.memoizedState=f}}function Cse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(it(191,i));i.call(r)}}}var MI={},dh=_y(MI),J2=_y(MI),Z2=_y(MI);function Gv(e){if(e===MI)throw Error(it(174));return e}function aW(e,t){switch(ni(Z2,t),ni(J2,e),ni(dh,MI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:JB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=JB(t,e)}gi(dh),ni(dh,t)}function sE(){gi(dh),gi(J2),gi(Z2)}function e1e(e){Gv(Z2.current);var t=Gv(dh.current),n=JB(t,e.type);t!==n&&(ni(J2,e),ni(dh,n))}function uW(e){J2.current===e&&(gi(dh),gi(J2))}var Ni=_y(0);function xD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var f8=[];function lW(){for(var e=0;e<f8.length;e++)f8[e]._workInProgressVersionPrimary=null;f8.length=0}var VP=Um.ReactCurrentDispatcher,d8=Um.ReactCurrentBatchConfig,T1=0,$i=null,ks=null,Zs=null,SD=!1,WC=!1,eA=0,UBe=0;function Xo(){throw Error(it(321))}function cW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qf(e[n],t[n]))return!1;return!0}function fW(e,t,n,r,i,s){if(T1=s,$i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,VP.current=e===null||e.memoizedState===null?qBe:WBe,e=n(r,i),WC){s=0;do{if(WC=!1,eA=0,25<=s)throw Error(it(301));s+=1,Zs=ks=null,t.updateQueue=null,VP.current=GBe,e=n(r,i)}while(WC)}if(VP.current=TD,t=ks!==null&&ks.next!==null,T1=0,Zs=ks=$i=null,SD=!1,t)throw Error(it(300));return e}function dW(){var e=eA!==0;return eA=0,e}function Md(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zs===null?$i.memoizedState=Zs=e:Zs=Zs.next=e,Zs}function $c(){if(ks===null){var e=$i.alternate;e=e!==null?e.memoizedState:null}else e=ks.next;var t=Zs===null?$i.memoizedState:Zs.next;if(t!==null)Zs=t,ks=e;else{if(e===null)throw Error(it(310));ks=e,e={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},Zs===null?$i.memoizedState=Zs=e:Zs=Zs.next=e}return Zs}function tA(e,t){return typeof t=="function"?t(e):t}function h8(e){var t=$c(),n=t.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=e;var r=ks,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((T1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,$i.lanes|=c,C1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Qf(r,t.memoizedState)||(Du=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,$i.lanes|=s,C1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function p8(e){var t=$c(),n=t.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Qf(s,t.memoizedState)||(Du=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function t1e(){}function n1e(e,t){var n=$i,r=$c(),i=t(),s=!Qf(r.memoizedState,i);if(s&&(r.memoizedState=i,Du=!0),r=r.queue,hW(s1e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Zs!==null&&Zs.memoizedState.tag&1){if(n.flags|=2048,nA(9,i1e.bind(null,n,r,i,t),void 0,null),uo===null)throw Error(it(349));T1&30||r1e(n,t,i)}return i}function r1e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$i.updateQueue,t===null?(t={lastEffect:null,stores:null},$i.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function i1e(e,t,n,r){t.value=n,t.getSnapshot=r,o1e(t)&&a1e(e)}function s1e(e,t,n){return n(function(){o1e(t)&&a1e(e)})}function o1e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qf(e,n)}catch{return!0}}function a1e(e){var t=gm(e,1);t!==null&&Uf(t,e,1,-1)}function Ase(e){var t=Md();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tA,lastRenderedState:e},t.queue=e,e=e.dispatch=HBe.bind(null,$i,e),[t.memoizedState,e]}function nA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$i.updateQueue,t===null?(t={lastEffect:null,stores:null},$i.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function u1e(){return $c().memoizedState}function HP(e,t,n,r){var i=Md();$i.flags|=e,i.memoizedState=nA(1|t,n,void 0,r===void 0?null:r)}function KM(e,t,n,r){var i=$c();r=r===void 0?null:r;var s=void 0;if(ks!==null){var o=ks.memoizedState;if(s=o.destroy,r!==null&&cW(r,o.deps)){i.memoizedState=nA(t,n,s,r);return}}$i.flags|=e,i.memoizedState=nA(1|t,n,s,r)}function Ise(e,t){return HP(8390656,8,e,t)}function hW(e,t){return KM(2048,8,e,t)}function l1e(e,t){return KM(4,2,e,t)}function c1e(e,t){return KM(4,4,e,t)}function f1e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function d1e(e,t,n){return n=n!=null?n.concat([e]):null,KM(4,4,f1e.bind(null,t,e),n)}function pW(){}function h1e(e,t){var n=$c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function p1e(e,t){var n=$c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function m1e(e,t,n){return T1&21?(Qf(n,t)||(n=_ve(),$i.lanes|=n,C1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Du=!0),e.memoizedState=n)}function zBe(e,t){var n=Mr;Mr=n!==0&&4>n?n:4,e(!0);var r=d8.transition;d8.transition={};try{e(!1),t()}finally{Mr=n,d8.transition=r}}function g1e(){return $c().memoizedState}function VBe(e,t,n){var r=g0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y1e(e))v1e(t,n);else if(n=Jve(e,t,n,r),n!==null){var i=Ya();Uf(n,e,r,i),b1e(n,t,r)}}function HBe(e,t,n){var r=g0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y1e(e))v1e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qf(a,o)){var u=t.interleaved;u===null?(i.next=i,sW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Jve(e,t,i,r),n!==null&&(i=Ya(),Uf(n,e,r,i),b1e(n,t,r))}}function y1e(e){var t=e.alternate;return e===$i||t!==null&&t===$i}function v1e(e,t){WC=SD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function b1e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qq(e,n)}}var TD={readContext:Dc,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useInsertionEffect:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useDeferredValue:Xo,useTransition:Xo,useMutableSource:Xo,useSyncExternalStore:Xo,useId:Xo,unstable_isNewReconciler:!1},qBe={readContext:Dc,useCallback:function(e,t){return Md().memoizedState=[e,t===void 0?null:t],e},useContext:Dc,useEffect:Ise,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,HP(4194308,4,f1e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return HP(4194308,4,e,t)},useInsertionEffect:function(e,t){return HP(4,2,e,t)},useMemo:function(e,t){var n=Md();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Md();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=VBe.bind(null,$i,e),[r.memoizedState,e]},useRef:function(e){var t=Md();return e={current:e},t.memoizedState=e},useState:Ase,useDebugValue:pW,useDeferredValue:function(e){return Md().memoizedState=e},useTransition:function(){var e=Ase(!1),t=e[0];return e=zBe.bind(null,e[1]),Md().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$i,i=Md();if(wi){if(n===void 0)throw Error(it(407));n=n()}else{if(n=t(),uo===null)throw Error(it(349));T1&30||r1e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ise(s1e.bind(null,r,s,e),[e]),r.flags|=2048,nA(9,i1e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Md(),t=uo.identifierPrefix;if(wi){var n=Vp,r=zp;n=(r&~(1<<32-Bf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UBe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WBe={readContext:Dc,useCallback:h1e,useContext:Dc,useEffect:hW,useImperativeHandle:d1e,useInsertionEffect:l1e,useLayoutEffect:c1e,useMemo:p1e,useReducer:h8,useRef:u1e,useState:function(){return h8(tA)},useDebugValue:pW,useDeferredValue:function(e){var t=$c();return m1e(t,ks.memoizedState,e)},useTransition:function(){var e=h8(tA)[0],t=$c().memoizedState;return[e,t]},useMutableSource:t1e,useSyncExternalStore:n1e,useId:g1e,unstable_isNewReconciler:!1},GBe={readContext:Dc,useCallback:h1e,useContext:Dc,useEffect:hW,useImperativeHandle:d1e,useInsertionEffect:l1e,useLayoutEffect:c1e,useMemo:p1e,useReducer:p8,useRef:u1e,useState:function(){return p8(tA)},useDebugValue:pW,useDeferredValue:function(e){var t=$c();return ks===null?t.memoizedState=e:m1e(t,ks.memoizedState,e)},useTransition:function(){var e=p8(tA)[0],t=$c().memoizedState;return[e,t]},useMutableSource:t1e,useSyncExternalStore:n1e,useId:g1e,unstable_isNewReconciler:!1};function bf(e,t){if(e&&e.defaultProps){t=Li({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Li({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var XM={isMounted:function(e){return(e=e._reactInternals)?pb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ya(),i=g0(e),s=em(r,i);s.payload=t,n!=null&&(s.callback=n),t=p0(e,s,i),t!==null&&(Uf(t,e,i,r),zP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ya(),i=g0(e),s=em(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=p0(e,s,i),t!==null&&(Uf(t,e,i,r),zP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ya(),r=g0(e),i=em(n,r);i.tag=2,t!=null&&(i.callback=t),t=p0(e,i,r),t!==null&&(Uf(t,e,r,n),zP(t,e,r))}};function kse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Y2(n,r)||!Y2(i,s):!0}function _1e(e,t,n){var r=!1,i=$0,s=t.contextType;return typeof s=="object"&&s!==null?s=Dc(s):(i=Uu(t)?x1:Ea.current,r=t.contextTypes,s=(r=r!=null)?nE(e,i):$0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=XM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Rse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&XM.enqueueReplaceState(t,t.state,null)}function _U(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},oW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Dc(s):(s=Uu(t)?x1:Ea.current,i.context=nE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&XM.enqueueReplaceState(i,i.state,null),ED(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function oE(e,t){try{var n="",r=t;do n+=w9e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function m8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YBe=typeof WeakMap=="function"?WeakMap:Map;function w1e(e,t,n){n=em(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){AD||(AD=!0,NU=r),wU(e,t)},n}function E1e(e,t,n){n=em(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){wU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wU(e,t),typeof r!="function"&&(m0===null?m0=new Set([this]):m0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Nse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new YBe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=uUe.bind(null,e,t,n),t.then(e,e))}function Pse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ose(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=em(-1,1),t.tag=2,p0(n,t,1))),n.lanes|=1),e)}var KBe=Um.ReactCurrentOwner,Du=!1;function ja(e,t,n,r){t.child=e===null?Qve(t,null,n,r):iE(t,e.child,n,r)}function Dse(e,t,n,r,i){n=n.render;var s=t.ref;return Ew(t,i),r=fW(e,t,n,r,s,i),n=dW(),e!==null&&!Du?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ym(e,t,i)):(wi&&n&&Zq(t),t.flags|=1,ja(e,t,r,i),t.child)}function $se(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!EW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,x1e(e,t,s,r,i)):(e=YP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Y2,n(o,r)&&e.ref===t.ref)return ym(e,t,i)}return t.flags|=1,e=y0(s,r),e.ref=t.ref,e.return=t,t.child=e}function x1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Y2(s,r)&&e.ref===t.ref)if(Du=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Du=!0);else return t.lanes=e.lanes,ym(e,t,i)}return EU(e,t,n,r,i)}function S1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ni(rw,yl),yl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ni(rw,yl),yl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ni(rw,yl),yl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ni(rw,yl),yl|=r;return ja(e,t,i,n),t.child}function T1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function EU(e,t,n,r,i){var s=Uu(n)?x1:Ea.current;return s=nE(t,s),Ew(t,i),n=fW(e,t,n,r,s,i),r=dW(),e!==null&&!Du?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ym(e,t,i)):(wi&&r&&Zq(t),t.flags|=1,ja(e,t,n,i),t.child)}function Mse(e,t,n,r,i){if(Uu(n)){var s=!0;yD(t)}else s=!1;if(Ew(t,i),t.stateNode===null)qP(e,t),_1e(t,n,r),_U(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Dc(l):(l=Uu(n)?x1:Ea.current,l=nE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Rse(t,o,r,l),Rg=!1;var d=t.memoizedState;o.state=d,ED(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Bu.current||Rg?(typeof c=="function"&&(bU(t,n,c,r),u=t.memoizedState),(a=Rg||kse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Zve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:bf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dc(u):(u=Uu(n)?x1:Ea.current,u=nE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Rse(t,o,r,u),Rg=!1,d=t.memoizedState,o.state=d,ED(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Bu.current||Rg?(typeof h=="function"&&(bU(t,n,h,r),p=t.memoizedState),(l=Rg||kse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xU(e,t,n,r,s,i)}function xU(e,t,n,r,i,s){T1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&wse(t,n,!1),ym(e,t,s);r=t.stateNode,KBe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=iE(t,e.child,null,s),t.child=iE(t,null,a,s)):ja(e,t,a,s),t.memoizedState=r.state,i&&wse(t,n,!0),t.child}function C1e(e){var t=e.stateNode;t.pendingContext?_se(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_se(e,t.context,!1),aW(e,t.containerInfo)}function Lse(e,t,n,r,i){return rE(),tW(i),t.flags|=256,ja(e,t,n,r),t.child}var SU={dehydrated:null,treeContext:null,retryLane:0};function TU(e){return{baseLanes:e,cachePool:null,transitions:null}}function A1e(e,t,n){var r=t.pendingProps,i=Ni.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ni(Ni,i&1),e===null)return yU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ZM(o,r,0,null),e=a1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=TU(n),t.memoizedState=SU,e):mW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XBe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=y0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=y0(a,s):(s=a1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?TU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=SU,r}return s=e.child,e=s.sibling,r=y0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mW(e,t){return t=ZM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tN(e,t,n,r){return r!==null&&tW(r),iE(t,e.child,null,n),e=mW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XBe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=m8(Error(it(422))),tN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ZM({mode:"visible",children:r.children},i,0,null),s=a1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&iE(t,e.child,null,o),t.child.memoizedState=TU(o),t.memoizedState=SU,s);if(!(t.mode&1))return tN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(it(419)),r=m8(s,r,void 0),tN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Du||a){if(r=uo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gm(e,i),Uf(r,e,i,-1))}return wW(),r=m8(Error(it(421))),tN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=lUe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Sl=h0(i.nextSibling),Pl=t,wi=!0,Tf=null,e!==null&&(fc[dc++]=zp,fc[dc++]=Vp,fc[dc++]=S1,zp=e.id,Vp=e.overflow,S1=t),t=mW(t,r.children),t.flags|=4096,t)}function Fse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vU(e.return,t,n)}function g8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function I1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ja(e,t,r.children,n),r=Ni.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fse(e,n,t);else if(e.tag===19)Fse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ni(Ni,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&xD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),g8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&xD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}g8(t,!0,n,null,s);break;case"together":g8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ym(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),C1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,n=y0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=y0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function QBe(e,t,n){switch(t.tag){case 3:C1e(t),rE();break;case 5:e1e(t);break;case 1:Uu(t.type)&&yD(t);break;case 4:aW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ni(_D,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ni(Ni,Ni.current&1),t.flags|=128,null):n&t.child.childLanes?A1e(e,t,n):(ni(Ni,Ni.current&1),e=ym(e,t,n),e!==null?e.sibling:null);ni(Ni,Ni.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return I1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ni(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,S1e(e,t,n)}return ym(e,t,n)}var k1e,CU,R1e,N1e;k1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};CU=function(){};R1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gv(dh.current);var s=null;switch(n){case"input":i=YB(e,i),r=YB(e,r),s=[];break;case"select":i=Li({},i,{value:void 0}),r=Li({},r,{value:void 0}),s=[];break;case"textarea":i=QB(e,i),r=QB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=mD)}ZB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(U2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(U2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ci("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};N1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function KS(e,t){if(!wi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JBe(e,t,n){var r=t.pendingProps;switch(eW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:return Uu(t.type)&&gD(),Qo(t),null;case 3:return r=t.stateNode,sE(),gi(Bu),gi(Ea),lW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ZR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tf!==null&&(DU(Tf),Tf=null))),CU(e,t),Qo(t),null;case 5:uW(t);var i=Gv(Z2.current);if(n=t.type,e!==null&&t.stateNode!=null)R1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(it(166));return Qo(t),null}if(e=Gv(dh.current),ZR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Wd]=t,r[Q2]=s,e=(t.mode&1)!==0,n){case"dialog":ci("cancel",r),ci("close",r);break;case"iframe":case"object":case"embed":ci("load",r);break;case"video":case"audio":for(i=0;i<WT.length;i++)ci(WT[i],r);break;case"source":ci("error",r);break;case"img":case"image":case"link":ci("error",r),ci("load",r);break;case"details":ci("toggle",r);break;case"input":Gie(r,s),ci("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ci("invalid",r);break;case"textarea":Kie(r,s),ci("invalid",r)}ZB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&JR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&JR(r.textContent,a,e),i=["children",""+a]):U2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ci("scroll",r)}switch(n){case"input":HR(r),Yie(r,s,!0);break;case"textarea":HR(r),Xie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sve(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Wd]=t,e[Q2]=r,k1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=eU(n,r),n){case"dialog":ci("cancel",e),ci("close",e),i=r;break;case"iframe":case"object":case"embed":ci("load",e),i=r;break;case"video":case"audio":for(i=0;i<WT.length;i++)ci(WT[i],e);i=r;break;case"source":ci("error",e),i=r;break;case"img":case"image":case"link":ci("error",e),ci("load",e),i=r;break;case"details":ci("toggle",e),i=r;break;case"input":Gie(e,r),i=YB(e,r),ci("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Li({},r,{value:void 0}),ci("invalid",e);break;case"textarea":Kie(e,r),i=QB(e,r),ci("invalid",e);break;default:i=r}ZB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?uve(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ove(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&z2(e,u):typeof u=="number"&&z2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(U2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ci("scroll",e):u!=null&&jq(e,s,u,o))}switch(n){case"input":HR(e),Yie(e,r,!1);break;case"textarea":HR(e),Xie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+D0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?vw(e,!!r.multiple,s,!1):r.defaultValue!=null&&vw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=mD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&t.stateNode!=null)N1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(it(166));if(n=Gv(Z2.current),Gv(dh.current),ZR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wd]=t,(s=r.nodeValue!==n)&&(e=Pl,e!==null))switch(e.tag){case 3:JR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&JR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wd]=t,t.stateNode=r}return Qo(t),null;case 13:if(gi(Ni),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wi&&Sl!==null&&t.mode&1&&!(t.flags&128))Kve(),rE(),t.flags|=98560,s=!1;else if(s=ZR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(it(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(it(317));s[Wd]=t}else rE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qo(t),s=!1}else Tf!==null&&(DU(Tf),Tf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ni.current&1?Ls===0&&(Ls=3):wW())),t.updateQueue!==null&&(t.flags|=4),Qo(t),null);case 4:return sE(),CU(e,t),e===null&&K2(t.stateNode.containerInfo),Qo(t),null;case 10:return iW(t.type._context),Qo(t),null;case 17:return Uu(t.type)&&gD(),Qo(t),null;case 19:if(gi(Ni),s=t.memoizedState,s===null)return Qo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)KS(s,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=xD(e),o!==null){for(t.flags|=128,KS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ni(Ni,Ni.current&1|2),t.child}e=e.sibling}s.tail!==null&&ls()>aE&&(t.flags|=128,r=!0,KS(s,!1),t.lanes=4194304)}else{if(!r)if(e=xD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),KS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return Qo(t),null}else 2*ls()-s.renderingStartTime>aE&&n!==1073741824&&(t.flags|=128,r=!0,KS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ls(),t.sibling=null,n=Ni.current,ni(Ni,r?n&1|2:n&1),t):(Qo(t),null);case 22:case 23:return _W(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yl&1073741824&&(Qo(t),t.subtreeFlags&6&&(t.flags|=8192)):Qo(t),null;case 24:return null;case 25:return null}throw Error(it(156,t.tag))}function ZBe(e,t){switch(eW(t),t.tag){case 1:return Uu(t.type)&&gD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sE(),gi(Bu),gi(Ea),lW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uW(t),null;case 13:if(gi(Ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));rE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(Ni),null;case 4:return sE(),null;case 10:return iW(t.type._context),null;case 22:case 23:return _W(),null;case 24:return null;default:return null}}var nN=!1,ca=!1,eUe=typeof WeakSet=="function"?WeakSet:Set,St=null;function nw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(e,t,r)}else n.current=null}function AU(e,t,n){try{n()}catch(r){Gi(e,t,r)}}var jse=!1;function tUe(e,t){if(cU=dD,e=Mve(),Jq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fU={focusedElem:e,selectionRange:n},dD=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:bf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(w){Gi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return p=jse,jse=!1,p}function GC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&AU(t,n,s)}i=i.next}while(i!==r)}}function QM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function IU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function P1e(e){var t=e.alternate;t!==null&&(e.alternate=null,P1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wd],delete t[Q2],delete t[pU],delete t[LBe],delete t[FBe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O1e(e){return e.tag===5||e.tag===3||e.tag===4}function Bse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mD));else if(r!==4&&(e=e.child,e!==null))for(kU(e,t,n),e=e.sibling;e!==null;)kU(e,t,n),e=e.sibling}function RU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(RU(e,t,n),e=e.sibling;e!==null;)RU(e,t,n),e=e.sibling}var xo=null,wf=!1;function hg(e,t,n){for(n=n.child;n!==null;)D1e(e,t,n),n=n.sibling}function D1e(e,t,n){if(fh&&typeof fh.onCommitFiberUnmount=="function")try{fh.onCommitFiberUnmount(VM,n)}catch{}switch(n.tag){case 5:ca||nw(n,t);case 6:var r=xo,i=wf;xo=null,hg(e,t,n),xo=r,wf=i,xo!==null&&(wf?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(wf?(e=xo,n=n.stateNode,e.nodeType===8?l8(e.parentNode,n):e.nodeType===1&&l8(e,n),W2(e)):l8(xo,n.stateNode));break;case 4:r=xo,i=wf,xo=n.stateNode.containerInfo,wf=!0,hg(e,t,n),xo=r,wf=i;break;case 0:case 11:case 14:case 15:if(!ca&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&AU(n,t,o),i=i.next}while(i!==r)}hg(e,t,n);break;case 1:if(!ca&&(nw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,t,a)}hg(e,t,n);break;case 21:hg(e,t,n);break;case 22:n.mode&1?(ca=(r=ca)||n.memoizedState!==null,hg(e,t,n),ca=r):hg(e,t,n);break;default:hg(e,t,n)}}function Use(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eUe),t.forEach(function(r){var i=cUe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,wf=!1;break e;case 3:xo=a.stateNode.containerInfo,wf=!0;break e;case 4:xo=a.stateNode.containerInfo,wf=!0;break e}a=a.return}if(xo===null)throw Error(it(160));D1e(s,o,i),xo=null,wf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Gi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$1e(t,e),t=t.sibling}function $1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cf(t,e),Ad(e),r&4){try{GC(3,e,e.return),QM(3,e)}catch(m){Gi(e,e.return,m)}try{GC(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:cf(t,e),Ad(e),r&512&&n!==null&&nw(n,n.return);break;case 5:if(cf(t,e),Ad(e),r&512&&n!==null&&nw(n,n.return),e.flags&32){var i=e.stateNode;try{z2(i,"")}catch(m){Gi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rve(i,s),eU(a,o);var l=eU(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?uve(i,f):c==="dangerouslySetInnerHTML"?ove(i,f):c==="children"?z2(i,f):jq(i,c,f,l)}switch(a){case"input":KB(i,s);break;case"textarea":ive(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?vw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?vw(i,!!s.multiple,s.defaultValue,!0):vw(i,!!s.multiple,s.multiple?[]:"",!1))}i[Q2]=s}catch(m){Gi(e,e.return,m)}}break;case 6:if(cf(t,e),Ad(e),r&4){if(e.stateNode===null)throw Error(it(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Gi(e,e.return,m)}}break;case 3:if(cf(t,e),Ad(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{W2(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:cf(t,e),Ad(e);break;case 13:cf(t,e),Ad(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(vW=ls())),r&4&&Use(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ca=(l=ca)||c,cf(t,e),ca=l):cf(t,e),Ad(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(St=e,c=e.child;c!==null;){for(f=St=c;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:GC(4,d,d.return);break;case 1:nw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Gi(r,n,m)}}break;case 5:nw(d,d.return);break;case 22:if(d.memoizedState!==null){Vse(f);continue}}h!==null?(h.return=d,St=h):Vse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=ave("display",o))}catch(m){Gi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cf(t,e),Ad(e),r&4&&Use(e);break;case 21:break;default:cf(t,e),Ad(e)}}function Ad(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(O1e(n)){var r=n;break e}n=n.return}throw Error(it(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(z2(i,""),r.flags&=-33);var s=Bse(e);RU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bse(e);kU(e,a,o);break;default:throw Error(it(161))}}catch(u){Gi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nUe(e,t,n){St=e,M1e(e)}function M1e(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||nN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ca;a=nN;var l=ca;if(nN=o,(ca=u)&&!l)for(St=i;St!==null;)o=St,u=o.child,o.tag===22&&o.memoizedState!==null?Hse(i):u!==null?(u.return=o,St=u):Hse(i);for(;s!==null;)St=s,M1e(s),s=s.sibling;St=i,nN=a,ca=l}zse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):zse(e)}}function zse(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ca||QM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ca)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:bf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Cse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&W2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}ca||t.flags&512&&IU(t)}catch(d){Gi(t,t.return,d)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function Vse(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function Hse(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{QM(4,t)}catch(u){Gi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Gi(t,i,u)}}var s=t.return;try{IU(t)}catch(u){Gi(t,s,u)}break;case 5:var o=t.return;try{IU(t)}catch(u){Gi(t,o,u)}}}catch(u){Gi(t,t.return,u)}if(t===e){St=null;break}var a=t.sibling;if(a!==null){a.return=t.return,St=a;break}St=t.return}}var rUe=Math.ceil,CD=Um.ReactCurrentDispatcher,gW=Um.ReactCurrentOwner,Ic=Um.ReactCurrentBatchConfig,lr=0,uo=null,ws=null,Oo=0,yl=0,rw=_y(0),Ls=0,rA=null,C1=0,JM=0,yW=0,YC=null,Au=null,vW=0,aE=1/0,Ip=null,AD=!1,NU=null,m0=null,rN=!1,Xg=null,ID=0,KC=0,PU=null,WP=-1,GP=0;function Ya(){return lr&6?ls():WP!==-1?WP:WP=ls()}function g0(e){return e.mode&1?lr&2&&Oo!==0?Oo&-Oo:BBe.transition!==null?(GP===0&&(GP=_ve()),GP):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:Ave(e.type)),e):1}function Uf(e,t,n,r){if(50<KC)throw KC=0,PU=null,Error(it(185));OI(e,n,r),(!(lr&2)||e!==uo)&&(e===uo&&(!(lr&2)&&(JM|=n),Ls===4&&jg(e,Oo)),zu(e,r),n===1&&lr===0&&!(t.mode&1)&&(aE=ls()+500,YM&&wy()))}function zu(e,t){var n=e.callbackNode;B9e(e,t);var r=fD(e,e===uo?Oo:0);if(r===0)n!==null&&Zie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zie(n),t===1)e.tag===0?jBe(qse.bind(null,e)):Wve(qse.bind(null,e)),$Be(function(){!(lr&6)&&wy()}),n=null;else{switch(wve(r)){case 1:n=Hq;break;case 4:n=vve;break;case 16:n=cD;break;case 536870912:n=bve;break;default:n=cD}n=H1e(n,L1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function L1e(e,t){if(WP=-1,GP=0,lr&6)throw Error(it(327));var n=e.callbackNode;if(xw()&&e.callbackNode!==n)return null;var r=fD(e,e===uo?Oo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=kD(e,r);else{t=r;var i=lr;lr|=2;var s=j1e();(uo!==e||Oo!==t)&&(Ip=null,aE=ls()+500,o1(e,t));do try{oUe();break}catch(a){F1e(e,a)}while(!0);rW(),CD.current=s,lr=i,ws!==null?t=0:(uo=null,Oo=0,t=Ls)}if(t!==0){if(t===2&&(i=sU(e),i!==0&&(r=i,t=OU(e,i))),t===1)throw n=rA,o1(e,0),jg(e,r),zu(e,ls()),n;if(t===6)jg(e,r);else{if(i=e.current.alternate,!(r&30)&&!iUe(i)&&(t=kD(e,r),t===2&&(s=sU(e),s!==0&&(r=s,t=OU(e,s))),t===1))throw n=rA,o1(e,0),jg(e,r),zu(e,ls()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(it(345));case 2:vv(e,Au,Ip);break;case 3:if(jg(e,r),(r&130023424)===r&&(t=vW+500-ls(),10<t)){if(fD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ya(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=hU(vv.bind(null,e,Au,Ip),t);break}vv(e,Au,Ip);break;case 4:if(jg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Bf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ls()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rUe(r/1960))-r,10<r){e.timeoutHandle=hU(vv.bind(null,e,Au,Ip),r);break}vv(e,Au,Ip);break;case 5:vv(e,Au,Ip);break;default:throw Error(it(329))}}}return zu(e,ls()),e.callbackNode===n?L1e.bind(null,e):null}function OU(e,t){var n=YC;return e.current.memoizedState.isDehydrated&&(o1(e,t).flags|=256),e=kD(e,t),e!==2&&(t=Au,Au=n,t!==null&&DU(t)),e}function DU(e){Au===null?Au=e:Au.push.apply(Au,e)}function iUe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jg(e,t){for(t&=~yW,t&=~JM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bf(t),r=1<<n;e[n]=-1,t&=~r}}function qse(e){if(lr&6)throw Error(it(327));xw();var t=fD(e,0);if(!(t&1))return zu(e,ls()),null;var n=kD(e,t);if(e.tag!==0&&n===2){var r=sU(e);r!==0&&(t=r,n=OU(e,r))}if(n===1)throw n=rA,o1(e,0),jg(e,t),zu(e,ls()),n;if(n===6)throw Error(it(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vv(e,Au,Ip),zu(e,ls()),null}function bW(e,t){var n=lr;lr|=1;try{return e(t)}finally{lr=n,lr===0&&(aE=ls()+500,YM&&wy())}}function A1(e){Xg!==null&&Xg.tag===0&&!(lr&6)&&xw();var t=lr;lr|=1;var n=Ic.transition,r=Mr;try{if(Ic.transition=null,Mr=1,e)return e()}finally{Mr=r,Ic.transition=n,lr=t,!(lr&6)&&wy()}}function _W(){yl=rw.current,gi(rw)}function o1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DBe(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(eW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gD();break;case 3:sE(),gi(Bu),gi(Ea),lW();break;case 5:uW(r);break;case 4:sE();break;case 13:gi(Ni);break;case 19:gi(Ni);break;case 10:iW(r.type._context);break;case 22:case 23:_W()}n=n.return}if(uo=e,ws=e=y0(e.current,null),Oo=yl=t,Ls=0,rA=null,yW=JM=C1=0,Au=YC=null,Wv!==null){for(t=0;t<Wv.length;t++)if(n=Wv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wv=null}return e}function F1e(e,t){do{var n=ws;try{if(rW(),VP.current=TD,SD){for(var r=$i.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}SD=!1}if(T1=0,Zs=ks=$i=null,WC=!1,eA=0,gW.current=null,n===null||n.return===null){Ls=1,rA=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Oo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Pse(o);if(h!==null){h.flags&=-257,Ose(h,o,a,s,t),h.mode&1&&Nse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Nse(s,l,t),wW();break e}u=Error(it(426))}}else if(wi&&a.mode&1){var g=Pse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Ose(g,o,a,s,t),tW(oE(u,a));break e}}s=u=oE(u,a),Ls!==4&&(Ls=2),YC===null?YC=[s]:YC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=w1e(s,u,t);Tse(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(m0===null||!m0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=E1e(s,a,t);Tse(s,w);break e}}s=s.return}while(s!==null)}U1e(n)}catch(E){t=E,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function j1e(){var e=CD.current;return CD.current=TD,e===null?TD:e}function wW(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),uo===null||!(C1&268435455)&&!(JM&268435455)||jg(uo,Oo)}function kD(e,t){var n=lr;lr|=2;var r=j1e();(uo!==e||Oo!==t)&&(Ip=null,o1(e,t));do try{sUe();break}catch(i){F1e(e,i)}while(!0);if(rW(),lr=n,CD.current=r,ws!==null)throw Error(it(261));return uo=null,Oo=0,Ls}function sUe(){for(;ws!==null;)B1e(ws)}function oUe(){for(;ws!==null&&!N9e();)B1e(ws)}function B1e(e){var t=V1e(e.alternate,e,yl);e.memoizedProps=e.pendingProps,t===null?U1e(e):ws=t,gW.current=null}function U1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZBe(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,ws=null;return}}else if(n=JBe(n,t,yl),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Ls===0&&(Ls=5)}function vv(e,t,n){var r=Mr,i=Ic.transition;try{Ic.transition=null,Mr=1,aUe(e,t,n,r)}finally{Ic.transition=i,Mr=r}return null}function aUe(e,t,n,r){do xw();while(Xg!==null);if(lr&6)throw Error(it(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(it(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(U9e(e,s),e===uo&&(ws=uo=null,Oo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rN||(rN=!0,H1e(cD,function(){return xw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ic.transition,Ic.transition=null;var o=Mr;Mr=1;var a=lr;lr|=4,gW.current=null,tUe(e,n),$1e(n,e),ABe(fU),dD=!!cU,fU=cU=null,e.current=n,nUe(n),P9e(),lr=a,Mr=o,Ic.transition=s}else e.current=n;if(rN&&(rN=!1,Xg=e,ID=i),s=e.pendingLanes,s===0&&(m0=null),$9e(n.stateNode),zu(e,ls()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(AD)throw AD=!1,e=NU,NU=null,e;return ID&1&&e.tag!==0&&xw(),s=e.pendingLanes,s&1?e===PU?KC++:(KC=0,PU=e):KC=0,wy(),null}function xw(){if(Xg!==null){var e=wve(ID),t=Ic.transition,n=Mr;try{if(Ic.transition=null,Mr=16>e?16:e,Xg===null)var r=!1;else{if(e=Xg,Xg=null,ID=0,lr&6)throw Error(it(331));var i=lr;for(lr|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(St=l;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:GC(8,c,s)}var f=c.child;if(f!==null)f.return=c,St=f;else for(;St!==null;){c=St;var d=c.sibling,h=c.return;if(P1e(c),c===l){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:GC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,St=y;break e}St=s.return}}var v=e.current;for(St=v;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=v;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:QM(9,a)}}catch(E){Gi(a,a.return,E)}if(a===o){St=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,St=w;break e}St=a.return}}if(lr=i,wy(),fh&&typeof fh.onPostCommitFiberRoot=="function")try{fh.onPostCommitFiberRoot(VM,e)}catch{}r=!0}return r}finally{Mr=n,Ic.transition=t}}return!1}function Wse(e,t,n){t=oE(n,t),t=w1e(e,t,1),e=p0(e,t,1),t=Ya(),e!==null&&(OI(e,1,t),zu(e,t))}function Gi(e,t,n){if(e.tag===3)Wse(e,e,n);else for(;t!==null;){if(t.tag===3){Wse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(m0===null||!m0.has(r))){e=oE(n,e),e=E1e(t,e,1),t=p0(t,e,1),e=Ya(),t!==null&&(OI(t,1,e),zu(t,e));break}}t=t.return}}function uUe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ya(),e.pingedLanes|=e.suspendedLanes&n,uo===e&&(Oo&n)===n&&(Ls===4||Ls===3&&(Oo&130023424)===Oo&&500>ls()-vW?o1(e,0):yW|=n),zu(e,t)}function z1e(e,t){t===0&&(e.mode&1?(t=GR,GR<<=1,!(GR&130023424)&&(GR=4194304)):t=1);var n=Ya();e=gm(e,t),e!==null&&(OI(e,t,n),zu(e,n))}function lUe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),z1e(e,n)}function cUe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(it(314))}r!==null&&r.delete(t),z1e(e,n)}var V1e;V1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bu.current)Du=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Du=!1,QBe(e,t,n);Du=!!(e.flags&131072)}else Du=!1,wi&&t.flags&1048576&&Gve(t,bD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qP(e,t),e=t.pendingProps;var i=nE(t,Ea.current);Ew(t,n),i=fW(null,t,r,e,i,n);var s=dW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Uu(r)?(s=!0,yD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oW(t),i.updater=XM,t.stateNode=i,i._reactInternals=t,_U(t,r,e,n),t=xU(null,t,r,!0,s,n)):(t.tag=0,wi&&s&&Zq(t),ja(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=dUe(r),e=bf(r,e),i){case 0:t=EU(null,t,r,e,n);break e;case 1:t=Mse(null,t,r,e,n);break e;case 11:t=Dse(null,t,r,e,n);break e;case 14:t=$se(null,t,r,bf(r.type,e),n);break e}throw Error(it(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),EU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),Mse(e,t,r,i,n);case 3:e:{if(C1e(t),e===null)throw Error(it(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Zve(e,t),ED(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=oE(Error(it(423)),t),t=Lse(e,t,r,n,i);break e}else if(r!==i){i=oE(Error(it(424)),t),t=Lse(e,t,r,n,i);break e}else for(Sl=h0(t.stateNode.containerInfo.firstChild),Pl=t,wi=!0,Tf=null,n=Qve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rE(),r===i){t=ym(e,t,n);break e}ja(e,t,r,n)}t=t.child}return t;case 5:return e1e(t),e===null&&yU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,dU(r,i)?o=null:s!==null&&dU(r,s)&&(t.flags|=32),T1e(e,t),ja(e,t,o,n),t.child;case 6:return e===null&&yU(t),null;case 13:return A1e(e,t,n);case 4:return aW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=iE(t,null,r,n):ja(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),Dse(e,t,r,i,n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:return ja(e,t,t.pendingProps.children,n),t.child;case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ni(_D,r._currentValue),r._currentValue=o,s!==null)if(Qf(s.value,o)){if(s.children===i.children&&!Bu.current){t=ym(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=em(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),vU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(it(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ja(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ew(t,n),i=Dc(i),r=r(i),t.flags|=1,ja(e,t,r,n),t.child;case 14:return r=t.type,i=bf(r,t.pendingProps),i=bf(r.type,i),$se(e,t,r,i,n);case 15:return x1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),qP(e,t),t.tag=1,Uu(r)?(e=!0,yD(t)):e=!1,Ew(t,n),_1e(t,r,i),_U(t,r,i,n),xU(null,t,r,!0,e,n);case 19:return I1e(e,t,n);case 22:return S1e(e,t,n)}throw Error(it(156,t.tag))};function H1e(e,t){return yve(e,t)}function fUe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new fUe(e,t,n,r)}function EW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dUe(e){if(typeof e=="function")return EW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Uq)return 11;if(e===zq)return 14}return 2}function y0(e,t){var n=e.alternate;return n===null?(n=_c(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function YP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")EW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case G_:return a1(n.children,i,s,t);case Bq:o=8,i|=8;break;case HB:return e=_c(12,n,t,i|2),e.elementType=HB,e.lanes=s,e;case qB:return e=_c(13,n,t,i),e.elementType=qB,e.lanes=s,e;case WB:return e=_c(19,n,t,i),e.elementType=WB,e.lanes=s,e;case eve:return ZM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jye:o=10;break e;case Zye:o=9;break e;case Uq:o=11;break e;case zq:o=14;break e;case kg:o=16,r=null;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=_c(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function a1(e,t,n,r){return e=_c(7,e,r,t),e.lanes=n,e}function ZM(e,t,n,r){return e=_c(22,e,r,t),e.elementType=eve,e.lanes=n,e.stateNode={isHidden:!1},e}function y8(e,t,n){return e=_c(6,e,null,t),e.lanes=n,e}function v8(e,t,n){return t=_c(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hUe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J5(0),this.expirationTimes=J5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xW(e,t,n,r,i,s,o,a,u){return e=new hUe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_c(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oW(s),e}function pUe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function q1e(e){if(!e)return $0;e=e._reactInternals;e:{if(pb(e)!==e||e.tag!==1)throw Error(it(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Uu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(it(171))}if(e.tag===1){var n=e.type;if(Uu(n))return qve(e,n,t)}return t}function W1e(e,t,n,r,i,s,o,a,u){return e=xW(n,r,!0,e,i,s,o,a,u),e.context=q1e(null),n=e.current,r=Ya(),i=g0(n),s=em(r,i),s.callback=t??null,p0(n,s,i),e.current.lanes=i,OI(e,i,r),zu(e,r),e}function eL(e,t,n,r){var i=t.current,s=Ya(),o=g0(i);return n=q1e(n),t.context===null?t.context=n:t.pendingContext=n,t=em(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=p0(i,t,o),e!==null&&(Uf(e,i,o,s),zP(e,i,o)),o}function RD(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function SW(e,t){Gse(e,t),(e=e.alternate)&&Gse(e,t)}function mUe(){return null}var G1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function TW(e){this._internalRoot=e}tL.prototype.render=TW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));eL(e,t,null,null)};tL.prototype.unmount=TW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;A1(function(){eL(null,e,null,null)}),t[mm]=null}};function tL(e){this._internalRoot=e}tL.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sve();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fg.length&&t!==0&&t<Fg[n].priority;n++);Fg.splice(n,0,e),n===0&&Cve(e)}};function CW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yse(){}function gUe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=RD(o);s.call(l)}}var o=W1e(t,r,e,0,null,!1,!1,"",Yse);return e._reactRootContainer=o,e[mm]=o.current,K2(e.nodeType===8?e.parentNode:e),A1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=RD(u);a.call(l)}}var u=xW(e,0,!1,null,null,!1,!1,"",Yse);return e._reactRootContainer=u,e[mm]=u.current,K2(e.nodeType===8?e.parentNode:e),A1(function(){eL(t,u,n,r)}),u}function rL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=RD(o);a.call(u)}}eL(t,o,e,i)}else o=gUe(n,t,e,i,r);return RD(o)}Eve=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qT(t.pendingLanes);n!==0&&(qq(t,n|1),zu(t,ls()),!(lr&6)&&(aE=ls()+500,wy()))}break;case 13:A1(function(){var r=gm(e,1);if(r!==null){var i=Ya();Uf(r,e,1,i)}}),SW(e,1)}};Wq=function(e){if(e.tag===13){var t=gm(e,134217728);if(t!==null){var n=Ya();Uf(t,e,134217728,n)}SW(e,134217728)}};xve=function(e){if(e.tag===13){var t=g0(e),n=gm(e,t);if(n!==null){var r=Ya();Uf(n,e,t,r)}SW(e,t)}};Sve=function(){return Mr};Tve=function(e,t){var n=Mr;try{return Mr=e,t()}finally{Mr=n}};nU=function(e,t,n){switch(t){case"input":if(KB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=GM(r);if(!i)throw Error(it(90));nve(r),KB(r,i)}}}break;case"textarea":ive(e,n);break;case"select":t=n.value,t!=null&&vw(e,!!n.multiple,t,!1)}};fve=bW;dve=A1;var yUe={usingClientEntryPoint:!1,Events:[$I,Q_,GM,lve,cve,bW]},XS={findFiberByHostInstance:qv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vUe={bundleType:XS.bundleType,version:XS.version,rendererPackageName:XS.rendererPackageName,rendererConfig:XS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Um.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mve(e),e===null?null:e.stateNode},findFiberByHostInstance:XS.findFiberByHostInstance||mUe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iN.isDisabled&&iN.supportsFiber)try{VM=iN.inject(vUe),fh=iN}catch{}}Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yUe;Ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CW(t))throw Error(it(200));return pUe(e,t,null,n)};Ql.createRoot=function(e,t){if(!CW(e))throw Error(it(299));var n=!1,r="",i=G1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xW(e,1,!1,null,null,n,!1,r,i),e[mm]=t.current,K2(e.nodeType===8?e.parentNode:e),new TW(t)};Ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=mve(t),e=e===null?null:e.stateNode,e};Ql.flushSync=function(e){return A1(e)};Ql.hydrate=function(e,t,n){if(!nL(t))throw Error(it(200));return rL(null,e,t,!0,n)};Ql.hydrateRoot=function(e,t,n){if(!CW(e))throw Error(it(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=G1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=W1e(t,null,e,1,n??null,i,!1,s,o),e[mm]=t.current,K2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tL(t)};Ql.render=function(e,t,n){if(!nL(t))throw Error(it(200));return rL(null,e,t,!1,n)};Ql.unmountComponentAtNode=function(e){if(!nL(e))throw Error(it(40));return e._reactRootContainer?(A1(function(){rL(null,null,e,!1,function(){e._reactRootContainer=null,e[mm]=null})}),!0):!1};Ql.unstable_batchedUpdates=bW;Ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nL(n))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return rL(e,t,n,!1,r)};Ql.version="18.3.1-next-f1338f8080-20240426";function Y1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y1e)}catch(e){console.error(e)}}Y1e(),Yye.exports=Ql;var LI=Yye.exports;const bUe=ol(LI);var Kse=LI;zB.createRoot=Kse.createRoot,zB.hydrateRoot=Kse.hydrateRoot;var Gd=function(){return Gd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Gd.apply(this,arguments)};function FI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Mp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Xse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _Ue(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function Yv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function b8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gn(e[i](o)),done:!1}:s?s(o):o}:s}}function XC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Xse=="function"?Xse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var KP="right-scroll-bar-position",XP="width-before-scroll-bar",wUe="with-scroll-bars-hidden",EUe="--removed-body-scroll-bar-size";function _8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function xUe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var SUe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Qse=new WeakMap;function TUe(e,t){var n=xUe(null,function(r){return e.forEach(function(i){return _8(i,r)})});return SUe(function(){var r=Qse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||_8(a,null)}),s.forEach(function(a){i.has(a)||_8(a,o)})}Qse.set(n,e)},[e]),n}function CUe(e){return e}function AUe(e,t){t===void 0&&(t=CUe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function IUe(e){e===void 0&&(e={});var t=AUe(null);return t.options=Gd({async:!0,ssr:!1},e),t}var K1e=function(e){var t=e.sideCar,n=FI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Gd({},n))};K1e.isSideCarExport=!0;function kUe(e,t){return e.useMedium(t),K1e}var X1e=IUe(),w8=function(){},iL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:w8,onWheelCapture:w8,onTouchMoveCapture:w8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=FI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=TUe([n,t]),S=Gd(Gd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:X1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Gd(Gd({},S),{ref:E})):I.createElement(y,Gd({},S,{className:u,ref:E}),a))});iL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iL.classNames={fullWidth:XP,zeroRight:KP};var RUe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=RUe();return t&&e.setAttribute("nonce",t),e}function PUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function OUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var DUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=NUe())&&(PUe(t,n),OUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$Ue=function(){var e=DUe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Q1e=function(){var e=$Ue(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},MUe={left:0,top:0,right:0,gap:0},E8=function(e){return parseInt(e||"",10)||0},LUe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[E8(n),E8(r),E8(i)]},FUe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return MUe;var t=LUe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},jUe=Q1e(),Sw="data-scroll-locked",BUe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(wUe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Sw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(KP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(XP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(KP," .").concat(KP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(XP," .").concat(XP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sw,`] {
    `).concat(EUe,": ").concat(a,`px;
  }
`)},Jse=function(){var e=parseInt(document.body.getAttribute(Sw)||"0",10);return isFinite(e)?e:0},UUe=function(){I.useEffect(function(){return document.body.setAttribute(Sw,(Jse()+1).toString()),function(){var e=Jse()-1;e<=0?document.body.removeAttribute(Sw):document.body.setAttribute(Sw,e.toString())}},[])},zUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;UUe();var s=I.useMemo(function(){return FUe(i)},[i]);return I.createElement(jUe,{styles:BUe(s,!t,i,n?"":"!important")})},$U=!1;if(typeof window<"u")try{var sN=Object.defineProperty({},"passive",{get:function(){return $U=!0,!0}});window.addEventListener("test",sN,sN),window.removeEventListener("test",sN,sN)}catch{$U=!1}var e_=$U?{passive:!1}:!1,VUe=function(e){return e.tagName==="TEXTAREA"},J1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!VUe(e)&&n[t]==="visible")},HUe=function(e){return J1e(e,"overflowY")},qUe=function(e){return J1e(e,"overflowX")},Zse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Z1e(e,r);if(i){var s=ebe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},WUe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},GUe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Z1e=function(e,t){return e==="v"?HUe(t):qUe(t)},ebe=function(e,t){return e==="v"?WUe(t):GUe(t)},YUe=function(e,t){return e==="h"&&t==="rtl"?-1:1},KUe=function(e,t,n,r,i){var s=YUe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=ebe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Z1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},oN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eoe=function(e){return[e.deltaX,e.deltaY]},toe=function(e){return e&&"current"in e?e.current:e},XUe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},QUe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},JUe=0,t_=[];function ZUe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(JUe++)[0],s=I.useState(Q1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=_Ue([e.lockRef.current],(e.shards||[]).map(toe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=oN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,x=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&x==="h"&&S.type==="range")return!1;var C=Zse(x,S);if(!C)return!0;if(C?E=x:(E=x==="v"?"h":"v",C=Zse(x,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var A=r.current||E;return KUe(A,g,m,A==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!t_.length||t_[t_.length-1]!==s)){var y="deltaY"in g?eoe(g):oN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&XUe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(toe).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:e7e(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=oN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,eoe(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,oN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return t_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,e_),document.addEventListener("touchmove",u,e_),document.addEventListener("touchstart",c,e_),function(){t_=t_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,e_),document.removeEventListener("touchmove",u,e_),document.removeEventListener("touchstart",c,e_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:QUe(i)}):null,h?I.createElement(zUe,{gapMode:e.gapMode}):null)}function e7e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const t7e=kUe(X1e,ZUe);var sL=I.forwardRef(function(e,t){return I.createElement(iL,Gd({},e,{ref:t,sideCar:t7e}))});sL.classNames=iL.classNames;function Mi(e){return Object.keys(e)}function x8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function AW(e,t){const n={...e},r=t;return x8(e)&&x8(t)&&Object.keys(t).forEach(i=>{x8(r[i])&&i in e?n[i]=AW(n[i],r[i]):n[i]=r[i]}),n}function n7e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function r7e(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function MU(e){const t=r7e(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function S8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function tbe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?S8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?S8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?S8(s):s}}return r}return n}const Se=tbe("rem",{shouldScale:!0}),ND=tbe("em");function Sx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function nbe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Ey(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function ho(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function mb(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function PD(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function OD(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function i7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function s7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function o7e(e,t,n){return OD(e,n)===OD(t,n)}function IW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=OD(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>o7e(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=s7e(l,u,r),f=i7e(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const a7e={app:100,modal:200,popover:300,overlay:400,max:9999};function Xc(e){return a7e[e]}const u7e=()=>{};function l7e(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||u7e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Ht(e,t="size",n=!0){if(e!==void 0)return nbe(e)?n?Se(e):e:`var(--${t}-${e})`}function Ll(e){return Ht(e,"mantine-spacing")}function zr(e){return e===void 0?"var(--mantine-radius-default)":Ht(e,"mantine-radius")}function lo(e){return Ht(e,"mantine-font-size")}function rbe(e){return Ht(e,"mantine-line-height",!1)}function kW(e){if(e)return Ht(e,"mantine-shadow",!1)}function Hp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function RW(e,t){return e in t.breakpoints?MU(t.breakpoints[e]):MU(e)}function DD(e,t){const n=e.map(r=>({value:r,px:RW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function GT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function c7e(e,t,n){var r;return n?Array.from(((r=OD(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function f7e(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function wc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function QC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Bg(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function oL(e,t){const n=Bg(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const noe=["mousedown","touchstart"];function d7e(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||noe).forEach(s=>document.addEventListener(s,i)),()=>{(t||noe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function h7e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function p7e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function m7e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:p7e(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),h7e(s.current,o=>i(o.matches))},[e]),r}const gb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Mc(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function ibe({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Mc(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function g7e(e,t="body > :not(script)"){const n=QC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const y7e=/input|select|textarea|button|object/,sbe="a, input, select, textarea, button, object, [tabindex]";function v7e(e){return e.style.display==="none"}function b7e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(v7e(n))return!1;n=n.parentNode}return!0}function obe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function LU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(obe(e));return(y7e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&b7e(e)}function abe(e){const t=obe(e);return(Number.isNaN(t)||t>=0)&&LU(e)}function _7e(e){return Array.from(e.querySelectorAll(sbe)).filter(abe)}function w7e(e,t){const n=_7e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function E7e(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(sbe));o=a.find(abe)||a.find(LU)||null,!o&&LU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=g7e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&w7e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const x7e=xi.useId||(()=>{});function S7e(){const e=x7e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Aa(e){const t=S7e(),[n,r]=I.useState(t);return gb(()=>{r(QC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function ube(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function NW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function lbe(...e){return t=>{e.forEach(n=>NW(n,t))}}function ns(...e){return I.useCallback(lbe(...e),e)}function cbe(e){return{x:wc(e.x,0,1),y:wc(e.y,0,1)}}function aL(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const x=wc((w-S.left)/S.width,0,1);e({x:n==="ltr"?x:1-x,y:wc((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ds({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function PW(e,t){return m7e("(prefers-reduced-motion: reduce)",e,t)}const T7e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function zf(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(T7e),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function C7e(e){const[t,{width:n,height:r}]=zf(e);return{ref:t,width:n,height:r}}function JC(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function A7e(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function I7e(e){const t=I.useRef();return I.useEffect(()=>{t.current=e},[e]),t.current}function k7e(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function R7e(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function N7e(e,t){const n=Bg(e),r=I.useRef(),i=I.useRef(),s=I.useRef(!0),o=I.useRef(t),a=I.useRef(-1),u=()=>window.clearTimeout(a.current),l=I.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=I.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=I.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return I.useEffect(()=>{o.current=t},[t]),[f,u]}function P7e(e,t){const[n,r]=I.useState(e),[i,s]=N7e(r,t);return I.useEffect(()=>s,[]),[n,i]}function O7e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function D7e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});gb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>O7e(`${e}:${String(r)}`,i[0])}return[t,n]}var $7e={};function fbe(){return typeof process<"u"&&$7e?"production":"development"}function dbe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=dbe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function es(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=dbe(e))&&(r&&(r+=" "),r+=t);return r}const M7e={};function L7e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=es(t[r],i):t[r]=i})}),t}function uL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||M7e);return L7e(s)}function $D({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const hbe=I.createContext(null);function xy(){const e=I.useContext(hbe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function F7e(){return xy().cssVariablesResolver}function j7e(){return xy().classNamesPrefix}function OW(){return xy().getStyleNonce}function B7e(){return xy().withStaticClasses}function U7e(){return xy().headless}function z7e(){var e;return(e=xy().stylesTransform)==null?void 0:e.sx}function V7e(){var e;return(e=xy().stylesTransform)==null?void 0:e.styles}function H7e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function q7e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function W7e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function G7e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function DW(e){return H7e(e)?q7e(e):e.startsWith("rgb")?W7e(e):e.startsWith("hsl")?G7e(e):{r:0,g:0,b:0,a:1}}function aN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=DW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function iA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function T8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Y7e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function K7e(e){if(e.startsWith("oklch("))return(Y7e(e)||0)/100;const{r:t,g:n,b:r}=DW(e),i=t/255,s=n/255,o=r/255,a=T8(i),u=T8(s),l=T8(o);return .2126*a+.7152*u+.0722*l}function QS(e,t=.179){return e.startsWith("var(")?!1:K7e(e)>t}function qh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:QS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][iA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:QS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:QS(e,t.luminanceThreshold),shade:s,variable:void 0}}function Qr(e,t){const n=qh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function FU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Qr(n.from,t),i=Qr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Ld(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=DW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const n_=Ld,X7e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=qh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Se(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Se(1)} solid transparent`}:{background:e,hover:aN(e,.1),color:a,border:`${Se(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Ld(a,.1),hover:Ld(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:Ld(e,.1),hover:Ld(e,.12),color:e,border:`${Se(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Se(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Ld(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Ld(e,.05),color:e,border:`${Se(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Ld(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:"transparent",hover:Ld(e,.12),color:e,border:`${Se(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Se(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:aN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:aN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:aN(t.white,.01),color:e,border:`${Se(1)} solid transparent`}:n==="gradient"?{background:FU(r,t),hover:FU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Se(1)} solid var(--mantine-color-default-border)`}:{}},Q7e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},roe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",$W={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Q7e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:X7e,autoContrast:!1,luminanceThreshold:.3,fontFamily:roe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:roe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Se(34),lineHeight:"1.3"},h2:{fontSize:Se(26),lineHeight:"1.35"},h3:{fontSize:Se(22),lineHeight:"1.4"},h4:{fontSize:Se(18),lineHeight:"1.45"},h5:{fontSize:Se(16),lineHeight:"1.5"},h6:{fontSize:Se(14),lineHeight:"1.5"}}},fontSizes:{xs:Se(12),sm:Se(14),md:Se(16),lg:Se(18),xl:Se(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Se(2),sm:Se(4),md:Se(8),lg:Se(16),xl:Se(32)},spacing:{xs:Se(10),sm:Se(12),md:Se(16),lg:Se(20),xl:Se(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), 0 ${Se(1)} ${Se(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(10)} ${Se(15)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(7)} ${Se(7)} ${Se(-5)}`,md:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(20)} ${Se(25)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(10)} ${Se(10)} ${Se(-5)}`,lg:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(28)} ${Se(23)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(12)} ${Se(12)} ${Se(-7)}`,xl:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(36)} ${Se(28)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(17)} ${Se(17)} ${Se(-7)}`},other:{},components:{}};function ioe(e){return e==="auto"||e==="dark"||e==="light"}function J7e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ioe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ioe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Z7e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",soe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function C8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function ooe(e){if(!(e.primaryColor in e.colors))throw new Error(Z7e);if(typeof e.primaryShade=="object"&&(!C8(e.primaryShade.dark)||!C8(e.primaryShade.light)))throw new Error(soe);if(typeof e.primaryShade=="number"&&!C8(e.primaryShade))throw new Error(soe)}function eze(e,t){var r;if(!t)return ooe(e),e;const n=AW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),ooe(n),n}const MW=I.createContext(null),tze=()=>I.useContext(MW)||$W;function Ts(){const e=I.useContext(MW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function pbe({theme:e,children:t,inherit:n=!0}){const r=tze(),i=I.useMemo(()=>eze(n?r:$W,e),[e,r,n]);return _.jsx(MW.Provider,{value:i,children:t})}pbe.displayName="@mantine/core/MantineThemeProvider";function nze(){const e=Ts(),t=OW(),n=Mi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=MU(e.breakpoints[i]),a=s?`${o-.1}px`:ND(o-.1),u=s?`${o}px`:ND(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function A8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function JS(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function rze(e,t){const n=A8(e.variables),r=n?JS(t,n):"",i=A8(e.dark),s=A8(e.light),o=i?JS(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?JS(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function Sy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&qh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function aoe(e,t){return Sy({color:e.colors[e.primaryColor][iA(e,t)],theme:e,autoContrast:null})}function uN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=iA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=iA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function ize(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function r_(e,t,n){Mi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const mbe=e=>{const t=iA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Se(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":aoe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":aoe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};r_(r.variables,e.breakpoints,"breakpoint"),r_(r.variables,e.spacing,"spacing"),r_(r.variables,e.fontSizes,"font-size"),r_(r.variables,e.lineHeights,"line-height"),r_(r.variables,e.shadows,"shadow"),r_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Mi(e.colors).forEach(s=>{const o=e.colors[s];if(ize(o)){Object.assign(r.light,uN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,uN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,uN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,uN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Mi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function sze({theme:e,generator:t}){const n=mbe(e),r=t==null?void 0:t(e);return r?AW(n,r):n}const I8=mbe($W);function oze(e){const t={variables:{},light:{},dark:{}};return Mi(e.variables).forEach(n=>{I8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Mi(e.light).forEach(n=>{I8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Mi(e.dark).forEach(n=>{I8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function aze(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function gbe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ts(),r=OW(),i=F7e(),s=sze({theme:n,generator:i}),o=e===":root"&&t,a=o?oze(s):s,u=rze(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":aze(e)}`}}):null}gbe.displayName="@mantine/CssVariables";function uze(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function i_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function lze({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(i_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),i_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),gb(()=>{i_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return i_(r,n),()=>{};r===void 0&&i_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&i_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function cze({respectReducedMotion:e,getRootElement:t}){gb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}uze();function ybe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=J7e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=lze({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return cze({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(hbe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(pbe,{theme:e,children:[o&&_.jsx(gbe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(nze,{}),t]})})}ybe.displayName="@mantine/core/MantineProvider";function zm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ts();return{resolvedClassNames:uL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:$D({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const fze={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function dze({theme:e,options:t,unstyled:n}){return es((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||fze[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function hze({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return uL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function uoe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return uL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function pze({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function mze({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function gze({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function yze({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=uL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function vze({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function bze({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return es(dze({theme:e,options:t,unstyled:a||h}),yze({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),vze({options:t,classes:o,selector:r,unstyled:a}),uoe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),uoe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),hze({selector:r,stylesCtx:f,options:t,props:c,theme:e}),pze({rootSelector:l,selector:r,className:u}),mze({selector:r,classes:o,unstyled:a||h}),d&&!h&&gze({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function _ze({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return $D({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function jU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...jU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function wze(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Sx(n[r])}}),t),{})}function Eze({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=wze([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function xze({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&_ze({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&$D({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&$D({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Eze({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?jU({style:u,theme:e}):null,...jU({style:r==null?void 0:r.style,theme:e})}}function Sze({props:e,stylesCtx:t,themeName:n}){var o;const r=Ts(),i=(o=V7e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ts(),h=j7e(),p=B7e(),m=U7e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=Sze({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:bze({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:xze({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Tx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Te(e,t,n){var o;const r=Ts(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Sx(n)}}function k8(e){return Mi(e).reduce((t,n)=>e[n]!==void 0?`${t}${n7e(n)}:${e[n]};`:t,"").trim()}function Tze({selector:e,styles:t,media:n,container:r}){const i=t?k8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${k8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${k8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function jI(e){const t=OW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Tze(e)}})}function yb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:x,fz:C,fw:A,lts:R,ta:P,lh:$,fs:k,tt:D,td:M,w:L,miw:B,maw:U,h:V,mih:O,mah:z,bgsz:W,bgp:j,bgr:H,bga:G,pos:te,top:he,left:fe,bottom:ge,right:le,inset:Me,display:ce,flex:ze,hiddenFrom:Ve,visibleFrom:at,lightHidden:tt,darkHidden:be,sx:pe,...Oe}=e;return{styleProps:Sx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:x,fz:C,fw:A,lts:R,ta:P,lh:$,fs:k,tt:D,td:M,w:L,miw:B,maw:U,h:V,mih:O,mah:z,bgsz:W,bgp:j,bgr:H,bga:G,pos:te,top:he,left:fe,bottom:ge,right:le,inset:Me,display:ce,flex:ze,hiddenFrom:Ve,visibleFrom:at,lightHidden:tt,darkHidden:be,sx:pe}),rest:Oe}}const Cze={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function LW(e,t){const n=qh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Aze(e,t){const n=qh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:LW(e,t)}function Ize(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Se(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${LW(i.join(" "),t)}`),s.trim()}return e}const loe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function kze(e){return typeof e=="string"&&e in loe?loe[e]:e}const Rze=["h1","h2","h3","h4","h5","h6"];function Nze(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Rze.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Se(e):e}function Pze(e){return e}const Oze=["h1","h2","h3","h4","h5","h6"];function Dze(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Oze.includes(e)?`var(--mantine-${e}-line-height)`:e}function $ze(e){return typeof e=="number"?Se(e):e}function Mze(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Se(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const R8={color:LW,textColor:Aze,fontSize:Nze,spacing:Mze,identity:Pze,size:$ze,lineHeight:Dze,fontFamily:kze,border:Ize};function coe(e){return e.replace("(min-width: ","").replace("em)","")}function Lze({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(coe(i))-Number(coe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function Fze(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function jze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Bze(e){return typeof e=="object"&&e!==null?Mi(e).filter(t=>t!=="base"):[]}function Uze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function vbe({styleProps:e,data:t,theme:n}){return Lze(Mi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=jze(e[i]);if(!Fze(e[i]))return o.forEach(l=>{r.inlineStyles[l]=R8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=Bze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=R8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:R8[s.type](Uze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function lL(){return`__m__-${I.useId().replace(/:/g,"")}`}function FW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...FW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function bbe(e){return e.startsWith("data-")?e:`data-${e}`}function zze(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[bbe(n)]=e[n]),t},{})}function _be(e){return e?typeof e=="string"?{[bbe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,..._be(n)}),{}):zze(e):null}function BU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...BU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Vze({theme:e,style:t,vars:n,styleProps:r}){const i=BU(t,e),s=BU(n,e);return{...i,...s,...r}}const wbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Ts(),g=e||"div",{styleProps:y,rest:v}=yb(h),b=z7e(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),E=lL(),S=vbe({styleProps:y,theme:m,data:Cze}),x={ref:p,style:Vze({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:es(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":nbe(o)?void 0:o||void 0,size:d,..._be(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(jI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(x):_.jsx(g,{...x})]})});wbe.displayName="@mantine/core/Box";const Ee=wbe;function Ebe(e){return e}function Fe(e){const t=I.forwardRef(e);return t.extend=Ebe,t.withProps=n=>{const r=I.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ws(e){const t=I.forwardRef(e);return t.withProps=n=>{const r=I.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=Ebe,t}const Hze=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Wh(){return I.useContext(Hze)}function qze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function N8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const ZS=typeof window<"u"&&window.requestAnimationFrame;function Wze({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{LI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||qze(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Mc(()=>{typeof ZS=="function"&&ZS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),ZS(()=>{const p=N8(i);c({...f(p),height:p})})}:()=>{const p=N8(i);c({...f(p),willChange:"height",height:p}),ZS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=N8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:lbe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const Gze={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},xbe=Fe((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Te("Collapse",Gze,e),c=Ts(),f=PW(),h=(c.respectReducedMotion?f:!1)?0:i,p=Wze({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ee,{...l,children:n}):null:_.jsx(Ee,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...FW(o,c)},ref:t,...l}),children:n})});xbe.displayName="@mantine/core/Collapse";const[Yze,Qc]=ho("ScrollArea.Root component was not found in tree");function uE(e,t){const n=Bg(t);gb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Kze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Qc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return uE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),uE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),Xze=I.forwardRef((e,t)=>{const n=Qc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(Kze,{...e,ref:t}):null}),Qze={scrollHideDelay:1e3,type:"hover"},Sbe=I.forwardRef((e,t)=>{const n=Te("ScrollAreaRoot",Qze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,S]=I.useState(!1),[x,C]=I.useState(!1),A=ns(t,R=>u(R));return _.jsx(Yze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(Ee,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});Sbe.displayName="@mantine/core/ScrollAreaRoot";function Tbe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function cL(e){const t=Tbe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Cbe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Jze(e,[t,n]){return Math.min(n,Math.max(t,e))}function foe(e,t,n="ltr"){const r=cL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Jze(e,u);return Cbe([0,o],[0,a])(l)}function Zze(e,t,n,r="ltr"){const i=cL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Cbe([u,l],f)(e)}function Abe(e,t){return e>0&&e<t}function MD(e){return e?parseInt(e,10):0}function u1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[eVe,Ibe]=ho("ScrollAreaScrollbar was not found in tree"),kbe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Qc(),[h,p]=I.useState(null),m=ns(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Bg(l),E=Bg(a),S=oL(c,10),x=C=>{if(g.current){const A=C.clientX-g.current.left,R=C.clientY-g.current.top;u({x:A,y:R})}};return I.useEffect(()=>{const C=A=>{const R=A.target;(h==null?void 0:h.contains(R))&&w(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),uE(h,S),uE(d.content,S),_.jsx(eVe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Bg(i),onThumbPointerUp:Bg(s),onThumbPositionChange:E,onThumbPointerDown:Bg(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:u1(e.onPointerDown,C=>{C.preventDefault(),C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",x(C))}),onPointerMove:u1(e.onPointerMove,x),onPointerUp:u1(e.onPointerUp,C=>{C.preventDefault();const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,document.body.style.pointerEvents="auto",g.current=null})})})}),tVe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Qc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(kbe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${cL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Abe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:MD(a.paddingLeft),paddingEnd:MD(a.paddingRight)}})}})}),nVe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Qc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(kbe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${cL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Abe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:MD(a.paddingTop),paddingEnd:MD(a.paddingBottom)}})}})}),jW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Wh(),s=Qc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Tbe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Zze(h,a.current,u,p);return n==="horizontal"?_.jsx(tVe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=foe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(nVe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=foe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Rbe=I.forwardRef((e,t)=>{const n=Qc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=oL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return uE(n.viewport,u),uE(n.content,u),r||s?_.jsx(jW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),rVe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Qc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(Rbe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),iVe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Qc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=oL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(jW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:u1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:u1(e.onPointerLeave,()=>a("idle"))}):null}),doe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Qc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(rVe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(iVe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(Rbe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(jW,{...r,ref:t}):null});function sVe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const oVe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Qc(),s=Ibe(),{onThumbPositionChange:o}=s,a=ns(t,c=>s.onThumbChange(c)),u=I.useRef(),l=oL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=sVe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:u1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:u1(e.onPointerUp,s.onThumbPointerUp)})}),hoe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ibe();return n||i.hasThumb?_.jsx(oVe,{ref:t,...r}):null}),Nbe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Qc(),s=ns(r,i.onViewportChange);return _.jsx(Ee,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Nbe.displayName="@mantine/core/ScrollAreaViewport";var BW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Pbe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},aVe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Se(t)}}),Cx=Fe((e,t)=>{const n=Te("ScrollArea",Pbe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=vt({name:"ScrollArea",props:n,classes:BW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aVe});return _.jsxs(Sbe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(Nbe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var x;(x=d==null?void 0:d.onScroll)==null||x.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(doe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(hoe,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(doe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(hoe,{...E("thumb")})}),_.jsx(Xze,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Cx.displayName="@mantine/core/ScrollArea";const UW=Fe((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Te("ScrollAreaAutosize",Pbe,e);return _.jsx(Ee,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ee,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Cx,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Cx.classes=BW;UW.displayName="@mantine/core/ScrollAreaAutosize";UW.classes=BW;Cx.Autosize=UW;var Obe={root:"m_87cf2631"};const uVe={__staticSelector:"UnstyledButton"},Bs=Ws((e,t)=>{const n=Te("UnstyledButton",uVe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=vt({name:s,props:n,classes:Obe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ee,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Bs.classes=Obe;Bs.displayName="@mantine/core/UnstyledButton";var Dbe={root:"m_515a97f8"};const lVe={},zW=Fe((e,t)=>{const n=Te("VisuallyHidden",lVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=vt({name:"VisuallyHidden",classes:Dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ee,{component:"span",ref:t,...c("root"),...l})});zW.classes=Dbe;zW.displayName="@mantine/core/VisuallyHidden";var $be={root:"m_1b7284a3"};const cVe={},fVe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:zr(t),"--paper-shadow":kW(n)}}),fL=Ws((e,t)=>{const n=Te("Paper",cVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:$be,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:fVe});return _.jsx(Ee,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});fL.classes=$be;fL.displayName="@mantine/core/Paper";function Ax(e){return Mbe(e)?(e.nodeName||"").toLowerCase():"#document"}function Vu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Vm(e){var t;return(t=(Mbe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Mbe(e){return e instanceof Node||e instanceof Vu(e).Node}function Ei(e){return e instanceof Element||e instanceof Vu(e).Element}function Fl(e){return e instanceof HTMLElement||e instanceof Vu(e).HTMLElement}function UU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vu(e).ShadowRoot}function BI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Lc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function dVe(e){return["table","td","th"].includes(Ax(e))}function dL(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function VW(e){const t=HW(),n=Lc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hVe(e){let t=vm(e);for(;Fl(t)&&!M0(t);){if(dL(t))return null;if(VW(t))return t;t=vm(t)}return null}function HW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function M0(e){return["html","body","#document"].includes(Ax(e))}function Lc(e){return Vu(e).getComputedStyle(e)}function hL(e){return Ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function vm(e){if(Ax(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UU(e)&&e.host||Vm(e);return UU(t)?t.host:t}function Lbe(e){const t=vm(e);return M0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fl(t)&&BI(t)?t:Lbe(t)}function tm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Lbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Vu(i);return s?t.concat(o,o.visualViewport||[],BI(i)?i:[],o.frameElement&&n?tm(o.frameElement):[]):t.concat(i,tm(i,[],n))}function poe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function sA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&UU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Fbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function jbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function pVe(e){return yVe()?!1:!moe()&&e.width===0&&e.height===0||moe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function mVe(){return/apple/i.test(navigator.vendor)}function moe(){const e=/android/i;return e.test(Fbe())||e.test(jbe())}function gVe(){return Fbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function yVe(){return jbe().includes("jsdom/")}function zU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function vVe(e){return"nativeEvent"in e}function bVe(e){return e.matches("html,body")}function Kv(e){return(e==null?void 0:e.ownerDocument)||document}function P8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function k_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const _Ve="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function wVe(e){return Fl(e)&&e.matches(_Ve)}const Tl=Math.min,fa=Math.max,LD=Math.round,lN=Math.floor,L0=e=>({x:e,y:e}),EVe={left:"right",right:"left",bottom:"top",top:"bottom"},xVe={start:"end",end:"start"};function VU(e,t,n){return fa(e,Tl(t,n))}function bm(e,t){return typeof e=="function"?e(t):e}function Jf(e){return e.split("-")[0]}function Ix(e){return e.split("-")[1]}function qW(e){return e==="x"?"y":"x"}function WW(e){return e==="y"?"height":"width"}function _m(e){return["top","bottom"].includes(Jf(e))?"y":"x"}function GW(e){return qW(_m(e))}function SVe(e,t,n){n===void 0&&(n=!1);const r=Ix(e),i=GW(e),s=WW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=FD(o)),[o,FD(o)]}function TVe(e){const t=FD(e);return[HU(e),t,HU(t)]}function HU(e){return e.replace(/start|end/g,t=>xVe[t])}function CVe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function AVe(e,t,n,r){const i=Ix(e);let s=CVe(Jf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(HU)))),s}function FD(e){return e.replace(/left|right|bottom|top/g,t=>EVe[t])}function IVe(e){return{top:0,right:0,bottom:0,left:0,...e}}function YW(e){return typeof e!="number"?IVe(e):{top:e,right:e,bottom:e,left:e}}function lE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function goe(e,t,n){let{reference:r,floating:i}=e;const s=_m(t),o=GW(t),a=WW(o),u=Jf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ix(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const kVe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=goe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=goe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function KW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=bm(t,e),p=YW(h),g=a[d?f==="floating"?"reference":"floating":f],y=lE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=lE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const RVe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=bm(e,t)||{};if(l==null)return{};const f=YW(c),d={x:n,y:r},h=GW(i),p=WW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let x=S?S[b]:0;(!x||!await(o.isElement==null?void 0:o.isElement(S)))&&(x=a.floating[b]||s.floating[p]);const C=w/2-E/2,A=x/2-m[p]/2-1,R=Tl(f[y],A),P=Tl(f[v],A),$=R,k=x-m[p]-P,D=x/2-m[p]/2+C,M=VU($,D,k),L=!u.arrow&&Ix(i)!=null&&D!==M&&s.reference[p]/2-(D<$?R:P)-m[p]/2<0,B=L?D<$?D-$:D-k:0;return{[h]:d[h]+B,data:{[h]:M,centerOffset:D-M-B,...L&&{alignmentOffset:B}},reset:L}}}),NVe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=bm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Jf(i),v=_m(a),b=Jf(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[FD(a)]:TVe(a)),S=p!=="none";!d&&S&&E.push(...AVe(a,m,p,w));const x=[a,...E],C=await KW(t,g),A=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(C[y]),f){const D=SVe(i,o,w);A.push(C[D[0]],C[D[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every(D=>D<=0)){var P,$;const D=(((P=s.flip)==null?void 0:P.index)||0)+1,M=x[D];if(M)return{data:{index:D,overflows:R},reset:{placement:M}};let L=($=R.filter(B=>B.overflows[0]<=0).sort((B,U)=>B.overflows[1]-U.overflows[1])[0])==null?void 0:$.placement;if(!L)switch(h){case"bestFit":{var k;const B=(k=R.filter(U=>{if(S){const V=_m(U.placement);return V===v||V==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(V=>V>0).reduce((V,O)=>V+O,0)]).sort((U,V)=>U[1]-V[1])[0])==null?void 0:k[0];B&&(L=B);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function Bbe(e){const t=Tl(...e.map(s=>s.left)),n=Tl(...e.map(s=>s.top)),r=fa(...e.map(s=>s.right)),i=fa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function PVe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>lE(Bbe(i)))}const OVe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=bm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=PVe(c),d=lE(Bbe(c)),h=YW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(_m(n)==="y"){const R=f[0],P=f[f.length-1],$=Jf(n)==="top",k=R.top,D=P.bottom,M=$?R.left:P.left,L=$?R.right:P.right,B=L-M,U=D-k;return{top:k,bottom:D,left:M,right:L,width:B,height:U,x:M,y:k}}const g=Jf(n)==="left",y=fa(...f.map(R=>R.right)),v=Tl(...f.map(R=>R.left)),b=f.filter(R=>g?R.left===v:R.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,x=y,C=x-S,A=E-w;return{top:w,bottom:E,left:S,right:x,width:C,height:A,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function DVe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Jf(n),a=Ix(n),u=_m(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=bm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const $Ve=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await DVe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},MVe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=bm(e,t),l={x:n,y:r},c=await KW(t,u),f=_m(Jf(i)),d=qW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=VU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=VU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},LVe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=bm(e,t),c={x:n,y:r},f=_m(i),d=qW(f);let h=c[d],p=c[f];const m=bm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Jf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},FVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=bm(e,t),u=await KW(t,a),l=Jf(n),c=Ix(n),f=_m(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Tl(h-u[p],g),b=Tl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?Tl(b,y):y:E=c||w?Tl(v,g):g,w&&!c){const C=fa(u.left,0),A=fa(u.right,0),R=fa(u.top,0),P=fa(u.bottom,0);f?S=d-2*(C!==0||A!==0?C+A:fa(u.left,u.right)):E=h-2*(R!==0||P!==0?R+P:fa(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const x=await i.getDimensions(s.floating);return d!==x.width||h!==x.height?{reset:{rects:!0}}:{}}}};function Ube(e){const t=Lc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=LD(n)!==s||LD(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function XW(e){return Ei(e)?e:e.contextElement}function Tw(e){const t=XW(e);if(!Fl(t))return L0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Ube(t);let o=(s?LD(n.width):n.width)/r,a=(s?LD(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jVe=L0(0);function zbe(e){const t=Vu(e);return!HW()||!t.visualViewport?jVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vu(e)?!1:t}function I1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=XW(e);let o=L0(1);t&&(r?Ei(r)&&(o=Tw(r)):o=Tw(e));const a=BVe(s,n,r)?zbe(s):L0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Vu(s),h=r&&Ei(r)?Vu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Tw(m),y=m.getBoundingClientRect(),v=Lc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Vu(m),m=p.frameElement}}return lE({width:c,height:f,x:u,y:l})}function UVe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Vm(r),a=t?dL(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=L0(1);const c=L0(0),f=Fl(r);if((f||!f&&!s)&&((Ax(r)!=="body"||BI(o))&&(u=hL(r)),Fl(r))){const d=I1(r);l=Tw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function zVe(e){return Array.from(e.getClientRects())}function Vbe(e){return I1(Vm(e)).left+hL(e).scrollLeft}function VVe(e){const t=Vm(e),n=hL(e),r=e.ownerDocument.body,i=fa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=fa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Vbe(e);const a=-n.scrollTop;return Lc(r).direction==="rtl"&&(o+=fa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function HVe(e,t){const n=Vu(e),r=Vm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=HW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function qVe(e,t){const n=I1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Fl(e)?Tw(e):L0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function yoe(e,t,n){let r;if(t==="viewport")r=HVe(e,n);else if(t==="document")r=VVe(Vm(e));else if(Ei(t))r=qVe(t,n);else{const i=zbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return lE(r)}function Hbe(e,t){const n=vm(e);return n===t||!Ei(n)||M0(n)?!1:Lc(n).position==="fixed"||Hbe(n,t)}function WVe(e,t){const n=t.get(e);if(n)return n;let r=tm(e,[],!1).filter(a=>Ei(a)&&Ax(a)!=="body"),i=null;const s=Lc(e).position==="fixed";let o=s?vm(e):e;for(;Ei(o)&&!M0(o);){const a=Lc(o),u=VW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||BI(o)&&!u&&Hbe(e,o))?r=r.filter(c=>c!==o):i=a,o=vm(o)}return t.set(e,r),r}function GVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?dL(t)?[]:WVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=yoe(t,c,i);return l.top=fa(f.top,l.top),l.right=Tl(f.right,l.right),l.bottom=Tl(f.bottom,l.bottom),l.left=fa(f.left,l.left),l},yoe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function YVe(e){const{width:t,height:n}=Ube(e);return{width:t,height:n}}function KVe(e,t,n){const r=Fl(t),i=Vm(t),s=n==="fixed",o=I1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=L0(0);if(r||!r&&!s)if((Ax(t)!=="body"||BI(i))&&(a=hL(t)),r){const f=I1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Vbe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function O8(e){return Lc(e).position==="static"}function voe(e,t){return!Fl(e)||Lc(e).position==="fixed"?null:t?t(e):e.offsetParent}function qbe(e,t){const n=Vu(e);if(dL(e))return n;if(!Fl(e)){let i=vm(e);for(;i&&!M0(i);){if(Ei(i)&&!O8(i))return i;i=vm(i)}return n}let r=voe(e,t);for(;r&&dVe(r)&&O8(r);)r=voe(r,t);return r&&M0(r)&&O8(r)&&!VW(r)?n:r||hVe(e)||n}const XVe=async function(e){const t=this.getOffsetParent||qbe,n=this.getDimensions,r=await n(e.floating);return{reference:KVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QVe(e){return Lc(e).direction==="rtl"}const JVe={convertOffsetParentRelativeRectToViewportRelativeRect:UVe,getDocumentElement:Vm,getClippingRect:GVe,getOffsetParent:qbe,getElementRects:XVe,getClientRects:zVe,getDimensions:YVe,getScale:Tw,isElement:Ei,isRTL:QVe};function ZVe(e,t){let n=null,r;const i=Vm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=lN(c),p=lN(i.clientWidth-(l+f)),m=lN(i.clientHeight-(c+d)),g=lN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:fa(0,Tl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function eHe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=XW(e),c=i||s?[...l?tm(l):[],...tm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?ZVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?I1(e):null;u&&g();function g(){const y=I1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const tHe=$Ve,nHe=MVe,rHe=NVe,iHe=FVe,boe=RVe,sHe=OVe,oHe=LVe,aHe=(e,t,n)=>{const r=new Map,i={platform:JVe,...n},s={...i.platform,_c:r};return kVe(e,t,{...i,platform:s})};var QP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function jD(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jD(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!jD(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Wbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _oe(e,t){const n=Wbe(e);return Math.round(t*n)/n}function woe(e){const t=I.useRef(e);return QP(()=>{t.current=e}),t}function uHe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);jD(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=I.useCallback(B=>{B!==x.current&&(x.current=B,y(B))},[]),w=s||p,E=o||g,S=I.useRef(null),x=I.useRef(null),C=I.useRef(c),A=u!=null,R=woe(u),P=woe(i),$=I.useCallback(()=>{if(!S.current||!x.current)return;const B={placement:t,strategy:n,middleware:d};P.current&&(B.platform=P.current),aHe(S.current,x.current,B).then(U=>{const V={...U,isPositioned:!0};k.current&&!jD(C.current,V)&&(C.current=V,LI.flushSync(()=>{f(V)}))})},[d,t,n,P]);QP(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const k=I.useRef(!1);QP(()=>(k.current=!0,()=>{k.current=!1}),[]),QP(()=>{if(w&&(S.current=w),E&&(x.current=E),w&&E){if(R.current)return R.current(w,E,$);$()}},[w,E,$,R,A]);const D=I.useMemo(()=>({reference:S,floating:x,setReference:v,setFloating:b}),[v,b]),M=I.useMemo(()=>({reference:w,floating:E}),[w,E]),L=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!M.floating)return B;const U=_oe(M.floating,c.x),V=_oe(M.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+V+"px)",...Wbe(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,a,M.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:$,refs:D,elements:M,floatingStyles:L}),[c,$,D,M,L])}const lHe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?boe({element:r.current,padding:i}).fn(n):{}:r?boe({element:r,padding:i}).fn(n):{}}}},Gbe=(e,t)=>({...tHe(e),options:[e,t]}),QW=(e,t)=>({...nHe(e),options:[e,t]}),Eoe=(e,t)=>({...oHe(e),options:[e,t]}),qU=(e,t)=>({...rHe(e),options:[e,t]}),cHe=(e,t)=>({...iHe(e),options:[e,t]}),WU=(e,t)=>({...sHe(e),options:[e,t]}),Ybe=(e,t)=>({...lHe(e),options:[e,t]}),Kbe={...oD},fHe=Kbe.useInsertionEffect,dHe=fHe||(e=>e());function Ug(e){const t=I.useRef(()=>{});return dHe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var hh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let xoe=!1,hHe=0;const Soe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+hHe++;function pHe(){const[e,t]=I.useState(()=>xoe?Soe():void 0);return hh(()=>{e==null&&t(Soe())},[]),I.useEffect(()=>{xoe=!0},[]),e}const mHe=Kbe.useId,Xbe=mHe||pHe;function gHe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const yHe=I.createContext(null),vHe=I.createContext(null),JW=()=>{var e;return((e=I.useContext(yHe))==null?void 0:e.id)||null},ZW=()=>I.useContext(vHe);function eG(e){return"data-floating-ui-"+e}function D8(e){const t=I.useRef(e);return hh(()=>{t.current=e}),t}const Toe=eG("safe-polygon");function JP(e,t,n){return n&&!zU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function bHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=ZW(),p=JW(),m=D8(l),g=D8(u),y=D8(n),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),S=I.useRef(!0),x=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var M;const L=(M=i.current.openEvent)==null?void 0:M.type;return(L==null?void 0:L.includes("mouse"))&&L!=="mousedown"},[i]);I.useEffect(()=>{if(!a)return;function M(L){let{open:B}=L;B||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",M),()=>{s.off("openchange",M)}},[a,s]),I.useEffect(()=>{if(!a||!m.current||!n)return;function M(B){A()&&r(!1,B,"hover")}const L=Kv(o.floating).documentElement;return L.addEventListener("mouseleave",M),()=>{L.removeEventListener("mouseleave",M)}},[o.floating,n,r,a,m,A]);const R=I.useCallback(function(M,L,B){L===void 0&&(L=!0),B===void 0&&(B="hover");const U=JP(g.current,"close",v.current);U&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,M,B),U)):L&&(clearTimeout(b.current),r(!1,M,B))},[g,r]),P=Ug(()=>{C.current(),w.current=void 0}),$=Ug(()=>{if(x.current){const M=Kv(o.floating).body;M.style.pointerEvents="",M.removeAttribute(Toe),x.current=!1}});I.useEffect(()=>{if(!a)return;function M(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function L(O){if(clearTimeout(b.current),S.current=!1,c&&!zU(v.current)||f>0&&!JP(g.current,"open"))return;const z=JP(g.current,"open",v.current);z?b.current=window.setTimeout(()=>{y.current||r(!0,O,"hover")},z):r(!0,O,"hover")}function B(O){if(M())return;C.current();const z=Kv(o.floating);if(clearTimeout(E.current),m.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=m.current({...i.current.floatingContext,tree:h,x:O.clientX,y:O.clientY,onClose(){$(),P(),R(O,!0,"safe-polygon")}});const j=w.current;z.addEventListener("mousemove",j),C.current=()=>{z.removeEventListener("mousemove",j)};return}(v.current==="touch"?!sA(o.floating,O.relatedTarget):!0)&&R(O)}function U(O){M()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:O.clientX,y:O.clientY,onClose(){$(),P(),R(O)}})(O))}if(Ei(o.domReference)){var V;const O=o.domReference;return n&&O.addEventListener("mouseleave",U),(V=o.floating)==null||V.addEventListener("mouseleave",U),d&&O.addEventListener("mousemove",L,{once:!0}),O.addEventListener("mouseenter",L),O.addEventListener("mouseleave",B),()=>{var z;n&&O.removeEventListener("mouseleave",U),(z=o.floating)==null||z.removeEventListener("mouseleave",U),d&&O.removeEventListener("mousemove",L),O.removeEventListener("mouseenter",L),O.removeEventListener("mouseleave",B)}}},[o,a,e,c,f,d,R,P,$,r,n,y,h,g,m,i]),hh(()=>{var M;if(a&&n&&(M=m.current)!=null&&M.__options.blockPointerEvents&&A()){const B=Kv(o.floating).body;B.setAttribute(Toe,""),B.style.pointerEvents="none",x.current=!0;const U=o.floating;if(Ei(o.domReference)&&U){var L;const V=o.domReference,O=h==null||(L=h.nodesRef.current.find(z=>z.id===p))==null||(L=L.context)==null?void 0:L.elements.floating;return O&&(O.style.pointerEvents=""),V.style.pointerEvents="auto",U.style.pointerEvents="auto",()=>{V.style.pointerEvents="",U.style.pointerEvents=""}}}},[a,n,p,o,h,m,A]),hh(()=>{n||(v.current=void 0,P(),$())},[n,P,$]),I.useEffect(()=>()=>{P(),clearTimeout(b.current),clearTimeout(E.current),$()},[a,o.domReference,P,$]);const k=I.useMemo(()=>{function M(L){v.current=L.pointerType}return{onPointerDown:M,onPointerEnter:M,onMouseMove(L){const{nativeEvent:B}=L;function U(){!S.current&&!y.current&&r(!0,B,"hover")}c&&!zU(v.current)||n||f===0||(clearTimeout(E.current),v.current==="touch"?U():E.current=window.setTimeout(U,f))}}},[c,r,n,y,f]),D=I.useMemo(()=>({onMouseEnter(){clearTimeout(b.current)},onMouseLeave(M){R(M.nativeEvent,!1)}}),[R]);return I.useMemo(()=>a?{reference:k,floating:D}:{},[a,k,D])}const GU=()=>{},Qbe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:GU,setState:GU,isInstantPhase:!1}),Jbe=()=>I.useContext(Qbe);function _He(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return hh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Qbe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function wHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Jbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return hh(()=>{u&&(f({delay:{open:1,close:JP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),hh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),hh(()=>{l===GU||!n||l(o)},[n,l,o]),a}function $8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const EHe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},xHe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Coe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function SHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=ZW(),g=Ug(typeof u=="function"?u:()=>!1),y=typeof u=="function"?g:u,v=I.useRef(!1),b=I.useRef(!1),{escapeKey:w,outsidePress:E}=Coe(h),{escapeKey:S,outsidePress:x}=Coe(p),C=Ug(D=>{var M;if(!n||!o||!a||D.key!=="Escape")return;const L=(M=s.current.floatingContext)==null?void 0:M.nodeId,B=m?$8(m.nodesRef.current,L):[];if(!w&&(D.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(V=>{var O;if((O=V.context)!=null&&O.open&&!V.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,vVe(D)?D.nativeEvent:D,"escape-key")}),A=Ug(D=>{var M;const L=()=>{var B;C(D),(B=k_(D))==null||B.removeEventListener("keydown",L)};(M=k_(D))==null||M.addEventListener("keydown",L)}),R=Ug(D=>{var M;const L=v.current;v.current=!1;const B=b.current;if(b.current=!1,l==="click"&&B||L||typeof y=="function"&&!y(D))return;const U=k_(D),V="["+eG("inert")+"]",O=Kv(i.floating).querySelectorAll(V);let z=Ei(U)?U:null;for(;z&&!M0(z);){const G=vm(z);if(M0(G)||!Ei(G))break;z=G}if(O.length&&Ei(U)&&!bVe(U)&&!sA(U,i.floating)&&Array.from(O).every(G=>!sA(z,G)))return;if(Fl(U)&&k){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,te=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let he=te&&D.offsetX>U.clientWidth;if(te&&Lc(U).direction==="rtl"&&(he=D.offsetX<=U.offsetWidth-U.clientWidth),he||G&&D.offsetY>U.clientHeight)return}const W=(M=s.current.floatingContext)==null?void 0:M.nodeId,j=m&&$8(m.nodesRef.current,W).some(G=>{var te;return P8(D,(te=G.context)==null?void 0:te.elements.floating)});if(P8(D,i.floating)||P8(D,i.domReference)||j)return;const H=m?$8(m.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(te=>{var he;if((he=te.context)!=null&&he.open&&!te.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,D,"outside-press")}),P=Ug(D=>{var M;const L=()=>{var B;R(D),(B=k_(D))==null||B.removeEventListener(l,L)};(M=k_(D))==null||M.addEventListener(l,L)});I.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=E;function D(B){r(!1,B,"ancestor-scroll")}const M=Kv(i.floating);a&&M.addEventListener("keydown",S?A:C,S),y&&M.addEventListener(l,x?P:R,x);let L=[];return d&&(Ei(i.domReference)&&(L=tm(i.domReference)),Ei(i.floating)&&(L=L.concat(tm(i.floating))),!Ei(i.reference)&&i.reference&&i.reference.contextElement&&(L=L.concat(tm(i.reference.contextElement)))),L=L.filter(B=>{var U;return B!==((U=M.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",D,{passive:!0})}),()=>{a&&M.removeEventListener("keydown",S?A:C,S),y&&M.removeEventListener(l,x?P:R,x),L.forEach(B=>{B.removeEventListener("scroll",D)})}},[s,i,a,y,l,n,r,d,o,w,E,C,S,A,R,x,P]),I.useEffect(()=>{v.current=!1},[y,l]);const $=I.useMemo(()=>({onKeyDown:C,[EHe[f]]:D=>{c&&r(!1,D.nativeEvent,"reference-press")}}),[C,r,c,f]),k=I.useMemo(()=>({onKeyDown:C,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[xHe[l]]:()=>{v.current=!0}}),[C,l]);return I.useMemo(()=>o?{reference:$,floating:k}:{},[o,$,k])}function THe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Xbe(),s=I.useRef({}),[o]=I.useState(()=>gHe()),a=JW()!=null,[u,l]=I.useState(r.reference),c=Ug((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function tG(e){e===void 0&&(e={});const{nodeId:t}=e,n=THe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=ZW();hh(()=>{c&&(f.current=c)},[c]);const h=uHe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Ei(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Ei(b)||b===null)&&(f.current=b,o(b)),(Ei(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ei(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return hh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function CHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);I.useEffect(()=>{if(!a)return;const h=Vu(o.domReference);function p(){!n&&Fl(o.domReference)&&o.domReference===poe(Kv(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),I.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=I.useMemo(()=>({onPointerDown(h){pVe(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=k_(h.nativeEvent);if(u&&Ei(p))try{if(mVe()&&gVe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!wVe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=Ei(p)&&p.hasAttribute(eG("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const v=poe(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||sA((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,v)||sA(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return I.useMemo(()=>a?{reference:d}:{},[a,d])}const Aoe="active",Ioe="selected";function M8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Aoe]:o,[Ioe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Aoe,Ioe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function AHe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=I.useCallback(a=>M8(a,e,"reference"),t),s=I.useCallback(a=>M8(a,e,"floating"),n),o=I.useCallback(a=>M8(a,e,"item"),r);return I.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const IHe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function kHe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=IHe.get(o))!=null?n:o,u=Xbe(),c=JW()!=null,f=I.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=I.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=I.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return I.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function Zbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function koe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Roe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const RHe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function NHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[RHe[u]]:r},f=-t/2;return u==="left"?{...c,...koe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...koe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Roe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Roe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const nG=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Wh();return s?_.jsx("div",{...l,ref:c,style:{...u,...NHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});nG.displayName="@mantine/core/FloatingArrow";const[PHe,e_e]=ho("Popover component was not found in the tree");function pL({children:e,active:t=!0,refProp:n="ref"}){const r=E7e(t),i=ns(r,e==null?void 0:e.ref);return Ey(e)?I.cloneElement(e,{[n]:i}):e}function t_e(e){return _.jsx(zW,{tabIndex:-1,"data-autofocus":!0,...e})}pL.displayName="@mantine/core/FocusTrap";t_e.displayName="@mantine/core/FocusTrapInitialFocus";pL.InitialFocus=t_e;function OHe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const DHe={},n_e=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=Te("Portal",DHe,e),[s,o]=I.useState(!1),a=I.useRef(null);return gb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:OHe(i),NW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:LI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});n_e.displayName="@mantine/core/Portal";function UI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(n_e,{...n,children:t}):_.jsx(_.Fragment,{children:t})}UI.displayName="@mantine/core/OptionalPortal";const eT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Se(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),cN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...eT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...eT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...eT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...eT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...eT("top"),common:{transformOrigin:"top right"}}},Noe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function $He({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in cN?{transitionProperty:cN[e].transitionProperty,...i,...cN[e].common,...cN[e][Noe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Noe[t]]}}function MHe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Ts(),f=PW(),d=c.respectReducedMotion?f:!1,[h,p]=I.useState(d?0:e),[m,g]=I.useState(r?"entered":"exited"),y=I.useRef(-1),v=I.useRef(-1),b=I.useRef(-1),w=S=>{const x=S?i:s,C=S?o:a;window.clearTimeout(y.current);const A=d?0:S?e:t;p(A),A===0?(typeof x=="function"&&x(),typeof C=="function"&&C(),g(S?"entered":"exited")):b.current=requestAnimationFrame(()=>{bUe.flushSync(()=>{g(S?"pre-entering":"pre-exiting")}),b.current=requestAnimationFrame(()=>{typeof x=="function"&&x(),g(S?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof C=="function"&&C(),g(S?"entered":"exited")},A)})})},E=S=>{if(window.clearTimeout(v.current),typeof(S?u:l)!="number"){w(S);return}v.current=window.setTimeout(()=>{w(S)},S?u:l)};return Mc(()=>{E(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(b.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Hm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=MHe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s($He({transition:t,duration:h,state:p,timingFunction:m}))})}Hm.displayName="@mantine/core/Transition";var r_e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const LHe={},rG=Fe((e,t)=>{var g,y,v,b;const n=Te("PopoverDropdown",LHe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=e_e(),h=ibe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ns(t,d.floating);return d.disabled?null:_.jsx(UI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Hm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(pL,{active:d.trapFocus,children:_.jsxs(Ee,{...p,...f,variant:u,ref:m,onKeyDownCapture:l7e(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Se(d.width)},i]}),children:[o,_.jsx(nG,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});rG.classes=r_e;rG.displayName="@mantine/core/PopoverDropdown";const FHe={refProp:"ref",popupType:"dialog"},i_e=Fe((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Te("PopoverTarget",FHe,e);if(!Ey(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=e_e(),u=ns(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:es(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});i_e.displayName="@mantine/core/PopoverTarget";function s_e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return eHe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Mc(()=>{t.update()},r),Mc(()=>{s(o=>o+1)},[e])}function jHe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function BHe(e,t){const n=jHe(e.middlewares),r=[Gbe(e.offset)];return n.shift&&r.push(QW(typeof n.shift=="boolean"?{limiter:Eoe(),padding:5}:{limiter:Eoe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?qU():qU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?WU():WU(n.inline)),r.push(Ybe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(cHe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function UHe(e){const[t,n]=ds({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=tG({strategy:e.strategy,placement:e.position,middleware:BHe(e,()=>s)});return s_e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Mc(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Mc(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const zHe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Xc("popover"),__staticSelector:"Popover",width:"max-content"},VHe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:zr(t),"--popover-shadow":kW(n)}});function Yn(e){var be,pe,Oe,He,pt,Ge;const t=Te("Popover",zHe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:x,trapFocus:C,onClose:A,onOpen:R,onChange:P,zIndex:$,radius:k,shadow:D,id:M,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:V,returnFocus:O,variant:z,keepMounted:W,vars:j,floatingStrategy:H,...G}=t,te=vt({name:B,props:t,classes:r_e,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:VHe}),he=I.useRef(null),[fe,ge]=I.useState(null),[le,Me]=I.useState(null),{dir:ce}=Wh(),ze=Aa(M),Ve=UHe({middlewares:c,width:l,position:Zbe(ce,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:he,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:P,onOpen:R,onClose:A,strategy:H});d7e(()=>b&&Ve.onClose(),x,[fe,le]);const at=I.useCallback(_e=>{ge(_e),Ve.floating.refs.setReference(_e)},[Ve.floating.refs.setReference]),tt=I.useCallback(_e=>{Me(_e),Ve.floating.refs.setFloating(_e)},[Ve.floating.refs.setFloating]);return _.jsx(PHe,{value:{returnFocus:O,disabled:V,controlled:Ve.controlled,reference:at,floating:tt,x:Ve.floating.x,y:Ve.floating.y,arrowX:(Oe=(pe=(be=Ve.floating)==null?void 0:be.middlewareData)==null?void 0:pe.arrow)==null?void 0:Oe.x,arrowY:(Ge=(pt=(He=Ve.floating)==null?void 0:He.middlewareData)==null?void 0:pt.arrow)==null?void 0:Ge.y,opened:Ve.opened,arrowRef:he,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ve.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:$,radius:k,shadow:D,closeOnEscape:S,onClose:Ve.onClose,onToggle:Ve.onToggle,getTargetId:()=>`${ze}-target`,getDropdownId:()=>`${ze}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:te,floatingStrategy:H},children:n})}Yn.Target=i_e;Yn.Dropdown=rG;Yn.displayName="@mantine/core/Popover";Yn.extend=e=>e;var Df={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const HHe=I.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:es(Df.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Df.bar}),_.jsx("span",{className:Df.bar}),_.jsx("span",{className:Df.bar})]})),qHe=I.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:es(Df.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Df.dot}),_.jsx("span",{className:Df.dot}),_.jsx("span",{className:Df.dot})]})),WHe=I.forwardRef(({className:e,...t},n)=>_.jsx(Ee,{component:"span",className:es(Df.ovalLoader,e),...t,ref:n})),o_e={bars:HHe,oval:WHe,dots:qHe},GHe={loaders:o_e,type:"oval"},YHe=(e,{size:t,color:n})=>({root:{"--loader-size":Ht(t,"loader-size"),"--loader-color":n?Qr(n,e):void 0}}),Ku=Fe((e,t)=>{const n=Te("Loader",GHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:Df,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:YHe});return p?_.jsx(Ee,{...g("root"),ref:t,...m,children:p}):_.jsx(Ee,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Ku.defaultLoaders=o_e;Ku.classes=Df;Ku.displayName="@mantine/core/Loader";var mL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Poe={orientation:"horizontal"},KHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Se(t)}}),iG=Fe((e,t)=>{const n=Te("ActionIconGroup",Poe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Te("ActionIconGroup",Poe,e),p=vt({name:"ActionIconGroup",props:n,classes:mL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:KHe,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});iG.classes=mL;iG.displayName="@mantine/core/ActionIconGroup";const XHe={},QHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Ht(t,"ai-size"),"--ai-radius":n===void 0?void 0:zr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Cl=Ws((e,t)=>{const n=Te("ActionIcon",XHe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,x=vt({name:["ActionIcon",p],props:n,className:r,style:u,classes:mL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:QHe});return _.jsxs(Bs,{...x("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(Hm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(Ee,{component:"span",...x("loader",{style:C}),"aria-hidden":!0,children:_.jsx(Ku,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ee,{component:"span",mod:{loading:l},...x("icon"),children:y})]})});Cl.classes=mL;Cl.displayName="@mantine/core/ActionIcon";Cl.Group=iG;const a_e=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));a_e.displayName="@mantine/core/CloseIcon";var u_e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const JHe={variant:"subtle"},ZHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Ht(t,"cb-size"),"--cb-radius":n===void 0?void 0:zr(n),"--cb-icon-size":Se(r)}}),vb=Ws((e,t)=>{const n=Te("CloseButton",JHe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:l,classes:u_e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:ZHe});return _.jsxs(Bs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(a_e,{}),i]})});vb.classes=u_e;vb.displayName="@mantine/core/CloseButton";function eqe(e){return I.Children.toArray(e).filter(Boolean)}var l_e={root:"m_4081bf90"};const tqe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},nqe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ll(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Kn=Fe((e,t)=>{const n=Te("Group",tqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=eqe(u),E=w.length,S=Ll(l??"md"),C={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},A=vt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:l_e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:nqe});return _.jsx(Ee,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Kn.classes=l_e;Kn.displayName="@mantine/core/Group";var c_e={root:"m_9814e45f"};const rqe={zIndex:Xc("modal")},iqe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Ld(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Se(i)})`:void 0,"--overlay-radius":s===void 0?void 0:zr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),oA=Ws((e,t)=>{const n=Te("Overlay",rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=vt({name:"Overlay",props:n,classes:c_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iqe});return _.jsx(Ee,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});oA.classes=c_e;oA.displayName="@mantine/core/Overlay";const[sqe,qm]=ho("ModalBase component was not found in tree");function oqe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=PW()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function aqe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Aa(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=oqe({opened:n,transitionDuration:d});return ube("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),ibe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const f_e=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:x,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:R}=aqe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:P,...$}=v||{};return _.jsx(UI,{...c,withinPortal:l,children:_.jsx(sqe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:x,setTitleMounted:A,setBodyMounted:R,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(sL,{enabled:C&&f,...$,children:_.jsx(Ee,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Xc("modal")).toString(),"--mb-shadow":kW(p),"--mb-padding":Ll(m)},children:d})},P)})})});function uqe(){const e=qm();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var cE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const sG=I.forwardRef(({className:e,...t},n)=>{const r=uqe(),i=qm();return _.jsx(Ee,{ref:n,...t,id:r,className:es({[cE.body]:!i.unstyled},e)})});sG.displayName="@mantine/core/ModalBaseBody";const oG=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=qm();return _.jsx(vb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:es({[cE.close]:!i.unstyled},e),unstyled:i.unstyled})});oG.displayName="@mantine/core/ModalBaseCloseButton";const d_e=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=qm();return _.jsx(Hm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:es({[cE.inner]:!a.unstyled},n.className),children:_.jsx(pL,{active:a.opened&&a.trapFocus,children:_.jsx(fL,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:es({[cE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),aG=I.forwardRef(({className:e,...t},n)=>{const r=qm();return _.jsx(Ee,{component:"header",ref:n,className:es({[cE.header]:!r.unstyled},e),...t})});aG.displayName="@mantine/core/ModalBaseHeader";const lqe={duration:200,timingFunction:"ease",transition:"fade"};function cqe(e){const t=qm();return{...lqe,...t.transitionProps,...e}}const uG=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=qm(),o=cqe(t);return _.jsx(Hm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(oA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});uG.displayName="@mantine/core/ModalBaseOverlay";function fqe(){const e=qm();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const lG=I.forwardRef(({className:e,...t},n)=>{const r=fqe(),i=qm();return _.jsx(Ee,{component:"h2",ref:n,className:es({[cE.title]:!i.unstyled},e),...t,id:r})});lG.displayName="@mantine/core/ModalBaseTitle";function h_e({children:e}){return _.jsx(_.Fragment,{children:e})}const[dqe,kx]=mb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Jc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Ooe={},hqe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Se(2)})`}}),gL=Fe((e,t)=>{const n=Te("InputDescription",Ooe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Te("InputDescription",Ooe,n),p=kx(),m=vt({name:["InputWrapper",c],props:n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:hqe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});gL.classes=Jc;gL.displayName="@mantine/core/InputDescription";const pqe={},mqe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Se(2)})`}}),yL=Fe((e,t)=>{const n=Te("InputError",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:mqe}),m=kx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});yL.classes=Jc;yL.displayName="@mantine/core/InputError";const Doe={labelElement:"label"},gqe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0}}),vL=Fe((e,t)=>{const n=Te("InputLabel",Doe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Te("InputLabel",Doe,n),b=vt({name:["InputWrapper",m],props:n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:gqe}),w=kx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(Ee,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});vL.classes=Jc;vL.displayName="@mantine/core/InputLabel";const $oe={},cG=Fe((e,t)=>{const n=Te("InputPlaceholder",$oe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Te("InputPlaceholder",$oe,n),p=vt({name:["InputPlaceholder",l],props:n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ee,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});cG.classes=Jc;cG.displayName="@mantine/core/InputPlaceholder";function yqe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const vqe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},bqe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Se(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Se(2)})`}}),fG=Fe((e,t)=>{const n=Te("InputWrapper",vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:x,required:C,__stylesApiProps:A,mod:R,...P}=n,$=vt({name:["InputWrapper",f],props:A||n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bqe}),k={size:l,variant:c,__staticSelector:f},D=Aa(x),M=typeof S=="boolean"?S:C,L=(b==null?void 0:b.id)||`${D}-error`,B=(v==null?void 0:v.id)||`${D}-description`,U=D,V=!!m&&typeof m!="boolean",O=!!g,z=`${V?L:""} ${O?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${D}-label`,H=p&&_.jsx(vL,{labelElement:w,id:j,htmlFor:U,required:M,...k,...y,children:p},"label"),G=O&&_.jsx(gL,{...v,...k,size:(v==null?void 0:v.size)||k.size,id:(v==null?void 0:v.id)||B,children:g},"description"),te=_.jsx(I.Fragment,{children:d(E)},"input"),he=V&&I.createElement(yL,{...b,...k,size:(b==null?void 0:b.size)||k.size,key:"error",id:(b==null?void 0:b.id)||L},m),fe=h.map(ge=>{switch(ge){case"label":return H;case"input":return te;case"description":return G;case"error":return he;default:return null}});return _.jsx(dqe,{value:{getStyles:$,describedBy:W,inputId:U,labelId:j,...yqe(h,{hasDescription:O,hasError:V})},children:_.jsx(Ee,{ref:t,variant:c,size:l,mod:[{error:!!m},R],...$("root"),...P,children:fe})})});fG.classes=Jc;fG.displayName="@mantine/core/InputWrapper";const _qe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},wqe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Ht(t.size,"input-height"),"--input-fz":lo(t.size),"--input-radius":t.radius===void 0?void 0:zr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Se(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Se(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Ht(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),si=Ws((e,t)=>{const n=Te("Input",_qe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:x,vars:C,pointer:A,multiline:R,radius:P,id:$,withAria:k,withErrorStyles:D,mod:M,inputSize:L,...B}=n,{styleProps:U,rest:V}=yb(B),O=kx(),z={offsetBottom:O==null?void 0:O.offsetBottom,offsetTop:O==null?void 0:O.offsetTop},W=vt({name:["Input",l],props:c||n,classes:Jc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:wqe}),j=k?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":O==null?void 0:O.describedBy,id:(O==null?void 0:O.inputId)||$}:{};return _.jsxs(Ee,{...W("wrapper"),...U,...d,mod:[{error:!!h&&D,pointer:A,disabled:p,multiline:R,"data-with-right-section":!!v,"data-with-left-section":!!m},M],variant:x,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ee,{component:"input",...V,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&D},variant:x,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});si.classes=Jc;si.Wrapper=fG;si.Label=vL;si.Error=yL;si.Description=gL;si.Placeholder=cG;si.displayName="@mantine/core/Input";function p_e(e,t,n){const r=Te(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:x,variant:C,vars:A,mod:R,...P}=r,{styleProps:$,rest:k}=yb(P),D={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:x,variant:C,id:v,mod:R,...y};return{...k,classNames:u,styles:l,unstyled:f,wrapperProps:{...D,...$},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const Eqe={__staticSelector:"InputBase",withAria:!0},Zc=Ws((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=p_e("InputBase",Eqe,e);return _.jsx(si.Wrapper,{...r,children:_.jsx(si,{...n,...i,ref:t})})});Zc.classes={...si.classes,...si.Wrapper.classes};Zc.displayName="@mantine/core/InputBase";const xqe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var m_e={root:"m_8bffd616"};const Sqe={},tn=Ws((e,t)=>{const n=Te("Flex",Sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ts(),b=lL(),w=vbe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:xqe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(jI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(Ee,{ref:t,...y("root",{className:b,style:Sx(w.inlineStyles)}),...g})]})});tn.classes=m_e;tn.displayName="@mantine/core/Flex";function Tqe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Cqe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{Tqe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),A7e(()=>{fbe()!=="test"&&o(!0)},20,{autoInvoke:!0}),k7e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var g_e={root:"m_96b553a6"};const Aqe={},Iqe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),dG=Fe((e,t)=>{const n=Te("FloatingIndicator",Aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:g_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Iqe}),g=I.useRef(null),{initialized:y,hidden:v}=Cqe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ns(t,g);return!l||!c?null:_.jsx(Ee,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});dG.displayName="@mantine/core/FloatingIndicator";dG.classes=g_e;const[kqe,hG]=ho("Accordion component was not found in the tree");function aA({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Se(t),height:Se(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}aA.displayName="@mantine/core/AccordionChevron";const[Rqe,y_e]=ho("Accordion.Item component was not found in the tree");var zI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Nqe={},pG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Te("AccordionControl",Nqe,e),{value:m}=y_e(),g=hG(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(Bs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:IW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(Ee,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(Ee,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});pG.displayName="@mantine/core/AccordionControl";pG.classes=zI;const Pqe={},mG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Te("AccordionItem",Pqe,e),c=hG();return _.jsx(Rqe,{value:{value:a},children:_.jsx(Ee,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});mG.displayName="@mantine/core/AccordionItem";mG.classes=zI;const Oqe={},gG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Te("AccordionPanel",Oqe,e),{value:l}=y_e(),c=hG();return _.jsx(xbe,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});gG.displayName="@mantine/core/AccordionPanel";gG.classes=zI;const Dqe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(aA,{})},$qe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Se(n),"--accordion-radius":r===void 0?void 0:zr(r)}});function Su(e){const t=Te("Accordion",Dqe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:S,...x}=t,C=Aa(h),[A,R]=ds({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),P=D=>Array.isArray(A)?A.includes(D):D===A,$=D=>{const M=Array.isArray(A)?A.includes(D)?A.filter(L=>L!==D):[...A,D]:D===A?null:D;R(M)},k=vt({name:"Accordion",classes:zI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:$qe});return _.jsx(kqe,{value:{isItemActive:P,onChange:$,getControlId:PD(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:PD(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:k,variant:E,unstyled:o},children:_.jsx(Ee,{...k("root"),id:C,...x,variant:E,"data-accordion":!0,children:u})})}const Mqe=e=>e;Su.extend=Mqe;Su.classes=zI;Su.displayName="@mantine/core/Accordion";Su.Item=mG;Su.Panel=gG;Su.Control=pG;Su.Chevron=aA;var v_e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Lqe={},Fqe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:zr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},VI=Fe((e,t)=>{const n=Te("Alert",Lqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=vt({name:"Alert",classes:v_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fqe}),S=Aa(h),x=f&&`${S}-title`||void 0,C=`${S}-body`;return _.jsx(Ee,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":x,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:x,...E("label"),children:f})}),d&&_.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(vb,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});VI.classes=v_e;VI.displayName="@mantine/core/Alert";var b_e={root:"m_b6d8b162"};function jqe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Bqe={inherit:!1},Uqe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":lo(i),"--text-lh":rbe(i),"--text-gradient":t==="gradient"?FU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Qr(s,e):void 0}}),nt=Ws((e,t)=>{const n=Te("Text",Bqe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=vt({name:["Text",l],props:n,classes:b_e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:Uqe});return _.jsx(Ee,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":jqe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});nt.classes=b_e;nt.displayName="@mantine/core/Text";var __e={root:"m_849cf0da"};const zqe={underline:"hover"},bb=Ws((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Te("Anchor",zqe,e);return _.jsx(nt,{component:"a",ref:t,className:es({[__e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});bb.classes=__e;bb.displayName="@mantine/core/Anchor";const[Vqe,Rx]=ho("AppShell was not found in tree");var Ty={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Hqe={},yG=Fe((e,t)=>{const n=Te("AppShellAside",Hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Rx();return h.disabled?null:_.jsx(Ee,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});yG.classes=Ty;yG.displayName="@mantine/core/AppShellAside";const qqe={},vG=Fe((e,t)=>{var p;const n=Te("AppShellFooter",qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Rx();return h.disabled?null:_.jsx(Ee,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:es({[sL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});vG.classes=Ty;vG.displayName="@mantine/core/AppShellFooter";const Wqe={},bG=Fe((e,t)=>{var p;const n=Te("AppShellHeader",Wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Rx();return h.disabled?null:_.jsx(Ee,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:es({[sL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});bG.classes=Ty;bG.displayName="@mantine/core/AppShellHeader";const Gqe={},_G=Fe((e,t)=>{const n=Te("AppShellMain",Gqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Rx();return _.jsx(Ee,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});_G.classes=Ty;_G.displayName="@mantine/core/AppShellMain";function HI(e){return typeof e=="object"?e.base:e}function qI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function WI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Yqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),qI(s)){const f=Se(HI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(WI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Se(s.base),e["--app-shell-aside-offset"]=Se(s.base)),Mi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Se(s[f]),t[f]["--app-shell-aside-offset"]=Se(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=RW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function Kqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(qI(r)){const o=Se(HI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}WI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Se(r.base),s&&(e["--app-shell-footer-offset"]=Se(r.base))),Mi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Se(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function Xqe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(qI(r)){const o=Se(HI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}WI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Se(r.base),s&&(e["--app-shell-header-offset"]=Se(r.base))),Mi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Se(r[o]),s&&(t[o]["--app-shell-header-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function Qqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),qI(s)){const f=Se(HI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(WI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Se(s.base),e["--app-shell-navbar-offset"]=Se(s.base)),Mi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Se(s[f]),t[f]["--app-shell-navbar-offset"]=Se(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=RW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function L8(e){return Number(e)===0?"0px":Ll(e)}function Jqe({padding:e,baseStyles:t,minMediaStyles:n}){qI(e)&&(t["--app-shell-padding"]=L8(HI(e))),WI(e)&&(e.base&&(t["--app-shell-padding"]=L8(e.base)),Mi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=L8(e[r]))}))}function Zqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};Qqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Yqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),Xqe({baseStyles:u,minMediaStyles:o,header:t}),Kqe({baseStyles:u,minMediaStyles:o,footer:n}),Jqe({baseStyles:u,minMediaStyles:o,padding:i});const l=DD(Mi(o),s).map(d=>({query:`(min-width: ${ND(d.px)})`,styles:o[d.value]})),c=DD(Mi(a),s).map(d=>({query:`(max-width: ${ND(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function eWe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ts(),o=xy(),{media:a,baseStyles:u}=Zqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(jI,{media:a,styles:u,selector:o.cssVariablesSelector})}const tWe={},wG=Fe((e,t)=>{const n=Te("AppShellNavbar",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Rx();return h.disabled?null:_.jsx(Ee,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});wG.classes=Ty;wG.displayName="@mantine/core/AppShellNavbar";const nWe={},EG=Ws((e,t)=>{const n=Te("AppShellSection",nWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Rx();return _.jsx(Ee,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});EG.classes=Ty;EG.displayName="@mantine/core/AppShellSection";function rWe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return ube("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),gb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const iWe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Xc("app")},sWe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Or=Fe((e,t)=>{const n=Te("AppShell",iWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,x=vt({name:"AppShell",classes:Ty,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sWe}),C=rWe({disabled:y,transitionDuration:d});return _.jsxs(Vqe,{value:{getStyles:x,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(eWe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(Ee,{ref:t,...x("root"),mod:[{resizing:C,layout:g,disabled:y},E],...S})]})});Or.classes=Ty;Or.displayName="@mantine/core/AppShell";Or.Navbar=wG;Or.Header=bG;Or.Main=_G;Or.Aside=yG;Or.Footer=vG;Or.Section=EG;function w_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>w_e(t))}:e}function E_e(e){return e?e.map(t=>w_e(t)):[]}function xG(e){return e.reduce((t,n)=>"group"in n?{...t,...xG(n.items)}:(t[n.value]=n,t),{})}var Xu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const oWe={error:null},aWe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Ht(t,"combobox-chevron-size")}}),SG=Fe((e,t)=>{const n=Te("ComboboxChevron",oWe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=vt({name:"ComboboxChevron",classes:Xu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:aWe,rootSelector:"chevron"});return _.jsx(Ee,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});SG.classes=Xu;SG.displayName="@mantine/core/ComboboxChevron";const[uWe,ef]=ho("Combobox component was not found in tree"),x_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(vb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));x_e.displayName="@mantine/core/ComboboxClearButton";const lWe={},TG=Fe((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Te("ComboboxDropdown",lWe,e),u=ef();return _.jsx(Yn.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});TG.classes=Xu;TG.displayName="@mantine/core/ComboboxDropdown";const cWe={refProp:"ref"},S_e=Fe((e,t)=>{const{children:n,refProp:r}=Te("ComboboxDropdownTarget",cWe,e);if(ef(),!Ey(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Yn.Target,{ref:t,refProp:r,children:n})});S_e.displayName="@mantine/core/ComboboxDropdownTarget";const fWe={},CG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("ComboboxEmpty",fWe,e),u=ef();return _.jsx(Ee,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});CG.classes=Xu;CG.displayName="@mantine/core/ComboboxEmpty";function AG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=ef(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const dWe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},T_e=Fe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Te("ComboboxEventsTarget",dWe,e);if(!Ey(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=ef(),f=AG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ns(t,c.store.targetRef,n==null?void 0:n.ref)})});T_e.displayName="@mantine/core/ComboboxEventsTarget";const hWe={},IG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("ComboboxFooter",hWe,e),u=ef();return _.jsx(Ee,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});IG.classes=Xu;IG.displayName="@mantine/core/ComboboxFooter";const pWe={},kG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Te("ComboboxGroup",pWe,e),c=ef();return _.jsxs(Ee,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});kG.classes=Xu;kG.displayName="@mantine/core/ComboboxGroup";const mWe={},RG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("ComboboxHeader",mWe,e),u=ef();return _.jsx(Ee,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});RG.classes=Xu;RG.displayName="@mantine/core/ComboboxHeader";function C_e({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}C_e.displayName="@mantine/core/ComboboxHiddenInput";const gWe={},NG=Fe((e,t)=>{const n=Te("ComboboxOption",gWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=ef(),v=I.useId(),b=l||v;return _.jsx(Ee,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});NG.classes=Xu;NG.displayName="@mantine/core/ComboboxOption";const yWe={},PG=Fe((e,t)=>{const n=Te("ComboboxOptions",yWe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=ef(),d=Aa(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ee,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});PG.classes=Xu;PG.displayName="@mantine/core/ComboboxOptions";const vWe={withAriaAttributes:!0,withKeyboardNavigation:!0},OG=Fe((e,t)=>{const n=Te("ComboboxSearch",vWe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=ef(),h=d.getStyles("search"),p=AG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(si,{ref:ns(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});OG.classes=Xu;OG.displayName="@mantine/core/ComboboxSearch";const bWe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},A_e=Fe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Te("ComboboxTarget",bWe,e);if(!Ey(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=ef(),f=AG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(Yn.Target,{ref:ns(t,c.store.targetRef),children:d})});A_e.displayName="@mantine/core/ComboboxTarget";function _We(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function wWe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function EWe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function bL({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ds({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=I.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=I.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=I.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=I.useCallback(L=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const V=L>=U.length?0:L<0?U.length-1:L;return c.current=V,U!=null&&U[V]&&!U[V].hasAttribute("data-combobox-disabled")?(b(),U[V].setAttribute("data-combobox-selected","true"),U[V].setAttribute("aria-selected","true"),U[V].scrollIntoView({block:"nearest",behavior:o}),U[V].id):null},[o,b]),E=I.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(V=>V===L);return w(U)}return w(0)},[w]),S=I.useCallback(()=>w(wWe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),x=I.useCallback(()=>w(_We(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(EWe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var O;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${L}`));c.current=V,B!=null&&B.scrollIntoView&&((O=U[V])==null||O.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),R=I.useCallback(()=>{c.current=-1,b()},[b]),P=I.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),$=I.useCallback(L=>{l.current=L},[]),k=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),D=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),M=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:M,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:S,selectPreviousOption:x,resetSelectedOption:R,updateSelectedOptionIndex:A,listId:l.current,setListId:$,clickSelectedOption:P,searchRef:f,focusSearchInput:k,targetRef:d,focusTarget:D}}const xWe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},SWe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":lo(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Se(n),"--combobox-option-fz":lo(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")}});function vn(e){const t=Te("Combobox",xWe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=bL(),y=o||g,v=vt({name:h||"Combobox",classes:Xu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:SWe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(uWe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Yn,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const TWe=e=>e;vn.extend=TWe;vn.classes=Xu;vn.displayName="@mantine/core/Combobox";vn.Target=A_e;vn.Dropdown=TG;vn.Options=PG;vn.Option=NG;vn.Search=OG;vn.Empty=CG;vn.Chevron=SG;vn.Footer=IG;vn.Header=RG;vn.EventsTarget=T_e;vn.DropdownTarget=S_e;vn.Group=kG;vn.ClearButton=x_e;vn.HiddenInput=C_e;var I_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const k_e=I_e,_L=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=vt({name:e,props:t,className:n,style:y,classes:I_e,classNames:r,styles:i,unstyled:s});return _.jsx(Ee,{...S("root"),ref:E,__vars:{"--label-fz":lo(d),"--label-lh":Ht(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(Ee,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ee,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(si.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(si.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});_L.displayName="@mantine/core/InlineInput";const R_e=I.createContext(null),CWe=R_e.Provider,N_e=()=>I.useContext(R_e),[AWe,IWe]=mb();var P_e={card:"m_26775b0a"};const kWe={withBorder:!0},RWe=(e,{radius:t})=>({card:{"--card-radius":zr(t)}}),DG=Fe((e,t)=>{const n=Te("CheckboxCard",kWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:P_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RWe,rootSelector:"card"}),g=N_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(AWe,{value:{checked:y},children:_.jsx(Bs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});DG.displayName="@mantine/core/CheckboxCard";DG.classes=P_e;function $G({children:e,role:t}){const n=kx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const NWe={},MG=Fe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Te("CheckboxGroup",NWe,e),[c,f]=ds({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(CWe,{value:{value:c,onChange:d,size:s},children:_.jsx(si.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx($G,{role:"group",children:a})})})});MG.classes=si.Wrapper.classes;MG.displayName="@mantine/core/CheckboxGroup";function O_e({size:e,style:t,...n}){const r=e!==void 0?{width:Se(e),height:Se(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function D_e({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(O_e,{...t})}var $_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const PWe={icon:D_e},OWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=qh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:zr(t),"--checkbox-color":s==="outline"?u:Qr(n,e),"--checkbox-icon-color":i?Qr(i,e):Tx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},LG=Fe((e,t)=>{const n=Te("CheckboxIndicator",PWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=vt({name:"CheckboxIndicator",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OWe,rootSelector:"indicator"}),S=IWe(),x=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(Ee,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:x,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});LG.displayName="@mantine/core/CheckboxIndicator";LG.classes=$_e;var M_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const DWe={labelPosition:"right",icon:D_e},$We=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=qh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:zr(t),"--checkbox-color":s==="outline"?u:Qr(n,e),"--checkbox-icon-color":i?Qr(i,e):Tx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},wm=Fe((e,t)=>{const n=Te("Checkbox",DWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:x,rootRef:C,iconColor:A,onChange:R,autoContrast:P,mod:$,...k}=n,D=N_e(),M=d||(D==null?void 0:D.size),L=x,B=vt({name:"Checkbox",props:n,classes:M_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$We}),{styleProps:U,rest:V}=yb(k),O=Aa(f),z=D?{checked:D.value.includes(V.value),onChange:W=>{D.onChange(W),R==null||R(W)}}:{};return _.jsx(_L,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:O,size:M,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:$,...U,...p,children:_.jsxs(Ee,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(Ee,{component:"input",id:O,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:R,...V,...z,type:"checkbox"}),_.jsx(L,{indeterminate:S,...B("icon")})]})})});wm.classes={...M_e,...k_e};wm.displayName="@mantine/core/Checkbox";wm.Group=MG;wm.Indicator=LG;wm.Card=DG;function fE(e){return"group"in e}function L_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;fE(o)&&i.push({group:o.group,items:L_e({options:o.items,search:t,limit:n-i.length})}),fE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function MWe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function F_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(fE(n))F_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function LWe(e,t){return Array.isArray(e)?e.includes(t):e===t}function j_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!fE(e)){const a=LWe(n,e.value),u=t&&a&&_.jsx(O_e,{className:Xu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(vn.Option,{value:e.value,disabled:e.disabled,className:es({[Xu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(j_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(vn.Group,{label:e.group,children:o})}function B_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){F_e(e);const b=typeof i=="string"?(r||L_e)({options:e,search:u?i:"",limit:s??1/0}):e,w=MWe(b),E=b.map(S=>_.jsx(j_e,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},fE(S)?S.group:S.value));return _.jsx(vn.Dropdown,{hidden:t||n&&w,children:_.jsxs(vn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Cx.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(vn.Empty,{children:d})]})})}var U_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const FWe={},jWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Ht(s,"badge-height"),"--badge-padding-x":Ht(s,"badge-padding-x"),"--badge-fz":Ht(s,"badge-fz"),"--badge-radius":t===void 0?void 0:zr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Qr(n,e):void 0}}},l1=Ws((e,t)=>{const n=Te("Badge",FWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=vt({name:"Badge",props:n,classes:U_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jWe});return _.jsxs(Ee,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});l1.classes=U_e;l1.displayName="@mantine/core/Badge";var z_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const BWe={},UWe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?Qr(t,e):void 0,"--burger-size":Ht(n,"burger-size"),"--burger-line-size":r?Se(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),FG=Fe((e,t)=>{const n=Te("Burger",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=vt({name:"Burger",classes:z_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UWe});return _.jsxs(Bs,{...p("root"),ref:t,...h,children:[_.jsx(Ee,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});FG.classes=z_e;FG.displayName="@mantine/core/Burger";var wL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Moe={orientation:"horizontal"},zWe=(e,{borderWidth:t})=>({group:{"--button-border-width":Se(t)}}),jG=Fe((e,t)=>{const n=Te("ButtonGroup",Moe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Te("ButtonGroup",Moe,e),p=vt({name:"ButtonGroup",props:n,classes:wL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:zWe,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});jG.classes=wL;jG.displayName="@mantine/core/ButtonGroup";const VWe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Se(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},HWe={},qWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Ht(s,"button-height"),"--button-padding-x":Ht(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?lo(s.replace("compact-","")):lo(s),"--button-radius":t===void 0?void 0:zr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},xn=Ws((e,t)=>{const n=Te("Button",HWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...x}=n,C=vt({name:"Button",props:n,classes:wL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:qWe}),A=!!l,R=!!c;return _.jsxs(Bs,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":R},S],...x,children:[_.jsx(Hm,{mounted:!!p,transition:VWe,duration:150,children:P=>_.jsx(Ee,{component:"span",...C("loader",{style:P}),"aria-hidden":!0,children:_.jsx(Ku,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(Ee,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(Ee,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(Ee,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});xn.classes=wL;xn.displayName="@mantine/core/Button";xn.Group=jG;const[WWe,GWe]=ho("Card component was not found in tree");var BG={root:"m_e615b15f",section:"m_599a2148"};const YWe={},EL=Ws((e,t)=>{const n=Te("CardSection",YWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=GWe();return _.jsx(Ee,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});EL.classes=BG;EL.displayName="@mantine/core/CardSection";const KWe={},XWe=(e,{padding:t})=>({root:{"--card-padding":Ll(t)}}),_b=Ws((e,t)=>{const n=Te("Card",KWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=vt({name:"Card",props:n,classes:BG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XWe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===EL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(WWe,{value:{getStyles:d},children:_.jsx(fL,{ref:t,unstyled:a,...d("root"),...f,children:p})})});_b.classes=BG;_b.displayName="@mantine/core/Card";_b.Section=EL;var V_e={root:"m_4451eb3a"};const QWe={},Ja=Ws((e,t)=>{const n=Te("Center",QWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=vt({name:"Center",props:n,classes:V_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ee,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Ja.classes=V_e;Ja.displayName="@mantine/core/Center";var H_e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Loe={withShadow:!0},JWe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:zr(t),"--cs-size":Se(n)}}),Ah=Ws((e,t)=>{const n=Te("ColorSwatch",Loe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=Te("ColorSwatch",Loe,n),g=vt({name:"ColorSwatch",props:n,classes:H_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JWe});return _.jsxs(Ee,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[_.jsx("span",{...g("alphaOverlay")}),d&&_.jsx("span",{...g("shadowOverlay")}),_.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),_.jsx("span",{...g("childrenOverlay"),children:h})]})});Ah.classes=H_e;Ah.displayName="@mantine/core/ColorSwatch";const[ZWe,UG]=mb(null),zG=I.forwardRef(({position:e,...t},n)=>_.jsx(Ee,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));zG.displayName="@mantine/core/ColorPickerThumb";var VG={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const eGe={},HG=Fe((e,t)=>{var U;const n=Te("ColorSlider",eGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onChange:l,onChangeEnd:c,maxValue:f,round:d,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:b,__staticSelector:w="ColorPicker",...E}=n,S=vt({name:w,classes:VG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),C=((U=UG())==null?void 0:U.getStyles)||S,A=Ts(),[R,P]=I.useState({y:0,x:m/f}),$=I.useRef(R),k=V=>d?Math.round(V*f):V*f,{ref:D}=aL(({x:V,y:O})=>{$.current={x:V,y:O},l==null||l(k(V))},{onScrubEnd:()=>{const{x:V}=$.current;c==null||c(k(V)),b==null||b()},onScrubStart:v});Mc(()=>{P({y:0,x:m/f})},[m]);const M=(V,O)=>{V.preventDefault();const z=cbe(O);l==null||l(k(z.x)),c==null||c(k(z.x))},L=V=>{switch(V.key){case"ArrowRight":{M(V,{x:R.x+.05,y:R.y});break}case"ArrowLeft":{M(V,{x:R.x-.05,y:R.y});break}}},B=g.map((V,O)=>I.createElement("div",{...C("sliderOverlay"),style:V,key:O}));return _.jsxs(Ee,{...E,ref:ns(D,t),...C("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":f,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:L,"data-focus-ring":A.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[B,_.jsx(zG,{position:R,...C("thumb",{style:{top:Se(1),background:y}})})]})});HG.displayName="@mantine/core/ColorSlider";function Ec(e,t=0,n=10**t){return Math.round(n*e)/n}function tGe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const nGe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function rGe(e,t="deg"){return Number(e)*(nGe[t]||1)}const iGe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Foe(e){const t=iGe.exec(e);return t?tGe({h:rGe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function YU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:Ec(60*(o<0?o+6:o),3),s:Ec(i?s/i*100:0,3),v:Ec(i/255*100,3),a:r}}function KU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?YU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):YU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function sGe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Ec(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...KU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...KU(r),a:i}}const oGe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function joe(e){const t=oGe.exec(e);return t?YU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const q_e={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},aGe={hex:KU,hexa:sGe,rgb:joe,rgba:joe,hsl:Foe,hsla:Foe};function uGe(e){for(const[,t]of Object.entries(q_e))if(t.test(e))return!0;return!1}function fN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(q_e))if(r.test(t))return aGe[n](t);return{h:0,s:0,v:0,a:1}}const lGe={},W_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=Te("AlphaSlider",lGe,e);return _.jsx(HG,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(Ec(a,2)),onChangeEnd:a=>i==null?void 0:i(Ec(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Se(8)} ${Se(8)}`,backgroundPosition:`0 0, 0 ${Se(4)}, ${Se(4)} ${Se(-4)}, ${Se(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Se(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Se(4)} inset`}]})});W_e.displayName="@mantine/core/AlphaSlider";function G_e({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:Ec([o,l,u,u,c,o][f]*255),g:Ec([c,o,o,l,u,u][f]*255),b:Ec([u,u,c,o,o,l][f]*255),a:Ec(r,2)}}function Boe(e,t){const{r:n,g:r,b:i,a:s}=G_e(e);return t?`rgba(${n}, ${r}, ${i}, ${Ec(s,2)})`:`rgb(${n}, ${r}, ${i})`}function Uoe({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${Ec(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function ZP(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function Y_e(e){const{r:t,g:n,b:r}=G_e(e);return`#${ZP(t)}${ZP(n)}${ZP(r)}`}function cGe(e){const t=Math.round(e.a*255);return`${Y_e(e)}${ZP(t)}`}const F8={hex:Y_e,hexa:e=>cGe(e),rgb:e=>Boe(e,!1),rgba:e=>Boe(e,!0),hsl:e=>Uoe(e,!1),hsla:e=>Uoe(e,!0)};function wg(e,t){return t?e in F8?F8[e](t):F8.hex(t):"#000000"}const K_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=Te("HueSlider",{},e);return _.jsx(HG,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Se(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Se(4)} inset`}]})});K_e.displayName="@mantine/core/HueSlider";function X_e({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:u,onScrubEnd:l,...c}){const{getStyles:f}=UG(),[d,h]=I.useState({x:r.s/100,y:1-r.v/100}),p=I.useRef(d),{ref:m}=aL(({x:v,y:b})=>{p.current={x:v,y:b},t({s:Math.round(v*100),v:Math.round((1-b)*100)})},{onScrubEnd:()=>{const{x:v,y:b}=p.current;n({s:Math.round(v*100),v:Math.round((1-b)*100)}),l==null||l()},onScrubStart:u});I.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,b)=>{v.preventDefault();const w=cbe(b);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return _.jsxs(Ee,{...f("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":d.x,"aria-valuetext":wg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[_.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),_.jsx(zG,{position:d,...f("thumb",{style:{backgroundColor:a}})})]})}X_e.displayName="@mantine/core/Saturation";const Q_e=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...u},l)=>{const c=UG(),f=o.map((d,h)=>I.createElement(Ah,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:d,key:h,radius:"sm",onClick:()=>{n(d),r==null||r(d)},"aria-label":d,tabIndex:s?0:-1,"data-swatch":!0}));return _.jsx(Ee,{...c.getStyles("swatches"),ref:l,...u,children:f})});Q_e.displayName="@mantine/core/Swatches";const fGe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},dGe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":Ht(t,"cp-preview-size"),"--cp-width":Ht(t,"cp-width"),"--cp-body-spacing":Ll(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":Ht(t,"cp-thumb-size"),"--cp-saturation-height":Ht(t,"cp-saturation-height")}}),qG=Fe((e,t)=>{const n=Te("ColorPicker",fGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,format:l,value:c,defaultValue:f,onChange:d,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:b,swatches:w,swatchesPerRow:E,fullWidth:S,onColorSwatchClick:x,__staticSelector:C,mod:A,...R}=n,P=vt({name:C,props:n,classes:VG,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:u,varsResolver:dGe}),$=I.useRef(l),k=I.useRef(),D=I.useRef(-1),M=I.useRef(!1),L=l==="hexa"||l==="rgba"||l==="hsla",[B,U,V]=ds({value:c,defaultValue:f,finalValue:"#FFFFFF",onChange:d}),[O,z]=I.useState(fN(B)),W=()=>{window.clearTimeout(D.current),M.current=!0},j=()=>{window.clearTimeout(D.current),D.current=window.setTimeout(()=>{M.current=!1},200)},H=G=>{z(te=>{const he={...te,...G};return k.current=wg($.current,he),he}),U(k.current)};return Mc(()=>{uGe(c)&&!M.current&&z(fN(c))},[c]),Mc(()=>{$.current=l,U(wg(l,O))},[l]),_.jsx(ZWe,{value:{getStyles:P,unstyled:a},children:_.jsxs(Ee,{ref:t,...P("wrapper"),size:m,mod:[{"full-width":S},A],...R,children:[p&&_.jsxs(_.Fragment,{children:[_.jsx(X_e,{value:O,onChange:H,onChangeEnd:({s:G,v:te})=>h==null?void 0:h(wg($.current,{...O,s:G,v:te})),color:B,size:m,focusable:b,saturationLabel:g,onScrubStart:W,onScrubEnd:j}),_.jsxs("div",{...P("body"),children:[_.jsxs("div",{...P("sliders"),children:[_.jsx(K_e,{value:O.h,onChange:G=>H({h:G}),onChangeEnd:G=>h==null?void 0:h(wg($.current,{...O,h:G})),size:m,focusable:b,"aria-label":y,onScrubStart:W,onScrubEnd:j}),L&&_.jsx(W_e,{value:O.a,onChange:G=>H({a:G}),onChangeEnd:G=>{h==null||h(wg($.current,{...O,a:G}))},size:m,color:wg("hex",O),focusable:b,"aria-label":v,onScrubStart:W,onScrubEnd:j})]}),L&&_.jsx(Ah,{color:B,radius:"sm",size:"var(--cp-preview-size)",...P("preview")})]})]}),Array.isArray(w)&&_.jsx(Q_e,{data:w,swatchesPerRow:E,focusable:b,setValue:U,onChangeEnd:G=>{const te=wg(l,fN(G));x==null||x(te),h==null||h(te),V||z(fN(G))}})]})})});qG.classes=VG;qG.displayName="@mantine/core/ColorPicker";var J_e={root:"m_7485cace"};const hGe={},pGe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Ht(t,"container-size")}}),Fc=Fe((e,t)=>{const n=Te("Container",hGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=vt({name:"Container",classes:J_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pGe});return _.jsx(Ee,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Fc.classes=J_e;Fc.displayName="@mantine/core/Container";var Z_e={root:"m_3eebeb36",label:"m_9e365f20"};const mGe={orientation:"horizontal"},gGe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Qr(t,e):void 0,"--divider-border-style":n,"--divider-size":Ht(r,"divider-size")}}),xL=Fe((e,t)=>{const n=Te("Divider",mGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=vt({name:"Divider",classes:Z_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gGe});return _.jsx(Ee,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ee,{component:"span",mod:{position:d},...m("label"),children:f})})});xL.classes=Z_e;xL.displayName="@mantine/core/Divider";const[yGe,Nx]=ho("Drawer component was not found in tree");var Wm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const vGe={},SL=Fe((e,t)=>{const n=Te("DrawerBody",vGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(sG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});SL.classes=Wm;SL.displayName="@mantine/core/DrawerBody";const bGe={},TL=Fe((e,t)=>{const n=Te("DrawerCloseButton",bGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(oG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});TL.classes=Wm;TL.displayName="@mantine/core/DrawerCloseButton";const _Ge={},CL=Fe((e,t)=>{const n=Te("DrawerContent",_Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Nx(),d=f.scrollAreaComponent||h_e;return _.jsx(d_e,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});CL.classes=Wm;CL.displayName="@mantine/core/DrawerContent";const wGe={},AL=Fe((e,t)=>{const n=Te("DrawerHeader",wGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(aG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});AL.classes=Wm;AL.displayName="@mantine/core/DrawerHeader";const EGe={},IL=Fe((e,t)=>{const n=Te("DrawerOverlay",EGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(uG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});IL.classes=Wm;IL.displayName="@mantine/core/DrawerOverlay";function xGe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function SGe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const TGe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},CGe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},AGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xc("modal"),position:"left"},IGe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Ht(n,"drawer-size"),"--drawer-flex":SGe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":xGe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Se(r)}}),kL=Fe((e,t)=>{const n=Te("DrawerRoot",AGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Wh(),m=vt({name:"Drawer",classes:Wm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IGe}),g=(p==="rtl"?CGe:TGe)[c];return _.jsx(yGe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(f_e,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});kL.classes=Wm;kL.displayName="@mantine/core/DrawerRoot";const kGe={},RL=Fe((e,t)=>{const n=Te("DrawerTitle",kGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(lG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});RL.classes=Wm;RL.displayName="@mantine/core/DrawerTitle";const RGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xc("modal"),withOverlay:!0,withCloseButton:!0},Gh=Fe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Te("Drawer",RGe,e),l=!!n||s;return _.jsxs(kL,{ref:t,...u,children:[r&&_.jsx(IL,{...i}),_.jsxs(CL,{children:[l&&_.jsxs(AL,{children:[n&&_.jsx(RL,{children:n}),s&&_.jsx(TL,{...o})]}),_.jsx(SL,{children:a})]})]})});Gh.classes=Wm;Gh.displayName="@mantine/core/Drawer";Gh.Root=kL;Gh.Overlay=IL;Gh.Content=CL;Gh.Body=SL;Gh.Header=AL;Gh.Title=RL;Gh.CloseButton=TL;function NGe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[PGe,ewe]=ho("Grid component was not found in tree"),XU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,zoe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":XU(e,t),Voe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Hoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function OGe({span:e,order:t,offset:n,selector:r}){var d;const i=Ts(),s=ewe(),a=GT(e)===void 0?12:GT(e),u=Sx({"--col-order":(d=GT(t))==null?void 0:d.toString(),"--col-flex-grow":Voe(a,s.grow),"--col-flex-basis":XU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":zoe(a,s.columns,s.grow),"--col-offset":Hoe(GT(n),s.columns)}),l=Mi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Voe(e[p],s.grow),h[p]["--col-flex-basis"]=XU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=zoe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Hoe(n[p],s.columns)),h},{}),f=DD(Mi(l),i).filter(h=>Mi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(jI,{styles:u,media:f,selector:r})}var WG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const DGe={span:12},GG=Fe((e,t)=>{const n=Te("GridCol",DGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=ewe(),h=lL();return _.jsxs(_.Fragment,{children:[_.jsx(OGe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ee,{ref:t,...d.getStyles("col",{className:es(i,h),style:s,classNames:r,styles:o}),...f})]})});GG.classes=WG;GG.displayName="@mantine/core/GridCol";function $Ge({gutter:e,selector:t}){const n=Ts(),r=Sx({"--grid-gutter":Ll(GT(e))}),i=Mi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Ll(e[u])),a),{}),o=DD(Mi(i),n).filter(a=>Mi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(jI,{styles:r,media:o,selector:t})}const MGe={gutter:"md",grow:!1,columns:12},LGe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),xc=Fe((e,t)=>{const n=Te("Grid",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:WG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LGe}),y=lL();return _.jsxs(PGe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx($Ge,{selector:`.${y}`,...n}),_.jsx(Ee,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});xc.classes=WG;xc.displayName="@mantine/core/Grid";xc.Col=GG;var twe={root:"m_9e117634"};const FGe={},jGe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:zr(t),"--image-object-fit":n}}),Cy=Ws((e,t)=>{const n=Te("Image",FGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jGe});return g&&h?_.jsx(Ee,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ee,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Cy.classes=twe;Cy.displayName="@mantine/core/Image";function QU(){return QU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QU.apply(null,arguments)}function BGe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var UGe=I.useLayoutEffect,zGe=function(t){var n=I.useRef(t);return UGe(function(){n.current=t}),n},qoe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},VGe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&qoe(r.current,null),r.current=n,n&&qoe(n,i)},[n])},Woe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},HGe=function(t){Object.keys(Woe).forEach(function(n){t.style.setProperty(n,Woe[n],"important")})},Goe=HGe,Oa=null,Yoe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function qGe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Oa||(Oa=document.createElement("textarea"),Oa.setAttribute("tabindex","-1"),Oa.setAttribute("aria-hidden","true"),Goe(Oa)),Oa.parentNode===null&&document.body.appendChild(Oa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Oa.style[h]=o[h]}),Goe(Oa),Oa.value=t;var u=Yoe(Oa,e);Oa.value=t,u=Yoe(Oa,e),Oa.value="x";var l=Oa.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Koe=function(){},WGe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},GGe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],YGe=!!document.documentElement.currentStyle,KGe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=WGe(GGe,n),i=r.boxSizing;if(i==="")return null;YGe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},XGe=KGe;function nwe(e,t,n){var r=zGe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var QGe=function(t){nwe(window,"resize",t)},JGe=function(t){nwe(document.fonts,"loadingdone",t)},ZGe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],eYe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Koe:o,u=t.onHeightChange,l=u===void 0?Koe:u,c=BGe(t,ZGe),f=c.value!==void 0,d=I.useRef(null),h=VGe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:XGe(b);if(w){m.current=w;var E=qGe(w,b.value||b.placeholder||"x",s,i),S=E[0],x=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:x}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),QGe(g),JGe(g),I.createElement("textarea",QU({},c,{onChange:y,ref:h}))},tYe=I.forwardRef(eYe);const nYe={},NL=Fe((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Te("Textarea",nYe,e),u=n&&fbe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Zc,{component:u?tYe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});NL.classes=Zc.classes;NL.displayName="@mantine/core/Textarea";const[rYe,iYe]=ho("List component was not found in tree");var YG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const sYe={},KG=Fe((e,t)=>{const n=Te("ListItem",sYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=iYe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ee,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});KG.classes=YG;KG.displayName="@mantine/core/ListItem";const oYe={type:"unordered"},aYe=(e,{size:t,spacing:n})=>({root:{"--list-fz":lo(t),"--list-lh":rbe(t),"--list-spacing":Ll(n)}}),Vf=Fe((e,t)=>{const n=Te("List",oYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:YG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aYe});return _.jsx(rYe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(Ee,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Vf.classes=YG;Vf.displayName="@mantine/core/List";Vf.Item=KG;var rwe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Xoe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Xc("overlay")},uYe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),jl=Fe((e,t)=>{const n=Te("LoadingOverlay",Xoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ts(),g=vt({name:"LoadingOverlay",classes:rwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uYe}),y={...Xoe.overlayProps,...f};return _.jsx(Hm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(Ee,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Ku,{...g("loader"),unstyled:a,...c}),_.jsx(oA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(oA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});jl.classes=rwe;jl.displayName="@mantine/core/LoadingOverlay";const[lYe,GI]=ho("Menu component was not found in the tree");var Px={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const cYe={},XG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("MenuDivider",cYe,e),u=GI();return _.jsx(Ee,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});XG.classes=Px;XG.displayName="@mantine/core/MenuDivider";const fYe={},QG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Te("MenuDropdown",fYe,e),f=I.useRef(null),d=GI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Hp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Hp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Yn.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ns(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});QG.classes=Px;QG.displayName="@mantine/core/MenuDropdown";const dYe={},JG=Ws((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Te("MenuItem",dYe,e),p=GI(),m=Ts(),{dir:g}=Wh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=Hp(b.onMouseLeave,()=>p.setHovered(-1)),E=Hp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Hp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),x=Hp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?qh({color:a,theme:m}):null;return _.jsxs(Bs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:x,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ns(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:IW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});JG.classes=Px;JG.displayName="@mantine/core/MenuItem";const hYe={},ZG=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("MenuLabel",hYe,e),u=GI();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});ZG.classes=Px;ZG.displayName="@mantine/core/MenuLabel";const pYe={refProp:"ref"},iwe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Te("MenuTarget",pYe,e);if(!Ey(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=GI(),o=Hp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Hp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Hp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Yn.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});iwe.displayName="@mantine/core/MenuTarget";const mYe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Iu(e){const t=Te("Menu",mYe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,x=vt({name:"Menu",classes:Px,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:R}]=f7e(),[P,$]=ds({value:s,defaultValue:o,finalValue:!1,onChange:u}),[k,D]=I.useState(!1),M=()=>{$(!1),D(!1),P&&(i==null||i())},L=()=>{$(!0),!P&&(r==null||r())},B=()=>{P?M():L()},{openDropdown:U,closeDropdown:V}=NGe({open:L,close:M,closeDelay:p,openDelay:h}),O=j=>c7e("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=zm({classNames:m,styles:g,props:t});return Mc(()=>{R()},[P]),_.jsx(lYe,{value:{getStyles:x,opened:P,toggleDropdown:B,getItemIndex:O,hovered:C,setHovered:A,openedViaClick:k,setOpenedViaClick:D,closeOnItemClick:l,closeDropdown:d==="click"?M:V,openDropdown:d==="click"?L:U,closeDropdownImmediately:M,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Yn,{...S,opened:P,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Iu.extend=e=>e;Iu.classes=Px;Iu.displayName="@mantine/core/Menu";Iu.Item=JG;Iu.Label=ZG;Iu.Dropdown=QG;Iu.Target=iwe;Iu.Divider=XG;const[gYe,Ox]=ho("Modal component was not found in tree");var Gm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const yYe={},PL=Fe((e,t)=>{const n=Te("ModalBody",yYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(sG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});PL.classes=Gm;PL.displayName="@mantine/core/ModalBody";const vYe={},OL=Fe((e,t)=>{const n=Te("ModalCloseButton",vYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(oG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});OL.classes=Gm;OL.displayName="@mantine/core/ModalCloseButton";const bYe={},DL=Fe((e,t)=>{const n=Te("ModalContent",bYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ox(),f=c.scrollAreaComponent||h_e;return _.jsx(d_e,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Se(c.yOffset)} * 2))`},children:u})})});DL.classes=Gm;DL.displayName="@mantine/core/ModalContent";const _Ye={},$L=Fe((e,t)=>{const n=Te("ModalHeader",_Ye,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(aG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Gm;$L.displayName="@mantine/core/ModalHeader";const wYe={},ML=Fe((e,t)=>{const n=Te("ModalOverlay",wYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(uG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});ML.classes=Gm;ML.displayName="@mantine/core/ModalOverlay";const EYe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},xYe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:zr(t),"--modal-size":Ht(n,"modal-size"),"--modal-y-offset":Se(r),"--modal-x-offset":Se(i)}}),LL=Fe((e,t)=>{const n=Te("ModalRoot",EYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:Gm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xYe});return _.jsx(gYe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(f_e,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});LL.classes=Gm;LL.displayName="@mantine/core/ModalRoot";const SYe={},FL=Fe((e,t)=>{const n=Te("ModalTitle",SYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(lG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});FL.classes=Gm;FL.displayName="@mantine/core/ModalTitle";const TYe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},xs=Fe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Te("Modal",TYe,e),c=!!n||s;return _.jsxs(LL,{ref:t,radius:u,...l,children:[r&&_.jsx(ML,{...i}),_.jsxs(DL,{radius:u,children:[c&&_.jsxs($L,{children:[n&&_.jsx(FL,{children:n}),s&&_.jsx(OL,{...o})]}),_.jsx(PL,{children:a})]})]})});xs.classes=Gm;xs.displayName="@mantine/core/Modal";xs.Root=LL;xs.Overlay=ML;xs.Content=DL;xs.Body=PL;xs.Header=$L;xs.Title=FL;xs.CloseButton=OL;const[CYe,eY]=mb(),[AYe,IYe]=mb();var jL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const kYe={},RYe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Ht(t):Ht(n,"pg-gap")}}),tY=Fe((e,t)=>{const n=Te("PillGroup",kYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=eY(),h=(d==null?void 0:d.size)||l||void 0,p=vt({name:"PillGroup",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RYe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(AYe,{value:{size:h,disabled:c},children:_.jsx(Ee,{ref:t,size:h,...p("group"),...f})})});tY.classes=jL;tY.displayName="@mantine/core/PillGroup";const NYe={variant:"default"},PYe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Ht(n,"pill-fz"),"--pill-height":Ht(n,"pill-height"),"--pill-radius":t===void 0?void 0:zr(t)}}),k1=Fe((e,t)=>{const n=Te("Pill",NYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=IYe(),w=eY(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",x=vt({name:"Pill",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PYe,stylesCtx:{size:E}});return _.jsxs(Ee,{component:"span",ref:t,variant:S,size:E,...x("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...x("label"),children:c}),f&&_.jsx(vb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...x("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});k1.classes=jL;k1.displayName="@mantine/core/Pill";k1.Group=tY;var swe={field:"m_45c4369d"};const OYe={type:"visible"},nY=Fe((e,t)=>{const n=Te("PillsInputField",OYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=eY(),g=kx(),y=vt({name:"PillsInputField",classes:swe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(Ee,{component:"input",ref:ns(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});nY.classes=swe;nY.displayName="@mantine/core/PillsInputField";const DYe={},dE=Fe((e,t)=>{const n=Te("PillsInput",DYe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(CYe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Zc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});dE.displayName="@mantine/core/PillsInput";dE.Field=nY;function $Ye({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(fE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const MYe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},rY=Fe((e,t)=>{const n=Te("MultiSelect",MYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:x,limit:C,withScrollArea:A,maxDropdownHeight:R,searchValue:P,defaultSearchValue:$,onSearchChange:k,readOnly:D,disabled:M,onFocus:L,onBlur:B,onPaste:U,radius:V,rightSection:O,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:he,inputContainer:fe,inputWrapperOrder:ge,withAsterisk:le,labelProps:Me,descriptionProps:ce,errorProps:ze,wrapperProps:Ve,description:at,label:tt,error:be,maxValues:pe,searchable:Oe,nothingFoundMessage:He,withCheckIcon:pt,checkIconPosition:Ge,hidePickedOptions:_e,withErrorStyles:ct,name:bt,form:ye,id:Ne,clearable:We,clearButtonProps:Je,hiddenInputProps:xt,placeholder:wn,hiddenInputValuesDivider:yr,required:vr,mod:kr,renderOption:Kt,onRemove:Tn,onClear:rr,scrollAreaProps:ir,...Ho}=n,Bi=Aa(Ne),is=E_e(m),Ln=xG(is),Hn=bL({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Hn.resetSelectedOption()}}),{styleProps:gs,rest:{type:pp,autoComplete:cl,...Sd}}=yb(Ho),[xr,Ii]=ds({value:c,defaultValue:f,finalValue:[],onChange:d}),[li,hu]=ds({value:P,defaultValue:$,finalValue:"",onChange:k}),Ra=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Na,resolvedStyles:oe}=zm({props:n,styles:o,classNames:r}),ee=lt=>{h==null||h(lt),lt.key===" "&&!Oe&&(lt.preventDefault(),Hn.toggleDropdown()),lt.key==="Backspace"&&li.length===0&&xr.length>0&&(Tn==null||Tn(xr[xr.length-1]),Ii(xr.slice(0,xr.length-1)))},ae=xr.map((lt,Tt)=>{var Xt,On;return _.jsx(k1,{withRemoveButton:!D&&!((Xt=Ln[lt])!=null&&Xt.disabled),onRemove:()=>{Ii(xr.filter(Fn=>lt!==Fn)),Tn==null||Tn(lt)},unstyled:a,disabled:M,...Ra("pill"),children:((On=Ln[lt])==null?void 0:On.label)||lt},`${lt}-${Tt}`)});I.useEffect(()=>{w&&Hn.selectFirstOption()},[w,xr]);const Ce=We&&xr.length>0&&!M&&!D&&_.jsx(vn.ClearButton,{size:l,...Je,onClear:()=>{rr==null||rr(),Ii([]),hu("")}}),Ae=$Ye({data:is,value:xr});return _.jsxs(_.Fragment,{children:[_.jsxs(vn,{store:Hn,classNames:Na,styles:oe,unstyled:a,size:l,readOnly:D,__staticSelector:"MultiSelect",onOptionSubmit:lt=>{E==null||E(lt),hu(""),Hn.updateSelectedOptionIndex("selected"),xr.includes(Ln[lt].value)?(Ii(xr.filter(Tt=>Tt!==Ln[lt].value)),Tn==null||Tn(Ln[lt].value)):xr.length<pe&&Ii([...xr,Ln[lt].value])},...S,children:[_.jsx(vn.DropdownTarget,{children:_.jsx(dE,{...gs,__staticSelector:"MultiSelect",classNames:Na,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:M,radius:V,rightSection:O||Ce||_.jsx(vn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:he,inputContainer:fe,inputWrapperOrder:ge,withAsterisk:le,labelProps:Me,descriptionProps:ce,errorProps:ze,wrapperProps:Ve,description:at,label:tt,error:be,multiline:!0,withErrorStyles:ct,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!Oe,onClick:()=>Oe?Hn.openDropdown():Hn.toggleDropdown(),"data-expanded":Hn.dropdownOpened||void 0,id:Bi,required:vr,mod:kr,children:_.jsxs(k1.Group,{disabled:M,unstyled:a,...Ra("pillsList"),children:[ae,_.jsx(vn.EventsTarget,{autoComplete:cl,children:_.jsx(dE.Field,{...Sd,ref:t,id:Bi,placeholder:wn,type:!Oe&&!wn?"hidden":"visible",...Ra("inputField"),unstyled:a,onFocus:lt=>{L==null||L(lt),Oe&&Hn.openDropdown()},onBlur:lt=>{B==null||B(lt),Hn.closeDropdown(),hu("")},onKeyDown:ee,value:li,onChange:lt=>{hu(lt.currentTarget.value),Oe&&Hn.openDropdown(),w&&Hn.selectFirstOption()},disabled:M,readOnly:D||!Oe,pointer:!Oe})})]})})}),_.jsx(B_e,{data:_e?Ae:is,hidden:D||M,filter:x,search:li,limit:C,hiddenWhenEmpty:!He,withScrollArea:A,maxDropdownHeight:R,filterOptions:Oe,value:xr,checkIconPosition:Ge,withCheckIcon:pt,nothingFoundMessage:He,unstyled:a,labelId:tt?`${Bi}-label`:void 0,"aria-label":tt?void 0:Ho["aria-label"],renderOption:Kt,scrollAreaProps:ir})]}),_.jsx(vn.HiddenInput,{name:bt,valuesDivider:yr,value:xr,form:ye,disabled:M,...xt})]})});rY.classes={...Zc.classes,...vn.classes};rY.displayName="@mantine/core/MultiSelect";function owe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var uA;(function(e){e.event="event",e.props="prop"})(uA||(uA={}));function zg(){}function LYe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function lA(e){return!!(e||"").match(/\d/)}function Cw(e){return e==null}function FYe(e){return typeof e=="number"&&isNaN(e)}function awe(e){return Cw(e)||FYe(e)||typeof e=="number"&&!isFinite(e)}function uwe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function jYe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function BYe(e,t,n){var r=jYe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function UYe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function iY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function zYe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function lwe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Qoe(e,t){return Array(t+1).join(e)}function cwe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Qoe("0",Math.abs(o))+i:o>=a?i=i+Qoe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Joe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=iY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=lwe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Nv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var fwe=LYe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),VYe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function HYe(e,t,n){return Math.min(Math.max(e,t),n)}function j8(e){return Math.max(e.selectionStart,e.selectionEnd)}function qYe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function WYe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function GYe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function YYe(e,t,n,r,i,s,o){o===void 0&&(o=GYe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Zoe(e,t,n,r){var i=e.length;if(t=HYe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function KYe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(lA(e[n])||lA(e[n-1]));return t}function dwe(e,t,n,r,i,s){s===void 0&&(s=zg);var o=UYe(function(p,m){var g,y;return awe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?cwe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Cw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Cw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function XYe(e){return e.replace(/[^0-9]/g,"")}function QYe(e){return e}function JYe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=QYe);var a=e.removeFormatting;a===void 0&&(a=XYe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zg);var h=e.onKeyDown;h===void 0&&(h=zg);var p=e.onMouseUp;p===void 0&&(p=zg);var m=e.onFocus;m===void 0&&(m=zg);var g=e.onBlur;g===void 0&&(g=zg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=KYe);var b=e.isValidInputCharacter;b===void 0&&(b=lA);var w=e.isCharacterSame,E=owe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=dwe(y,u,!!l,o,a,c),x=S[0],C=x.formattedValue,A=x.numAsString,R=S[1],P=I.useRef(),$=I.useRef({formattedValue:C,numAsString:A}),k=function(be,pe){$.current={formattedValue:be.formattedValue,numAsString:be.value},R(be,pe)},D=I.useState(!1),M=D[0],L=D[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var V=o,O=function(be,pe){var Oe=parseFloat(pe);return{formattedValue:be,value:pe,floatValue:isNaN(Oe)?void 0:Oe}},z=function(be,pe,Oe){be.selectionStart===0&&be.selectionEnd===be.value.length||(Nv(be,pe),U.current.setCaretTimeout=setTimeout(function(){be.value===Oe&&be.selectionStart!==pe&&Nv(be,pe)},0))},W=function(be,pe,Oe){return Zoe(be,pe,v(be),Oe)},j=function(be,pe,Oe){var He=v(pe),pt=YYe(pe,C,be,Oe,He,b,w);return pt=Zoe(pe,pt,He),pt},H=function(be){var pe=be.formattedValue;pe===void 0&&(pe="");var Oe=be.input,He=be.source,pt=be.event,Ge=be.numAsString,_e;if(Oe){var ct=be.inputValue||Oe.value,bt=j8(Oe);Oe.value=pe,_e=j(ct,pe,bt),_e!==void 0&&z(Oe,_e,pe)}pe!==C&&k(O(pe,Ge),{event:pt,source:He})};I.useEffect(function(){var be=$.current,pe=be.formattedValue,Oe=be.numAsString;(C!==pe||A!==Oe)&&k(O(C,A),{event:void 0,source:uA.props})},[C,A]);var G=B.current?j8(B.current):void 0,te=typeof window<"u"?I.useLayoutEffect:I.useEffect;te(function(){var be=B.current;if(C!==$.current.formattedValue&&be){var pe=j($.current.formattedValue,C,G);be.value=C,z(be,pe,C)}},[C]);var he=function(be,pe,Oe){var He=pe.target,pt=P.current?VYe(P.current,He.selectionEnd):fwe(C,be),Ge=Object.assign(Object.assign({},pt),{lastValue:C}),_e=a(be,Ge),ct=V(_e);if(_e=a(ct,void 0),f&&!f(O(ct,_e))){var bt=pe.target,ye=j8(bt),Ne=j(be,C,ye);return bt.value=C,z(bt,Ne,C),!1}return H({formattedValue:ct,numAsString:_e,inputValue:be,event:pe,source:Oe,input:pe.target}),!0},fe=function(be,pe){pe===void 0&&(pe=0);var Oe=be.selectionStart,He=be.selectionEnd;P.current={selectionStart:Oe,selectionEnd:He+pe}},ge=function(be){var pe=be.target,Oe=pe.value,He=he(Oe,be,uA.event);He&&d(be),P.current=void 0},le=function(be){var pe=be.target,Oe=be.key,He=pe.selectionStart,pt=pe.selectionEnd,Ge=pe.value;Ge===void 0&&(Ge="");var _e;Oe==="ArrowLeft"||Oe==="Backspace"?_e=Math.max(He-1,0):Oe==="ArrowRight"?_e=Math.min(He+1,Ge.length):Oe==="Delete"&&(_e=He);var ct=0;Oe==="Delete"&&He===pt&&(ct=1);var bt=Oe==="ArrowLeft"||Oe==="ArrowRight";if(_e===void 0||He!==pt&&!bt){h(be),fe(pe,ct);return}var ye=_e;if(bt){var Ne=Oe==="ArrowLeft"?"left":"right";ye=W(Ge,_e,Ne),ye!==_e&&be.preventDefault()}else Oe==="Delete"&&!b(Ge[_e])?ye=W(Ge,_e,"right"):Oe==="Backspace"&&!b(Ge[_e])&&(ye=W(Ge,_e,"left"));ye!==_e&&z(pe,ye,Ge),h(be),fe(pe,ct)},Me=function(be){var pe=be.target,Oe=function(){var He=pe.selectionStart,pt=pe.selectionEnd,Ge=pe.value;if(Ge===void 0&&(Ge=""),He===pt){var _e=W(Ge,He);_e!==He&&z(pe,_e,Ge)}};Oe(),requestAnimationFrame(function(){Oe()}),p(be),fe(pe)},ce=function(be){be.persist&&be.persist();var pe=be.target,Oe=be.currentTarget;B.current=pe,U.current.focusTimeout=setTimeout(function(){var He=pe.selectionStart,pt=pe.selectionEnd,Ge=pe.value;Ge===void 0&&(Ge="");var _e=W(Ge,He);_e!==He&&!(He===0&&pt===Ge.length)&&z(pe,_e,Ge),m(Object.assign(Object.assign({},be),{currentTarget:Oe}))},0)},ze=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ve=M&&qYe()?"numeric":void 0,at=Object.assign({inputMode:Ve},E,{type:t,value:C,onChange:ge,onKeyDown:le,onMouseUp:Me,onFocus:ce,onBlur:ze});if(n==="text")return i?xi.createElement(xi.Fragment,null,i(C,E)||null):xi.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var tt=r;return xi.createElement(tt,Object.assign({},at,{ref:s}))}return xi.createElement("input",Object.assign({},at,{ref:s}))}function eae(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=BL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=iY(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=lwe(p,n,!!r)),l&&(h=BYe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function BL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function ZYe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function eKe(e,t){return new RegExp("(^-)|[0-9]|"+uwe(e),"g")}function tKe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function nKe(e,t,n){var r;t===void 0&&(t=WYe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=BL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(lA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,V){var O=!1,z=!1;s.startsWith("-")?O=!1:B.startsWith("--")?(O=!1,z=!0):o.startsWith("-")&&B.length===o.length?O=!1:B[0]==="-"&&(O=!0);var W=O?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,V-=W),{value:B,start:U,end:V,hasNegation:O}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,x=w.value,C=e.substring(c,f);e.length&&x.length&&(E>x.length-o.length||S<s.length)&&!(C&&o.startsWith(C))&&(e=x);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var R=e.length,P=e.length-o.length;e.endsWith(o)?R=P:(f>P||f>e.length-o.length)&&(R=f),e=e.substring(0,R),e=ZYe(b?"-"+e:e,i),e=(e.match(eKe(p))||[]).join("");var $=e.indexOf(p);e=e.replace(new RegExp(uwe(p),"g"),function(B,U){return U===$?".":""});var k=iY(e,i),D=k.beforeDecimal,M=k.afterDecimal,L=k.addNegation;return l.end-l.start<u.end-u.start&&D===""&&m&&!parseFloat(M)&&(e=L?"-":""),e}function rKe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function iKe(e){var t=BL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function sKe(e){e=iKe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zg);var s=e.onBlur;s===void 0&&(s=zg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=owe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=BL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return eae(L,e)},b=function(L,B){return nKe(L,B,e)},w=Cw(f)?c:f,E=d??tKe(w,l,t);Cw(f)?Cw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return awe(L)?L:(typeof L=="number"&&(L=cwe(L)),E&&typeof a=="number"?Joe(L,a,!!u):L)},x=dwe(S(f),S(c),!!E,v,b,h),C=x[0],A=C.numAsString,R=C.formattedValue,P=x[1],$=function(L){var B=L.target,U=L.key,V=B.selectionStart,O=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&O<l.length){L.preventDefault();return}if(V!==O){i(L);return}U==="Backspace"&&z[0]==="-"&&V===l.length+1&&n&&Nv(B,1),a&&u&&(U==="Backspace"&&z[V-1]===g?(Nv(B,V-1),L.preventDefault()):U==="Delete"&&z[V]===g&&L.preventDefault()),y!=null&&y.includes(U)&&z[V]===g&&Nv(B,V+1);var W=o===!0?",":o;U==="Backspace"&&z[V-1]===W&&Nv(B,V-1),U==="Delete"&&z[V]===W&&Nv(B,V+1),i(L)},k=function(L){var B=A;if(B.match(/\d/g)||(B=""),r||(B=zYe(B)),u&&a&&(B=Joe(B,a,u)),B!==A){var U=eae(B,e);P({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:uA.event})}s(L)},D=function(L){return L===g?!0:lA(L)},M=function(L){var B=L.currentValue,U=L.lastValue,V=L.formattedValue,O=L.currentValueIndex,z=L.formattedValueIndex,W=B[O],j=V[z],H=fwe(U,B),G=H.to;return O>=G.start&&O<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:R,valueIsNumericString:!1,isValidInputCharacter:D,isCharacterSame:M,onValueChange:P,format:v,removeFormatting:b,getCaretBoundary:function(L){return rKe(L,e)},onKeyDown:$,onBlur:k})}function oKe(e){var t=sKe(e);return xi.createElement(JYe,Object.assign({},t))}function tae({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var JU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const aKe=/^(0\.0*|-0(\.0*)?)$/,uKe=/^-?0\d+(\.\d+)?\.?$/;function lKe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function nae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const cKe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},fKe=(e,{size:t})=>({controls:{"--ni-chevron-size":Ht(t,"ni-chevron-size")}}),sY=Fe((e,t)=>{const n=Te("NumberInput",cKe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:x,handlersRef:C,startValue:A,disabled:R,rightSectionPointerEvents:P,allowNegative:$,readOnly:k,size:D,rightSectionWidth:M,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:V,trimLeadingZeroesOnBlur:O,...z}=n,W=vt({name:"NumberInput",classes:JU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:fKe}),{resolvedClassNames:j,resolvedStyles:H}=zm({classNames:i,styles:s,props:n}),[G,te]=ds({value:c,defaultValue:f,onChange:u}),he=B!==void 0&&L!==void 0,fe=I.useRef(null),ge=I.useRef(null),le=I.useRef(0),Me=(_e,ct)=>{ct.source==="event"&&te(lKe(_e.floatValue)&&!aKe.test(_e.value)&&!(U&&uKe.test(_e.value))?_e.floatValue:_e.value),l==null||l(_e,ct)},ce=_e=>{const ct=String(_e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ct?Math.max(0,(ct[1]?ct[1].length:0)-(ct[2]?+ct[2]:0)):0},ze=_e=>{fe.current&&typeof _e<"u"&&fe.current.setSelectionRange(_e,_e)},Ve=I.useRef();Ve.current=()=>{let _e;const ct=ce(G),bt=ce(p),ye=Math.max(ct,bt),Ne=10**ye;if(typeof G!="number"||Number.isNaN(G))_e=wc(A,h,d);else if(d!==void 0){const Je=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;_e=Je<=d?Je:d}else _e=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;const We=_e.toFixed(ye);te(parseFloat(We)),l==null||l({floatValue:parseFloat(We),formattedValue:We,value:We},{source:"increment"}),setTimeout(()=>{var Je;return ze((Je=fe.current)==null?void 0:Je.value.length)},0)};const at=I.useRef();at.current=()=>{let _e;const ct=h!==void 0?h:$?Number.MIN_SAFE_INTEGER:0,bt=ce(G),ye=ce(p),Ne=Math.max(bt,ye),We=10**Ne;if(typeof G!="number"||Number.isNaN(G))_e=wc(A,ct,d);else{const xt=(Math.round(G*We)-Math.round(p*We))/We;_e=ct!==void 0&&xt<ct?ct:xt}const Je=_e.toFixed(Ne);te(parseFloat(Je)),l==null||l({floatValue:parseFloat(Je),formattedValue:Je,value:Je},{source:"decrement"}),setTimeout(()=>{var xt;return ze((xt=fe.current)==null?void 0:xt.value.length)},0)};const tt=_e=>{S==null||S(_e),!(k||!V)&&(_e.key==="ArrowUp"&&(_e.preventDefault(),Ve.current()),_e.key==="ArrowDown"&&(_e.preventDefault(),at.current()))},be=_e=>{if(x==null||x(_e),_e.key==="Backspace"){const ct=fe.current;ct.selectionStart===0&&ct.selectionStart===ct.selectionEnd&&(_e.preventDefault(),window.setTimeout(()=>ze(0),0))}};NW(C,{increment:Ve.current,decrement:at.current});const pe=_e=>{_e?Ve.current():at.current(),le.current+=1},Oe=_e=>{if(pe(_e),he){const ct=typeof L=="number"?L:L(le.current);ge.current=window.setTimeout(()=>Oe(_e),ct)}},He=(_e,ct)=>{var bt;_e.preventDefault(),(bt=fe.current)==null||bt.focus(),pe(ct),he&&(ge.current=window.setTimeout(()=>Oe(ct),B))},pt=()=>{ge.current&&window.clearTimeout(ge.current),ge.current=null,le.current=0},Ge=_.jsxs("div",{...W("controls"),children:[_.jsx(Bs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{He(_e,!0)},onPointerUp:pt,onPointerLeave:pt,children:_.jsx(tae,{direction:"up"})}),_.jsx(Bs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{He(_e,!1)},onPointerUp:pt,onPointerLeave:pt,children:_.jsx(tae,{direction:"down"})})]});return _.jsx(Zc,{component:oKe,allowNegative:$,className:es(JU.root,r),size:D,...z,readOnly:k,disabled:R,value:G,getInputRef:ns(t,fe),onValueChange:Me,rightSection:m||k?g:g||Ge,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:tt,onKeyDownCapture:be,rightSectionPointerEvents:P??(R?"none":void 0),rightSectionWidth:M??`var(--ni-right-section-width-${D||"sm"})`,allowLeadingZeros:U,onBlur:_e=>{if(b==null||b(_e),v==="blur"&&typeof G=="number"&&wc(G,h,d)!==G&&te(wc(G,h,d)),O&&typeof G=="string"){const ct=G.replace(/^0+/,""),bt=parseFloat(ct);te(Number.isNaN(bt)||bt>Number.MAX_SAFE_INTEGER?ct:bt)}},isAllowed:_e=>v==="strict"?y?y(_e)&&nae(_e.floatValue,h,d):nae(_e.floatValue,h,d):y?y(_e):!0})});sY.classes={...Zc.classes,...JU};sY.displayName="@mantine/core/NumberInput";const[dKe,hwe]=ho("Progress.Root component was not found in tree");var YI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const hKe={},oY=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Te("ProgressLabel",hKe,e),u=hwe();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});oY.classes=YI;oY.displayName="@mantine/core/ProgressLabel";const pKe={},mKe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Ht(t,"progress-size"),"--progress-radius":n===void 0?void 0:zr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),UL=Fe((e,t)=>{const n=Te("ProgressRoot",pKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=vt({name:"Progress",classes:YI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mKe});return _.jsx(dKe,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ee,{ref:t,...d("root"),...f})})});UL.classes=YI;UL.displayName="@mantine/core/ProgressRoot";const gKe={withAria:!0},zL=Fe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Te("ProgressSection",gKe,e),p=hwe(),m=Ts(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ee,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Qr(l,m),"--progress-label-color":Tx(p.autoContrast,m)?Sy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});zL.classes=YI;zL.displayName="@mantine/core/ProgressSection";const yKe={},Dx=Fe((e,t)=>{const n=Te("Progress",yKe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=zm({classNames:i,styles:s,props:n});return _.jsx(UL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(zL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Dx.classes=YI;Dx.displayName="@mantine/core/Progress";Dx.Section=zL;Dx.Root=UL;Dx.Label=oY;const[vKe,pwe]=mb(),[bKe,_Ke]=mb();var mwe={card:"m_9dc8ae12"};const wKe={withBorder:!0},EKe=(e,{radius:t})=>({card:{"--card-radius":zr(t)}}),aY=Fe((e,t)=>{const n=Te("RadioCard",wKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:mwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EKe,rootSelector:"card"}),{dir:v}=Wh(),b=pwe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=x=>{if(m==null||m(x),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(x.nativeEvent.code)){x.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex($=>$===x.target),R=A+1>=C.length?0:A+1,P=A-1<0?C.length-1:A-1;x.nativeEvent.code==="ArrowDown"&&(C[R].focus(),C[R].click()),x.nativeEvent.code==="ArrowUp"&&(C[P].focus(),C[P].click()),x.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?P:R].focus(),C[v==="ltr"?P:R].click()),x.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?R:P].focus(),C[v==="ltr"?R:P].click())}};return _.jsx(bKe,{value:{checked:w},children:_.jsx(Bs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:x=>{h==null||h(x),b==null||b.onChange(d||"")},onKeyDown:S})})});aY.displayName="@mantine/core/RadioCard";aY.classes=mwe;const xKe={},uY=Fe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Te("RadioGroup",xKe,e),f=Aa(u),[d,h]=ds({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(vKe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(si.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx($G,{role:"radiogroup",children:a})})})});uY.classes=si.Wrapper.classes;uY.displayName="@mantine/core/RadioGroup";function gwe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Se(e),height:Se(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var ywe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const SKe={icon:gwe},TKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=qh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Ht(r,"radio-size"),"--radio-radius":t===void 0?void 0:zr(t),"--radio-color":s==="outline"?u:Qr(n,e),"--radio-icon-size":Ht(r,"radio-icon-size"),"--radio-icon-color":i?Qr(i,e):Tx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},lY=Fe((e,t)=>{const n=Te("RadioIndicator",SKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=vt({name:"RadioIndicator",classes:ywe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TKe,rootSelector:"indicator"}),E=_Ke(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(Ee,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});lY.displayName="@mantine/core/RadioIndicator";lY.classes=ywe;var vwe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const CKe={labelPosition:"right"},AKe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=qh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Ht(t,"radio-size"),"--radio-radius":n===void 0?void 0:zr(n),"--radio-color":s==="outline"?u:Qr(r,e),"--radio-icon-color":i?Qr(i,e):Tx(o,e)?Sy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Ht(t,"radio-icon-size")}}},R1=Fe((e,t)=>{const n=Te("Radio",CKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=gwe,rootRef:E,iconColor:S,onChange:x,mod:C,...A}=n,R=vt({name:"Radio",classes:vwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AKe}),P=pwe(),$=(P==null?void 0:P.size)??c,k=n.size?c:$,{styleProps:D,rest:M}=yb(A),L=Aa(l),B=P?{checked:P.value===M.value,name:M.name??P.name,onChange:U=>{P.onChange(U),x==null||x(U)}}:{};return _.jsx(_L,{...R("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:k,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...D,...b,children:_.jsxs(Ee,{...R("inner"),mod:{"label-position":d},children:[_.jsx(Ee,{...R("radio",{focusable:!0,variant:y}),onChange:x,...M,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...R("icon"),"aria-hidden":!0})]})})});R1.classes=vwe;R1.displayName="@mantine/core/Radio";R1.Group=uY;R1.Card=aY;R1.Indicator=lY;const IKe={duration:100,transition:"fade"};function kKe(e,t){return{...IKe,...t,...e}}function RKe({offset:e,position:t,defaultOpened:n}){const[r,i]=I.useState(n),s=I.useRef(),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=tG({placement:t,middleware:[QW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=I.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return I.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=tm(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var VL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const NKe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Xc("popover")},PKe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:zr(t),"--tooltip-bg":n?Qr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),cY=Fe((e,t)=>{const n=Te("TooltipFloating",NKe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,defaultOpened:b,variant:w,vars:E,portalProps:S,...x}=n,C=Ts(),A=vt({name:"TooltipFloating",props:n,classes:VL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:PKe}),{handleMouseMove:R,x:P,y:$,opened:k,boundaryRef:D,floating:M,setOpened:L}=RKe({offset:p,position:m,defaultOpened:b});if(!Ey(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=ns(D,r.ref,t),U=O=>{var z,W;(W=(z=r.props).onMouseEnter)==null||W.call(z,O),R(O),L(!0)},V=O=>{var z,W;(W=(z=r.props).onMouseLeave)==null||W.call(z,O),L(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(UI,{...S,withinPortal:s,children:_.jsx(Ee,{...x,...A("tooltip",{style:{...FW(o,C),zIndex:y,display:!v&&k?"block":"none",top:($&&Math.round($))??"",left:(P&&Math.round(P))??""}}),variant:w,ref:M,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:B,onMouseEnter:U,onMouseLeave:V})]})});cY.classes=VL;cY.displayName="@mantine/core/TooltipFloating";const bwe=I.createContext(!1),OKe=bwe.Provider,DKe=()=>I.useContext(bwe),$Ke={openDelay:0,closeDelay:0};function _we(e){const{openDelay:t,closeDelay:n,children:r}=Te("TooltipGroup",$Ke,e);return _.jsx(OKe,{value:!0,children:_.jsx(_He,{delay:{open:t,close:n},children:r})})}_we.displayName="@mantine/core/TooltipGroup";function MKe(e){var S,x,C;const[t,n]=I.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=DKe(),o=Aa(),{delay:a,currentId:u,setCurrentId:l}=Jbe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=tG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Gbe(e.offset),QW({padding:8}),qU(),Ybe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[WU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=AHe([bHe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((x=e.events)!=null&&x.touch)}),CHe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),kHe(h,{role:"tooltip"}),SHe(h,{enabled:typeof e.opened>"u"}),wHe(h,{id:o})]);s_e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Mc(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const rae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Xc("popover"),positionDependencies:[]},LKe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:zr(t),"--tooltip-bg":n?Qr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Di=Fe((e,t)=>{const n=Te("Tooltip",rae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:b,withArrow:w,arrowSize:E,arrowOffset:S,arrowRadius:x,arrowPosition:C,offset:A,transitionProps:R,multiline:P,events:$,zIndex:k,disabled:D,positionDependencies:M,onClick:L,onMouseEnter:B,onMouseLeave:U,inline:V,variant:O,keepMounted:z,vars:W,portalProps:j,mod:H,floatingStrategy:G,...te}=Te("Tooltip",rae,n),{dir:he}=Wh(),fe=I.useRef(null),ge=MKe({position:Zbe(he,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:$,arrowRef:fe,arrowOffset:S,offset:typeof A=="number"?A+(w?E/2:0):A,positionDependencies:[...M,r],inline:V,strategy:G}),le=vt({name:"Tooltip",props:n,classes:VL,className:b,style:v,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:W,varsResolver:LKe});if(!Ey(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Me=ns(ge.reference,r.ref,t),ce=kKe(R,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(UI,{...j,withinPortal:d,children:_.jsx(Hm,{...ce,keepMounted:z,mounted:!D&&!!ge.opened,duration:ge.isGroupPhase?10:ce.duration,children:ze=>_.jsxs(Ee,{...te,variant:O,mod:[{multiline:P},H],...ge.getFloatingProps({ref:ge.floating,className:le("tooltip").className,style:{...le("tooltip").style,...ze,zIndex:k,top:ge.y??0,left:ge.x??0}}),children:[o,_.jsx(nG,{ref:fe,arrowX:ge.arrowX,arrowY:ge.arrowY,visible:w,position:ge.placement,arrowSize:E,arrowOffset:S,arrowRadius:x,arrowPosition:C,...le("arrow")})]})})}),I.cloneElement(r,ge.getReferenceProps({onClick:L,onMouseEnter:B,onMouseLeave:U,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Me,className:es(b,r.props.className),...r.props}))]})});Di.classes=VL;Di.displayName="@mantine/core/Tooltip";Di.Floating=cY;Di.Group=_we;var wwe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const FKe={withItemsBorders:!0},jKe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:zr(t),"--sc-color":n?Qr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Ht(i,"sc-padding"),"--sc-font-size":lo(i)}}),fY=Fe((e,t)=>{var te,he;const n=Te("SegmentedControl",FKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:x,autoContrast:C,withItemsBorders:A,mod:R,...P}=n,$=vt({name:"SegmentedControl",props:n,classes:wwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jKe}),k=Ts(),D=l.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe),M=R7e(),[L,B]=I.useState(null),[U,V]=I.useState({}),O=(fe,ge)=>{U[ge]=fe,V(U)},[z,W]=ds({value:c,defaultValue:f,finalValue:Array.isArray(l)?((te=D.find(fe=>!fe.disabled))==null?void 0:te.value)??((he=l[0])==null?void 0:he.value)??null:null,onChange:d}),j=Aa(p),H=D.map(fe=>I.createElement(Ee,{...$("control"),mod:{active:z===fe.value,orientation:v},key:fe.value},I.createElement("input",{...$("input"),disabled:m||fe.disabled,type:"radio",name:j,value:fe.value,id:`${j}-${fe.value}`,checked:z===fe.value,onChange:()=>!g&&W(fe.value),"data-focus-ring":k.focusRing,key:`${fe.value}-input`}),I.createElement(Ee,{component:"label",...$("label"),mod:{active:z===fe.value&&!(m||fe.disabled),disabled:m||fe.disabled,"read-only":g},htmlFor:`${j}-${fe.value}`,ref:ge=>O(ge,fe.value),__vars:{"--sc-label-color":w!==void 0?Sy({color:w,theme:k,autoContrast:C}):void 0},key:`${fe.value}-label`},_.jsx("span",{...$("innerLabel"),children:fe.label})))),G=ns(t,fe=>B(fe));return l.length===0?null:_.jsxs(Ee,{...$("root"),variant:x,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:M,"with-items-borders":A},R],...P,role:"radiogroup",children:[typeof z=="string"&&_.jsx(dG,{target:U[z],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...$("indicator")}),H]})});fY.classes=wwe;fY.displayName="@mantine/core/SegmentedControl";const BKe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ph=Fe((e,t)=>{const n=Te("Select",BKe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:x,limit:C,withScrollArea:A,maxDropdownHeight:R,size:P,searchable:$,rightSection:k,checkIconPosition:D,withCheckIcon:M,nothingFoundMessage:L,name:B,form:U,searchValue:V,defaultSearchValue:O,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:H,id:G,clearable:te,clearButtonProps:he,hiddenInputProps:fe,renderOption:ge,onClear:le,autoComplete:Me,scrollAreaProps:ce,...ze}=n,Ve=I.useMemo(()=>E_e(m),[m]),at=I.useMemo(()=>xG(Ve),[Ve]),tt=Aa(G),[be,pe,Oe]=ds({value:g,defaultValue:y,finalValue:null,onChange:p}),He=typeof be=="string"?at[be]:void 0,pt=I7e(He),[Ge,_e]=ds({value:V,defaultValue:O,finalValue:He?He.label:"",onChange:z}),ct=bL({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ct.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ct.resetSelectedOption()}}),{resolvedClassNames:bt,resolvedStyles:ye}=zm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ct.selectFirstOption()},[v,be]),I.useEffect(()=>{g===null&&_e(""),typeof g=="string"&&He&&((pt==null?void 0:pt.value)!==He.value||(pt==null?void 0:pt.label)!==He.label)&&_e(He.label)},[g,He]);const Ne=te&&!!be&&!S&&!E&&_.jsx(vn.ClearButton,{size:P,...he,onClear:()=>{pe(null,null),_e(""),le==null||le()}});return _.jsxs(_.Fragment,{children:[_.jsxs(vn,{store:ct,__staticSelector:"Select",classNames:bt,styles:ye,unstyled:s,readOnly:E,onOptionSubmit:We=>{b==null||b(We);const Je=W&&at[We].value===be?null:at[We],xt=Je?Je.value:null;xt!==be&&pe(xt,Je),!Oe&&_e(typeof xt=="string"&&(Je==null?void 0:Je.label)||""),ct.closeDropdown()},size:P,...w,children:[_.jsx(vn.Target,{targetType:$?"input":"button",autoComplete:Me,children:_.jsx(Zc,{id:tt,ref:t,rightSection:k||Ne||_.jsx(vn.Chevron,{size:P,error:j,unstyled:s}),rightSectionPointerEvents:H||(Ne?"all":"none"),...ze,size:P,__staticSelector:"Select",disabled:S,readOnly:E||!$,value:Ge,onChange:We=>{_e(We.currentTarget.value),ct.openDropdown(),v&&ct.selectFirstOption()},onFocus:We=>{$&&ct.openDropdown(),f==null||f(We)},onBlur:We=>{var Je;$&&ct.closeDropdown(),_e(be!=null&&((Je=at[be])==null?void 0:Je.label)||""),d==null||d(We)},onClick:We=>{$?ct.openDropdown():ct.toggleDropdown(),h==null||h(We)},classNames:bt,styles:ye,unstyled:s,pointer:!$,error:j})}),_.jsx(B_e,{data:Ve,hidden:E||S,filter:x,search:Ge,limit:C,hiddenWhenEmpty:!L,withScrollArea:A,maxDropdownHeight:R,filterOptions:$&&(He==null?void 0:He.label)!==Ge,value:be,checkIconPosition:D,withCheckIcon:M,nothingFoundMessage:L,unstyled:s,labelId:ze.label?`${tt}-label`:void 0,"aria-label":ze.label?void 0:ze["aria-label"],renderOption:ge,scrollAreaProps:ce})]}),_.jsx(vn.HiddenInput,{value:be,name:B,form:U,disabled:S,...fe})]})});ph.classes={...Zc.classes,...vn.classes};ph.displayName="@mantine/core/Select";const[Ewe,HL]=ho("SliderProvider was not found in tree"),dY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=HL();return _.jsx(Ee,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});dY.displayName="@mantine/core/SliderRoot";const BD=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=HL(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(Ee,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(Hm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});BD.displayName="@mantine/core/SliderThumb";function UD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function UKe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function xwe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=HL();if(!e)return null;const u=e.map((l,c)=>I.createElement(Ee,{...a("markWrapper"),__vars:{"--mark-offset":`${UD({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ee,{...a("mark"),mod:{filled:UKe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}xwe.displayName="@mantine/core/SliderMarks";function hY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=HL();return _.jsx(_.Fragment,{children:_.jsx(Ee,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ee,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ee,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(xwe,{...a,offset:i,disabled:r,inverted:s})]})})})}hY.displayName="@mantine/core/SliderTrack";function ZU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function lc(e,t){return parseFloat(e.toFixed(t))}function Swe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var qL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const zKe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},VKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?Qr(n,e):void 0,"--slider-radius":i===void 0?void 0:zr(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),WL=Fe((e,t)=>{const n=Te("Slider",zKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:x,scale:C,inverted:A,className:R,style:P,vars:$,hiddenInputProps:k,...D}=n,M=vt({name:"Slider",props:n,classes:qL,classNames:r,className:R,styles:i,style:P,vars:$,varsResolver:VKe,unstyled:x}),{dir:L}=Wh(),[B,U]=I.useState(!1),[V,O]=ds({value:typeof s=="number"?wc(s,l,c):s,defaultValue:typeof h=="number"?wc(h,l,c):h,finalValue:wc(0,l,c),onChange:o}),z=I.useRef(V),W=I.useRef(),j=I.useRef(),H=UD({value:V,min:l,max:c}),G=C(V),te=typeof g=="function"?g(G):g,he=d??Swe(f),fe=I.useCallback(({x:ce})=>{if(!S){const ze=ZU({value:ce,min:l,max:c,step:f,precision:he});O(ze),z.current=ze}},[S,l,c,f,he,O]),{ref:ge,active:le}=aL(fe,{onScrubEnd:()=>a==null?void 0:a(z.current)},L),Me=ce=>{var ze,Ve,at,tt,be,pe;if(!S)switch(ce.key){case"ArrowUp":{ce.preventDefault(),(ze=j.current)==null||ze.focus();const Oe=lc(Math.min(Math.max(V+f,l),c),he);O(Oe),a==null||a(Oe);break}case"ArrowRight":{ce.preventDefault(),(Ve=j.current)==null||Ve.focus();const Oe=lc(Math.min(Math.max(L==="rtl"?V-f:V+f,l),c),he);O(Oe),a==null||a(Oe);break}case"ArrowDown":{ce.preventDefault(),(at=j.current)==null||at.focus();const Oe=lc(Math.min(Math.max(V-f,l),c),he);O(Oe),a==null||a(Oe);break}case"ArrowLeft":{ce.preventDefault(),(tt=j.current)==null||tt.focus();const Oe=lc(Math.min(Math.max(L==="rtl"?V+f:V-f,l),c),he);O(Oe),a==null||a(Oe);break}case"Home":{ce.preventDefault(),(be=j.current)==null||be.focus(),O(l),a==null||a(l);break}case"End":{ce.preventDefault(),(pe=j.current)==null||pe.focus(),O(c),a==null||a(c);break}}};return _.jsx(Ewe,{value:{getStyles:M},children:_.jsxs(dY,{...D,ref:ns(t,W),onKeyDownCapture:Me,onMouseDownCapture:()=>{var ce;return(ce=W.current)==null?void 0:ce.focus()},size:u,disabled:S,children:[_.jsx(hY,{inverted:A,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:ge,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(BD,{max:c,min:l,value:G,position:H,dragging:le,label:te,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...k})]})})});WL.classes=qL;WL.displayName="@mantine/core/Slider";function HKe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const qKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?Qr(n,e):void 0,"--slider-radius":i===void 0?void 0:zr(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),WKe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},zD=Fe((e,t)=>{const n=Te("RangeSlider",WKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:x,thumbChildren:C,disabled:A,unstyled:R,scale:P,inverted:$,className:k,style:D,vars:M,hiddenInputProps:L,...B}=n,U=vt({name:"Slider",props:n,classes:qL,classNames:r,className:k,styles:i,style:D,vars:M,varsResolver:qKe,unstyled:R}),{dir:V}=Wh(),[O,z]=I.useState(-1),[W,j]=I.useState(!1),[H,G]=ds({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),te=I.useRef(H),he=I.useRef([]),fe=I.useRef(void 0),ge=[UD({value:H[0],min:l,max:c}),UD({value:H[1],min:l,max:c})],le=p??Swe(h),Me=Ge=>{G(Ge),te.current=Ge};I.useEffect(()=>{Array.isArray(s)&&(te.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ce=(Ge,_e,ct)=>{const bt=[...te.current];bt[_e]=Ge,_e===0&&(Ge>bt[1]-(f-1e-9)&&(bt[1]=Math.min(Ge+f,c)),Ge>(c-(f-1e-9)||l)&&(bt[_e]=te.current[_e]),bt[1]-Ge>d&&(bt[1]=Ge+d)),_e===1&&(Ge<bt[0]+f&&(bt[0]=Math.max(Ge-f,l)),Ge<bt[0]+f&&(bt[_e]=te.current[_e]),Ge-bt[0]>d&&(bt[0]=Ge-d)),bt[0]=lc(bt[0],le),bt[1]=lc(bt[1],le),Me(bt),ct&&(a==null||a(te.current))},ze=Ge=>{if(!A){const _e=ZU({value:Ge,min:l,max:c,step:h,precision:le});ce(_e,fe.current,!1)}},{ref:Ve,active:at}=aL(({x:Ge})=>ze(Ge),{onScrubEnd:()=>a==null?void 0:a(te.current)},V);function tt(Ge){fe.current=Ge}const be=Ge=>{Ve.current.focus();const _e=Ve.current.getBoundingClientRect(),ct=HKe(Ge.nativeEvent),bt=ZU({value:ct-_e.left,max:c,min:l,step:h,containerWidth:_e.width}),ye=Math.abs(H[0]-bt)>Math.abs(H[1]-bt)?1:0,Ne=V==="ltr"?ye:ye===1?0:1;fe.current=Ne},pe=()=>O!==1&&O!==0?(z(0),0):O,Oe=Ge=>{if(!A)switch(Ge.key){case"ArrowUp":{Ge.preventDefault();const _e=pe();he.current[_e].focus(),ce(lc(Math.min(Math.max(te.current[_e]+h,l),c),le),_e,!0);break}case"ArrowRight":{Ge.preventDefault();const _e=pe();he.current[_e].focus(),ce(lc(Math.min(Math.max(V==="rtl"?te.current[_e]-h:te.current[_e]+h,l),c),le),_e,!0);break}case"ArrowDown":{Ge.preventDefault();const _e=pe();he.current[_e].focus(),ce(lc(Math.min(Math.max(te.current[_e]-h,l),c),le),_e,!0);break}case"ArrowLeft":{Ge.preventDefault();const _e=pe();he.current[_e].focus(),ce(lc(Math.min(Math.max(V==="rtl"?te.current[_e]+h:te.current[_e]-h,l),c),le),_e,!0);break}}},He={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},pt=Array.isArray(C);return _.jsx(Ewe,{value:{getStyles:U},children:_.jsxs(dY,{...B,size:u,ref:t,disabled:A,children:[_.jsxs(hY,{offset:ge[0],marksOffset:H[0],filled:ge[1]-ge[0],marks:y,inverted:$,min:l,max:c,value:H[1],disabled:A,containerProps:{ref:Ve,onMouseEnter:x?()=>j(!0):void 0,onMouseLeave:x?()=>j(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{fe.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{fe.current=-1},onKeyDownCapture:Oe},children:[_.jsx(BD,{...He,value:P(H[0]),position:ge[0],dragging:at,label:typeof v=="function"?v(lc(P(H[0]),le)):v,ref:Ge=>{he.current[0]=Ge},thumbLabel:E,onMouseDown:()=>tt(0),onFocus:()=>z(0),showLabelOnHover:x,isHovered:W,disabled:A,children:pt?C[0]:C}),_.jsx(BD,{...He,thumbLabel:S,value:P(H[1]),position:ge[1],dragging:at,label:typeof v=="function"?v(lc(P(H[1]),le)):v,ref:Ge=>{he.current[1]=Ge},onMouseDown:()=>tt(1),onFocus:()=>z(1),showLabelOnHover:x,isHovered:W,disabled:A,children:pt?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...L})]})})});zD.classes=qL;zD.displayName="@mantine/core/RangeSlider";const GKe={},kc=Fe((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Te("Space",GKe,e);return _.jsx(Ee,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});kc.displayName="@mantine/core/Space";var Twe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const YKe={maxHeight:100,initialState:!1},KKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),pY=Fe((e,t)=>{const n=Te("Spoiler",YKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:y,onExpandedChange:v,...b}=n,w=vt({name:"Spoiler",classes:Twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KKe}),E=Aa(g),S=`${E}-region`,[x,C]=ds({value:y,defaultValue:l,finalValue:!1,onChange:v}),{ref:A,height:R}=C7e(),P=x?f:d,$=P!==null&&c<R;return _.jsxs(Ee,{...w("root"),id:E,ref:t,"data-has-spoiler":$||void 0,...b,children:[$&&_.jsx(bb,{component:"button",type:"button",ref:p,onClick:()=>C(!x),"aria-expanded":x,"aria-controls":S,...w("control"),children:P}),_.jsx("div",{...w("content",{style:{maxHeight:x?R?Se(R):void 0:Se(c)}}),"data-reduce-motion":!0,role:"region",id:S,children:_.jsx("div",{ref:A,children:h})})]})});pY.classes=Twe;pY.displayName="@mantine/core/Spoiler";var Cwe={root:"m_6d731127"};const XKe={gap:"md",align:"stretch",justify:"flex-start"},QKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ll(t),"--stack-align":n,"--stack-justify":r}}),ri=Fe((e,t)=>{const n=Te("Stack",XKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=vt({name:"Stack",props:n,classes:Cwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QKe});return _.jsx(Ee,{ref:t,...p("root"),variant:d,...h})});ri.classes=Cwe;ri.displayName="@mantine/core/Stack";const Awe=I.createContext(null),JKe=Awe.Provider,ZKe=()=>I.useContext(Awe),eXe={},mY=Fe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Te("SwitchGroup",eXe,e),[c,f]=ds({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(JKe,{value:{value:c,onChange:d,size:s},children:_.jsx(si.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx($G,{role:"group",children:a})})})});mY.classes=si.Wrapper.classes;mY.displayName="@mantine/core/SwitchGroup";var Iwe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const tXe={labelPosition:"right"},nXe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:zr(t),"--switch-height":Ht(r,"switch-height"),"--switch-width":Ht(r,"switch-width"),"--switch-thumb-size":Ht(r,"switch-thumb-size"),"--switch-label-font-size":Ht(r,"switch-label-font-size"),"--switch-track-label-padding":Ht(r,"switch-track-label-padding"),"--switch-color":n?Qr(n,e):void 0}}),Aw=Fe((e,t)=>{const n=Te("Switch",tXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:S,description:x,error:C,disabled:A,variant:R,rootRef:P,mod:$,...k}=n,D=ZKe(),M=p||(D==null?void 0:D.size),L=vt({name:"Switch",props:n,classes:Iwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nXe}),{styleProps:B,rest:U}=yb(k),V=Aa(h),O=D?{checked:D.value.includes(U.value),onChange:D.onChange}:{},[z,W]=ds({value:O.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(_L,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:M,labelPosition:S,label:c,description:x,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":O.checked||void 0,variant:R,ref:P,mod:$,...B,...g,children:[_.jsx("input",{...U,disabled:A,checked:z,onChange:j=>{var H;D?(H=O.onChange)==null||H.call(O,j):E==null||E(j),W(j.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...L("input")}),_.jsxs(Ee,{"aria-hidden":"true",mod:{error:C,"label-position":S},...L("track"),children:[_.jsx(Ee,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),_.jsx("span",{...L("trackLabel"),children:z?d:f})]})]})});Aw.classes={...Iwe,...k_e};Aw.displayName="@mantine/core/Switch";Aw.Group=mY;const[rXe,iXe]=ho("Table component was not found in the tree");var KI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function sXe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function wb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Fe((i,s)=>{const o=Te(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=iXe();return _.jsx(Ee,{component:e,ref:s,...sXe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=KI,r}const e7=wb("th",{columnBorder:!0}),kwe=wb("td",{columnBorder:!0}),eO=wb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Rwe=wb("thead",{stickyHeader:!0}),Nwe=wb("tbody"),Pwe=wb("tfoot"),Owe=wb("caption",{captionSide:!0});function gY({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(Owe,{children:e.caption}),e.head&&_.jsx(Rwe,{children:_.jsx(eO,{children:e.head.map((t,n)=>_.jsx(e7,{children:t},n))})}),e.body&&_.jsx(Nwe,{children:e.body.map((t,n)=>_.jsx(eO,{children:t.map((r,i)=>_.jsx(kwe,{children:r},i))},n))}),e.foot&&_.jsx(Pwe,{children:_.jsx(eO,{children:e.foot.map((t,n)=>_.jsx(e7,{children:t},n))})})]})}gY.displayName="@mantine/core/TableDataRenderer";const oXe={type:"scrollarea"},aXe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Se(t),"--table-overflow":n==="native"?"auto":void 0}}),yY=Fe((e,t)=>{const n=Te("TableScrollContainer",oXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=vt({name:"TableScrollContainer",classes:KI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aXe,rootSelector:"scrollContainer"});return _.jsx(Ee,{component:f==="scrollarea"?Cx:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});yY.classes=KI;yY.displayName="@mantine/core/TableScrollContainer";const uXe={withRowBorders:!0,verticalSpacing:7},lXe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ll(r),"--table-vertical-spacing":Ll(i),"--table-border-color":s?Qr(s,e):void 0,"--table-striped-color":u&&o?Qr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Qr(a,e):void 0,"--table-sticky-header-offset":f?Se(c):void 0}}),Cn=Fe((e,t)=>{const n=Te("Table",uXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:x,stickyHeader:C,stickyHeaderOffset:A,mod:R,...P}=n,$=vt({name:"Table",props:n,className:i,style:s,classes:KI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:lXe});return _.jsx(rXe,{value:{getStyles:$,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ee,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},R],...$("table"),...P,children:x||!!S&&_.jsx(gY,{data:S})})})});Cn.classes=KI;Cn.displayName="@mantine/core/Table";Cn.Td=kwe;Cn.Th=e7;Cn.Tr=eO;Cn.Thead=Rwe;Cn.Tbody=Nwe;Cn.Tfoot=Pwe;Cn.Caption=Owe;Cn.ScrollContainer=yY;Cn.DataRenderer=gY;const[cXe,vY]=ho("Tabs component was not found in the tree");var XI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const fXe={},bY=Fe((e,t)=>{const n=Te("TabsList",fXe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=vY();return _.jsx(Ee,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});bY.classes=XI;bY.displayName="@mantine/core/TabsList";const dXe={},_Y=Fe((e,t)=>{const n=Te("TabsPanel",dXe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=vY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ee,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});_Y.classes=XI;_Y.displayName="@mantine/core/TabsPanel";const hXe={},wY=Fe((e,t)=>{const n=Te("TabsTab",hXe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ts(),{dir:b}=Wh(),w=vY(),E=a===w.value,S=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},x={classNames:h,styles:p,props:n};return _.jsxs(Bs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...x}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Qr(f,v):void 0},onKeyDown:IW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",x),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",x),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",x),"data-position":"right",children:s})]})});wY.classes=XI;wY.displayName="@mantine/core/TabsTab";const iae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",pXe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},mXe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":zr(t),"--tabs-color":Qr(n,e),"--tabs-text-color":Tx(r,e)?Sy({color:n,theme:e,autoContrast:r}):void 0}}),La=Fe((e,t)=>{const n=Te("Tabs",pXe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:x,autoContrast:C,mod:A,...R}=n,P=Aa(l),[$,k]=ds({value:i,defaultValue:r,finalValue:null,onChange:s}),D=vt({name:"Tabs",props:n,classes:XI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:x,varsResolver:mXe});return _.jsx(cXe,{value:{placement:g,value:$,orientation:o,id:P,loop:u,activateTabWithKeyboard:c,getTabId:PD(`${P}-tab`,iae),getPanelId:PD(`${P}-panel`,iae),onChange:k,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:D},children:_.jsx(Ee,{ref:t,id:P,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...D("root"),...R,children:a})})});La.classes=XI;La.displayName="@mantine/core/Tabs";La.Tab=wY;La.Panel=_Y;La.List=bY;const gXe={},nm=Fe((e,t)=>{const n=Te("TextInput",gXe,e);return _.jsx(Zc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});nm.classes=Zc.classes;nm.displayName="@mantine/core/TextInput";const yXe=["h1","h2","h3","h4","h5","h6"];function vXe(e,t){const n=t!==void 0?t:`h${e}`;return yXe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Se(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Dwe={root:"m_8a5d1357"};const bXe={order:1},_Xe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=vXe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Oi=Fe((e,t)=>{const n=Te("Title",bXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:Dwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_Xe});return[1,2,3,4,5,6].includes(u)?_.jsx(Ee,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Oi.classes=Dwe;Oi.displayName="@mantine/core/Title";const $we=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ci=()=>I.useContext($we);function wXe({children:e}){const[t,n]=xi.useState(void 0),r=xi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx($we.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(this,arguments)}var Qg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qg||(Qg={}));const sae="popstate";function EXe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return t7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:VD(i)}return SXe(t,n,null,e)}function fs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Mwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xXe(){return Math.random().toString(36).substr(2,8)}function oae(e,t){return{usr:e.state,key:e.key,idx:t}}function t7(e,t,n,r){return n===void 0&&(n=null),cA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$x(t):t,{state:n,key:t&&t.key||r||xXe()})}function VD(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $x(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function SXe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(cA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Qg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Qg.Push;let v=t7(m.location,g,y);l=c()+1;let b=oae(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Qg.Replace;let v=t7(m.location,g,y);l=c();let b=oae(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:VD(g);return v=v.replace(/ $/,"%20"),fs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(sae,f),u=g,()=>{i.removeEventListener(sae,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var aae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(aae||(aae={}));function TXe(e,t,n){return n===void 0&&(n="/"),CXe(e,t,n,!1)}function CXe(e,t,n,r){let i=typeof t=="string"?$x(t):t,s=EY(i.pathname||"/",n);if(s==null)return null;let o=Lwe(e);AXe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=FXe(s);a=MXe(o[u],l,r)}return a}function Lwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(fs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=v0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(fs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Lwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:DXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Fwe(s.path))i(s,o,u)}),t}function Fwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Fwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function AXe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$Xe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IXe=/^:[\w-]+$/,kXe=3,RXe=2,NXe=1,PXe=10,OXe=-2,uae=e=>e==="*";function DXe(e,t){let n=e.split("/"),r=n.length;return n.some(uae)&&(r+=OXe),t&&(r+=RXe),n.filter(i=>!uae(i)).reduce((i,s)=>i+(IXe.test(s)?kXe:s===""?NXe:PXe),r)}function $Xe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function MXe(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=lae({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=lae({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:v0([s,f.pathname]),pathnameBase:zXe(v0([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=v0([s,f.pathnameBase]))}return o}function lae(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=LXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function LXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Mwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function FXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function EY(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$x(e):e;return{pathname:n?n.startsWith("/")?n:BXe(n,t):t,search:VXe(r),hash:HXe(i)}}function BXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function B8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function xY(e,t){let n=UXe(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=$x(e):(i=cA({},e),fs(!i.pathname||!i.pathname.includes("?"),B8("?","pathname","search",i)),fs(!i.pathname||!i.pathname.includes("#"),B8("#","pathname","hash",i)),fs(!i.search||!i.search.includes("#"),B8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=jXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const v0=e=>e.join("/").replace(/\/\/+/g,"/"),zXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jwe=["post","put","patch","delete"];new Set(jwe);const WXe=["get",...jwe];new Set(WXe);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fA(){return fA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fA.apply(this,arguments)}const TY=I.createContext(null),GXe=I.createContext(null),Ay=I.createContext(null),GL=I.createContext(null),Yh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Bwe=I.createContext(null);function CY(e,t){let{relative:n}=t===void 0?{}:t;Mx()||fs(!1);let{basename:r,navigator:i}=I.useContext(Ay),{hash:s,pathname:o,search:a}=zwe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:v0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Mx(){return I.useContext(GL)!=null}function Ym(){return Mx()||fs(!1),I.useContext(GL).location}function Uwe(e){I.useContext(Ay).static||I.useLayoutEffect(e)}function tf(){let{isDataRoute:e}=I.useContext(Yh);return e?aQe():YXe()}function YXe(){Mx()||fs(!1);let e=I.useContext(TY),{basename:t,future:n,navigator:r}=I.useContext(Ay),{matches:i}=I.useContext(Yh),{pathname:s}=Ym(),o=JSON.stringify(xY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Uwe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=SY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:v0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const KXe=I.createContext(null);function XXe(e){let t=I.useContext(Yh).outlet;return t&&I.createElement(KXe.Provider,{value:e},t)}function Zf(){let{matches:e}=I.useContext(Yh),t=e[e.length-1];return t?t.params:{}}function zwe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Ay),{matches:i}=I.useContext(Yh),{pathname:s}=Ym(),o=JSON.stringify(xY(i,r.v7_relativeSplatPath));return I.useMemo(()=>SY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Vwe(e,t){return QXe(e,t)}function QXe(e,t,n,r){Mx()||fs(!1);let{navigator:i}=I.useContext(Ay),{matches:s}=I.useContext(Yh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Ym(),c;if(t){var f;let g=typeof t=="string"?$x(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||fs(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=TXe(e,{pathname:h}),m=nQe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:v0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:v0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(GL.Provider,{value:{location:fA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qg.Pop}},m):m}function JXe(){let e=oQe(),t=qXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const ZXe=I.createElement(JXe,null);class eQe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Yh.Provider,{value:this.props.routeContext},I.createElement(Bwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tQe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(TY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Yh.Provider,{value:t},r)}function nQe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||fs(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||ZXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(tQe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(eQe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Hwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hwe||{}),HD=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(HD||{});function rQe(e){let t=I.useContext(TY);return t||fs(!1),t}function iQe(e){let t=I.useContext(GXe);return t||fs(!1),t}function sQe(e){let t=I.useContext(Yh);return t||fs(!1),t}function qwe(e){let t=sQe(),n=t.matches[t.matches.length-1];return n.route.id||fs(!1),n.route.id}function oQe(){var e;let t=I.useContext(Bwe),n=iQe(HD.UseRouteError),r=qwe(HD.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function aQe(){let{router:e}=rQe(Hwe.UseNavigateStable),t=qwe(HD.UseNavigateStable),n=I.useRef(!1);return Uwe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,fA({fromRouteId:t},s)))},[e,t])}function AY(e){let{to:t,replace:n,state:r,relative:i}=e;Mx()||fs(!1);let{future:s,static:o}=I.useContext(Ay),{matches:a}=I.useContext(Yh),{pathname:u}=Ym(),l=tf(),c=SY(t,xY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function uQe(e){return XXe(e.context)}function Cp(e){fs(!1)}function lQe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Qg.Pop,navigator:s,static:o=!1,future:a}=e;Mx()&&fs(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:fA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=$x(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=EY(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Ay.Provider,{value:l},I.createElement(GL.Provider,{children:n,value:m}))}function cQe(e){let{children:t,location:n}=e;return Vwe(n7(t),n)}new Promise(()=>{});function n7(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,n7(r.props.children,s));return}r.type!==Cp&&fs(!1),!r.props.index||!r.props.children||fs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=n7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r7(){return r7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r7.apply(this,arguments)}function fQe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function dQe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hQe(e,t){return e.button===0&&(!t||t==="_self")&&!dQe(e)}function i7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function pQe(e,t){let n=i7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const mQe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gQe="6";try{window.__reactRouterVersion=gQe}catch{}const yQe="startTransition",cae=oD[yQe];function vQe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=EXe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&cae?cae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(lQe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const bQe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_Qe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wQe=I.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=fQe(t,mQe),{basename:h}=I.useContext(Ay),p,m=!1;if(typeof l=="string"&&_Qe.test(l)&&(p=l,bQe))try{let b=new URL(window.location.href),w=l.startsWith("//")?new URL(b.protocol+l):new URL(l),E=EY(w.pathname,h);w.origin===b.origin&&E!=null?l=E+w.search+w.hash:m=!0}catch{}let g=CY(l,{relative:i}),y=EQe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return I.createElement("a",r7({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var fae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fae||(fae={}));var dae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dae||(dae={}));function EQe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=tf(),l=Ym(),c=zwe(e,{relative:o});return I.useCallback(f=>{if(hQe(f,n)){f.preventDefault();let d=r!==void 0?r:VD(l)===VD(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function IY(e){let t=I.useRef(i7(e)),n=I.useRef(!1),r=Ym(),i=I.useMemo(()=>pQe(r.search,n.current?null:t.current),[r.search]),s=tf(),o=I.useCallback((a,u)=>{const l=i7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const kY=I.createContext(null);kY.displayName="@mantine/modals/ModalsContext";function xQe(){const e=I.useContext(kY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function SQe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=xQe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ee,{mb:"md",children:l}),_.jsxs(Kn,{mt:l?0:"md",justify:"flex-end",...o,children:[_.jsx(xn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(xn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[TQe,YL]=D7e("mantine-modals");YL("openModal");YL("closeModal");YL("closeAllModals");const s7=YL("openConfirmModal");function hae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function CQe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;hae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{hae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function AQe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function IQe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(CQe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||QC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||QC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||QC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);TQe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=AQe(g.props);return{modalProps:y,content:_.jsx(SQe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(kY.Provider,{value:d,children:[_.jsx(xs,{zIndex:Xc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kQe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>I.createElement("svg",{ref:d,...kQe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&I.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>I.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQe=Ar("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pae=Ar("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mae=Ar("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gae=Ar("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NQe=Ar("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PQe=Ar("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OQe=Ar("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DQe=Ar("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wwe=Ar("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Qe=Ar("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MQe=Ar("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LQe=Ar("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FQe=Ar("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jQe=Ar("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BQe=Ar("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UQe=Ar("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zQe=Ar("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gwe=Ar("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ywe=Ar("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VQe=Ar("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HQe=Ar("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qQe=Ar("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kwe=Ar("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WQe=Ar("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xwe=Ar("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GQe=Ar("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qwe=Ar("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jwe=Ar("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RY=Ar("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YQe=Ar("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Zwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Kh="/ThinkAloud/";function yae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function eEe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const KQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,QQe={};function vae(e,t){return(QQe.jsx?XQe:KQe).test(e)}const JQe=/[ \t\n\f\r]/g;function ZQe(e){return typeof e=="object"?e.type==="text"?bae(e.value):!1:bae(e)}function bae(e){return e.replace(JQe,"")===""}let QI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};QI.prototype.property={};QI.prototype.normal={};QI.prototype.space=null;function tEe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new QI(n,r,t)}function dA(e){return e.toLowerCase()}let nf=class{constructor(t,n){this.property=t,this.attribute=n}};nf.prototype.space=null;nf.prototype.boolean=!1;nf.prototype.booleanish=!1;nf.prototype.overloadedBoolean=!1;nf.prototype.number=!1;nf.prototype.commaSeparated=!1;nf.prototype.spaceSeparated=!1;nf.prototype.commaOrSpaceSeparated=!1;nf.prototype.mustUseProperty=!1;nf.prototype.defined=!1;let eJe=0;const gn=Eb(),vs=Eb(),nEe=Eb(),st=Eb(),ti=Eb(),Iw=Eb(),pl=Eb();function Eb(){return 2**++eJe}const o7=Object.freeze(Object.defineProperty({__proto__:null,boolean:gn,booleanish:vs,commaOrSpaceSeparated:pl,commaSeparated:Iw,number:st,overloadedBoolean:nEe,spaceSeparated:ti},Symbol.toStringTag,{value:"Module"})),U8=Object.keys(o7);class NY extends nf{constructor(t,n,r,i){let s=-1;if(super(t,n),_ae(this,"space",i),typeof r=="number")for(;++s<U8.length;){const o=U8[s];_ae(this,U8[s],(r&o7[o])===o7[o])}}}NY.prototype.defined=!0;function _ae(e,t,n){n&&(e[t]=n)}const tJe={}.hasOwnProperty;function Lx(e){const t={},n={};let r;for(r in e.properties)if(tJe.call(e.properties,r)){const i=e.properties[r],s=new NY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[dA(r)]=r,n[dA(s.attribute)]=r}return new QI(t,n,e.space)}const rEe=Lx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),iEe=Lx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function sEe(e,t){return t in e?e[t]:t}function oEe(e,t){return sEe(e,t.toLowerCase())}const aEe=Lx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:oEe,properties:{xmlns:null,xmlnsXLink:null}}),uEe=Lx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:vs,ariaAutoComplete:null,ariaBusy:vs,ariaChecked:vs,ariaColCount:st,ariaColIndex:st,ariaColSpan:st,ariaControls:ti,ariaCurrent:null,ariaDescribedBy:ti,ariaDetails:null,ariaDisabled:vs,ariaDropEffect:ti,ariaErrorMessage:null,ariaExpanded:vs,ariaFlowTo:ti,ariaGrabbed:vs,ariaHasPopup:null,ariaHidden:vs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ti,ariaLevel:st,ariaLive:null,ariaModal:vs,ariaMultiLine:vs,ariaMultiSelectable:vs,ariaOrientation:null,ariaOwns:ti,ariaPlaceholder:null,ariaPosInSet:st,ariaPressed:vs,ariaReadOnly:vs,ariaRelevant:null,ariaRequired:vs,ariaRoleDescription:ti,ariaRowCount:st,ariaRowIndex:st,ariaRowSpan:st,ariaSelected:vs,ariaSetSize:st,ariaSort:null,ariaValueMax:st,ariaValueMin:st,ariaValueNow:st,ariaValueText:null,role:null}}),nJe=Lx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:oEe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Iw,acceptCharset:ti,accessKey:ti,action:null,allow:null,allowFullScreen:gn,allowPaymentRequest:gn,allowUserMedia:gn,alt:null,as:null,async:gn,autoCapitalize:null,autoComplete:ti,autoFocus:gn,autoPlay:gn,blocking:ti,capture:null,charSet:null,checked:gn,cite:null,className:ti,cols:st,colSpan:null,content:null,contentEditable:vs,controls:gn,controlsList:ti,coords:st|Iw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gn,defer:gn,dir:null,dirName:null,disabled:gn,download:nEe,draggable:vs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gn,formTarget:null,headers:ti,height:st,hidden:gn,high:st,href:null,hrefLang:null,htmlFor:ti,httpEquiv:ti,id:null,imageSizes:null,imageSrcSet:null,inert:gn,inputMode:null,integrity:null,is:null,isMap:gn,itemId:null,itemProp:ti,itemRef:ti,itemScope:gn,itemType:ti,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gn,low:st,manifest:null,max:null,maxLength:st,media:null,method:null,min:null,minLength:st,multiple:gn,muted:gn,name:null,nonce:null,noModule:gn,noValidate:gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gn,optimum:st,pattern:null,ping:ti,placeholder:null,playsInline:gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gn,referrerPolicy:null,rel:ti,required:gn,reversed:gn,rows:st,rowSpan:st,sandbox:ti,scope:null,scoped:gn,seamless:gn,selected:gn,shadowRootClonable:gn,shadowRootDelegatesFocus:gn,shadowRootMode:null,shape:null,size:st,sizes:null,slot:null,span:st,spellCheck:vs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:st,step:null,style:null,tabIndex:st,target:null,title:null,translate:null,type:null,typeMustMatch:gn,useMap:null,value:vs,width:st,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ti,axis:null,background:null,bgColor:null,border:st,borderColor:null,bottomMargin:st,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gn,declare:gn,event:null,face:null,frame:null,frameBorder:null,hSpace:st,leftMargin:st,link:null,longDesc:null,lowSrc:null,marginHeight:st,marginWidth:st,noResize:gn,noHref:gn,noShade:gn,noWrap:gn,object:null,profile:null,prompt:null,rev:null,rightMargin:st,rules:null,scheme:null,scrolling:vs,standby:null,summary:null,text:null,topMargin:st,valueType:null,version:null,vAlign:null,vLink:null,vSpace:st,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gn,disableRemotePlayback:gn,prefix:null,property:null,results:st,security:null,unselectable:null}}),rJe=Lx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:sEe,properties:{about:pl,accentHeight:st,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:st,amplitude:st,arabicForm:null,ascent:st,attributeName:null,attributeType:null,azimuth:st,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:st,by:null,calcMode:null,capHeight:st,className:ti,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:st,diffuseConstant:st,direction:null,display:null,dur:null,divisor:st,dominantBaseline:null,download:gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:st,enableBackground:null,end:null,event:null,exponent:st,externalResourcesRequired:null,fill:null,fillOpacity:st,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Iw,g2:Iw,glyphName:Iw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:st,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:st,horizOriginX:st,horizOriginY:st,id:null,ideographic:st,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:st,k:st,k1:st,k2:st,k3:st,k4:st,kernelMatrix:pl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:st,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:st,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:st,overlineThickness:st,paintOrder:null,panose1:null,path:null,pathLength:st,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ti,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:st,pointsAtY:st,pointsAtZ:st,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pl,rev:pl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pl,requiredFeatures:pl,requiredFonts:pl,requiredFormats:pl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:st,specularExponent:st,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:st,strikethroughThickness:st,string:null,stroke:null,strokeDashArray:pl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:st,strokeOpacity:st,strokeWidth:null,style:null,surfaceScale:st,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pl,tabIndex:st,tableValues:null,target:null,targetX:st,targetY:st,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:st,underlineThickness:st,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:st,values:null,vAlphabetic:st,vMathematical:st,vectorEffect:null,vHanging:st,vIdeographic:st,version:null,vertAdvY:st,vertOriginX:st,vertOriginY:st,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:st,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),iJe=/^data[-\w.:]+$/i,wae=/-[a-z]/g,sJe=/[A-Z]/g;function KL(e,t){const n=dA(t);let r=t,i=nf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&iJe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(wae,aJe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!wae.test(s)){let o=s.replace(sJe,oJe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=NY}return new i(r,t)}function oJe(e){return"-"+e.toLowerCase()}function aJe(e){return e.charAt(1).toUpperCase()}const uJe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},JI=tEe([iEe,rEe,aEe,uEe,nJe],"html"),Iy=tEe([iEe,rEe,aEe,uEe,rJe],"svg");function Eae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function lEe(e){return e.join(" ").trim()}var cEe={},xae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,lJe=/\n/g,cJe=/^\s*/,fJe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,dJe=/^:\s*/,hJe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,pJe=/^[;\s]*/,mJe=/^\s+|\s+$/g,gJe=`
`,Sae="/",Tae="*",Pv="",yJe="comment",vJe="declaration",bJe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(lJe);m&&(n+=m.length);var g=p.lastIndexOf(gJe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(cJe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Sae!=e.charAt(0)||Tae!=e.charAt(1))){for(var m=2;Pv!=e.charAt(m)&&(Tae!=e.charAt(m)||Sae!=e.charAt(m+1));)++m;if(m+=2,Pv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:yJe,comment:g})}}function d(){var p=s(),m=u(fJe);if(m){if(f(),!u(dJe))return a("property missing ':'");var g=u(hJe),y=p({type:vJe,property:Cae(m[0].replace(xae,Pv)),value:g?Cae(g[0].replace(xae,Pv)):Pv});return u(pJe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Cae(e){return e?e.replace(mJe,Pv):Pv}var _Je=Ms&&Ms.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cEe,"__esModule",{value:!0});var wJe=_Je(bJe);function EJe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,wJe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Aae=cEe.default=EJe;const xJe=Aae.default||Aae,XL=fEe("end"),Xh=fEe("start");function fEe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function SJe(e){const t=Xh(e),n=XL(e);if(t&&n)return{start:t,end:n}}function ZC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Iae(e.position):"start"in e||"end"in e?Iae(e):"line"in e||"column"in e?a7(e):""}function a7(e){return kae(e&&e.line)+":"+kae(e&&e.column)}function Iae(e){return a7(e&&e.start)+"-"+a7(e&&e.end)}function kae(e){return e&&typeof e=="number"?e:1}class Ia extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ZC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ia.prototype.file="";Ia.prototype.name="";Ia.prototype.reason="";Ia.prototype.message="";Ia.prototype.stack="";Ia.prototype.column=void 0;Ia.prototype.line=void 0;Ia.prototype.ancestors=void 0;Ia.prototype.cause=void 0;Ia.prototype.fatal=void 0;Ia.prototype.place=void 0;Ia.prototype.ruleId=void 0;Ia.prototype.source=void 0;const PY={}.hasOwnProperty,TJe=new Map,CJe=/[A-Z]/g,AJe=/-([a-z])/g,IJe=new Set(["table","tbody","thead","tfoot","tr"]),kJe=new Set(["td","th"]),dEe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function RJe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=FJe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=LJe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Iy:JI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=hEe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function hEe(e,t,n){if(t.type==="element")return NJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return PJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return DJe(e,t,n);if(t.type==="mdxjsEsm")return OJe(e,t);if(t.type==="root")return $Je(e,t,n);if(t.type==="text")return MJe(e,t)}function NJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Iy,e.schema=i),e.ancestors.push(t);const s=mEe(e,t.tagName,!1),o=jJe(e,t);let a=DY(e,t);return IJe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!ZQe(u):!0})),pEe(e,o,s,t),OY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function PJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}hA(e,t.position)}function OJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);hA(e,t.position)}function DJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Iy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:mEe(e,t.name,!0),o=BJe(e,t),a=DY(e,t);return pEe(e,o,s,t),OY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function $Je(e,t,n){const r={};return OY(r,DY(e,t)),e.create(t,e.Fragment,r,n)}function MJe(e,t){return t.value}function pEe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function OY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function LJe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function FJe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Xh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function jJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&PY.call(t.properties,i)){const s=UJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&kJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function BJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else hA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else hA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function DY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:TJe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=hEe(e,s,o);a!==void 0&&n.push(a)}return n}function UJe(e,t,n){const r=KL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?eEe(n):lEe(n)),r.property==="style"){let i=typeof n=="object"?n:zJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=VJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?uJe[r.property]||r.property:r.attribute,n]}}function zJe(e,t){const n={};try{xJe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ia("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=dEe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(AJe,qJe)),n[o]=s}}function mEe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=vae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=vae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return PY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);hA(e)}function hA(e,t){const n=new Ia("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=dEe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function VJe(e){const t={};let n;for(n in e)PY.call(e,n)&&(t[HJe(n)]=e[n]);return t}function HJe(e){let t=e.replace(CJe,WJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function qJe(e,t){return t.toUpperCase()}function WJe(e){return"-"+e.toLowerCase()}const z8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},GJe={};function YJe(e,t){const n=GJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gEe(e,r,i)}function gEe(e,t,n){if(KJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Rae(e.children,t,n)}return Array.isArray(e)?Rae(e,t,n):""}function Rae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=gEe(e[i],t,n);return r.join("")}function KJe(e){return!!(e&&typeof e=="object")}const Nae=document.createElement("i");function $Y(e){const t="&"+e+";";Nae.innerHTML=t;const n=Nae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Em(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function hc(e,t){return e.length>0?(Em(e,e.length,0,t),e):t}const Pae={}.hasOwnProperty;function XJe(e){const t={};let n=-1;for(;++n<e.length;)QJe(t,e[n]);return t}function QJe(e,t){let n;for(n in t){const i=(Pae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Pae.call(i,o)||(i[o]=[]);const a=s[o];JJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function JJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Em(e,0,0,r)}function yEe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Yd=ky(/[A-Za-z]/),Al=ky(/[\dA-Za-z]/),ZJe=ky(/[#-'*+\--9=?A-Z^-~]/);function u7(e){return e!==null&&(e<32||e===127)}const l7=ky(/\d/),eZe=ky(/[\dA-Fa-f]/),tZe=ky(/[!-/:-@[-`{-~]/);function nn(e){return e!==null&&e<-2}function Hu(e){return e!==null&&(e<0||e===32)}function wr(e){return e===-2||e===-1||e===32}const nZe=ky(new RegExp("\\p{P}|\\p{S}","u")),rZe=ky(/\s/);function ky(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Fx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Al(e.charCodeAt(n+1))&&Al(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ii(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return wr(u)?(e.enter(n),a(u)):t(u)}function a(u){return wr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const iZe={tokenize:sZe};function sZe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ii(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return nn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const oZe={tokenize:aZe},Oae={tokenize:uZe};function aZe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let x=w;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},S),x++;return Em(t.events,E+1,0,t.events.slice(w)),t.events.length=x,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Oae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Oae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return nn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const x=t.events.length;let C=x,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(y(r),S=x;S<t.events.length;)t.events[S][1].end=Object.assign({},R),S++;Em(t.events,C+1,0,t.events.slice(x)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function uZe(e,t,n){return ii(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Dae(e){if(e===null||Hu(e)||rZe(e))return 1;if(nZe(e))return 2}function MY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const c7={name:"attention",tokenize:cZe,resolveAll:lZe};function lZe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);$ae(f,-u),$ae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=hc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=hc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=hc(l,MY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=hc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=hc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Em(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cZe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Dae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Dae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function $ae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const fZe={name:"autolink",tokenize:dZe};function dZe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Yd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Al(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Al(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||u7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):ZJe(h)?(e.consume(h),l):n(h)}function c(h){return Al(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Al(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const QL={tokenize:hZe,partial:!0};function hZe(e,t,n){return r;function r(s){return wr(s)?ii(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||nn(s)?t(s):n(s)}}const vEe={name:"blockQuote",tokenize:pZe,continuation:{tokenize:mZe},exit:gZe};function pZe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return wr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function mZe(e,t,n){const r=this;return i;function i(o){return wr(o)?ii(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(vEe,t,n)(o)}}function gZe(e){e.exit("blockQuote")}const bEe={name:"characterEscape",tokenize:yZe};function yZe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return tZe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const _Ee={name:"characterReference",tokenize:vZe};function vZe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Al,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=eZe,c):(e.enter("characterReferenceValue"),s=7,o=l7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Al&&!$Y(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Mae={tokenize:_Ze,partial:!0},Lae={name:"codeFenced",tokenize:bZe,concrete:!0};function bZe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const x=r.events[r.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),wr(S)?ii(e,f,"whitespace")(S):f(S))}function f(S){return S===null||nn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Mae,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||nn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):wr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ii(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||nn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||nn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&wr(S)?ii(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||nn(S)?e.check(Mae,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||nn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,x,C){let A=0;return R;function R(M){return S.enter("lineEnding"),S.consume(M),S.exit("lineEnding"),P}function P(M){return S.enter("codeFencedFence"),wr(M)?ii(S,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):$(M)}function $(M){return M===a?(S.enter("codeFencedFenceSequence"),k(M)):C(M)}function k(M){return M===a?(A++,S.consume(M),k):A>=o?(S.exit("codeFencedFenceSequence"),wr(M)?ii(S,D,"whitespace")(M):D(M)):C(M)}function D(M){return M===null||nn(M)?(S.exit("codeFencedFence"),x(M)):C(M)}}}function _Ze(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const V8={name:"codeIndented",tokenize:EZe},wZe={tokenize:xZe,partial:!0};function EZe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ii(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):nn(l)?e.attempt(wZe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||nn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function xZe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ii(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):nn(o)?i(o):n(o)}}const SZe={name:"codeText",tokenize:AZe,resolve:TZe,previous:CZe};function TZe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function CZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function AZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):nn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||nn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class IZe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&tT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),tT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),tT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);tT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);tT(this.left,n.reverse())}}}function tT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function wEe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new IZe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,kZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Em(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function kZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const RZe={tokenize:OZe,resolve:PZe},NZe={tokenize:DZe,partial:!0};function PZe(e){return wEe(e),e}function OZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):nn(a)?e.check(NZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function DZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ii(e,s,"linePrefix")}function s(o){if(o===null||nn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function EEe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||u7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||nn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Hu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||u7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function xEe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):nn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||nn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!wr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function SEe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):nn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ii(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||nn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function e2(e,t){let n;return r;function r(i){return nn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):wr(i)?ii(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const $Ze={name:"definition",tokenize:LZe},MZe={tokenize:FZe,partial:!0};function LZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return xEe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=kw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Hu(h)?e2(e,l)(h):l(h)}function l(h){return EEe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(MZe,f,f)(h)}function f(h){return wr(h)?ii(e,d,"whitespace")(h):d(h)}function d(h){return h===null||nn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function FZe(e,t,n){return r;function r(a){return Hu(a)?e2(e,i)(a):n(a)}function i(a){return SEe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return wr(a)?ii(e,o,"whitespace")(a):o(a)}function o(a){return a===null||nn(a)?t(a):n(a)}}const jZe={name:"hardBreakEscape",tokenize:BZe};function BZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return nn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const UZe={name:"headingAtx",tokenize:VZe,resolve:zZe};function zZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Em(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function VZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Hu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||nn(c)?(e.exit("atxHeading"),t(c)):wr(c)?ii(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Hu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const HZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Fae=["pre","script","style","textarea"],qZe={name:"htmlFlow",tokenize:KZe,resolveTo:YZe,concrete:!0},WZe={tokenize:QZe,partial:!0},GZe={tokenize:XZe,partial:!0};function YZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function KZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:O):Yd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Yd(j)?(e.consume(j),i=4,r.interrupt?t:O):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:O):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:$:p):n(j)}function m(j){return Yd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Hu(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&Fae.includes(G)?(i=1,r.interrupt?t(j):$(j)):HZe.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):$(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||Al(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:$):n(j)}function v(j){return wr(j)?(e.consume(j),v):R(j)}function b(j){return j===47?(e.consume(j),R):j===58||j===95||Yd(j)?(e.consume(j),w):wr(j)?(e.consume(j),b):R(j)}function w(j){return j===45||j===46||j===58||j===95||Al(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):wr(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,x):wr(j)?(e.consume(j),S):C(j)}function x(j){return j===u?(e.consume(j),u=null,A):j===null||nn(j)?n(j):(e.consume(j),x)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Hu(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||wr(j)?b(j):n(j)}function R(j){return j===62?(e.consume(j),P):n(j)}function P(j){return j===null||nn(j)?$(j):wr(j)?(e.consume(j),P):n(j)}function $(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),O):j===93&&i===5?(e.consume(j),V):nn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(WZe,W,k)(j)):j===null||nn(j)?(e.exit("htmlFlowData"),k(j)):(e.consume(j),$)}function k(j){return e.check(GZe,D,W)(j)}function D(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),M}function M(j){return j===null||nn(j)?k(j):(e.enter("htmlFlowData"),$(j))}function L(j){return j===45?(e.consume(j),O):$(j)}function B(j){return j===47?(e.consume(j),o="",U):$(j)}function U(j){if(j===62){const H=o.toLowerCase();return Fae.includes(H)?(e.consume(j),z):$(j)}return Yd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):$(j)}function V(j){return j===93?(e.consume(j),O):$(j)}function O(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),O):$(j)}function z(j){return j===null||nn(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function XZe(e,t,n){const r=this;return i;function i(o){return nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function QZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(QL,t,n)}}const JZe={name:"htmlText",tokenize:ZZe};function ZZe(e,t,n){const r=this;let i,s,o;return a;function a(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),u}function u(O){return O===33?(e.consume(O),l):O===47?(e.consume(O),E):O===63?(e.consume(O),b):Yd(O)?(e.consume(O),C):n(O)}function l(O){return O===45?(e.consume(O),c):O===91?(e.consume(O),s=0,p):Yd(O)?(e.consume(O),v):n(O)}function c(O){return O===45?(e.consume(O),h):n(O)}function f(O){return O===null?n(O):O===45?(e.consume(O),d):nn(O)?(o=f,B(O)):(e.consume(O),f)}function d(O){return O===45?(e.consume(O),h):f(O)}function h(O){return O===62?L(O):O===45?d(O):f(O)}function p(O){const z="CDATA[";return O===z.charCodeAt(s++)?(e.consume(O),s===z.length?m:p):n(O)}function m(O){return O===null?n(O):O===93?(e.consume(O),g):nn(O)?(o=m,B(O)):(e.consume(O),m)}function g(O){return O===93?(e.consume(O),y):m(O)}function y(O){return O===62?L(O):O===93?(e.consume(O),y):m(O)}function v(O){return O===null||O===62?L(O):nn(O)?(o=v,B(O)):(e.consume(O),v)}function b(O){return O===null?n(O):O===63?(e.consume(O),w):nn(O)?(o=b,B(O)):(e.consume(O),b)}function w(O){return O===62?L(O):b(O)}function E(O){return Yd(O)?(e.consume(O),S):n(O)}function S(O){return O===45||Al(O)?(e.consume(O),S):x(O)}function x(O){return nn(O)?(o=x,B(O)):wr(O)?(e.consume(O),x):L(O)}function C(O){return O===45||Al(O)?(e.consume(O),C):O===47||O===62||Hu(O)?A(O):n(O)}function A(O){return O===47?(e.consume(O),L):O===58||O===95||Yd(O)?(e.consume(O),R):nn(O)?(o=A,B(O)):wr(O)?(e.consume(O),A):L(O)}function R(O){return O===45||O===46||O===58||O===95||Al(O)?(e.consume(O),R):P(O)}function P(O){return O===61?(e.consume(O),$):nn(O)?(o=P,B(O)):wr(O)?(e.consume(O),P):A(O)}function $(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),i=O,k):nn(O)?(o=$,B(O)):wr(O)?(e.consume(O),$):(e.consume(O),D)}function k(O){return O===i?(e.consume(O),i=void 0,M):O===null?n(O):nn(O)?(o=k,B(O)):(e.consume(O),k)}function D(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||Hu(O)?A(O):(e.consume(O),D)}function M(O){return O===47||O===62||Hu(O)?A(O):n(O)}function L(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):n(O)}function B(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),U}function U(O){return wr(O)?ii(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):V(O)}function V(O){return e.enter("htmlTextData"),o(O)}}const LY={name:"labelEnd",tokenize:set,resolveTo:iet,resolveAll:ret},eet={tokenize:oet},tet={tokenize:aet},net={tokenize:uet};function ret(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function iet(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=hc(a,e.slice(s+1,s+r+3)),a=hc(a,[["enter",c,t]]),a=hc(a,MY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=hc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=hc(a,e.slice(o+1)),a=hc(a,[["exit",u,t]]),Em(e,s,e.length,a),e}function set(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(kw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(eet,c,o?c:f)(d):d===91?e.attempt(tet,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(net,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function oet(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Hu(f)?e2(e,s)(f):s(f)}function s(f){return f===41?c(f):EEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Hu(f)?e2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?SEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Hu(f)?e2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function aet(e,t,n){const r=this;return i;function i(a){return xEe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(kw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function uet(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const cet={name:"labelStartImage",tokenize:fet,resolveAll:LY.resolveAll};function fet(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const det={name:"labelStartLink",tokenize:het,resolveAll:LY.resolveAll};function het(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const H8={name:"lineEnding",tokenize:pet};function pet(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ii(e,t,"linePrefix")}}const tO={name:"thematicBreak",tokenize:met};function met(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||nn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),wr(l)?ii(e,a,"whitespace")(l):a(l))}}const _u={name:"list",tokenize:vet,continuation:{tokenize:bet},exit:wet},get={tokenize:Eet,partial:!0},yet={tokenize:_et,partial:!0};function vet(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:l7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(tO,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return l7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(QL,r.interrupt?n:c,e.attempt(get,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return wr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function bet(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(QL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ii(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!wr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(yet,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ii(e,e.attempt(_u,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function _et(e,t,n){const r=this;return ii(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function wet(e){e.exit(this.containerState.type)}function Eet(e,t,n){const r=this;return ii(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!wr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const jae={name:"setextUnderline",tokenize:Tet,resolveTo:xet};function xet(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Tet(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),wr(l)?ii(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||nn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Cet={tokenize:Aet};function Aet(e){const t=this,n=e.attempt(QL,r,e.attempt(this.parser.constructs.flowInitial,i,ii(e,e.attempt(this.parser.constructs.flow,i,e.attempt(RZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Iet={resolveAll:CEe()},ket=TEe("string"),Ret=TEe("text");function TEe(e){return{tokenize:t,resolveAll:CEe(e==="text"?Net:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function CEe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Net(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Pet(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:x(E),check:x(S),interrupt:x(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(P){return o=hc(o,P),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=MY(s,l.events,l),l.events)}function d(P,$){return Det(h(P),$)}function h(P){return Oet(o,P)}function p(){const{line:P,column:$,offset:k,_index:D,_bufferIndex:M}=r;return{line:P,column:$,offset:k,_index:D,_bufferIndex:M}}function m(P){i[P.line]=P.column,R()}function g(){let P;for(;r._index<o.length;){const $=o[r._index];if(typeof $=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<$.length;)y($.charCodeAt(r._bufferIndex));else y($)}}function y(P){c=c(P)}function v(P){nn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,R()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=P}function b(P,$){const k=$||{};return k.type=P,k.start=p(),l.events.push(["enter",k,l]),a.push(k),k}function w(P){const $=a.pop();return $.end=p(),l.events.push(["exit",$,l]),$}function E(P,$){C(P,$.from)}function S(P,$){$.restore()}function x(P,$){return k;function k(D,M,L){let B,U,V,O;return Array.isArray(D)?W(D):"tokenize"in D?W([D]):z(D);function z(te){return he;function he(fe){const ge=fe!==null&&te[fe],le=fe!==null&&te.null,Me=[...Array.isArray(ge)?ge:ge?[ge]:[],...Array.isArray(le)?le:le?[le]:[]];return W(Me)(fe)}}function W(te){return B=te,U=0,te.length===0?L:j(te[U])}function j(te){return he;function he(fe){return O=A(),V=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?G():te.tokenize.call($?Object.assign(Object.create(l),$):l,u,H,G)(fe)}}function H(te){return P(V,O),M}function G(te){return O.restore(),++U<B.length?j(B[U]):L}}}function C(P,$){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&Em(l.events,$,l.events.length-$,P.resolve(l.events.slice($),l)),P.resolveTo&&(l.events=P.resolveTo(l.events,l))}function A(){const P=p(),$=l.previous,k=l.currentConstruct,D=l.events.length,M=Array.from(a);return{restore:L,from:D};function L(){r=P,l.previous=$,l.currentConstruct=k,l.events.length=D,a=M,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Oet(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Det(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const $et={42:_u,43:_u,45:_u,48:_u,49:_u,50:_u,51:_u,52:_u,53:_u,54:_u,55:_u,56:_u,57:_u,62:vEe},Met={91:$Ze},Let={[-2]:V8,[-1]:V8,32:V8},Fet={35:UZe,42:tO,45:[jae,tO],60:qZe,61:jae,95:tO,96:Lae,126:Lae},jet={38:_Ee,92:bEe},Bet={[-5]:H8,[-4]:H8,[-3]:H8,33:cet,38:_Ee,42:c7,60:[fZe,JZe],91:det,92:[jZe,bEe],93:LY,95:c7,96:SZe},Uet={null:[c7,Iet]},zet={null:[42,95]},Vet={null:[]},Het=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zet,contentInitial:Met,disable:Vet,document:$et,flow:Fet,flowInitial:Let,insideSpan:Uet,string:jet,text:Bet},Symbol.toStringTag,{value:"Module"}));function qet(e){const n=XJe([Het,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(iZe),document:i(oZe),flow:i(Cet),string:i(ket),text:i(Ret)};return r;function i(s){return o;function o(a){return Pet(r,s,a)}}}function Wet(e){for(;!wEe(e););return e}const Bae=/[\0\t\n\r]/g;function Get(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Bae.lastIndex=f,l=Bae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Yet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ket(e){return e.replace(Yet,Xet)}function Xet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return yEe(n.slice(s?2:1),s?16:10)}return $Y(n)||e}const AEe={}.hasOwnProperty;function Qet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Jet(n)(Wet(qet(n).document().write(Get()(e,t,!0))))}function Jet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Oe),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(at),blockQuote:s(le),characterEscape:A,characterReference:A,codeFenced:s(Me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Me,o),codeText:s(ce,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ve),hardBreakEscape:s(tt),hardBreakTrailing:s(tt),htmlFlow:s(be,o),htmlFlowData:A,htmlText:s(be,o),htmlTextData:A,image:s(pe),label:o,link:s(Oe),listItem:s(pt),listItemValue:d,listOrdered:s(He,f),listUnordered:s(He),paragraph:s(Ge),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(at),strong:s(_e),thematicBreak:s(bt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:ge,autolinkProtocol:fe,blockQuote:u(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:te,characterReference:he,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:R,codeIndented:u(y),codeText:u(M),codeTextData:R,data:R,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u($),hardBreakTrailing:u($),htmlFlow:u(k),htmlFlowData:R,htmlText:u(D),htmlTextData:R,image:u(B),label:V,labelText:U,lineEnding:P,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:H,resourceDestinationString:O,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:x,setextHeadingText:S,strong:u(),thematicBreak:u()}};IEe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ye){let Ne={type:"root",children:[]};const We={stack:[Ne],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Je=[];let xt=-1;for(;++xt<ye.length;)if(ye[xt][1].type==="listOrdered"||ye[xt][1].type==="listUnordered")if(ye[xt][0]==="enter")Je.push(xt);else{const wn=Je.pop();xt=i(ye,wn,xt)}for(xt=-1;++xt<ye.length;){const wn=t[ye[xt][0]];AEe.call(wn,ye[xt][1].type)&&wn[ye[xt][1].type].call(Object.assign({sliceSerialize:ye[xt][2].sliceSerialize},We),ye[xt][1])}if(We.tokenStack.length>0){const wn=We.tokenStack[We.tokenStack.length-1];(wn[1]||Uae).call(We,void 0,wn[0])}for(Ne.position={start:pg(ye.length>0?ye[0][1].start:{line:1,column:1,offset:0}),end:pg(ye.length>0?ye[ye.length-2][1].end:{line:1,column:1,offset:0})},xt=-1;++xt<t.transforms.length;)Ne=t.transforms[xt](Ne)||Ne;return Ne}function i(ye,Ne,We){let Je=Ne-1,xt=-1,wn=!1,yr,vr,kr,Kt;for(;++Je<=We;){const Tn=ye[Je];switch(Tn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tn[0]==="enter"?xt++:xt--,Kt=void 0;break}case"lineEndingBlank":{Tn[0]==="enter"&&(yr&&!Kt&&!xt&&!kr&&(kr=Je),Kt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Kt=void 0}if(!xt&&Tn[0]==="enter"&&Tn[1].type==="listItemPrefix"||xt===-1&&Tn[0]==="exit"&&(Tn[1].type==="listUnordered"||Tn[1].type==="listOrdered")){if(yr){let rr=Je;for(vr=void 0;rr--;){const ir=ye[rr];if(ir[1].type==="lineEnding"||ir[1].type==="lineEndingBlank"){if(ir[0]==="exit")continue;vr&&(ye[vr][1].type="lineEndingBlank",wn=!0),ir[1].type="lineEnding",vr=rr}else if(!(ir[1].type==="linePrefix"||ir[1].type==="blockQuotePrefix"||ir[1].type==="blockQuotePrefixWhitespace"||ir[1].type==="blockQuoteMarker"||ir[1].type==="listItemIndent"))break}kr&&(!vr||kr<vr)&&(yr._spread=!0),yr.end=Object.assign({},vr?ye[vr][1].start:Tn[1].end),ye.splice(vr||Je,0,["exit",yr,Tn[2]]),Je++,We++}if(Tn[1].type==="listItemPrefix"){const rr={type:"listItem",_spread:!1,start:Object.assign({},Tn[1].start),end:void 0};yr=rr,ye.splice(Je,0,["enter",rr,Tn[2]]),Je++,We++,kr=void 0,Kt=!0}}}return ye[Ne][1]._spread=wn,We}function s(ye,Ne){return We;function We(Je){a.call(this,ye(Je),Je),Ne&&Ne.call(this,Je)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ye,Ne,We){this.stack[this.stack.length-1].children.push(ye),this.stack.push(ye),this.tokenStack.push([Ne,We]),ye.position={start:pg(Ne.start),end:void 0}}function u(ye){return Ne;function Ne(We){ye&&ye.call(this,We),l.call(this,We)}}function l(ye,Ne){const We=this.stack.pop(),Je=this.tokenStack.pop();if(Je)Je[0].type!==ye.type&&(Ne?Ne.call(this,ye,Je[0]):(Je[1]||Uae).call(this,ye,Je[0]));else throw new Error("Cannot close `"+ye.type+"` ("+ZC({start:ye.start,end:ye.end})+"): its not open");We.position.end=pg(ye.end)}function c(){return YJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ye){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(ye),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=ye}function p(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=ye}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ye.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ye.replace(/(\r?\n|\r)$/g,"")}function v(ye){const Ne=this.resume(),We=this.stack[this.stack.length-1];We.label=Ne,We.identifier=kw(this.sliceSerialize(ye)).toLowerCase()}function b(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ye}function w(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ye}function E(ye){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const We=this.sliceSerialize(ye).length;Ne.depth=We}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function x(ye){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(ye).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ye){const We=this.stack[this.stack.length-1].children;let Je=We[We.length-1];(!Je||Je.type!=="text")&&(Je=ct(),Je.position={start:pg(ye.start),end:void 0},We.push(Je)),this.stack.push(Je)}function R(ye){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(ye),Ne.position.end=pg(ye.end)}function P(ye){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const We=Ne.children[Ne.children.length-1];We.position.end=pg(ye.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ne.type)&&(A.call(this,ye),R.call(this,ye))}function $(){this.data.atHardBreak=!0}function k(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ye}function D(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ye}function M(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ye}function L(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Ne,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function B(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Ne,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function U(ye){const Ne=this.sliceSerialize(ye),We=this.stack[this.stack.length-2];We.label=Ket(Ne),We.identifier=kw(Ne).toLowerCase()}function V(){const ye=this.stack[this.stack.length-1],Ne=this.resume(),We=this.stack[this.stack.length-1];if(this.data.inReference=!0,We.type==="link"){const Je=ye.children;We.children=Je}else We.alt=Ne}function O(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ye}function z(){const ye=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ye}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(ye){const Ne=this.resume(),We=this.stack[this.stack.length-1];We.label=Ne,We.identifier=kw(this.sliceSerialize(ye)).toLowerCase(),this.data.referenceType="full"}function G(ye){this.data.characterReferenceType=ye.type}function te(ye){const Ne=this.sliceSerialize(ye),We=this.data.characterReferenceType;let Je;We?(Je=yEe(Ne,We==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Je=$Y(Ne);const xt=this.stack[this.stack.length-1];xt.value+=Je}function he(ye){const Ne=this.stack.pop();Ne.position.end=pg(ye.end)}function fe(ye){R.call(this,ye);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(ye)}function ge(ye){R.call(this,ye);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(ye)}function le(){return{type:"blockquote",children:[]}}function Me(){return{type:"code",lang:null,meta:null,value:""}}function ce(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ve(){return{type:"emphasis",children:[]}}function at(){return{type:"heading",depth:0,children:[]}}function tt(){return{type:"break"}}function be(){return{type:"html",value:""}}function pe(){return{type:"image",title:null,url:"",alt:null}}function Oe(){return{type:"link",title:null,url:"",children:[]}}function He(ye){return{type:"list",ordered:ye.type==="listOrdered",start:null,spread:ye._spread,children:[]}}function pt(ye){return{type:"listItem",spread:ye._spread,checked:null,children:[]}}function Ge(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function bt(){return{type:"thematicBreak"}}}function pg(e){return{line:e.line,column:e.column,offset:e.offset}}function IEe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?IEe(e,r):Zet(e,r)}}function Zet(e,t){let n;for(n in t)if(AEe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Uae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ZC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ZC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ZC({start:t.start,end:t.end})+") is still open")}function ett(e){const t=this;t.parser=n;function n(r){return Qet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function ttt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ntt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function rtt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function itt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function stt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ott(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Fx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function att(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function utt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function kEe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function ltt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return kEe(e,t);const i={src:Fx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function ctt(e,t){const n={src:Fx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ftt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function dtt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return kEe(e,t);const i={href:Fx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function htt(e,t){const n={href:Fx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ptt(e,t,n){const r=e.all(t),i=n?mtt(n):REe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function mtt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=REe(n[r])}return t}function REe(e){const t=e.spread;return t??e.children.length>1}function gtt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function ytt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vtt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function btt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _tt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Xh(t.children[1]),u=XL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function wtt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Ett(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const zae=9,Vae=32;function xtt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Hae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Hae(t.slice(i),i>0,!1)),s.join("")}function Hae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===zae||s===Vae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===zae||s===Vae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Stt(e,t){const n={type:"text",value:xtt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Ttt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Ctt={blockquote:ttt,break:ntt,code:rtt,delete:itt,emphasis:stt,footnoteReference:ott,heading:att,html:utt,imageReference:ltt,image:ctt,inlineCode:ftt,linkReference:dtt,link:htt,listItem:ptt,list:gtt,paragraph:ytt,root:vtt,strong:btt,table:_tt,tableCell:Ett,tableRow:wtt,text:Stt,thematicBreak:Ttt,toml:dN,yaml:dN,definition:dN,footnoteDefinition:dN};function dN(){}const NEe=-1,JL=0,qD=1,WD=2,FY=3,jY=4,BY=5,UY=6,PEe=7,OEe=8,qae=typeof self=="object"?self:globalThis,Att=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case JL:case NEe:return n(o,i);case qD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case WD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case FY:return n(new Date(o),i);case jY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case BY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case UY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case PEe:{const{name:a,message:u}=o;return n(new qae[a](u),i)}case OEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new qae[s](o),i)};return r},Wae=e=>Att(new Map,e)(0),s_="",{toString:Itt}={},{keys:ktt}=Object,nT=e=>{const t=typeof e;if(t!=="object"||!e)return[JL,t];const n=Itt.call(e).slice(8,-1);switch(n){case"Array":return[qD,s_];case"Object":return[WD,s_];case"Date":return[FY,s_];case"RegExp":return[jY,s_];case"Map":return[BY,s_];case"Set":return[UY,s_]}return n.includes("Array")?[qD,n]:n.includes("Error")?[PEe,n]:[WD,n]},hN=([e,t])=>e===JL&&(t==="function"||t==="symbol"),Rtt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=nT(o);switch(a){case JL:{let c=o;switch(u){case"bigint":a=OEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([NEe],o)}return i([a,c],o)}case qD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case WD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of ktt(o))(e||!hN(nT(o[d])))&&c.push([s(d),s(o[d])]);return f}case FY:return i([a,o.toISOString()],o);case jY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case BY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(hN(nT(d))||hN(nT(h))))&&c.push([s(d),s(h)]);return f}case UY:{const c=[],f=i([a,c],o);for(const d of o)(e||!hN(nT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Gae=(e,{json:t,lossy:n}={})=>{const r=[];return Rtt(!(t||n),!!t,new Map,r)(e),r},hE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Wae(Gae(e,t)):structuredClone(e):(e,t)=>Wae(Gae(e,t));function Ntt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ptt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Ott(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ntt,r=e.options.footnoteBackLabel||Ptt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Fx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...hE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const DEe=function(e){if(e==null)return Ltt;if(typeof e=="function")return ZL(e);if(typeof e=="object")return Array.isArray(e)?Dtt(e):$tt(e);if(typeof e=="string")return Mtt(e);throw new Error("Expected function, string, or object as test")};function Dtt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=DEe(e[n]);return ZL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function $tt(e){const t=e;return ZL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Mtt(e){return ZL(t);function t(n){return n&&n.type===e}}function ZL(e){return t;function t(n,r,i){return!!(Ftt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ltt(){return!0}function Ftt(e){return e!==null&&typeof e=="object"&&"type"in e}const $Ee=[],jtt=!0,Yae=!1,Btt="skip";function Utt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=DEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=$Ee,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=ztt(n(u,c)),h[0]===Yae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Btt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Yae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function ztt(e){return Array.isArray(e)?e:typeof e=="number"?[jtt,e]:e==null?$Ee:[e]}function zY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Utt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const f7={}.hasOwnProperty,Vtt={};function Htt(e,t){const n=t||Vtt,r=new Map,i=new Map,s=new Map,o={...Ctt,...n.handlers},a={all:l,applyData:Wtt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:qtt,wrap:Ytt};return zY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(f7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=hE(g);return y.children=a.all(c),y}return hE(c)}return(a.options.unknownHandler||Gtt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Kae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Kae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function qtt(e,t){e.position&&(t.position=SJe(e))}function Wtt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,hE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Gtt(e,t){const n=t.data||{},r="value"in t&&!(f7.call(n,"hProperties")||f7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ytt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Kae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Xae(e,t){const n=Htt(e,t),r=n.one(e,void 0),i=Ott(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ktt(e,t){return e&&"run"in e?async function(n,r){const i=Xae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Xae(n,{file:r,...t||e})}}function Qae(e){if(e)throw e}var nO=Object.prototype.hasOwnProperty,MEe=Object.prototype.toString,Jae=Object.defineProperty,Zae=Object.getOwnPropertyDescriptor,eue=function(t){return typeof Array.isArray=="function"?Array.isArray(t):MEe.call(t)==="[object Array]"},tue=function(t){if(!t||MEe.call(t)!=="[object Object]")return!1;var n=nO.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&nO.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||nO.call(t,i)},nue=function(t,n){Jae&&n.name==="__proto__"?Jae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},rue=function(t,n){if(n==="__proto__")if(nO.call(t,n)){if(Zae)return Zae(t,n).value}else return;return t[n]},Xtt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=rue(a,n),i=rue(t,n),a!==i&&(c&&i&&(tue(i)||(s=eue(i)))?(s?(s=!1,o=r&&eue(r)?r:[]):o=r&&tue(r)?r:{},nue(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&nue(a,{name:n,newValue:i}));return a};const q8=ol(Xtt);function d7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qtt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Jtt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Jtt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Fd={basename:Ztt,dirname:ent,extname:tnt,join:nnt,sep:"/"};function Ztt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ZI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function ent(e){if(ZI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function tnt(e){ZI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function nnt(...e){let t=-1,n;for(;++t<e.length;)ZI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":rnt(n)}function rnt(e){ZI(e);const t=e.codePointAt(0)===47;let n=int(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function int(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function ZI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const snt={cwd:ont};function ont(){return"/"}function h7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ant(e){if(typeof e=="string")e=new URL(e);else if(!h7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return unt(e)}function unt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const W8=["history","path","basename","stem","extname","dirname"];class LEe{constructor(t){let n;t?h7(t)?n={path:t}:typeof t=="string"||lnt(t)?n={value:t}:n=t:n={},this.cwd=snt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<W8.length;){const s=W8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)W8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Fd.basename(this.path):void 0}set basename(t){Y8(t,"basename"),G8(t,"basename"),this.path=Fd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Fd.dirname(this.path):void 0}set dirname(t){iue(this.basename,"dirname"),this.path=Fd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Fd.extname(this.path):void 0}set extname(t){if(G8(t,"extname"),iue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){h7(t)&&(t=ant(t)),Y8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Fd.basename(this.path,this.extname):void 0}set stem(t){Y8(t,"stem"),G8(t,"stem"),this.path=Fd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ia(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function G8(e,t){if(e&&e.includes(Fd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fd.sep+"`")}function Y8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function iue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function lnt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const cnt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},fnt={}.hasOwnProperty;class VY extends cnt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Qtt()}copy(){const t=new VY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(q8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Q8("data",this.frozen),this.namespace[t]=n,this):fnt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Q8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=pN(t),r=this.parser||this.Parser;return K8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),K8("process",this.parser||this.Parser),X8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=pN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);pnt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),K8("processSync",this.parser||this.Parser),X8("processSync",this.compiler||this.Compiler),this.process(t,i),oue("processSync","process",n),r;function i(s,o){n=!0,Qae(s),r=o}}run(t,n,r){sue(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=pN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),oue("runSync","run",r),i;function s(o,a){Qae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=pN(n),i=this.compiler||this.Compiler;return X8("stringify",i),sue(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Q8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=q8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];d7(m)&&d7(h)&&(h=q8(!0,m,h)),r[d]=[l,h,...p]}}}}const dnt=new VY().freeze();function K8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function X8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Q8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sue(e){if(!d7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function oue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function pN(e){return hnt(e)?e:new LEe(e)}function hnt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function pnt(e){return typeof e=="string"||mnt(e)}function mnt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const gnt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",aue=[],uue={allowDangerousHtml:!0},ynt=/^(https?|ircs?|mailto|xmpp)$/i,vnt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bnt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||aue,u=e.remarkPlugins||aue,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...uue}:uue,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||_nt,h=dnt().use(ett).use(u).use(Ktt,l).use(a),p=new LEe;typeof r=="string"&&(p.value=r);for(const v of vnt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+gnt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),zY(g,y),RJe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in z8)if(Object.hasOwn(z8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],x=z8[E];(x===null||x.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function _nt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ynt.test(e.slice(0,t))?e:""}const lue=/[#.]/g;function wnt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){lue.lastIndex=i;const a=lue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Ent=new Set(["button","menu","reset","submit"]),p7={}.hasOwnProperty;function FEe(e,t,n){const r=n&&Cnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=wnt(s,t),l.tagName=l.tagName.toLowerCase(),r&&p7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),xnt(o,l.tagName)){let c;for(c in o)p7.call(o,c)&&Snt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)m7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function xnt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Ent.has(e.type.toLowerCase()):!("value"in e)}function Snt(e,t,n,r){const i=KL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Eae(r):i.commaSeparated?o=yae(r):i.commaOrSpaceSeparated?o=Eae(yae(r).join(" ")):o=cue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Tnt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=cue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function m7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)m7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?m7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function cue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||dA(n)===dA(t)))return!0}return n}function Tnt(e){const t=[];let n;for(n in e)p7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Cnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Ant=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Int=FEe(JI,"div"),knt=FEe(Iy,"g",Ant),J8=/\r?\n|\r/g;function Rnt(e){const t=String(e),n=[];for(J8.lastIndex=0;J8.test(t);)n.push(J8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Xv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jEe={}.hasOwnProperty,Nnt=Object.prototype;function Pnt(e,t){const n=t||{};return HY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Iy:JI,verbose:n.verbose||!1},e)}function HY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},rO(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:BEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Rnt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},rO(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},rO(e,r,n),n}default:return n=Ont(e,t),n}}function BEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=HY(e,t[n]);r.push(i)}return r}function Ont(e,t){const n=e.schema;e.schema=t.namespaceURI===Xv.svg?Iy:JI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;jEe.call(Nnt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?knt:Int)(t.tagName,i,BEe(e,t.childNodes));if(rO(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&iw(u.startTag),c=u&&u.endTag&&iw(u.endTag),f=HY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function rO(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Dnt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Dnt(e,t,n){const r=iw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)jEe.call(n.attrs,o)&&(s[KL(e.schema,o).property]=iw(n.attrs[o]));n.startTag;const a=iw(n.startTag),u=n.endTag?iw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function iw(e){const t=fue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=fue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function fue(e){return e.line&&e.column?e:void 0}const due={}.hasOwnProperty;function UEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&due.call(i,e)){const u=String(i[e]);o=due.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const $nt={},Mnt={}.hasOwnProperty,zEe=UEe("type",{handlers:{root:Fnt,element:Vnt,text:Unt,comment:znt,doctype:Bnt}});function Lnt(e,t){const r=(t||$nt).space;return zEe(e,r==="svg"?Iy:JI)}function Fnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=qY(e.children,n,t),jx(e,n),n}function jnt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=qY(e.children,n,t),jx(e,n),n}function Bnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return jx(e,t),t}function Unt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return jx(e,t),t}function znt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return jx(e,t),t}function Vnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Iy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Mnt.call(e.properties,s)){const u=Hnt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Xv[o],childNodes:[],parentNode:null};return a.childNodes=qY(e.children,a,r),jx(e,a),e.tagName==="template"&&e.content&&(a.content=jnt(e.content,r)),a}function Hnt(e,t,n){const r=KL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?eEe(n):lEe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Xv[r.space]}return i}function qY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=zEe(e[r],n);s.parentNode=t,i.push(s)}return i}function jx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const qnt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Wnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const yu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function VEe(e){return e>=55296&&e<=57343}function Gnt(e){return e>=56320&&e<=57343}function Ynt(e,t){return(e-55296)*1024+9216+t}function HEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function qEe(e){return e>=64976&&e<=65007||Wnt.has(e)}var ke;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ke=ke||(ke={}));const Knt=65536;class Xnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Knt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Gnt(n))return this.pos++,this._addGap(),Ynt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(ke.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,VEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){HEe(t)?this._err(ke.controlCharacterInInputStream):qEe(t)&&this._err(ke.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var An;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(An=An||(An={}));function WEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Eg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Qnt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Z8;const Jnt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Znt=(Z8=String.fromCodePoint)!==null&&Z8!==void 0?Z8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function ert(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Jnt.get(e))!==null&&t!==void 0?t:e}var to;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(to||(to={}));const trt=32;var ih;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ih||(ih={}));function g7(e){return e>=to.ZERO&&e<=to.NINE}function nrt(e){return e>=to.UPPER_A&&e<=to.UPPER_F||e>=to.LOWER_A&&e<=to.LOWER_F}function rrt(e){return e>=to.UPPER_A&&e<=to.UPPER_Z||e>=to.LOWER_A&&e<=to.LOWER_Z||g7(e)}function irt(e){return e===to.EQUALS||rrt(e)}var Qs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Qs||(Qs={}));var Ov;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ov||(Ov={}));class srt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Qs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ov.Strict}startEntity(t){this.decodeMode=t,this.state=Qs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Qs.EntityStart:return t.charCodeAt(n)===to.NUM?(this.state=Qs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Qs.NamedEntity,this.stateNamedEntity(t,n));case Qs.NumericStart:return this.stateNumericStart(t,n);case Qs.NumericDecimal:return this.stateNumericDecimal(t,n);case Qs.NumericHex:return this.stateNumericHex(t,n);case Qs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|trt)===to.LOWER_X?(this.state=Qs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Qs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(g7(i)||nrt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(g7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===to.SEMI)this.consumed+=1;else if(this.decodeMode===Ov.Strict)return 0;return this.emitCodePoint(ert(this.result),this.consumed),this.errors&&(t!==to.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&ih.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=YEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ov.Attribute&&(s===0||irt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&ih.VALUE_LENGTH)>>14,s!==0){if(o===to.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ov.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&ih.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~ih.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Qs.NamedEntity:return this.result!==0&&(this.decodeMode!==Ov.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Qs.NumericDecimal:return this.emitNumericEntity(0,2);case Qs.NumericHex:return this.emitNumericEntity(0,3);case Qs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Qs.EntityStart:return 0}}}function GEe(e){let t="";const n=new srt(e,r=>t+=Znt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function YEe(e,t,n,r){const i=(t&ih.BRANCH_LENGTH)>>7,s=t&ih.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}GEe(Eg);GEe(Qnt);var je;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(je=je||(je={}));var b0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(b0=b0||(b0={}));var bl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(bl=bl||(bl={}));var xe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(xe=xe||(xe={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const ort=new Map([[xe.A,N.A],[xe.ADDRESS,N.ADDRESS],[xe.ANNOTATION_XML,N.ANNOTATION_XML],[xe.APPLET,N.APPLET],[xe.AREA,N.AREA],[xe.ARTICLE,N.ARTICLE],[xe.ASIDE,N.ASIDE],[xe.B,N.B],[xe.BASE,N.BASE],[xe.BASEFONT,N.BASEFONT],[xe.BGSOUND,N.BGSOUND],[xe.BIG,N.BIG],[xe.BLOCKQUOTE,N.BLOCKQUOTE],[xe.BODY,N.BODY],[xe.BR,N.BR],[xe.BUTTON,N.BUTTON],[xe.CAPTION,N.CAPTION],[xe.CENTER,N.CENTER],[xe.CODE,N.CODE],[xe.COL,N.COL],[xe.COLGROUP,N.COLGROUP],[xe.DD,N.DD],[xe.DESC,N.DESC],[xe.DETAILS,N.DETAILS],[xe.DIALOG,N.DIALOG],[xe.DIR,N.DIR],[xe.DIV,N.DIV],[xe.DL,N.DL],[xe.DT,N.DT],[xe.EM,N.EM],[xe.EMBED,N.EMBED],[xe.FIELDSET,N.FIELDSET],[xe.FIGCAPTION,N.FIGCAPTION],[xe.FIGURE,N.FIGURE],[xe.FONT,N.FONT],[xe.FOOTER,N.FOOTER],[xe.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[xe.FORM,N.FORM],[xe.FRAME,N.FRAME],[xe.FRAMESET,N.FRAMESET],[xe.H1,N.H1],[xe.H2,N.H2],[xe.H3,N.H3],[xe.H4,N.H4],[xe.H5,N.H5],[xe.H6,N.H6],[xe.HEAD,N.HEAD],[xe.HEADER,N.HEADER],[xe.HGROUP,N.HGROUP],[xe.HR,N.HR],[xe.HTML,N.HTML],[xe.I,N.I],[xe.IMG,N.IMG],[xe.IMAGE,N.IMAGE],[xe.INPUT,N.INPUT],[xe.IFRAME,N.IFRAME],[xe.KEYGEN,N.KEYGEN],[xe.LABEL,N.LABEL],[xe.LI,N.LI],[xe.LINK,N.LINK],[xe.LISTING,N.LISTING],[xe.MAIN,N.MAIN],[xe.MALIGNMARK,N.MALIGNMARK],[xe.MARQUEE,N.MARQUEE],[xe.MATH,N.MATH],[xe.MENU,N.MENU],[xe.META,N.META],[xe.MGLYPH,N.MGLYPH],[xe.MI,N.MI],[xe.MO,N.MO],[xe.MN,N.MN],[xe.MS,N.MS],[xe.MTEXT,N.MTEXT],[xe.NAV,N.NAV],[xe.NOBR,N.NOBR],[xe.NOFRAMES,N.NOFRAMES],[xe.NOEMBED,N.NOEMBED],[xe.NOSCRIPT,N.NOSCRIPT],[xe.OBJECT,N.OBJECT],[xe.OL,N.OL],[xe.OPTGROUP,N.OPTGROUP],[xe.OPTION,N.OPTION],[xe.P,N.P],[xe.PARAM,N.PARAM],[xe.PLAINTEXT,N.PLAINTEXT],[xe.PRE,N.PRE],[xe.RB,N.RB],[xe.RP,N.RP],[xe.RT,N.RT],[xe.RTC,N.RTC],[xe.RUBY,N.RUBY],[xe.S,N.S],[xe.SCRIPT,N.SCRIPT],[xe.SECTION,N.SECTION],[xe.SELECT,N.SELECT],[xe.SOURCE,N.SOURCE],[xe.SMALL,N.SMALL],[xe.SPAN,N.SPAN],[xe.STRIKE,N.STRIKE],[xe.STRONG,N.STRONG],[xe.STYLE,N.STYLE],[xe.SUB,N.SUB],[xe.SUMMARY,N.SUMMARY],[xe.SUP,N.SUP],[xe.TABLE,N.TABLE],[xe.TBODY,N.TBODY],[xe.TEMPLATE,N.TEMPLATE],[xe.TEXTAREA,N.TEXTAREA],[xe.TFOOT,N.TFOOT],[xe.TD,N.TD],[xe.TH,N.TH],[xe.THEAD,N.THEAD],[xe.TITLE,N.TITLE],[xe.TR,N.TR],[xe.TRACK,N.TRACK],[xe.TT,N.TT],[xe.U,N.U],[xe.UL,N.UL],[xe.SVG,N.SVG],[xe.VAR,N.VAR],[xe.WBR,N.WBR],[xe.XMP,N.XMP]]);function Bx(e){var t;return(t=ort.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Ze=N,art={[je.HTML]:new Set([Ze.ADDRESS,Ze.APPLET,Ze.AREA,Ze.ARTICLE,Ze.ASIDE,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BLOCKQUOTE,Ze.BODY,Ze.BR,Ze.BUTTON,Ze.CAPTION,Ze.CENTER,Ze.COL,Ze.COLGROUP,Ze.DD,Ze.DETAILS,Ze.DIR,Ze.DIV,Ze.DL,Ze.DT,Ze.EMBED,Ze.FIELDSET,Ze.FIGCAPTION,Ze.FIGURE,Ze.FOOTER,Ze.FORM,Ze.FRAME,Ze.FRAMESET,Ze.H1,Ze.H2,Ze.H3,Ze.H4,Ze.H5,Ze.H6,Ze.HEAD,Ze.HEADER,Ze.HGROUP,Ze.HR,Ze.HTML,Ze.IFRAME,Ze.IMG,Ze.INPUT,Ze.LI,Ze.LINK,Ze.LISTING,Ze.MAIN,Ze.MARQUEE,Ze.MENU,Ze.META,Ze.NAV,Ze.NOEMBED,Ze.NOFRAMES,Ze.NOSCRIPT,Ze.OBJECT,Ze.OL,Ze.P,Ze.PARAM,Ze.PLAINTEXT,Ze.PRE,Ze.SCRIPT,Ze.SECTION,Ze.SELECT,Ze.SOURCE,Ze.STYLE,Ze.SUMMARY,Ze.TABLE,Ze.TBODY,Ze.TD,Ze.TEMPLATE,Ze.TEXTAREA,Ze.TFOOT,Ze.TH,Ze.THEAD,Ze.TITLE,Ze.TR,Ze.TRACK,Ze.UL,Ze.WBR,Ze.XMP]),[je.MATHML]:new Set([Ze.MI,Ze.MO,Ze.MN,Ze.MS,Ze.MTEXT,Ze.ANNOTATION_XML]),[je.SVG]:new Set([Ze.TITLE,Ze.FOREIGN_OBJECT,Ze.DESC]),[je.XLINK]:new Set,[je.XML]:new Set,[je.XMLNS]:new Set};function KEe(e){return e===Ze.H1||e===Ze.H2||e===Ze.H3||e===Ze.H4||e===Ze.H5||e===Ze.H6}xe.STYLE,xe.SCRIPT,xe.XMP,xe.IFRAME,xe.NOEMBED,xe.NOFRAMES,xe.PLAINTEXT;const urt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const cs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function t2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function YT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function lrt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function xg(e){return lrt(e)||YT(e)}function y7(e){return xg(e)||t2(e)}function XEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function QEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function crt(e){return t2(e)||XEe(e)||QEe(e)}function mN(e){return e+32}function JEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function frt(e){return e===X.EQUALS_SIGN||y7(e)}function hue(e){return JEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class drt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Xnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:An.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:An.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:An.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:An.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(WEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ke.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Bx(t.tagName),t.type===An.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ke.endTagWithAttributes),t.selfClosing&&this._err(ke.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case An.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case An.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case An.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:An.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=JEe(t)?An.WHITESPACE_CHARACTER:t===X.NULL?An.NULL_CHARACTER:An.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(An.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Eg[0];s>=0&&(s=YEe(Eg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Eg[s];const a=o&ih.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&frt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Eg[s]&~ih.VALUE_LENGTH]:u===1?[Eg[++s]]:[Eg[++s],Eg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ke.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(xg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(ke.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(xg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(ke.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.tagName+=vi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(YT(t)?mN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){xg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){xg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){xg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:xg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){xg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&hue(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&hue(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(ke.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(ke.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.name+=vi;break}default:this.currentAttr.name+=String.fromCodePoint(YT(t)?mN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(ke.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=vi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(yu.DASH_DASH,!0)?(this._createCommentToken(yu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(yu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(yu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(yu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(ke.cdataInHtmlContent),this._createCommentToken(yu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ke.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=vi;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(ke.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(YT(t))this._createDoctypeToken(String.fromCharCode(mN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(ke.unexpectedNullCharacter),this._createDoctypeToken(vi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.name+=vi;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(YT(t)?mN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(yu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(yu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ke.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(ke.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(ke.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:y7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){y7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(ke.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:t2(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){crt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){XEe(t)?this.charRefCode=this.charRefCode*16+t-55:QEe(t)?this.charRefCode=this.charRefCode*16+t-87:t2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){t2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(ke.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ke.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(VEe(this.charRefCode))this._err(ke.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(qEe(this.charRefCode))this._err(ke.noncharacterCharacterReference);else if(HEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(ke.controlCharacterReference);const n=urt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const ZEe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),pue=new Set([...ZEe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),gN=new Map([[N.APPLET,je.HTML],[N.CAPTION,je.HTML],[N.HTML,je.HTML],[N.MARQUEE,je.HTML],[N.OBJECT,je.HTML],[N.TABLE,je.HTML],[N.TD,je.HTML],[N.TEMPLATE,je.HTML],[N.TH,je.HTML],[N.ANNOTATION_XML,je.MATHML],[N.MI,je.MATHML],[N.MN,je.MATHML],[N.MO,je.MATHML],[N.MS,je.MATHML],[N.MTEXT,je.MATHML],[N.DESC,je.SVG],[N.FOREIGN_OBJECT,je.SVG],[N.TITLE,je.SVG]]),hrt=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],prt=[N.TR,N.TEMPLATE,N.HTML],mrt=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],grt=[N.TABLE,N.TEMPLATE,N.HTML],yrt=[N.TD,N.TH];class vrt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===je.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==je.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(hrt,je.HTML)}popUntilTableCellPopped(){this.popUntilPopped(yrt,je.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(grt,je.HTML)}clearBackToTableBodyContext(){this.clearBackTo(mrt,je.HTML)}clearBackToTableRowContext(){this.clearBackTo(prt,je.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(gN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(KEe(n)&&r===je.HTML)return!0;if(gN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if((r===N.UL||r===N.OL)&&i===je.HTML||gN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(r===N.BUTTON&&i===je.HTML||gN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===je.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;ZEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;pue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&pue.has(this.currentTagId);)this.pop()}}const ej=3;var Cf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Cf=Cf||(Cf={}));const mue={type:Cf.Marker};class brt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Cf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<ej)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<ej)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=ej&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(mue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Cf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Cf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(mue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Cf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Cf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Cf.Element&&n.element===t)}}function gue(e){return{nodeName:"#text",value:e,parentNode:null}}const R_={createDocument(){return{nodeName:"#document",mode:bl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};R_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(R_.isTextNode(n)){n.value+=t;return}}R_.appendChild(e,gue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&R_.isTextNode(r)?r.value+=t:R_.insertBefore(e,gue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},exe="html",_rt="about:legacy-compat",wrt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",txe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ert=[...txe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],xrt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),nxe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Srt=[...nxe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function yue(e,t){return t.some(n=>e.startsWith(n))}function Trt(e){return e.name===exe&&e.publicId===null&&(e.systemId===null||e.systemId===_rt)}function Crt(e){if(e.name!==exe)return bl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===wrt)return bl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),xrt.has(n))return bl.QUIRKS;let r=t===null?Ert:txe;if(yue(n,r))return bl.QUIRKS;if(r=t===null?nxe:Srt,yue(n,r))return bl.LIMITED_QUIRKS}return bl.NO_QUIRKS}const vue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Art="definitionurl",Irt="definitionURL",krt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Rrt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:je.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:je.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:je.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:je.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:je.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:je.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:je.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:je.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:je.XML}],["xml:space",{prefix:"xml",name:"space",namespace:je.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:je.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:je.XMLNS}]]),Nrt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Prt=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Ort(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===b0.COLOR||r===b0.SIZE||r===b0.FACE)||Prt.has(t)}function rxe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Art){e.attrs[t].name=Irt;break}}function ixe(e){for(let t=0;t<e.attrs.length;t++){const n=krt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function WY(e){for(let t=0;t<e.attrs.length;t++){const n=Rrt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Drt(e){const t=Nrt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Bx(e.tagName))}function $rt(e,t){return t===je.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function Mrt(e,t,n){if(t===je.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===b0.ENCODING){const i=n[r].value.toLowerCase();return i===vue.TEXT_HTML||i===vue.APPLICATION_XML}}return t===je.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function Lrt(e,t,n,r){return(!r||r===je.HTML)&&Mrt(e,t,n)||(!r||r===je.MATHML)&&$rt(e,t)}const Frt="hidden",jrt=8,Brt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Urt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},sxe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),bue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:R_,onParseError:null};let _ue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...bue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new drt(this.options,this),this.activeFormattingElements=new brt(this.treeAdapter),this.fragmentContextID=r?Bx(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new vrt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...bue,...n};t??(t=r.treeAdapter.createElement(xe.TEMPLATE,je.HTML,[]));const i=r.treeAdapter.createElement("documentmock",je.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Urt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===je.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,je.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=cs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===xe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==je.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=cs.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=cs.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=cs.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=cs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,je.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,je.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(xe.HTML,je.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===An.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===xe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===je.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,je.HTML)}_processToken(t){switch(t.type){case An.CHARACTER:{this.onCharacter(t);break}case An.NULL_CHARACTER:{this.onNullCharacter(t);break}case An.COMMENT:{this.onComment(t);break}case An.DOCTYPE:{this.onDoctype(t);break}case An.START_TAG:{this._processStartTag(t);break}case An.END_TAG:{this.onEndTag(t);break}case An.EOF:{this.onEof(t);break}case An.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Lrt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Cf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return sxe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===je.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return art[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){yst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{rT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{axe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{tj(this,t);break}case ie.IN_TABLE_TEXT:{hxe(this,t);break}case ie.IN_COLUMN_GROUP:{GD(this,t);break}case ie.AFTER_BODY:{YD(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){gst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{rT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{tj(this,t);break}case ie.IN_COLUMN_GROUP:{GD(this,t);break}case ie.AFTER_BODY:{YD(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){v7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{v7(this,t);break}case ie.IN_TABLE_TEXT:{iT(this,t);break}case ie.AFTER_BODY:{Yrt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Krt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Xrt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,ke.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{iT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ke.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?vst(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{rT(this,t);break}case ie.BEFORE_HTML:{Qrt(this,t);break}case ie.BEFORE_HEAD:{Zrt(this,t);break}case ie.IN_HEAD:{fd(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{nit(this,t);break}case ie.AFTER_HEAD:{iit(this,t);break}case ie.IN_BODY:{ka(this,t);break}case ie.IN_TABLE:{pE(this,t);break}case ie.IN_TABLE_TEXT:{iT(this,t);break}case ie.IN_CAPTION:{est(this,t);break}case ie.IN_COLUMN_GROUP:{KY(this,t);break}case ie.IN_TABLE_BODY:{n6(this,t);break}case ie.IN_ROW:{r6(this,t);break}case ie.IN_CELL:{rst(this,t);break}case ie.IN_SELECT:{gxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{sst(this,t);break}case ie.IN_TEMPLATE:{ast(this,t);break}case ie.AFTER_BODY:{lst(this,t);break}case ie.IN_FRAMESET:{cst(this,t);break}case ie.AFTER_FRAMESET:{dst(this,t);break}case ie.AFTER_AFTER_BODY:{pst(this,t);break}case ie.AFTER_AFTER_FRAMESET:{mst(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?bst(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{rT(this,t);break}case ie.BEFORE_HTML:{Jrt(this,t);break}case ie.BEFORE_HEAD:{eit(this,t);break}case ie.IN_HEAD:{tit(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{rit(this,t);break}case ie.AFTER_HEAD:{sit(this,t);break}case ie.IN_BODY:{t6(this,t);break}case ie.TEXT:{Hit(this,t);break}case ie.IN_TABLE:{pA(this,t);break}case ie.IN_TABLE_TEXT:{iT(this,t);break}case ie.IN_CAPTION:{tst(this,t);break}case ie.IN_COLUMN_GROUP:{nst(this,t);break}case ie.IN_TABLE_BODY:{b7(this,t);break}case ie.IN_ROW:{mxe(this,t);break}case ie.IN_CELL:{ist(this,t);break}case ie.IN_SELECT:{yxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{ost(this,t);break}case ie.IN_TEMPLATE:{ust(this,t);break}case ie.AFTER_BODY:{bxe(this,t);break}case ie.IN_FRAMESET:{fst(this,t);break}case ie.AFTER_FRAMESET:{hst(this,t);break}case ie.AFTER_AFTER_BODY:{iO(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{rT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{fxe(this,t);break}case ie.TEXT:{qit(this,t);break}case ie.IN_TABLE_TEXT:{iT(this,t);break}case ie.IN_TEMPLATE:{vxe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{YY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{oxe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{tj(this,t);break}case ie.IN_TABLE_TEXT:{dxe(this,t);break}}}};function zrt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):cxe(e,t),n}function Vrt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Hrt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Brt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=qrt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function qrt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Wrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Bx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===je.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Grt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function GY(e,t){for(let n=0;n<jrt;n++){const r=zrt(e,t);if(!r)break;const i=Vrt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Hrt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Wrt(e,o,s),Grt(e,i,r)}}function v7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Yrt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Krt(e,t){e._appendCommentNode(t,e.document)}function YY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Xrt(e,t){e._setDocumentType(t);const n=t.forceQuirks?bl.QUIRKS:Crt(t);Trt(t)||e._err(t,ke.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function rT(e,t){e._err(t,ke.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,bl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Qrt(e,t){t.tagID===N.HTML?(e._insertElement(t,je.HTML),e.insertionMode=ie.BEFORE_HEAD):n2(e,t)}function Jrt(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&n2(e,t)}function n2(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Zrt(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.HEAD:{e._insertElement(t,je.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:r2(e,t)}}function eit(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?r2(e,t):e._err(t,ke.endTagWithoutMatchingOpenElement)}function r2(e,t){e._insertFakeElement(xe.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function fd(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,cs.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,cs.RAWTEXT):(e._insertElement(t,je.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,cs.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,cs.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:i2(e,t)}}function tit(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{i2(e,t);break}case N.TEMPLATE:{xb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function xb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,ke.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ke.endTagWithoutMatchingOpenElement)}function i2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function nit(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{fd(e,t);break}case N.NOSCRIPT:{e._err(t,ke.nestedNoscriptInHead);break}default:s2(e,t)}}function rit(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{s2(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function s2(e,t){const n=t.type===An.EOF?ke.openElementsLeftAfterEof:ke.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function iit(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BODY:{e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,je.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,ke.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),fd(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:o2(e,t)}}function sit(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{o2(e,t);break}case N.TEMPLATE:{xb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function o2(e,t){e._insertFakeElement(xe.BODY,N.BODY),e.insertionMode=ie.IN_BODY,e6(e,t)}function e6(e,t){switch(t.type){case An.CHARACTER:{axe(e,t);break}case An.WHITESPACE_CHARACTER:{oxe(e,t);break}case An.COMMENT:{v7(e,t);break}case An.START_TAG:{ka(e,t);break}case An.END_TAG:{t6(e,t);break}case An.EOF:{fxe(e,t);break}}}function oxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function axe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function oit(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function ait(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function uit(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_FRAMESET)}function lit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function cit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),KEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,je.HTML)}function fit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function dit(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),n||(e.formElement=e.openElements.current))}function hit(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function pit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.tokenizer.state=cs.PLAINTEXT}function mit(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1}function git(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(xe.A);n&&(GY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function yit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vit(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(GY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function bit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function _it(e,t){e.treeAdapter.getDocumentMode(e.document)!==bl.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function uxe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function lxe(e){const t=WEe(e,b0.TYPE);return t!=null&&t.toLowerCase()===Frt}function wit(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),lxe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Eit(e,t){e._appendElement(t,je.HTML),t.ackSelfClosing=!0}function xit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Sit(e,t){t.tagName=xe.IMG,t.tagID=N.IMG,uxe(e,t)}function Tit(e,t){e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.tokenizer.state=cs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Cit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function Ait(e,t){e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function wue(e,t){e._switchToTextParsing(t,cs.RAWTEXT)}function Iit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function kit(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function Rit(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,je.HTML)}function Nit(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,je.HTML)}function Pit(e,t){e._reconstructActiveFormattingElements(),rxe(t),WY(t),t.selfClosing?e._appendElement(t,je.MATHML):e._insertElement(t,je.MATHML),t.ackSelfClosing=!0}function Oit(e,t){e._reconstructActiveFormattingElements(),ixe(t),WY(t),t.selfClosing?e._appendElement(t,je.SVG):e._insertElement(t,je.SVG),t.ackSelfClosing=!0}function Eue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function ka(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{yit(e,t);break}case N.A:{git(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{cit(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{lit(e,t);break}case N.LI:case N.DD:case N.DT:{hit(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{uxe(e,t);break}case N.HR:{xit(e,t);break}case N.RB:case N.RTC:{Rit(e,t);break}case N.RT:case N.RP:{Nit(e,t);break}case N.PRE:case N.LISTING:{fit(e,t);break}case N.XMP:{Cit(e,t);break}case N.SVG:{Oit(e,t);break}case N.HTML:{oit(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{fd(e,t);break}case N.BODY:{ait(e,t);break}case N.FORM:{dit(e,t);break}case N.NOBR:{vit(e,t);break}case N.MATH:{Pit(e,t);break}case N.TABLE:{_it(e,t);break}case N.INPUT:{wit(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Eit(e,t);break}case N.IMAGE:{Sit(e,t);break}case N.BUTTON:{mit(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{bit(e,t);break}case N.IFRAME:{Ait(e,t);break}case N.SELECT:{Iit(e,t);break}case N.OPTION:case N.OPTGROUP:{kit(e,t);break}case N.NOEMBED:{wue(e,t);break}case N.FRAMESET:{uit(e,t);break}case N.TEXTAREA:{Tit(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?wue(e,t):Eue(e,t);break}case N.PLAINTEXT:{pit(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Eue(e,t)}}function Dit(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function $it(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,bxe(e,t))}function Mit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Lit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function Fit(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(xe.P,N.P),e._closePElement()}function jit(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function Bit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Uit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function zit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Vit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(xe.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function cxe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function t6(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{GY(e,t);break}case N.P:{Fit(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Mit(e,t);break}case N.LI:{jit(e);break}case N.DD:case N.DT:{Bit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Uit(e);break}case N.BR:{Vit(e);break}case N.BODY:{Dit(e,t);break}case N.HTML:{$it(e,t);break}case N.FORM:{Lit(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{zit(e,t);break}case N.TEMPLATE:{xb(e,t);break}default:cxe(e,t)}}function fxe(e,t){e.tmplInsertionModeStack.length>0?vxe(e,t):YY(e,t)}function Hit(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function qit(e,t){e._err(t,ke.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function tj(e,t){if(sxe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case An.CHARACTER:{hxe(e,t);break}case An.WHITESPACE_CHARACTER:{dxe(e,t);break}}else ek(e,t)}function Wit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_CAPTION}function Git(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Yit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,KY(e,t)}function Kit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Xit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(xe.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,n6(e,t)}function Qit(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Jit(e,t){lxe(t)?e._appendElement(t,je.HTML):ek(e,t),t.ackSelfClosing=!0}function Zit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,je.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function pE(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Xit(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{fd(e,t);break}case N.COL:{Yit(e,t);break}case N.FORM:{Zit(e,t);break}case N.TABLE:{Qit(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Kit(e,t);break}case N.INPUT:{Jit(e,t);break}case N.CAPTION:{Wit(e,t);break}case N.COLGROUP:{Git(e,t);break}default:ek(e,t)}}function pA(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{xb(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:ek(e,t)}}function ek(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e6(e,t),e.fosterParentingEnabled=n}function dxe(e,t){e.pendingCharacterTokens.push(t)}function hxe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function iT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)ek(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const pxe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function est(e,t){const n=t.tagID;pxe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,pE(e,t)):ka(e,t)}function tst(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&pA(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:t6(e,t)}}function KY(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.COL:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{fd(e,t);break}default:GD(e,t)}}function nst(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{xb(e,t);break}case N.COL:break;default:GD(e,t)}}function GD(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function n6(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(xe.TR,N.TR),e.insertionMode=ie.IN_ROW,r6(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,pE(e,t));break}default:pE(e,t)}}function b7(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,pA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:pA(e,t)}}function r6(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,n6(e,t));break}default:pE(e,t)}}function mxe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,b7(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,b7(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:pA(e,t)}}function rst(e,t){const n=t.tagID;pxe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),r6(e,t)):ka(e,t)}function ist(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),mxe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:t6(e,t)}}function gxe(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{fd(e,t);break}}}function yxe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{xb(e,t);break}}}function sst(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):gxe(e,t)}function ost(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):yxe(e,t)}function ast(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{fd(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,pE(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,KY(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,n6(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,r6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,ka(e,t)}}function ust(e,t){t.tagID===N.TEMPLATE&&xb(e,t)}function vxe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):YY(e,t)}function lst(e,t){t.tagID===N.HTML?ka(e,t):YD(e,t)}function bxe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else YD(e,t)}function YD(e,t){e.insertionMode=ie.IN_BODY,e6(e,t)}function cst(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.FRAMESET:{e._insertElement(t,je.HTML);break}case N.FRAME:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{fd(e,t);break}}}function fst(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function dst(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.NOFRAMES:{fd(e,t);break}}}function hst(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function pst(e,t){t.tagID===N.HTML?ka(e,t):iO(e,t)}function iO(e,t){e.insertionMode=ie.IN_BODY,e6(e,t)}function mst(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.NOFRAMES:{fd(e,t);break}}}function gst(e,t){t.chars=vi,e._insertCharacters(t)}function yst(e,t){e._insertCharacters(t),e.framesetOk=!1}function _xe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==je.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function vst(e,t){if(Ort(t))_xe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===je.MATHML?rxe(t):r===je.SVG&&(Drt(t),ixe(t)),WY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function bst(e,t){if(t.tagID===N.P||t.tagID===N.BR){_xe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===je.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}xe.AREA,xe.BASE,xe.BASEFONT,xe.BGSOUND,xe.BR,xe.COL,xe.EMBED,xe.FRAME,xe.HR,xe.IMG,xe.INPUT,xe.KEYGEN,xe.LINK,xe.META,xe.PARAM,xe.SOURCE,xe.TRACK,xe.WBR;const _st=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),xue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function wxe(e,t){const n=Rst(e),r=UEe("type",{handlers:{root:wst,element:Est,text:xst,comment:xxe,doctype:Sst,raw:Cst},unknown:Ast}),i={parser:n?new _ue(xue):_ue.getFragmentParser(void 0,xue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Ux(i,Xh());const s=n?i.parser.document:i.parser.getFragment(),o=Pnt(s,{file:i.options.file});return i.stitches&&zY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Exe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function wst(e,t){Exe(e.children,t)}function Est(e,t){Ist(e,t),Exe(e.children,t),kst(e,t)}function xst(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:An.CHARACTER,chars:e.value,location:tk(e)};Ux(t,Xh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Sst(e,t){const n={type:An.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:tk(e)};Ux(t,Xh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Tst(e,t){t.stitches=!0;const n=Nst(e);if("children"in e&&"children"in n){const r=wxe({type:"root",children:e.children},t.options);n.children=r.children}xxe({type:"comment",value:{stitch:n}},t)}function xxe(e,t){const n=e.value,r={type:An.COMMENT,data:n,location:tk(e)};Ux(t,Xh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Cst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Sxe(t,Xh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Ast(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Tst(n,t);else{let r="";throw _st.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Ux(e,t){Sxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=cs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Sxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Ist(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===cs.PLAINTEXT)return;Ux(t,Xh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Xv.html;i===Xv.html&&n==="svg"&&(i=Xv.svg);const s=Lnt({...e,children:[]},{space:i===Xv.svg?"svg":"html"}),o={type:An.START_TAG,tagName:n,tagID:Bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:tk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function kst(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&qnt.includes(n)||t.parser.tokenizer.state===cs.PLAINTEXT)return;Ux(t,XL(e));const r={type:An.END_TAG,tagName:n,tagID:Bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:tk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===cs.RCDATA||t.parser.tokenizer.state===cs.RAWTEXT||t.parser.tokenizer.state===cs.SCRIPT_DATA)&&(t.parser.tokenizer.state=cs.DATA)}function Rst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function tk(e){const t=Xh(e)||{line:void 0,column:void 0,offset:void 0},n=XL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Nst(e){return"children"in e?hE({...e,children:[]}):hE(e)}function Pst(e){return function(t,n){return wxe(t,{...e,file:n})}}function Za({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Cy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(nt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Oi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Oi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Oi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Oi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Oi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Oi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(bb,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Vf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Vf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(bnt,{components:n,rehypePlugins:[Pst],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function _7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Za,{text:n})}const Ost="https://github.com/revisit-studies/study/tree/main/public/";function Dst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=tf();return _.jsx(Or.Main,{children:_.jsxs(Fc,{size:"xs",px:"xs",children:[_.jsx(Cy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Kh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(nt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Zwe(i);return _.jsx(Bs,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(_b,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:"bold",children:i}),_.jsxs(tn,{align:"center",direction:"row",children:[_.jsx(pae,{color:"red"}),_.jsx(nt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(_7,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(nt,{c:"dimmed",children:[_.jsx(nt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(nt,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(nt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(bb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Ost}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(tn,{align:"center",direction:"row",children:[_.jsx(pae,{color:"orange"}),_.jsx(nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(_7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var Txe={exports:{}},Cxe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk=I;function $st(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mst=typeof Object.is=="function"?Object.is:$st,Lst=nk.useSyncExternalStore,Fst=nk.useRef,jst=nk.useEffect,Bst=nk.useMemo,Ust=nk.useDebugValue;Cxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Fst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Bst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Mst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Lst(e,s[0],s[1]);return jst(function(){o.hasValue=!0,o.value=a},[a]),Ust(a),a};Txe.exports=Cxe;var zst=Txe.exports,Il="default"in oD?xi:oD,Sue=Symbol.for("react-redux-context"),Tue=typeof globalThis<"u"?globalThis:{};function Vst(){if(!Il.createContext)return{};const e=Tue[Sue]??(Tue[Sue]=new Map);let t=e.get(Il.createContext);return t||(t=Il.createContext(null),e.set(Il.createContext,t)),t}var F0=Vst(),Hst=()=>{throw new Error("uSES not initialized!")};function XY(e=F0){return function(){return Il.useContext(e)}}var Axe=XY(),Ixe=Hst,qst=e=>{Ixe=e},Wst=(e,t)=>e===t;function Gst(e=F0){const t=e===F0?Axe:XY(e),n=(r,i={})=>{const{equalityFn:s=Wst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Il.useRef(!0);const d=Il.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=Ixe(u.addNestedSub,a.getState,l||a.getState,d,s);return Il.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Yst=Gst();function Kst(e){e()}function Xst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Kst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Cue={notify(){},get:()=>[]};function Qst(e,t){let n,r=Cue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Xst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Cue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Jst=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zst=typeof navigator<"u"&&navigator.product==="ReactNative",eot=Jst||Zst?Il.useLayoutEffect:Il.useEffect;function tot({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Il.useMemo(()=>{const l=Qst(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Il.useMemo(()=>e.getState(),[e]);eot(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||F0;return Il.createElement(u.Provider,{value:o},n)}var not=tot;function kxe(e=F0){const t=e===F0?Axe:XY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var rot=kxe();function iot(e=F0){const t=e===F0?rot:kxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Rxe=iot();qst(zst.useSyncExternalStoreWithSelector);function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sot=typeof Symbol=="function"&&Symbol.observable||"@@observable",Aue=sot,nj=()=>Math.random().toString(36).substring(7).split("").join("."),oot={INIT:`@@redux/INIT${nj()}`,REPLACE:`@@redux/REPLACE${nj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nj()}`},KD=oot;function QY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Nxe(e,t,n){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eo(1));return n(Nxe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Eo(3));return i}function f(g){if(typeof g!="function")throw new Error(Eo(4));if(u)throw new Error(Eo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Eo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!QY(g))throw new Error(Eo(7));if(typeof g.type>"u")throw new Error(Eo(8));if(typeof g.type!="string")throw new Error(Eo(17));if(u)throw new Error(Eo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Eo(10));r=g,d({type:KD.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Aue](){return this}}}return d({type:KD.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Aue]:p}}function aot(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:KD.INIT})>"u")throw new Error(Eo(12));if(typeof n(void 0,{type:KD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function uot(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{aot(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Eo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function XD(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function lot(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Eo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=XD(...a)(i.dispatch),{...i,dispatch:s}}}function cot(e){return QY(e)&&"type"in e&&typeof e.type=="string"}var Pxe=Symbol.for("immer-nothing"),Iue=Symbol.for("immer-draftable"),Bl=Symbol.for("immer-state");function If(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var mE=Object.getPrototypeOf;function j0(e){return!!e&&!!e[Bl]}function xm(e){var t;return e?Oxe(e)||Array.isArray(e)||!!e[Iue]||!!((t=e.constructor)!=null&&t[Iue])||s6(e)||o6(e):!1}var fot=Object.prototype.constructor.toString();function Oxe(e){if(!e||typeof e!="object")return!1;const t=mE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===fot}function QD(e,t){i6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function i6(e){const t=e[Bl];return t?t.type_:Array.isArray(e)?1:s6(e)?2:o6(e)?3:0}function w7(e,t){return i6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Dxe(e,t,n){const r=i6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function dot(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function s6(e){return e instanceof Map}function o6(e){return e instanceof Set}function bv(e){return e.copy_||e.base_}function E7(e,t){if(s6(e))return new Map(e);if(o6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Oxe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Bl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(mE(e),r)}else{const r=mE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function JY(e,t=!1){return a6(e)||j0(e)||!xm(e)||(i6(e)>1&&(e.set=e.add=e.clear=e.delete=hot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>JY(r,!0))),e}function hot(){If(2)}function a6(e){return Object.isFrozen(e)}var pot={};function N1(e){const t=pot[e];return t||If(0,e),t}var mA;function $xe(){return mA}function mot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kue(e,t){t&&(N1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function x7(e){S7(e),e.drafts_.forEach(got),e.drafts_=null}function S7(e){e===mA&&(mA=e.parent_)}function Rue(e){return mA=mot(mA,e)}function got(e){const t=e[Bl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Nue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bl].modified_&&(x7(t),If(4)),xm(e)&&(e=JD(t,e),t.parent_||ZD(t,e)),t.patches_&&N1("Patches").generateReplacementPatches_(n[Bl].base_,e,t.patches_,t.inversePatches_)):e=JD(t,n,[]),x7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pxe?e:void 0}function JD(e,t,n){if(a6(t))return t;const r=t[Bl];if(!r)return QD(t,(i,s)=>Pue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ZD(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),QD(s,(a,u)=>Pue(e,r,i,a,u,n,o)),ZD(e,i,!1),n&&e.patches_&&N1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Pue(e,t,n,r,i,s,o){if(j0(i)){const a=s&&t&&t.type_!==3&&!w7(t.assigned_,r)?s.concat(r):void 0,u=JD(e,i,a);if(Dxe(n,r,u),j0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(xm(i)&&!a6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;JD(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ZD(e,i)}}function ZD(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&JY(t,n)}function yot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:$xe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ZY;n&&(i=[r],s=gA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ZY={get(e,t){if(t===Bl)return e;const n=bv(e);if(!w7(n,t))return vot(e,n,t);const r=n[t];return e.finalized_||!xm(r)?r:r===rj(e.base_,t)?(ij(e),e.copy_[t]=C7(r,e)):r},has(e,t){return t in bv(e)},ownKeys(e){return Reflect.ownKeys(bv(e))},set(e,t,n){const r=Mxe(bv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=rj(bv(e),t),s=i==null?void 0:i[Bl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(dot(n,i)&&(n!==void 0||w7(e.base_,t)))return!0;ij(e),T7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ij(e),T7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=bv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){If(11)},getPrototypeOf(e){return mE(e.base_)},setPrototypeOf(){If(12)}},gA={};QD(ZY,(e,t)=>{gA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});gA.deleteProperty=function(e,t){return gA.set.call(this,e,t,void 0)};gA.set=function(e,t,n){return ZY.set.call(this,e[0],t,n,e[0])};function rj(e,t){const n=e[Bl];return(n?bv(n):e)[t]}function vot(e,t,n){var i;const r=Mxe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Mxe(e,t){if(!(t in e))return;let n=mE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=mE(n)}}function T7(e){e.modified_||(e.modified_=!0,e.parent_&&T7(e.parent_))}function ij(e){e.copy_||(e.copy_=E7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&If(6),r!==void 0&&typeof r!="function"&&If(7);let i;if(xm(t)){const s=Rue(this),o=C7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?x7(s):S7(s)}return kue(s,r),Nue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Pxe&&(i=void 0),this.autoFreeze_&&JY(i,!0),r){const s=[],o=[];N1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else If(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xm(e)||If(8),j0(e)&&(e=Lxe(e));const t=Rue(this),n=C7(e,void 0);return n[Bl].isManual_=!0,S7(t),n}finishDraft(e,t){const n=e&&e[Bl];(!n||!n.isManual_)&&If(9);const{scope_:r}=n;return kue(r,t),Nue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=N1("Patches").applyPatches_;return j0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function C7(e,t){const n=s6(e)?N1("MapSet").proxyMap_(e,t):o6(e)?N1("MapSet").proxySet_(e,t):yot(e,t);return(t?t.scope_:$xe()).drafts_.push(n),n}function Lxe(e){return j0(e)||If(10,e),Fxe(e)}function Fxe(e){if(!xm(e)||a6(e))return e;const t=e[Bl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=E7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=E7(e,!0);return QD(n,(r,i)=>{Dxe(n,r,Fxe(i))}),t&&(t.finalized_=!1),n}var Ul=new bot,jxe=Ul.produce;Ul.produceWithPatches.bind(Ul);Ul.setAutoFreeze.bind(Ul);Ul.setUseStrictShallowCopy.bind(Ul);Ul.applyPatches.bind(Ul);Ul.createDraft.bind(Ul);Ul.finishDraft.bind(Ul);function _ot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function wot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Eot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Oue=e=>Array.isArray(e)?e:[e];function xot(e){const t=Array.isArray(e[0])?e[0]:e;return Eot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Sot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Tot=class{constructor(e){this.value=e}deref(){return this.value}},Cot=typeof WeakRef<"u"?WeakRef:Tot,Aot=0,Due=1;function yN(){return{s:Aot,v:void 0,o:null,p:null}}function eK(e,t={}){let n=yN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=yN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=yN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Due)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Cot(c):c}return l.s=Due,l.v=c,c}return o.clearCache=()=>{n=yN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Bxe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),_ot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=eK,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Oue(d),y=Oue(p),v=xot(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=Sot(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Iot=Bxe(eK),kot=Object.assign((e,t=Iot)=>{wot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>kot});function Uxe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Rot=Uxe(),Not=Uxe,Pot=(...e)=>{const t=Bxe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(j0(o)?Lxe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Pot(eK);var Oot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?XD:XD.apply(null,arguments)};function gE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>cot(r)&&r.type===e,n}var zxe=class KT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,KT.prototype)}static get[Symbol.species](){return KT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new KT(...t[0].concat(this)):new KT(...t.concat(this))}};function $ue(e){return xm(e)?jxe(e,()=>{}):e}function Mue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(qu(10));const r=n.insert(t,e);return e.set(t,r),r}function Dot(e){return typeof e=="boolean"}var $ot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new zxe;return n&&(Dot(n)?o.push(Rot):o.push(Not(n.extraArgument))),o},Mot="RTK_autoBatch",Vxe=e=>t=>{setTimeout(t,e)},Lot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Vxe(10),Fot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Lot:e.type==="callback"?e.queueNotification:Vxe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Mot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},jot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new zxe(e);return r&&i.push(Fot(typeof r=="object"?r:void 0)),i},Bot=!0;function Uot(e){const t=$ot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(QY(n))a=uot(n);else throw new Error(qu(1));let u;typeof r=="function"?u=r(t):u=t();let l=XD;i&&(l=Oot({trace:!Bot,...typeof i=="object"&&i}));const c=lot(...u),f=jot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Nxe(a,s,h)}function Hxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(qu(28));if(a in t)throw new Error(qu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function zot(e){return typeof e=="function"}function Vot(e,t){let[n,r,i]=Hxe(t),s;if(zot(e))s=()=>$ue(e());else{const a=$ue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(j0(c)){const h=f(c,u);return h===void 0?c:h}else{if(xm(c))return jxe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(qu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Hot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qot=(e=21)=>{let t="",n=e;for(;n--;)t+=Hot[Math.random()*64|0];return t},Wot=Symbol.for("rtk-slice-createasyncthunk");function Got(e,t){return`${e}/${t}`}function Yot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Wot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(qu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Qot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(qu(12));if(E in l.sliceCaseReducersByType)throw new Error(qu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Got(s,b),createNotation:typeof i.reducers=="function"};Zot(w)?tat(E,w,c,t):Jot(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?Hxe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return Vot(i.initialState,x=>{for(let C in S)x.addCase(C,S[C]);for(let C of l.sliceMatchers)x.addMatcher(C.matcher,C.reducer);for(let C of w)x.addMatcher(C.matcher,C.reducer);E&&x.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(x){let C=x[b];return typeof C>"u"&&w&&(C=g()),C}function S(x=d){const C=Mue(h,w,{insert:()=>new WeakMap});return Mue(C,x,{insert:()=>{const A={};for(const[R,P]of Object.entries(i.selectors??{}))A[R]=Kot(P,x,g,w);return A}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function Kot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Xot=Yot();function Qot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Jot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!eat(r))throw new Error(qu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?gE(e,o):gE(e))}function Zot(e){return e._reducerDefinitionType==="asyncThunk"}function eat(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tat({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||vN,pending:a||vN,rejected:u||vN,settled:l||vN})}function vN(){}var nat=(e,t)=>{if(typeof e!="function")throw new Error(qu(32))},tK="listenerMiddleware",rat=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=gE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qu(21));return nat(s),{predicate:i,type:t,effect:s}},iat=Object.assign(e=>{const{type:t,predicate:n,effect:r}=rat(e);return{id:qot(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qu(22))}}},{withTypes:()=>iat}),sat=Object.assign(gE(`${tK}/add`),{withTypes:()=>sat});gE(`${tK}/removeAll`);var oat=Object.assign(gE(`${tK}/remove`),{withTypes:()=>oat});function qu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fi={};function aat(e){return!!(e&&typeof e.then=="function")}function e3(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function uat(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function u6(){return Math.random().toString(36).substring(2)}var Lue=0,sj=0;function l6(){var e=new Date().getTime();return e===Lue?(sj++,e*1e3+sj):(Lue=e,sj=0,e*1e3)}var rk=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",lat=l6,cat="native";function fat(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function dat(e){e.bc.close(),e.subFns=[]}function hat(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function pat(e,t){e.messagesCallback=t}function mat(){if(rk&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function gat(){return 150}const yat={create:fat,close:dat,onMessage:pat,postMessage:hat,canBeUsed:mat,type:cat,averageResponseTime:gat,microSeconds:lat};var qxe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,Wxe()),this.set.add(t),setTimeout(function(){vat(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function vat(e){for(var t=Wxe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function Wxe(){return new Date().getTime()}function c6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var bat=l6,_at="pubkey.broadcast-channel-0-",Sm="messages",wat="idb";function Gxe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Eat(e){var t=Gxe(),n=_at+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(Sm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function xat(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([Sm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(Sm);u.add(i)})}function Sat(e,t){var n=e.transaction(Sm).objectStore(Sm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function Tat(e,t){var n=e.transaction([Sm],"readwrite").objectStore(Sm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function Cat(e,t){var n=new Date().getTime()-t,r=e.transaction(Sm).objectStore(Sm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function Aat(e,t){return Cat(e,t).then(function(n){return Promise.all(n.map(function(r){return Tat(e,r.id)}))})}function Iat(e,t){return t=c6(t),Eat(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:u6(),eMIs:new qxe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Yxe(r),r})}function Yxe(e){e.closed||Kxe(e).then(function(){return e3(e.options.idb.fallbackInterval)}).then(function(){return Yxe(e)})}function kat(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function Kxe(e){return e.closed||!e.messagesCallback?Promise.resolve():Sat(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return kat(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function Rat(e){e.closed=!0,e.db.close()}function Nat(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return xat(e.db,e.uuid,t)}).then(function(){uat(0,10)===0&&Aat(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function Pat(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Kxe(e)}function Oat(){if(rk)return!1;var e=Gxe();return!!e}function Dat(e){return e.idb.fallbackInterval*2}const $at={create:Iat,close:Rat,onMessage:Pat,postMessage:Nat,canBeUsed:Oat,type:wat,averageResponseTime:Dat,microSeconds:bat};var Mat=l6,Lat="pubkey.broadcastChannel-",Fat="localstorage";function Xxe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Qxe(e){return Lat+e}function jat(e,t){return new Promise(function(n){e3().then(function(){var r=Qxe(e.channelName),i={token:u6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);Xxe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function Bat(e,t){var n=Qxe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function Uat(e){window.removeEventListener("storage",e)}function zat(e,t){if(t=c6(t),!Jxe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=u6(),r=new qxe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Bat(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function Vat(e){Uat(e.listener)}function Hat(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function Jxe(){if(rk)return!1;var e=Xxe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function qat(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const Wat={create:zat,close:Vat,onMessage:Hat,postMessage:jat,canBeUsed:Jxe,type:Fat,averageResponseTime:qat,microSeconds:Mat};var Gat=l6,Yat="simulate",nK=new Set;function Kat(e){var t={name:e,messagesCallback:null};return nK.add(t),t}function Xat(e){nK.delete(e)}function Qat(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(nK);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function Jat(e,t){e.messagesCallback=t}function Zat(){return!0}function eut(){return 5}const tut={create:Kat,close:Xat,onMessage:Jat,postMessage:Qat,canBeUsed:Zat,type:Yat,averageResponseTime:eut,microSeconds:Gat};var A7=[yat,$at,Wat];if(rk){var Fue=require("../../src/methods/node.js");typeof Fue.canBeUsed=="function"&&A7.push(Fue)}function Zxe(e){var t=[].concat(e.methods,A7).filter(Boolean);if(e.type){if(e.type==="simulate")return tut;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!rk&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(A7.map(function(i){return i.type})))}var rK=function(t,n){this.name=t,I7&&(n=I7),this.options=c6(n),this.method=Zxe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,iut(this)};rK._pubkey=!0;function nut(e){e=c6(e);var t=Zxe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var I7;function rut(e){I7=e}rK.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return jue(this,"message",t)},postInternal:function(t){return jue(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};Uue(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,Bue(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};Bue(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});Uue(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function jue(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function iut(e){var t=e.method.create(e.name,e.options);aat(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function eSe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Bue(e,t,n){e._addEL[t].push(n),sut(e)}function Uue(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),out(e)}function sut(e){if(!e._iL&&eSe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function out(e){if(e._iL&&!eSe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const aut=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function uut(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const lut={add:uut},tSe={},cut=Object.freeze(Object.defineProperty({__proto__:null,default:tSe},Symbol.toStringTag,{value:"Module"}));var fut=aut?tSe:lut,c1=new Set,zue=!1;function dut(){zue||(zue=!0,fut.add(nSe))}function hut(e){if(dut(),typeof e!="function")throw new Error("Listener is no function");c1.add(e);var t={remove:function(){return c1.delete(e)},run:function(){return c1.delete(e),e()}};return t}function nSe(){var e=[];return c1.forEach(function(t){e.push(t()),c1.delete(t)}),Promise.all(e)}function put(){c1.clear()}function mut(){return c1.size}const gut={add:hut,runAll:nSe,removeAll:put,getSize:mut};var rSe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=u6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};rSe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=Qv(this,"apply").then(function(){return e3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Qv(t,"apply")}).then(function(){return e3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Qv(t)}).then(function(){return iSe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=yut(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),Qv(this,"death")}};function yut(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function Qv(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function iSe(e){e.isLeader=!0;var t=gut.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&Qv(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),Qv(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),Qv(e,"tell")}function vut(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function but(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=vut(t,e);var n=new rSe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const _ut=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:rK,beLeader:iSe,clearNodeFolder:nut,createLeaderElection:but,enforceOptions:rut},Symbol.toStringTag,{value:"Module"})),wut=Mye(_ut);var iK,sK,oK;Object.defineProperty(fi,"__esModule",{value:!0});fi.initMessageListener=oK=fi.initStateWithPrevTab=sK=fi.withReduxStateSync=fi.createReduxStateSync=iK=fi.createStateSyncMiddleware=fi.WINDOW_STATE_SYNC_ID=fi.INIT_MESSAGE_LISTENER=fi.RECEIVE_INIT_STATE=fi.SEND_INIT_STATE=fi.GET_INIT_STATE=void 0;fi.generateUuidForAction=aSe;fi.isActionAllowed=uSe;fi.isActionSynced=Iut;fi.MessageListener=lSe;var Eut=wut,k7=0,aK=fi.GET_INIT_STATE="&_GET_INIT_STATE",uK=fi.SEND_INIT_STATE="&_SEND_INIT_STATE",lK=fi.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",xut=fi.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",R7={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},Sut=function(){return{type:aK}},Tut=function(){return{type:uK}},Cut=function(t){return{type:lK,payload:t}},Aut=function(){return{type:xut}};function mg(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function sSe(){return""+mg()+mg()+"-"+mg()+"-"+mg()+"-"+mg()+"-"+mg()+mg()+mg()}var oSe=fi.WINDOW_STATE_SYNC_ID=sSe();function aSe(e){var t=e;return t.$uuid=sSe(),t.$wuid=oSe,t}function uSe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function Iut(e){return!!e.$isSync}function lSe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==oSe&&o.type!==lK&&o.$uuid&&o.$uuid!==k7&&(o.type===aK&&!s[o.$wuid]?(s[o.$wuid]=!0,n(Tut())):o.type===uK&&!s[o.$wuid]?i||(i=!0,n(Cut(o.payload))):r(o)&&(k7=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}iK=fi.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R7,n=uSe(t),r=new Eut.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||R7.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new lSe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=aSe(c);k7=f.$uuid;try{if(c.type===uK)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===aK)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var kut=fi.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R7.receiveState;return function(r,i){var s=r;return i.type===lK&&(s=n(r,i.payload)),t(s,i)}};sK=fi.withReduxStateSync=kut;oK=fi.initStateWithPrevTab=function(t){var n=t.dispatch;n(Sut())};fi.initMessageListener=function(t){var n=t.dispatch;n(Aut())};function Rc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Rc(t))}function cSe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:cSe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function fSe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rc(e).length-1}];r+=1}else{const o=fSe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function dSe(e,t){const n=fSe(e,t,0);return typeof n=="number"?null:n}function hSe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=hSe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Rut(e,t){const n=hSe(e,t,0);return n.found?n.distance:-1}function pSe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...pSe(i,`${t}-${s}`))}),n}async function Nut(e,t,n,r,i){const s=Rc(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Xot({name:"storeSlice",initialState:l,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}}),f=iK({}),d=Uot({reducer:sK(c.reducer),preloadedState:l,middleware:h=>h().prepend(f)});return oK(d),{store:d,actions:c.actions}}const mSe=I.createContext(null);function zl(){return I.useContext(mSe).actions}const jc=Rxe,Fo=Yst;function Put(e){return Fo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function cK(){return Fo(e=>Rc(e.sequence))}function zx(){const{studyId:e}=Zf();return`${e}`}function Ry(){const{index:e}=Zf(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Qh(){const e=Ry(),t=cK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var t3={exports:{}};t3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",x="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",P="[object Float32Array]",$="[object Float64Array]",k="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",V="[object Uint32Array]",O=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[P]=j[$]=j[k]=j[D]=j[M]=j[L]=j[B]=j[U]=j[V]=!0,j[a]=j[u]=j[A]=j[c]=j[R]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[C]=!1;var H=typeof Ms=="object"&&Ms&&Ms.Object===Object&&Ms,G=typeof self=="object"&&self&&self.Object===Object&&self,te=H||G||Function("return this")(),he=t&&!t.nodeType&&t,fe=he&&!0&&e&&!e.nodeType&&e,ge=fe&&fe.exports===he,le=ge&&H.process,Me=function(){try{var ne=fe&&fe.require&&fe.require("util").types;return ne||le&&le.binding&&le.binding("util")}catch{}}(),ce=Me&&Me.isTypedArray;function ze(ne,ue,Ie){switch(Ie.length){case 0:return ne.call(ue);case 1:return ne.call(ue,Ie[0]);case 2:return ne.call(ue,Ie[0],Ie[1]);case 3:return ne.call(ue,Ie[0],Ie[1],Ie[2])}return ne.apply(ue,Ie)}function Ve(ne,ue){for(var Ie=-1,It=Array(ne);++Ie<ne;)It[Ie]=ue(Ie);return It}function at(ne){return function(ue){return ne(ue)}}function tt(ne,ue){return ne==null?void 0:ne[ue]}function be(ne,ue){return function(Ie){return ne(ue(Ie))}}var pe=Array.prototype,Oe=Function.prototype,He=Object.prototype,pt=te["__core-js_shared__"],Ge=Oe.toString,_e=He.hasOwnProperty,ct=function(){var ne=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),bt=He.toString,ye=Ge.call(Object),Ne=RegExp("^"+Ge.call(_e).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=ge?te.Buffer:void 0,Je=te.Symbol,xt=te.Uint8Array;We&&We.allocUnsafe;var wn=be(Object.getPrototypeOf,Object),yr=Object.create,vr=He.propertyIsEnumerable,kr=pe.splice,Kt=Je?Je.toStringTag:void 0,Tn=function(){try{var ne=Ye(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),rr=We?We.isBuffer:void 0,ir=Math.max,Ho=Date.now,Bi=Ye(te,"Map"),is=Ye(Object,"create"),Ln=function(){function ne(){}return function(ue){if(!vp(ue))return{};if(yr)return yr(ue);ne.prototype=ue;var Ie=new ne;return ne.prototype=void 0,Ie}}();function Hn(ne){var ue=-1,Ie=ne==null?0:ne.length;for(this.clear();++ue<Ie;){var It=ne[ue];this.set(It[0],It[1])}}function gs(){this.__data__=is?is(null):{},this.size=0}function pp(ne){var ue=this.has(ne)&&delete this.__data__[ne];return this.size-=ue?1:0,ue}function cl(ne){var ue=this.__data__;if(is){var Ie=ue[ne];return Ie===r?void 0:Ie}return _e.call(ue,ne)?ue[ne]:void 0}function Sd(ne){var ue=this.__data__;return is?ue[ne]!==void 0:_e.call(ue,ne)}function xr(ne,ue){var Ie=this.__data__;return this.size+=this.has(ne)?0:1,Ie[ne]=is&&ue===void 0?r:ue,this}Hn.prototype.clear=gs,Hn.prototype.delete=pp,Hn.prototype.get=cl,Hn.prototype.has=Sd,Hn.prototype.set=xr;function Ii(ne){var ue=-1,Ie=ne==null?0:ne.length;for(this.clear();++ue<Ie;){var It=ne[ue];this.set(It[0],It[1])}}function li(){this.__data__=[],this.size=0}function hu(ne){var ue=this.__data__,Ie=Jn(ue,ne);if(Ie<0)return!1;var It=ue.length-1;return Ie==It?ue.pop():kr.call(ue,Ie,1),--this.size,!0}function Ra(ne){var ue=this.__data__,Ie=Jn(ue,ne);return Ie<0?void 0:ue[Ie][1]}function Na(ne){return Jn(this.__data__,ne)>-1}function oe(ne,ue){var Ie=this.__data__,It=Jn(Ie,ne);return It<0?(++this.size,Ie.push([ne,ue])):Ie[It][1]=ue,this}Ii.prototype.clear=li,Ii.prototype.delete=hu,Ii.prototype.get=Ra,Ii.prototype.has=Na,Ii.prototype.set=oe;function ee(ne){var ue=-1,Ie=ne==null?0:ne.length;for(this.clear();++ue<Ie;){var It=ne[ue];this.set(It[0],It[1])}}function ae(){this.size=0,this.__data__={hash:new Hn,map:new(Bi||Ii),string:new Hn}}function Ce(ne){var ue=qe(this,ne).delete(ne);return this.size-=ue?1:0,ue}function Ae(ne){return qe(this,ne).get(ne)}function lt(ne){return qe(this,ne).has(ne)}function Tt(ne,ue){var Ie=qe(this,ne),It=Ie.size;return Ie.set(ne,ue),this.size+=Ie.size==It?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Ae,ee.prototype.has=lt,ee.prototype.set=Tt;function Xt(ne){var ue=this.__data__=new Ii(ne);this.size=ue.size}function On(){this.__data__=new Ii,this.size=0}function Fn(ne){var ue=this.__data__,Ie=ue.delete(ne);return this.size=ue.size,Ie}function pn(ne){return this.__data__.get(ne)}function sr(ne){return this.__data__.has(ne)}function Rr(ne,ue){var Ie=this.__data__;if(Ie instanceof Ii){var It=Ie.__data__;if(!Bi||It.length<n-1)return It.push([ne,ue]),this.size=++Ie.size,this;Ie=this.__data__=new ee(It)}return Ie.set(ne,ue),this.size=Ie.size,this}Xt.prototype.clear=On,Xt.prototype.delete=Fn,Xt.prototype.get=pn,Xt.prototype.has=sr,Xt.prototype.set=Rr;function Vt(ne,ue){var Ie=gp(ne),It=!Ie&&pu(ne),Dn=!Ie&&!It&&yp(ne),Sr=!Ie&&!It&&!Dn&&DR(ne),qr=Ie||It||Dn||Sr,Bn=qr?Ve(ne.length,String):[],Wr=Bn.length;for(var ss in ne)qr&&(ss=="length"||Dn&&(ss=="offset"||ss=="parent")||Sr&&(ss=="buffer"||ss=="byteLength"||ss=="byteOffset")||Et(ss,Wr))||Bn.push(ss);return Bn}function or(ne,ue,Ie){(Ie!==void 0&&!nc(ne[ue],Ie)||Ie===void 0&&!(ue in ne))&&ki(ne,ue,Ie)}function Hr(ne,ue,Ie){var It=ne[ue];(!(_e.call(ne,ue)&&nc(It,Ie))||Ie===void 0&&!(ue in ne))&&ki(ne,ue,Ie)}function Jn(ne,ue){for(var Ie=ne.length;Ie--;)if(nc(ne[Ie][0],ue))return Ie;return-1}function ki(ne,ue,Ie){ue=="__proto__"&&Tn?Tn(ne,ue,{configurable:!0,enumerable:!0,value:Ie,writable:!0}):ne[ue]=Ie}var Ks=De();function Jr(ne){return ne==null?ne===void 0?x:y:Kt&&Kt in Object(ne)?Ke(ne):Wo(ne)}function go(ne){return mu(ne)&&Jr(ne)==a}function Ui(ne){if(!vp(ne)||jn(ne))return!1;var ue=US(ne)?Ne:z;return ue.test(NR(ne))}function zi(ne){return mu(ne)&&OR(ne.length)&&!!j[Jr(ne)]}function qo(ne){if(!vp(ne))return Pr(ne);var ue=Nr(ne),Ie=[];for(var It in ne)It=="constructor"&&(ue||!_e.call(ne,It))||Ie.push(It);return Ie}function Pa(ne,ue,Ie,It,Dn){ne!==ue&&Ks(ue,function(Sr,qr){if(Dn||(Dn=new Xt),vp(Sr))Xs(ne,ue,qr,Ie,Pa,It,Dn);else{var Bn=It?It(mp(ne,qr),Sr,qr+"",ne,ue,Dn):void 0;Bn===void 0&&(Bn=Sr),or(ne,qr,Bn)}},ev)}function Xs(ne,ue,Ie,It,Dn,Sr,qr){var Bn=mp(ne,Ie),Wr=mp(ue,Ie),ss=qr.get(Wr);if(ss){or(ne,Ie,ss);return}var Go=Sr?Sr(Bn,Wr,Ie+"",ne,ue,qr):void 0,nv=Go===void 0;if(nv){var bp=gp(Wr),Kb=!bp&&yp(Wr),Xb=!bp&&!Kb&&DR(Wr);Go=Wr,bp||Kb||Xb?gp(Bn)?Go=Bn:PR(Bn)?Go=me(Bn):Kb?(nv=!1,Go=Y(Wr)):Xb?(nv=!1,Go=Z(Wr)):Go=[]:V5(Wr)||pu(Wr)?(Go=Bn,pu(Bn)?Go=Zy(Bn):(!vp(Bn)||US(Bn))&&(Go=ut(Wr))):nv=!1}nv&&(qr.set(Wr,Go),Dn(Go,Wr,It,Sr,qr),qr.delete(Wr)),or(ne,Ie,Go)}function tc(ne,ue){return BS(Cd(ne,ue,dg),ne+"")}var Td=Tn?function(ne,ue){return Tn(ne,"toString",{configurable:!0,enumerable:!1,value:tv(ue),writable:!0})}:dg;function Y(ne,ue){return ne.slice()}function se(ne){var ue=new ne.constructor(ne.byteLength);return new xt(ue).set(new xt(ne)),ue}function Z(ne,ue){var Ie=se(ne.buffer);return new ne.constructor(Ie,ne.byteOffset,ne.length)}function me(ne,ue){var Ie=-1,It=ne.length;for(ue||(ue=Array(It));++Ie<It;)ue[Ie]=ne[Ie];return ue}function ve(ne,ue,Ie,It){var Dn=!Ie;Ie||(Ie={});for(var Sr=-1,qr=ue.length;++Sr<qr;){var Bn=ue[Sr],Wr=void 0;Wr===void 0&&(Wr=ne[Bn]),Dn?ki(Ie,Bn,Wr):Hr(Ie,Bn,Wr)}return Ie}function de(ne){return tc(function(ue,Ie){var It=-1,Dn=Ie.length,Sr=Dn>1?Ie[Dn-1]:void 0,qr=Dn>2?Ie[2]:void 0;for(Sr=ne.length>3&&typeof Sr=="function"?(Dn--,Sr):void 0,qr&&mn(Ie[0],Ie[1],qr)&&(Sr=Dn<3?void 0:Sr,Dn=1),ue=Object(ue);++It<Dn;){var Bn=Ie[It];Bn&&ne(ue,Bn,It,Sr)}return ue})}function De(ne){return function(ue,Ie,It){for(var Dn=-1,Sr=Object(ue),qr=It(ue),Bn=qr.length;Bn--;){var Wr=qr[++Dn];if(Ie(Sr[Wr],Wr,Sr)===!1)break}return ue}}function qe(ne,ue){var Ie=ne.__data__;return Pt(ue)?Ie[typeof ue=="string"?"string":"hash"]:Ie.map}function Ye(ne,ue){var Ie=tt(ne,ue);return Ui(Ie)?Ie:void 0}function Ke(ne){var ue=_e.call(ne,Kt),Ie=ne[Kt];try{ne[Kt]=void 0;var It=!0}catch{}var Dn=bt.call(ne);return It&&(ue?ne[Kt]=Ie:delete ne[Kt]),Dn}function ut(ne){return typeof ne.constructor=="function"&&!Nr(ne)?Ln(wn(ne)):{}}function Et(ne,ue){var Ie=typeof ne;return ue=ue??o,!!ue&&(Ie=="number"||Ie!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<ue}function mn(ne,ue,Ie){if(!vp(Ie))return!1;var It=typeof ue;return(It=="number"?Yb(Ie)&&Et(ue,Ie.length):It=="string"&&ue in Ie)?nc(Ie[ue],ne):!1}function Pt(ne){var ue=typeof ne;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?ne!=="__proto__":ne===null}function jn(ne){return!!ct&&ct in ne}function Nr(ne){var ue=ne&&ne.constructor,Ie=typeof ue=="function"&&ue.prototype||He;return ne===Ie}function Pr(ne){var ue=[];if(ne!=null)for(var Ie in Object(ne))ue.push(Ie);return ue}function Wo(ne){return bt.call(ne)}function Cd(ne,ue,Ie){return ue=ir(ue===void 0?ne.length-1:ue,0),function(){for(var It=arguments,Dn=-1,Sr=ir(It.length-ue,0),qr=Array(Sr);++Dn<Sr;)qr[Dn]=It[ue+Dn];Dn=-1;for(var Bn=Array(ue+1);++Dn<ue;)Bn[Dn]=It[Dn];return Bn[ue]=Ie(qr),ze(ne,this,Bn)}}function mp(ne,ue){if(!(ue==="constructor"&&typeof ne[ue]=="function")&&ue!="__proto__")return ne[ue]}var BS=Jy(Td);function Jy(ne){var ue=0,Ie=0;return function(){var It=Ho(),Dn=s-(It-Ie);if(Ie=It,Dn>0){if(++ue>=i)return arguments[0]}else ue=0;return ne.apply(void 0,arguments)}}function NR(ne){if(ne!=null){try{return Ge.call(ne)}catch{}try{return ne+""}catch{}}return""}function nc(ne,ue){return ne===ue||ne!==ne&&ue!==ue}var pu=go(function(){return arguments}())?go:function(ne){return mu(ne)&&_e.call(ne,"callee")&&!vr.call(ne,"callee")},gp=Array.isArray;function Yb(ne){return ne!=null&&OR(ne.length)&&!US(ne)}function PR(ne){return mu(ne)&&Yb(ne)}var yp=rr||MR;function US(ne){if(!vp(ne))return!1;var ue=Jr(ne);return ue==h||ue==p||ue==l||ue==b}function OR(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function vp(ne){var ue=typeof ne;return ne!=null&&(ue=="object"||ue=="function")}function mu(ne){return ne!=null&&typeof ne=="object"}function V5(ne){if(!mu(ne)||Jr(ne)!=v)return!1;var ue=wn(ne);if(ue===null)return!0;var Ie=_e.call(ue,"constructor")&&ue.constructor;return typeof Ie=="function"&&Ie instanceof Ie&&Ge.call(Ie)==ye}var DR=ce?at(ce):zi;function Zy(ne){return ve(ne,ev(ne))}function ev(ne){return Yb(ne)?Vt(ne):qo(ne)}var $R=de(function(ne,ue,Ie){Pa(ne,ue,Ie)});function tv(ne){return function(){return ne}}function dg(ne){return ne}function MR(){return!1}e.exports=$R})(t3,t3.exports);var Out=t3.exports;const fK=ol(Out),sT="@REVISIT_COMMS",Dut={minHeight:"500px",width:"100%",border:0};function $ut({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=zl(),r=jc(),i=Rxe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Qh(),u=tf(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${sT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${sT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${sT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${sT}/ANSWERS`:r(t(d.message));break;case`${sT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Kh}${e.path}?trialid=${a}&id=${o}`,style:Dut})}async function dK(e){const n=await(await fetch(`${Kh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function ik({email:e,path:t}){const n=Ym();return _.jsxs(Fc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Oi,{order:2,children:_.jsx(nt,{span:!0,c:"orange",children:"404"})}),_.jsxs(nt,{children:[_.jsx(nt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(kc,{h:"lg"}),_.jsxs(Vf,{children:[_.jsx(Vf.Item,{children:_.jsx(nt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Vf.Item,{children:_.jsxs(nt,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(bb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Mut={maxWidth:"100%"};function Lut({currentConfig:e}){const t={...Mut,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await dK(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Cy,{mx:"auto",src:`${Kh}${e.path}`,style:t}):_.jsx(ik,{path:e.path})}function Fut({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await dK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Za,{text:t}):_.jsx(ik,{path:e.path})}function Ih(){return Fo(e=>e.config)}function hK(){const{answers:e}=Fo(i=>i),t=Ry(),r=`${Qh()}_${t}`;return e[r]}const jut=Mye(cut);var But=jut;function Uut(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function zut(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Vut(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Hut(e){return e.__COMMENTS__}function qut(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var f6={EOL:But.EOL||`
`,tryParseNumber:Uut,createComment:zut,removeComment:Vut,getComment:Hut,forceComment:qut},Wut="3.2.1";function Gut(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Vue}else if(e.length===0)return Vue;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Kut(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Yut.bind(null,n)}function Yut(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Vue(){}function Kut(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function gSe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}gSe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function ySe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}ySe.description="parse hexadecimal numbers prefixed with 0x";function vSe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}vSe.description="support ISO dates";var pK={loadDsf:Gut,std:{math:gSe,hex:ySe,date:vSe}},Xut=function(e,t){var n=f6,r=pK,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(D){return D==="{"||D==="}"||D==="["||D==="]"||D===","||D===":"}function d(D){var M,L=0,B=1;for(M=s-1;M>0&&i[M]!==`
`;M--,L++);for(;M>0;M--)i[M]===`
`&&B++;throw new Error(D+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(D){return i.charAt(s+D)}function m(D){for(var M="",L=o;h();){if(o===L)return h(),D&&L==="'"&&o==="'"&&M.length===0?(h(),g()):M;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var V=o.charCodeAt(0),O;o>="0"&&o<="9"?O=V-48:o>="a"&&o<="f"?O=V-97+10:o>="A"&&o<="F"?O=V-65+10:d("Bad \\u char "+o),B=B*16+O}M+=String.fromCharCode(B)}else if(typeof a[o]=="string")M+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):M+=o}d("Bad string")}function g(){for(var D="",M=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var V=L;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(M++,h(),M===3)return D.slice(-1)===`
`&&(D=D.slice(0,-1)),D;continue}else for(;M>0;)D+="'",M--;o===`
`?(D+=`
`,h(),U()):(o!=="\r"&&(D+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var D="",M=s,L=-1;;){if(o===":")return D?L>=0&&L!==D.length&&(s=M+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),D;o<=" "?o?L<0&&(L=D.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):D+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var D=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var M=o==="\r"||o===`
`||o==="";if(M||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=D[0];switch(L){case"f":if(D.trim()==="false")return!1;break;case"n":if(D.trim()==="null")return null;break;case"t":if(D.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(D);if(B!==void 0)return B}}if(M){D=D.trim();var U=l(D);return U!==void 0?U:D}}D+=o}}function w(D,M){var L;for(D--,L=s-2;L>D&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(D,L-D+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var V=[B.substr(0,U),B.substr(U+1)];return M&&V[0].trim().length===0&&V.shift(),V}else return[B]}return[]}function E(D){function M(B,U){var V,O,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(V=0,z=B.length;V<z;V++)W=M(B[V],U)||W;else for(O in B)Object.prototype.hasOwnProperty.call(B,O)&&(W=M(B[O],U)||W)}return W}function L(B){var U=M(D,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var D=[],M,L,B;try{if(u&&(M=n.createComment(D,{a:[]})),h(),L=s,v(),M&&(B=w(L,!0).join(`
`)),o==="]")return h(),M&&(M.e=[B]),D;for(;o;){if(D.push(C()),L=s,v(),o===","&&(h(),L=s,v()),M){var U=w(L);M.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),M&&(M.a[M.a.length-1][1]+=B||""),D;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||E(D),V}}function x(D){var M="",L={},B,U,V;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),D?U=1:(h(),U=s),v(),B&&(V=w(U,!0).join(`
`)),o==="}"&&!D)return B&&(B.e=[V]),h(),L;for(;o;){if(M=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[M]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var O=w(U);B.c[M]=[V||"",O[0]||""],V=O[1],B.o.push(M)}if(o==="}"&&!D)return h(),B&&(B.c[M][1]+=V||""),L;v()}if(D)return L;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(L),z}}function C(){switch(v(),o){case"{":return x();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function A(D,M){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=M.join(`
`),U=w(L).join(`
`);if(U||B){var V=n.createComment(D,n.getComment(D));V.r=[B,U]}}return D}function R(){v();var D=u?w(1):null;switch(o){case"{":return A(x(),D);case"[":return A(S(),D);default:return A(C(),D)}}function P(){v();var D=u?w(1):null;switch(o){case"{":return A(x(),D);case"[":return A(S(),D)}try{return A(x(!0),D)}catch(M){c();try{return A(C(),D)}catch{throw M}}}if(typeof e!="string")throw new Error("source is not a string");var $=null,k=!0;return t&&typeof t=="object"&&(u=t.keepWsc,$=t.dsf,k=t.legacyRoot!==!1),l=r.loadDsf($,"parse"),i=e,c(),k?P():R()},Qut=function(e,t){var n=f6,r=pK,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),R={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,$="",k=0;function D(W,j){return k+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function M(W){return W.replace(S,function(j){var H=R[j];return typeof H=="string"?D(g.esc,H):D(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,H,G){return W?(x.lastIndex=0,A.lastIndex=0,c||H||x.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!G&&d?B(W,j):D(g.qstr,M(W)):D(g.qstr,W)):D(g.str,W)):D(g.qstr,"")}function B(W,j){var H,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return D(g.mstr,G[0]);var te=s+j+g.mstr[0];for(H=0;H<G.length;H++)te+=s,G[H]&&(te+=j+G[H]);return te+s+j+g.mstr[1]}function U(W){return W?l||P.test(W)?(S.lastIndex=0,D(g.qkey,S.test(W)?M(W):W)):D(g.key,W):'""'}function V(W,j,H,G){function te(Kt){return Kt&&Kt[Kt[0]==="\r"?1:0]===`
`}function he(Kt){return Kt&&!te(Kt)}function fe(Kt,Tn,rr){if(!Kt)return"";Kt=n.forceComment(Kt);var ir,Ho=Kt.length;for(ir=0;ir<Ho&&Kt[ir]<=" ";ir++);return rr&&ir>0&&(Kt=Kt.substr(ir)),ir<Ho?Tn+D(g.rem,Kt):Kt}var ge=w(W);if(ge!==void 0)return D(g.dsf,ge);switch(typeof W){case"string":return L(W,$,j,G);case"number":return isFinite(W)?D(g.num,String(W)):D(g.lit,"null");case"boolean":return D(g.lit,String(W));case"object":if(!W)return D(g.lit,"null");var le;a&&(le=n.getComment(W));var Me=Object.prototype.toString.apply(W)==="[object Array]",ce=$;$+=o;var ze=s+ce,Ve=s+$,at=H||u?"":ze,tt=[],be,pe=f?[]:null,Oe=c,He=d,pt=h?"":g.com[0],Ge=0,_e,ct,bt,ye,Ne,We,Je,xt,wn;if(Me){for(_e=0,ct=W.length;_e<ct;_e++){if(be=_e<ct-1,le?(We=le.a[_e]||[],Je=he(We[1]),tt.push(fe(We[0],`
`)+Ve),pe&&(We[0]||We[1]||Je)&&(pe=null)):tt.push(Ve),k=0,ye=W[_e],tt.push(V(ye,le?Je:!1,!0)+(be?h:"")),pe){switch(typeof ye){case"string":k=0,c=!0,d=0,pe.push(V(ye,!1,!0)+(be?g.com[0]:"")),c=Oe,d=He;break;case"object":if(ye){pe=null;break}default:pe.push(tt[tt.length-1]+(be?pt:""));break}be&&(k+=g.com[0].length-g.com[2]),Ge+=k}le&&We[1]&&tt.push(fe(We[1],Je?" ":`
`,Je))}ct===0?le&&le.e&&tt.push(fe(le.e[0],`
`)+ze):tt.push(ze),tt.length===0?xt=D(g.arr,""):(xt=at+D(g.arr,tt.join("")),pe&&(wn=pe.join(" "),wn.length-Ge<=f&&(xt=D(g.arr,wn))))}else{var yr=le?le.o.slice():[],vr=[];for(bt in W)Object.prototype.hasOwnProperty.call(W,bt)&&yr.indexOf(bt)<0&&vr.push(bt);m&&vr.sort();var kr=yr.concat(vr);for(_e=0,ct=kr.length;_e<ct;_e++)if(be=_e<ct-1,bt=kr[_e],le?(We=le.c[bt]||[],Je=he(We[1]),tt.push(fe(We[0],`
`)+Ve),pe&&(We[0]||We[1]||Je)&&(pe=null)):tt.push(Ve),k=0,ye=W[bt],Ne=V(ye,le&&Je),tt.push(U(bt)+g.col[0]+(te(Ne)?"":" ")+Ne+(be?h:"")),le&&We[1]&&tt.push(fe(We[1],Je?" ":`
`,Je)),pe){switch(typeof ye){case"string":k=0,c=!0,d=0,Ne=V(ye,!1),c=Oe,d=He,pe.push(U(bt)+g.col[0]+" "+Ne+(be?g.com[0]:""));break;case"object":if(ye){pe=null;break}default:pe.push(tt[tt.length-1]+(be?pt:""));break}k+=g.col[0].length-g.col[2],be&&(k+=g.com[0].length-g.com[2]),Ge+=k}ct===0?le&&le.e&&tt.push(fe(le.e[0],`
`)+ze):tt.push(ze),tt.length===0?xt=D(g.obj,""):(xt=at+D(g.obj,tt.join("")),pe&&(wn=pe.join(" "),wn.length-Ge<=f&&(xt=D(g.obj,wn))))}return $=ce,xt}}w=r.loadDsf(p,"stringify");var O="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(O=z[0]+`
`),O+=V(e,null,!0,!0),z&&(O+=z[1]||""),O},Rw=f6;function a2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function N7(e,t){if(!(e===null||typeof e!="object")){var n=Rw.getComment(e);n&&Rw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Hue(o.a,r,n.a[r],N7(e[r]))&&(s=!0);!s&&n.e&&(o.e=a2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Hue(o.s,l,n.c[l],N7(e[l]))&&(s=!0)}!s&&n.e&&(o.e=a2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=a2(n.r[0],n.r[1])),s?o:void 0}}function Jut(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Zut(e,t){var n=[];if(P7(e,t,n,[]),n.length>0){var r=n3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Jut(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),n3(t,r,1)}}function Hue(e,t,n,r){var i=a2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function u2(e,t){var n=a2(t.b,t.a);return n.path=e,n}function l2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(u2(s,o)),l2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(u2(u,l)),l2(l.x,t,u))});e.e&&t.push(u2(n,e.e))}}function P7(e,t,n,r){if(e){if(t===null||typeof t!="object"){l2(e,n,r);return}var i,s=Rw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],P7(u.x,t[i],n,l)):(n.push(u2(l,u)),l2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],P7(d.x,t[c],n,f))):d&&(n.push(u2(f,d)),l2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function n3(e,t,n){var r=Rw.createComment(e,Rw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Rw.forceComment(t)),r.r[n]||""}var elt={extract:function(e){return N7(e,!0)},merge:Zut,header:function(e,t){return n3(e,t,0)},footer:function(e,t){return n3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var que=f6,tlt=Wut,Wue=Xut,Gue=Qut,nlt=elt,rlt=pK,mK={parse:Wue,stringify:Gue,endOfLine:function(){return que.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(que.EOL=e)},version:tlt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Wue(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Gue(e,t)}},comments:nlt,dsf:rlt.std},O7={exports:{}},bSe={},Hf={},yE={},sk={},Pn={},yA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(yA);var D7={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=yA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(D7);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=yA,n=D7;var r=yA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=D7;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,te){super(),this.varKind=H,this.name=G,this.rhs=te}render({es5:H,_n:G}){const te=H?n.varKinds.var:this.varKind,he=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${he};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=D(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,te){super(),this.lhs=H,this.rhs=G,this.sideEffects=te}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=D(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return k(H,this.rhs)}}class u extends a{constructor(H,G,te,he){super(H,te,he),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=D(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,te)=>G+te.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const te=H[G].optimizeNodes();Array.isArray(te)?H.splice(G,1,...te):te?H[G]=te:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:te}=this;let he=te.length;for(;he--;){const fe=te[he];fe.optimizeNames(H,G)||(M(H,fe.names),te.splice(he,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>$(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const te=G.optimizeNodes();G=this.else=Array.isArray(te)?new g(te):te}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=D(this.condition,H,G),this}get names(){const H=super.names;return k(H,this.condition),this.else&&$(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=D(this.iteration,H,G),this}get names(){return $(super.names,this.iteration.names)}}class w extends v{constructor(H,G,te,he){super(),this.varKind=H,this.name=G,this.from=te,this.to=he}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:te,from:he,to:fe}=this;return`for(${G} ${te}=${he}; ${te}<${fe}; ${te}++)`+super.render(H)}get names(){const H=k(super.names,this.from);return k(H,this.to)}}class E extends v{constructor(H,G,te,he){super(),this.loop=H,this.varKind=G,this.name=te,this.iterable=he}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=D(this.iterable,H,G),this}get names(){return $(super.names,this.iterable.names)}}class S extends p{constructor(H,G,te){super(),this.name=H,this.args=G,this.async=te}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}S.kind="func";class x extends h{render(H){return"return "+super.render(H)}}x.kind="return";class C extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var te,he;return super.optimizeNames(H,G),(te=this.catch)===null||te===void 0||te.optimizeNames(H,G),(he=this.finally)===null||he===void 0||he.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&$(H,this.catch.names),this.finally&&$(H,this.finally.names),H}}class A extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}A.kind="catch";class R extends p{render(H){return"finally"+super.render(H)}}R.kind="finally";class P{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const te=this._extScope.value(H,G);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,te,he){const fe=this._scope.toName(G);return te!==void 0&&he&&(this._constants[fe.str]=te),this._leafNode(new o(H,fe,te)),fe}const(H,G,te){return this._def(n.varKinds.const,H,G,te)}let(H,G,te){return this._def(n.varKinds.let,H,G,te)}var(H,G,te){return this._def(n.varKinds.var,H,G,te)}assign(H,G,te){return this._leafNode(new a(H,G,te))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[te,he]of H)G.length>1&&G.push(","),G.push(te),(te!==he||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,he));return G.push("}"),new t._Code(G)}if(H,G,te){if(this._blockNode(new y(H)),G&&te)this.code(G).else().code(te).endIf();else if(G)this.code(G).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,te,he,fe=this.opts.es5?n.varKinds.var:n.varKinds.let){const ge=this._scope.toName(H);return this._for(new w(fe,ge,G,te),()=>he(ge))}forOf(H,G,te,he=n.varKinds.const){const fe=this._scope.toName(H);if(this.opts.es5){const ge=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${ge}.length`,le=>{this.var(fe,(0,t._)`${ge}[${le}]`),te(fe)})}return this._for(new E("of",he,fe,G),()=>te(fe))}forIn(H,G,te,he=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,te);const fe=this._scope.toName(H);return this._for(new E("in",he,fe,G),()=>te(fe))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new x;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(H,G,te){if(!G&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const he=new C;if(this._blockNode(he),this.code(H),G){const fe=this.name("e");this._currNode=he.catch=new A(fe),G(fe)}return te&&(this._currNode=he.finally=new R,this.code(te)),this._endBlockNode(A,R)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-G;if(te<0||H!==void 0&&te!==H)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,te,he){return this._blockNode(new S(H,G,te)),he&&this.code(he).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const te=this._currNode;if(te instanceof H||G&&te instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=P;function $(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function k(j,H){return H instanceof t._CodeOrName?$(j,H.names):j}function D(j,H,G){if(j instanceof t.Name)return te(j);if(!he(j))return j;return new t._Code(j._items.reduce((fe,ge)=>(ge instanceof t.Name&&(ge=te(ge)),ge instanceof t._Code?fe.push(...ge._items):fe.push(ge),fe),[]));function te(fe){const ge=G[fe.str];return ge===void 0||H[fe.str]!==1?fe:(delete H[fe.str],ge)}function he(fe){return fe instanceof t._Code&&fe._items.some(ge=>ge instanceof t.Name&&H[ge.str]===1&&G[ge.str]!==void 0)}}function M(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const V=z(e.operators.OR);function O(...j){return j.reduce(V)}e.or=O;function z(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Kr=Pn,ilt=yA;function slt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=slt;function olt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(_Se(e,t),!wSe(t,e.self.RULES.all))}wt.alwaysValidSchema=olt;function _Se(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||SSe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=_Se;function wSe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=wSe;function alt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=alt;function ult({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Kr._)`${n}`}return(0,Kr._)`${e}${t}${(0,Kr.getProperty)(r)}`}wt.schemaRefOrVal=ult;function llt(e){return ESe(decodeURIComponent(e))}wt.unescapeFragment=llt;function clt(e){return encodeURIComponent(gK(e))}wt.escapeFragment=clt;function gK(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=gK;function ESe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=ESe;function flt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=flt;function Yue({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Kr.Name?(s instanceof Kr.Name?e(i,s,o):t(i,s,o),o):s instanceof Kr.Name?(t(i,o,s),s):n(s,o);return a===Kr.Name&&!(u instanceof Kr.Name)?r(i,u):u}}wt.mergeEvaluated={props:Yue({mergeNames:(e,t,n)=>e.if((0,Kr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Kr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Kr._)`${n} || {}`).code((0,Kr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Kr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Kr._)`${n} || {}`),yK(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:xSe}),items:Yue({mergeNames:(e,t,n)=>e.if((0,Kr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Kr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Kr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Kr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function xSe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Kr._)`{}`);return t!==void 0&&yK(e,n,t),n}wt.evaluatedPropsToName=xSe;function yK(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Kr._)`${t}${(0,Kr.getProperty)(r)}`,!0))}wt.setEvaluated=yK;const Kue={};function dlt(e,t){return e.scopeValue("func",{ref:t,code:Kue[t.code]||(Kue[t.code]=new ilt._Code(t.code))})}wt.useFunc=dlt;var $7;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})($7||(wt.Type=$7={}));function hlt(e,t,n){if(e instanceof Kr.Name){const r=t===$7.Num;return n?r?(0,Kr._)`"[" + ${e} + "]"`:(0,Kr._)`"['" + ${e} + "']"`:r?(0,Kr._)`"/" + ${e}`:(0,Kr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Kr.getProperty)(e).toString():"/"+gK(e)}wt.getErrorPath=hlt;function SSe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=SSe;var Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});const Jo=Pn,plt={data:new Jo.Name("data"),valCxt:new Jo.Name("valCxt"),instancePath:new Jo.Name("instancePath"),parentData:new Jo.Name("parentData"),parentDataProperty:new Jo.Name("parentDataProperty"),rootData:new Jo.Name("rootData"),dynamicAnchors:new Jo.Name("dynamicAnchors"),vErrors:new Jo.Name("vErrors"),errors:new Jo.Name("errors"),this:new Jo.Name("this"),self:new Jo.Name("self"),scope:new Jo.Name("scope"),json:new Jo.Name("json"),jsonPos:new Jo.Name("jsonPos"),jsonLen:new Jo.Name("jsonLen"),jsonPart:new Jo.Name("jsonPart")};Jh.default=plt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=Jh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:x}=w,C=f(g,y,v);b??(S||x)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,x=f(g,y,v);u(w,x),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,x=>{g.const(S,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:x}=g,{opts:C,propertyName:A,topSchemaRef:R,schemaPath:P}=x;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${R}${P}`],[r.default.data,E]),A&&b.push([c.propertyName,A])}})(sk);Object.defineProperty(yE,"__esModule",{value:!0});yE.boolOrEmptySchema=yE.topBoolOrEmptySchema=void 0;const mlt=sk,glt=Pn,ylt=Jh,vlt={message:"boolean schema is false"};function blt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?TSe(e,!1):typeof n=="object"&&n.$async===!0?t.return(ylt.default.data):(t.assign((0,glt._)`${r}.errors`,null),t.return(!0))}yE.topBoolOrEmptySchema=blt;function _lt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),TSe(e)):n.var(t,!0)}yE.boolOrEmptySchema=_lt;function TSe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,mlt.reportError)(i,vlt,void 0,t)}var Rs={},P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.getRules=P1.isJSONType=void 0;const wlt=["string","number","integer","boolean","null","object","array"],Elt=new Set(wlt);function xlt(e){return typeof e=="string"&&Elt.has(e)}P1.isJSONType=xlt;function Slt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}P1.getRules=Slt;var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.shouldUseRule=rm.shouldUseGroup=rm.schemaHasRulesForType=void 0;function Tlt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&CSe(e,r)}rm.schemaHasRulesForType=Tlt;function CSe(e,t){return t.rules.some(n=>ASe(e,n))}rm.shouldUseGroup=CSe;function ASe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}rm.shouldUseRule=ASe;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.reportTypeError=Rs.checkDataTypes=Rs.checkDataType=Rs.coerceAndCheckDataType=Rs.getJSONTypes=Rs.getSchemaTypes=Rs.DataType=void 0;const Clt=P1,Alt=rm,Ilt=sk,En=Pn,ISe=wt;var Nw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Nw||(Rs.DataType=Nw={}));function klt(e){const t=kSe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Rs.getSchemaTypes=klt;function kSe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Clt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Rs.getJSONTypes=kSe;function Rlt(e,t){const{gen:n,data:r,opts:i}=e,s=Nlt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Alt.schemaHasRulesForType)(e,t[0]));if(o){const a=vK(t,r,i.strictNumbers,Nw.Wrong);n.if(a,()=>{s.length?Plt(e,t,s):bK(e)})}return o}Rs.coerceAndCheckDataType=Rlt;const RSe=new Set(["string","number","integer","boolean","null"]);function Nlt(e,t){return t?e.filter(n=>RSe.has(n)||t==="array"&&n==="array"):[]}function Plt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,En._)`typeof ${i}`),a=r.let("coerced",(0,En._)`undefined`);s.coerceTypes==="array"&&r.if((0,En._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,En._)`${i}[0]`).assign(o,(0,En._)`typeof ${i}`).if(vK(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,En._)`${a} !== undefined`);for(const l of n)(RSe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),bK(e),r.endIf(),r.if((0,En._)`${a} !== undefined`,()=>{r.assign(i,a),Olt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,En._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,En._)`"" + ${i}`).elseIf((0,En._)`${i} === null`).assign(a,(0,En._)`""`);return;case"number":r.elseIf((0,En._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,En._)`+${i}`);return;case"integer":r.elseIf((0,En._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,En._)`+${i}`);return;case"boolean":r.elseIf((0,En._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,En._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,En._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,En._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,En._)`[${i}]`)}}}function Olt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,En._)`${t} !== undefined`,()=>e.assign((0,En._)`${t}[${n}]`,r))}function M7(e,t,n,r=Nw.Correct){const i=r===Nw.Correct?En.operators.EQ:En.operators.NEQ;let s;switch(e){case"null":return(0,En._)`${t} ${i} null`;case"array":s=(0,En._)`Array.isArray(${t})`;break;case"object":s=(0,En._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,En._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,En._)`typeof ${t} ${i} ${e}`}return r===Nw.Correct?s:(0,En.not)(s);function o(a=En.nil){return(0,En.and)((0,En._)`typeof ${t} == "number"`,a,n?(0,En._)`isFinite(${t})`:En.nil)}}Rs.checkDataType=M7;function vK(e,t,n,r){if(e.length===1)return M7(e[0],t,n,r);let i;const s=(0,ISe.toHash)(e);if(s.array&&s.object){const o=(0,En._)`typeof ${t} != "object"`;i=s.null?o:(0,En._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=En.nil;s.number&&delete s.integer;for(const o in s)i=(0,En.and)(i,M7(o,t,n,r));return i}Rs.checkDataTypes=vK;const Dlt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,En._)`{type: ${e}}`:(0,En._)`{type: ${t}}`};function bK(e){const t=$lt(e);(0,Ilt.reportError)(t,Dlt)}Rs.reportTypeError=bK;function $lt(e){const{gen:t,data:n,schema:r}=e,i=(0,ISe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var d6={};Object.defineProperty(d6,"__esModule",{value:!0});d6.assignDefaults=void 0;const o_=Pn,Mlt=wt;function Llt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Xue(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Xue(e,s,i.default))}d6.assignDefaults=Llt;function Xue(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,o_._)`${s}${(0,o_.getProperty)(t)}`;if(i){(0,Mlt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,o_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,o_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,o_._)`${a} = ${(0,o_.stringify)(n)}`)}var sh={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateUnion=Rn.validateArray=Rn.usePattern=Rn.callValidateCode=Rn.schemaProperties=Rn.allSchemaProperties=Rn.noPropertyInData=Rn.propertyInData=Rn.isOwnProperty=Rn.hasPropFunc=Rn.reportMissingProp=Rn.checkMissingProp=Rn.checkReportMissingProp=void 0;const di=Pn,_K=wt,gg=Jh,Flt=wt;function jlt(e,t){const{gen:n,data:r,it:i}=e;n.if(EK(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,di._)`${t}`},!0),e.error()})}Rn.checkReportMissingProp=jlt;function Blt({gen:e,data:t,it:{opts:n}},r,i){return(0,di.or)(...r.map(s=>(0,di.and)(EK(e,t,s,n.ownProperties),(0,di._)`${i} = ${s}`)))}Rn.checkMissingProp=Blt;function Ult(e,t){e.setParams({missingProperty:t},!0),e.error()}Rn.reportMissingProp=Ult;function NSe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,di._)`Object.prototype.hasOwnProperty`})}Rn.hasPropFunc=NSe;function wK(e,t,n){return(0,di._)`${NSe(e)}.call(${t}, ${n})`}Rn.isOwnProperty=wK;function zlt(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} !== undefined`;return r?(0,di._)`${i} && ${wK(e,t,n)}`:i}Rn.propertyInData=zlt;function EK(e,t,n,r){const i=(0,di._)`${t}${(0,di.getProperty)(n)} === undefined`;return r?(0,di.or)(i,(0,di.not)(wK(e,t,n))):i}Rn.noPropertyInData=EK;function PSe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Rn.allSchemaProperties=PSe;function Vlt(e,t){return PSe(t).filter(n=>!(0,_K.alwaysValidSchema)(e,t[n]))}Rn.schemaProperties=Vlt;function Hlt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,di._)`${e}, ${t}, ${r}${i}`:t,f=[[gg.default.instancePath,(0,di.strConcat)(gg.default.instancePath,s)],[gg.default.parentData,o.parentData],[gg.default.parentDataProperty,o.parentDataProperty],[gg.default.rootData,gg.default.rootData]];o.opts.dynamicRef&&f.push([gg.default.dynamicAnchors,gg.default.dynamicAnchors]);const d=(0,di._)`${c}, ${n.object(...f)}`;return u!==di.nil?(0,di._)`${a}.call(${u}, ${d})`:(0,di._)`${a}(${d})`}Rn.callValidateCode=Hlt;const qlt=(0,di._)`new RegExp`;function Wlt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,di._)`${i.code==="new RegExp"?qlt:(0,Flt.useFunc)(e,i)}(${n}, ${r})`})}Rn.usePattern=Wlt;function Glt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,di._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:_K.Type.Num},s),t.if((0,di.not)(s),a)})}}Rn.validateArray=Glt;function Ylt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,_K.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,di._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,di.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Rn.validateUnion=Ylt;Object.defineProperty(sh,"__esModule",{value:!0});sh.validateKeywordUsage=sh.validSchemaType=sh.funcKeywordCode=sh.macroKeywordCode=void 0;const Ba=Pn,Dv=Jh,Klt=Rn,Xlt=sk;function Qlt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=OSe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ba.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}sh.macroKeywordCode=Qlt;function Jlt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;ect(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=OSe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Que(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Que(e),g(()=>Zlt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ba._)`await `),v=>r.assign(f,!1).if((0,Ba._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ba._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ba._)`${c}.errors`;return r.assign(y,null),m(Ba.nil),y}function m(y=t.async?(0,Ba._)`await `:Ba.nil){const v=u.opts.passContext?Dv.default.this:Dv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ba._)`${y}${(0,Klt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Ba.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}sh.funcKeywordCode=Jlt;function Que(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ba._)`${r.parentData}[${r.parentDataProperty}]`))}function Zlt(e,t){const{gen:n}=e;n.if((0,Ba._)`Array.isArray(${t})`,()=>{n.assign(Dv.default.vErrors,(0,Ba._)`${Dv.default.vErrors} === null ? ${t} : ${Dv.default.vErrors}.concat(${t})`).assign(Dv.default.errors,(0,Ba._)`${Dv.default.vErrors}.length`),(0,Xlt.extendErrors)(e)},()=>e.error())}function ect({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function OSe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ba.stringify)(n)})}function tct(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}sh.validSchemaType=tct;function nct({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}sh.validateKeywordUsage=nct;var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.extendSubschemaMode=_0.extendSubschemaData=_0.getSubschema=void 0;const Kd=Pn,DSe=wt;function rct(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Kd._)`${e.schemaPath}${(0,Kd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Kd._)`${e.schemaPath}${(0,Kd.getProperty)(t)}${(0,Kd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,DSe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}_0.getSubschema=rct;function ict(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Kd._)`${t.data}${(0,Kd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Kd.str)`${l}${(0,DSe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Kd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Kd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}_0.extendSubschemaData=ict;function sct(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}_0.extendSubschemaMode=sct;var Io={},xK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const sO=ol(xK);var $Se={exports:{}},Jg=$Se.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};oO(t,r,i,e,"",e)};Jg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Jg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Jg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Jg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function oO(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Jg.arrayKeywords)for(var d=0;d<f.length;d++)oO(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Jg.propsKeywords){if(f&&typeof f=="object")for(var h in f)oO(e,t,n,f[h],i+"/"+c+"/"+oct(h),s,i,c,r,h)}else(c in Jg.keywords||e.allKeys&&!(c in Jg.skipKeywords))&&oO(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function oct(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var act=$Se.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const uct=wt,lct=xK,cct=act,fct=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function dct(e,t=!0){return typeof e=="boolean"?!0:t===!0?!L7(e):t?MSe(e)<=t:!1}Io.inlineRef=dct;const hct=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function L7(e){for(const t in e){if(hct.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(L7)||typeof n=="object"&&L7(n))return!0}return!1}function MSe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!fct.has(n)&&(typeof e[n]=="object"&&(0,uct.eachItem)(e[n],r=>t+=MSe(r)),t===1/0))return 1/0}return t}function LSe(e,t="",n){n!==!1&&(t=Pw(t));const r=e.parse(t);return FSe(e,r)}Io.getFullPath=LSe;function FSe(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=FSe;const pct=/#\/?$/;function Pw(e){return e?e.replace(pct,""):""}Io.normalizeId=Pw;function mct(e,t,n){return n=Pw(n),e.resolve(t,n)}Io.resolveUrl=mct;const gct=/^[a-z_][-a-z0-9._]*$/i;function yct(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Pw(e[n]||t),s={"":i},o=LSe(r,i,!1),a={},u=new Set;return cct(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Pw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Pw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!gct.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!lct(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=yct;Object.defineProperty(Hf,"__esModule",{value:!0});Hf.getData=Hf.KeywordCxt=Hf.validateFunctionCode=void 0;const jSe=yE,Jue=Rs,SK=rm,r3=Rs,vct=d6,c2=sh,oj=_0,Ot=Pn,on=Jh,bct=Io,im=wt,oT=sk;function _ct(e){if(zSe(e)&&(VSe(e),USe(e))){xct(e);return}BSe(e,()=>(0,jSe.topBoolOrEmptySchema)(e))}Hf.validateFunctionCode=_ct;function BSe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${on.default.data}, ${on.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${Zue(n,i)}`),Ect(e,i),e.code(s)}):e.func(t,(0,Ot._)`${on.default.data}, ${wct(i)}`,r.$async,()=>e.code(Zue(n,i)).code(s))}function wct(e){return(0,Ot._)`{${on.default.instancePath}="", ${on.default.parentData}, ${on.default.parentDataProperty}, ${on.default.rootData}=${on.default.data}${e.dynamicRef?(0,Ot._)`, ${on.default.dynamicAnchors}={}`:Ot.nil}}={}`}function Ect(e,t){e.if(on.default.valCxt,()=>{e.var(on.default.instancePath,(0,Ot._)`${on.default.valCxt}.${on.default.instancePath}`),e.var(on.default.parentData,(0,Ot._)`${on.default.valCxt}.${on.default.parentData}`),e.var(on.default.parentDataProperty,(0,Ot._)`${on.default.valCxt}.${on.default.parentDataProperty}`),e.var(on.default.rootData,(0,Ot._)`${on.default.valCxt}.${on.default.rootData}`),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Ot._)`${on.default.valCxt}.${on.default.dynamicAnchors}`)},()=>{e.var(on.default.instancePath,(0,Ot._)`""`),e.var(on.default.parentData,(0,Ot._)`undefined`),e.var(on.default.parentDataProperty,(0,Ot._)`undefined`),e.var(on.default.rootData,on.default.data),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Ot._)`{}`)})}function xct(e){const{schema:t,opts:n,gen:r}=e;BSe(e,()=>{n.$comment&&t.$comment&&qSe(e),Ict(e),r.let(on.default.vErrors,null),r.let(on.default.errors,0),n.unevaluated&&Sct(e),HSe(e),Nct(e)})}function Sct(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function Zue(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function Tct(e,t){if(zSe(e)&&(VSe(e),USe(e))){Cct(e,t);return}(0,jSe.boolOrEmptySchema)(e,t)}function USe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function zSe(e){return typeof e.schema!="boolean"}function Cct(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&qSe(e),kct(e),Rct(e);const s=r.const("_errs",on.default.errors);HSe(e,s),r.var(t,(0,Ot._)`${s} === ${on.default.errors}`)}function VSe(e){(0,im.checkUnknownRules)(e),Act(e)}function HSe(e,t){if(e.opts.jtd)return ele(e,[],!1,t);const n=(0,Jue.getSchemaTypes)(e.schema),r=(0,Jue.coerceAndCheckDataType)(e,n);ele(e,n,!r,t)}function Act(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,im.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Ict(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,im.checkStrictMode)(e,"default is ignored in the schema root")}function kct(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,bct.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Rct(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function qSe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${on.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${on.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Nct(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${on.default.errors} === 0`,()=>t.return(on.default.data),()=>t.throw((0,Ot._)`new ${i}(${on.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,on.default.vErrors),s.unevaluated&&Pct(e),t.return((0,Ot._)`${on.default.errors} === 0`))}function Pct({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function ele(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,im.schemaHasRulesButRef)(s,c))){i.block(()=>YSe(e,"$ref",c.all.$ref.definition));return}u.jtd||Oct(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,SK.shouldUseGroup)(s,d)&&(d.type?(i.if((0,r3.checkDataType)(d.type,o,u.strictNumbers)),tle(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,r3.reportTypeError)(e)),i.endIf()):tle(e,d),a||i.if((0,Ot._)`${on.default.errors} === ${r||0}`))}}function tle(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,vct.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,SK.shouldUseRule)(r,s)&&YSe(e,s.keyword,s.definition,t.type)})}function Oct(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Dct(e,t),e.opts.allowUnionTypes||$ct(e,t),Mct(e,e.dataTypes))}function Dct(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{WSe(e.dataTypes,n)||TK(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Fct(e,t)}}function $ct(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&TK(e,"use allowUnionTypes to allow union type keyword")}function Mct(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,SK.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Lct(t,o))&&TK(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Lct(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function WSe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Fct(e,t){const n=[];for(const r of e.dataTypes)WSe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function TK(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,im.checkStrictMode)(e,t,e.opts.strictTypes)}class GSe{constructor(t,n,r){if((0,c2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,im.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",KSe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,c2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",on.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?oT.reportExtraError:oT.reportError)(this,this.def.error,n)}$dataError(){(0,oT.reportError)(this,this.def.$dataError||oT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,oT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,r3.checkDataTypes)(u,n,s.opts.strictNumbers,r3.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,oj.getSubschema)(this.it,t);(0,oj.extendSubschemaData)(r,this.it,t),(0,oj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Tct(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=im.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=im.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}Hf.KeywordCxt=GSe;function YSe(e,t,n,r){const i=new GSe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,c2.funcKeywordCode)(i,n):"macro"in n?(0,c2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,c2.funcKeywordCode)(i,n)}const jct=/^\/(?:[^~]|~0|~1)*$/,Bct=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function KSe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return on.default.rootData;if(e[0]==="/"){if(!jct.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=on.default.rootData}else{const l=Bct.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,im.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Hf.getData=KSe;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});class Uct extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}ok.default=Uct;var Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});const aj=Io;class zct extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,aj.resolveUrl)(t,n,r),this.missingSchema=(0,aj.normalizeId)((0,aj.getFullPath)(t,this.missingRef))}}Vx.default=zct;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.resolveSchema=Nu.getCompilingSchema=Nu.resolveRef=Nu.compileSchema=Nu.SchemaEnv=void 0;const ff=Pn,Vct=ok,iv=Jh,kf=Io,nle=wt,Hct=Hf;class h6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,kf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Nu.SchemaEnv=h6;function CK(e){const t=XSe.call(this,e);if(t)return t;const n=(0,kf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new ff.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:Vct.default,code:(0,ff._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:iv.default.data,parentData:iv.default.parentData,parentDataProperty:iv.default.parentDataProperty,dataNames:[iv.default.data],dataPathArr:[ff.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ff.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ff.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ff._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Hct.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(iv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${iv.default.self}`,`${iv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof ff.Name?void 0:p,items:m instanceof ff.Name?void 0:m,dynamicProps:p instanceof ff.Name,dynamicItems:m instanceof ff.Name},h.source&&(h.source.evaluated=(0,ff.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Nu.compileSchema=CK;function qct(e,t,n){var r;n=(0,kf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Yct.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new h6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Wct.call(this,s)}Nu.resolveRef=qct;function Wct(e){return(0,kf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:CK.call(this,e)}function XSe(e){for(const t of this._compilations)if(Gct(t,e))return t}Nu.getCompilingSchema=XSe;function Gct(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Yct(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||p6.call(this,e,t)}function p6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,kf._getFullPath)(this.opts.uriResolver,n);let i=(0,kf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return uj.call(this,n,e);const s=(0,kf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=p6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:uj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||CK.call(this,o),s===(0,kf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,kf.resolveUrl)(this.opts.uriResolver,i,l)),new h6({schema:a,schemaId:u,root:e,baseId:i})}return uj.call(this,n,o)}}Nu.resolveSchema=p6;const Kct=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function uj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,nle.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!Kct.has(a)&&l&&(t=(0,kf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,nle.schemaHasRulesButRef)(n,this.RULES)){const a=(0,kf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=p6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new h6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Xct="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Qct="Meta-schema for $data reference (JSON AnySchema extension proposal)",Jct="object",Zct=["$data"],eft={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},tft=!1,nft={$id:Xct,description:Qct,type:Jct,required:Zct,properties:eft,additionalProperties:tft};var AK={},F7={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ms,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Ae=1;Ae<Ce;++Ae)ee[Ae]=ee[Ae].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Ae=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),lt="[\\:\\/\\?\\#\\[\\]\\@]",Tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Xt=r(lt,Tt),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Ae+"|"+r(pn,Tt,"[\\:]"))+"*");var sr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Rr=i(sr+"\\."+sr+"\\."+sr+"\\."+sr),Vt=i(Ce+"{1,4}"),or=i(i(Vt+"\\:"+Vt)+"|"+Rr),Hr=i(i(Vt+"\\:")+"{6}"+or),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+or),ki=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+or),Ks=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+or),Jr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+or),go=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+or),Ui=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+or),zi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),qo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Pa=i([Hr,Jn,ki,Ks,Jr,go,Ui,zi,qo].join("|")),Xs=i(i(pn+"|"+Ae)+"+");i("[vV]"+Ce+"+\\."+r(pn,Tt,"[\\:]")+"+"),i(i(Ae+"|"+r(pn,Tt))+"*");var tc=i(Ae+"|"+r(pn,Tt,"[\\:\\@]"));return i(i(Ae+"|"+r(pn,Tt,"[\\@]"))+"+"),i(i(tc+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,Tt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,Tt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,Tt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,Tt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,Tt,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,Tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,Tt),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,Xt),"g"),PCT_ENCODED:new RegExp(Ae,"g"),IPV4ADDRESS:new RegExp("^("+Rr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Pa+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+Xs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Ae=!0,lt=!1,Tt=void 0;try{for(var Xt=ee[Symbol.iterator](),On;!(Ae=(On=Xt.next()).done)&&(Ce.push(On.value),!(ae&&Ce.length===ae));Ae=!0);}catch(Fn){lt=!0,Tt=Fn}finally{try{!Ae&&Xt.return&&Xt.return()}finally{if(lt)throw Tt}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",x=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-g,$=Math.floor,k=String.fromCharCode;function D(oe){throw new RangeError(R[oe])}function M(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function L(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Ae=oe.split("."),lt=M(Ae,ee).join(".");return Ce+lt}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Ae=oe.charCodeAt(ae++);if(Ae>=55296&&Ae<=56319&&ae<Ce){var lt=oe.charCodeAt(ae++);(lt&64512)==56320?ee.push(((Ae&1023)<<10)+(lt&1023)+65536):(ee.push(Ae),ae--)}else ee.push(Ae)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},V=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},O=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ce){var Ae=0;for(ee=Ce?$(ee/b):ee>>1,ee+=$(ee/ae);ee>P*y>>1;Ae+=m)ee=$(ee/P);return $(Ae+(P+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Ae=0,lt=E,Tt=w,Xt=ee.lastIndexOf(S);Xt<0&&(Xt=0);for(var On=0;On<Xt;++On)ee.charCodeAt(On)>=128&&D("not-basic"),ae.push(ee.charCodeAt(On));for(var Fn=Xt>0?Xt+1:0;Fn<Ce;){for(var pn=Ae,sr=1,Rr=m;;Rr+=m){Fn>=Ce&&D("invalid-input");var Vt=V(ee.charCodeAt(Fn++));(Vt>=m||Vt>$((p-Ae)/sr))&&D("overflow"),Ae+=Vt*sr;var or=Rr<=Tt?g:Rr>=Tt+y?y:Rr-Tt;if(Vt<or)break;var Hr=m-or;sr>$(p/Hr)&&D("overflow"),sr*=Hr}var Jn=ae.length+1;Tt=z(Ae-pn,Jn,pn==0),$(Ae/Jn)>p-lt&&D("overflow"),lt+=$(Ae/Jn),Ae%=Jn,ae.splice(Ae++,0,lt)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Ae=E,lt=0,Tt=w,Xt=!0,On=!1,Fn=void 0;try{for(var pn=ee[Symbol.iterator](),sr;!(Xt=(sr=pn.next()).done);Xt=!0){var Rr=sr.value;Rr<128&&ae.push(k(Rr))}}catch(De){On=!0,Fn=De}finally{try{!Xt&&pn.return&&pn.return()}finally{if(On)throw Fn}}var Vt=ae.length,or=Vt;for(Vt&&ae.push(S);or<Ce;){var Hr=p,Jn=!0,ki=!1,Ks=void 0;try{for(var Jr=ee[Symbol.iterator](),go;!(Jn=(go=Jr.next()).done);Jn=!0){var Ui=go.value;Ui>=Ae&&Ui<Hr&&(Hr=Ui)}}catch(De){ki=!0,Ks=De}finally{try{!Jn&&Jr.return&&Jr.return()}finally{if(ki)throw Ks}}var zi=or+1;Hr-Ae>$((p-lt)/zi)&&D("overflow"),lt+=(Hr-Ae)*zi,Ae=Hr;var qo=!0,Pa=!1,Xs=void 0;try{for(var tc=ee[Symbol.iterator](),Td;!(qo=(Td=tc.next()).done);qo=!0){var Y=Td.value;if(Y<Ae&&++lt>p&&D("overflow"),Y==Ae){for(var se=lt,Z=m;;Z+=m){var me=Z<=Tt?g:Z>=Tt+y?y:Z-Tt;if(se<me)break;var ve=se-me,de=m-me;ae.push(k(O(me+ve%de,0))),se=$(ve/de)}ae.push(k(O(se,0))),Tt=z(lt,zi,or==Vt),lt=0,++or}}}catch(De){Pa=!0,Xs=De}finally{try{!qo&&tc.return&&tc.return()}finally{if(Pa)throw Xs}}++lt,++Ae}return ae.join("")},H=function(ee){return L(ee,function(ae){return x.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},te={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:H},he={};function fe(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function ge(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Ae=parseInt(oe.substr(ae+1,2),16);if(Ae<128)ee+=String.fromCharCode(Ae),ae+=3;else if(Ae>=194&&Ae<224){if(Ce-ae>=6){var lt=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Ae&31)<<6|lt&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Ae>=224){if(Ce-ae>=9){var Tt=parseInt(oe.substr(ae+4,2),16),Xt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Ae&15)<<12|(Tt&63)<<6|Xt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function le(oe,ee){function ae(Ce){var Ae=ge(Ce);return Ae.match(ee.UNRESERVED)?Ae:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,fe).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,fe).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,fe).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,fe).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,fe).replace(ee.PCT_ENCODED,o)),oe}function Me(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ce(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Ae=Ce[1];return Ae?Ae.split(".").map(Me).join("."):oe}function ze(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Ae=Ce[1],lt=Ce[2];if(Ae){for(var Tt=Ae.toLowerCase().split("::").reverse(),Xt=d(Tt,2),On=Xt[0],Fn=Xt[1],pn=Fn?Fn.split(":").map(Me):[],sr=On.split(":").map(Me),Rr=ee.IPV4ADDRESS.test(sr[sr.length-1]),Vt=Rr?7:8,or=sr.length-Vt,Hr=Array(Vt),Jn=0;Jn<Vt;++Jn)Hr[Jn]=pn[Jn]||sr[or+Jn]||"";Rr&&(Hr[Vt-1]=ce(Hr[Vt-1],ee));var ki=Hr.reduce(function(zi,qo,Pa){if(!qo||qo==="0"){var Xs=zi[zi.length-1];Xs&&Xs.index+Xs.length===Pa?Xs.length++:zi.push({index:Pa,length:1})}return zi},[]),Ks=ki.sort(function(zi,qo){return qo.length-zi.length})[0],Jr=void 0;if(Ks&&Ks.length>1){var go=Hr.slice(0,Ks.index),Ui=Hr.slice(Ks.index+Ks.length);Jr=go.join(":")+"::"+Ui.join(":")}else Jr=Hr.join(":");return lt&&(Jr+="%"+lt),Jr}else return oe}var Ve=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,at="".match(/(){0}/)[1]===void 0;function tt(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Ae=oe.match(Ve);if(Ae){at?(ae.scheme=Ae[1],ae.userinfo=Ae[3],ae.host=Ae[4],ae.port=parseInt(Ae[5],10),ae.path=Ae[6]||"",ae.query=Ae[7],ae.fragment=Ae[8],isNaN(ae.port)&&(ae.port=Ae[5])):(ae.scheme=Ae[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Ae[3]:void 0,ae.host=oe.indexOf("//")!==-1?Ae[4]:void 0,ae.port=parseInt(Ae[5],10),ae.path=Ae[6]||"",ae.query=oe.indexOf("?")!==-1?Ae[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Ae[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ae[4]:void 0)),ae.host&&(ae.host=ze(ce(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var lt=he[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!lt||!lt.unicodeSupport)){if(ae.host&&(ee.domainHost||lt&&lt.domainHost))try{ae.host=te.toASCII(ae.host.replace(Ce.PCT_ENCODED,ge).toLowerCase())}catch(Tt){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+Tt}le(ae,c)}else le(ae,Ce);lt&&lt.parse&&lt.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(ze(ce(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Ae,lt,Tt){return"["+lt+(Tt?"%25"+Tt:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var pe=/^\.\.?\//,Oe=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,pt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(oe){for(var ee=[];oe.length;)if(oe.match(pe))oe=oe.replace(pe,"");else if(oe.match(Oe))oe=oe.replace(Oe,"/");else if(oe.match(He))oe=oe.replace(He,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(pt);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function _e(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Ae=he[(ee.scheme||oe.scheme||"").toLowerCase()];if(Ae&&Ae.serialize&&Ae.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Ae&&Ae.domainHost)try{oe.host=ee.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ae.PCT_ENCODED,ge).toLowerCase())}catch(Xt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Xt}}le(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var lt=be(oe,ee);if(lt!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(lt),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var Tt=oe.path;!ee.absolutePath&&(!Ae||!Ae.absolutePath)&&(Tt=Ge(Tt)),lt===void 0&&(Tt=Tt.replace(/^\/\//,"/%2F")),Ce.push(Tt)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function ct(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Ae={};return Ce||(oe=tt(_e(oe,ae),ae),ee=tt(_e(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Ae.scheme=ee.scheme,Ae.userinfo=ee.userinfo,Ae.host=ee.host,Ae.port=ee.port,Ae.path=Ge(ee.path||""),Ae.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Ae.userinfo=ee.userinfo,Ae.host=ee.host,Ae.port=ee.port,Ae.path=Ge(ee.path||""),Ae.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Ae.path=Ge(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Ae.path="/"+ee.path:oe.path?Ae.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Ae.path=ee.path,Ae.path=Ge(Ae.path)),Ae.query=ee.query):(Ae.path=oe.path,ee.query!==void 0?Ae.query=ee.query:Ae.query=oe.query),Ae.userinfo=oe.userinfo,Ae.host=oe.host,Ae.port=oe.port),Ae.scheme=oe.scheme),Ae.fragment=ee.fragment,Ae}function bt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return _e(ct(tt(oe,Ce),tt(ee,Ce),Ce,!0),Ce)}function ye(oe,ee){return typeof oe=="string"?oe=_e(tt(oe,ee),ee):s(oe)==="object"&&(oe=tt(_e(oe,ee),ee)),oe}function Ne(oe,ee,ae){return typeof oe=="string"?oe=_e(tt(oe,ae),ae):s(oe)==="object"&&(oe=_e(oe,ae)),typeof ee=="string"?ee=_e(tt(ee,ae),ae):s(ee)==="object"&&(ee=_e(ee,ae)),oe===ee}function We(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,fe)}function Je(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,ge)}var xt={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},wn={scheme:"https",domainHost:xt.domainHost,parse:xt.parse,serialize:xt.serialize};function yr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var vr={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=yr(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(yr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Ae=d(Ce,2),lt=Ae[0],Tt=Ae[1];ee.path=lt&&lt!=="/"?lt:void 0,ee.query=Tt,ee.resourceName=void 0}return ee.fragment=void 0,ee}},kr={scheme:"wss",domainHost:vr.domainHost,parse:vr.parse,serialize:vr.serialize},Kt={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",rr="[0-9A-Fa-f]",ir=i(i("%[EFef]"+rr+"%"+rr+rr+"%"+rr+rr)+"|"+i("%[89A-Fa-f]"+rr+"%"+rr+rr)+"|"+i("%"+rr+rr)),Ho="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Bi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",is=r(Bi,'[\\"\\\\]'),Ln="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Hn=new RegExp(Tn,"g"),gs=new RegExp(ir,"g"),pp=new RegExp(r("[^]",Ho,"[\\.]",'[\\"]',is),"g"),cl=new RegExp(r("[^]",Tn,Ln),"g"),Sd=cl;function xr(oe){var ee=ge(oe);return ee.match(Hn)?ee:oe}var Ii={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Ae=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var lt=!1,Tt={},Xt=Ce.query.split("&"),On=0,Fn=Xt.length;On<Fn;++On){var pn=Xt[On].split("=");switch(pn[0]){case"to":for(var sr=pn[1].split(","),Rr=0,Vt=sr.length;Rr<Vt;++Rr)Ae.push(sr[Rr]);break;case"subject":Ce.subject=Je(pn[1],ae);break;case"body":Ce.body=Je(pn[1],ae);break;default:lt=!0,Tt[Je(pn[0],ae)]=Je(pn[1],ae);break}}lt&&(Ce.headers=Tt)}Ce.query=void 0;for(var or=0,Hr=Ae.length;or<Hr;++or){var Jn=Ae[or].split("@");if(Jn[0]=Je(Jn[0]),ae.unicodeSupport)Jn[1]=Je(Jn[1],ae).toLowerCase();else try{Jn[1]=te.toASCII(Je(Jn[1],ae).toLowerCase())}catch(ki){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+ki}Ae[or]=Jn.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Ae=a(ee.to);if(Ae){for(var lt=0,Tt=Ae.length;lt<Tt;++lt){var Xt=String(Ae[lt]),On=Xt.lastIndexOf("@"),Fn=Xt.slice(0,On).replace(gs,xr).replace(gs,o).replace(pp,fe),pn=Xt.slice(On+1);try{pn=ae.iri?te.toUnicode(pn):te.toASCII(Je(pn,ae).toLowerCase())}catch(or){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+or}Ae[lt]=Fn+"@"+pn}Ce.path=Ae.join(",")}var sr=ee.headers=ee.headers||{};ee.subject&&(sr.subject=ee.subject),ee.body&&(sr.body=ee.body);var Rr=[];for(var Vt in sr)sr[Vt]!==Kt[Vt]&&Rr.push(Vt.replace(gs,xr).replace(gs,o).replace(cl,fe)+"="+sr[Vt].replace(gs,xr).replace(gs,o).replace(Sd,fe));return Rr.length&&(Ce.query=Rr.join("&")),Ce}},li=/^([^\:]+)\:(.*)/,hu={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(li),Ae=ee;if(Ce){var lt=ae.scheme||Ae.scheme||"urn",Tt=Ce[1].toLowerCase(),Xt=Ce[2],On=lt+":"+(ae.nid||Tt),Fn=he[On];Ae.nid=Tt,Ae.nss=Xt,Ae.path=void 0,Fn&&(Ae=Fn.parse(Ae,ae))}else Ae.error=Ae.error||"URN can not be parsed.";return Ae},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Ae=ee.nid,lt=Ce+":"+(ae.nid||Ae),Tt=he[lt];Tt&&(ee=Tt.serialize(ee,ae));var Xt=ee,On=ee.nss;return Xt.path=(Ae||ae.nid)+":"+On,Xt}},Ra=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Na={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ra))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};he[xt.scheme]=xt,he[wn.scheme]=wn,he[vr.scheme]=vr,he[kr.scheme]=kr,he[Ii.scheme]=Ii,he[hu.scheme]=hu,he[Na.scheme]=Na,n.SCHEMES=he,n.pctEncChar=fe,n.pctDecChars=ge,n.parse=tt,n.removeDotSegments=Ge,n.serialize=_e,n.resolveComponents=ct,n.resolve=bt,n.normalize=ye,n.equal=Ne,n.escapeComponent=We,n.unescapeComponent=Je,Object.defineProperty(n,"__esModule",{value:!0})})})(F7,F7.exports);var rft=F7.exports;Object.defineProperty(AK,"__esModule",{value:!0});const QSe=rft;QSe.code='require("ajv/dist/runtime/uri").default';AK.default=QSe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Hf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ok,i=Vx,s=P1,o=Nu,a=Pn,u=Io,l=Rs,c=wt,f=nft,d=AK,h=(O,z)=>new RegExp(O,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(O){var z,W,j,H,G,te,he,fe,ge,le,Me,ce,ze,Ve,at,tt,be,pe,Oe,He,pt,Ge,_e,ct,bt;const ye=O.strict,Ne=(z=O.code)===null||z===void 0?void 0:z.optimize,We=Ne===!0||Ne===void 0?1:Ne||0,Je=(j=(W=O.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,xt=(H=O.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(te=(G=O.strictSchema)!==null&&G!==void 0?G:ye)!==null&&te!==void 0?te:!0,strictNumbers:(fe=(he=O.strictNumbers)!==null&&he!==void 0?he:ye)!==null&&fe!==void 0?fe:!0,strictTypes:(le=(ge=O.strictTypes)!==null&&ge!==void 0?ge:ye)!==null&&le!==void 0?le:"log",strictTuples:(ce=(Me=O.strictTuples)!==null&&Me!==void 0?Me:ye)!==null&&ce!==void 0?ce:"log",strictRequired:(Ve=(ze=O.strictRequired)!==null&&ze!==void 0?ze:ye)!==null&&Ve!==void 0?Ve:!1,code:O.code?{...O.code,optimize:We,regExp:Je}:{optimize:We,regExp:Je},loopRequired:(at=O.loopRequired)!==null&&at!==void 0?at:v,loopEnum:(tt=O.loopEnum)!==null&&tt!==void 0?tt:v,meta:(be=O.meta)!==null&&be!==void 0?be:!0,messages:(pe=O.messages)!==null&&pe!==void 0?pe:!0,inlineRefs:(Oe=O.inlineRefs)!==null&&Oe!==void 0?Oe:!0,schemaId:(He=O.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(pt=O.addUsedSchema)!==null&&pt!==void 0?pt:!0,validateSchema:(Ge=O.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(_e=O.validateFormats)!==null&&_e!==void 0?_e:!0,unicodeRegExp:(ct=O.unicodeRegExp)!==null&&ct!==void 0?ct:!0,int32range:(bt=O.int32range)!==null&&bt!==void 0?bt:!0,uriResolver:xt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=$(z.logger);const H=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=R.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),x.call(this),z.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let H=f;j==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&z&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const H=j(W);return"$async"in j||(this.errors=j.errors),H}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,z,W);async function H(le,Me){await G.call(this,le.$schema);const ce=this._addSchema(le,Me);return ce.validate||te.call(this,ce)}async function G(le){le&&!this.getSchema(le)&&await H.call(this,{$ref:le},!0)}async function te(le){try{return this._compileSchemaEnv(le)}catch(Me){if(!(Me instanceof i.default))throw Me;return he.call(this,Me),await fe.call(this,Me.missingSchema),te.call(this,le)}}function he({missingSchema:le,missingRef:Me}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${Me} cannot be resolved`)}async function fe(le){const Me=await ge.call(this,le);this.refs[le]||await G.call(this,Me.$schema),this.refs[le]||this.addSchema(Me,le,W)}async function ge(le){const Me=this._loading[le];if(Me)return Me;try{return await(this._loading[le]=j(le))}finally{delete this._loading[le]}}}addSchema(z,W,j,H=this.opts.validateSchema){if(Array.isArray(z)){for(const te of z)this.addSchema(te,void 0,j,H);return this}let G;if(typeof z=="object"){const{schemaId:te}=this.opts;if(G=z[te],G!==void 0&&typeof G!="string")throw new Error(`schema ${te} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,H,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,z);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,H,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(D.call(this,j,W),!W)return(0,c.eachItem)(j,G=>M.call(this,G)),this;B.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>M.call(this,G,H):G=>H.type.forEach(te=>M.call(this,G,H,te))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const H=j.rules.findIndex(G=>G.keyword===z);H>=0&&j.rules.splice(H,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const H of W){const G=H.split("/").slice(1);let te=z;for(const he of G)te=te[he];for(const he in j){const fe=j[he];if(typeof fe!="object")continue;const{$data:ge}=fe.definition,le=te[he];ge&&le&&(te[he]=V(le))}}return z}_removeAllSchemas(z,W){for(const j in z){const H=z[j];(!W||W.test(j))&&(typeof H=="string"?delete z[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete z[j]))}}_addSchema(z,W,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let te;const{schemaId:he}=this.opts;if(typeof z=="object")te=z[he];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let fe=this._cache.get(z);if(fe!==void 0)return fe;j=(0,u.normalizeId)(te||j);const ge=u.getSchemaRefs.call(this,z,j);return fe=new o.SchemaEnv({schema:z,schemaId:he,meta:W,baseId:j,localRefs:ge}),this._cache.set(fe.schema,fe),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=fe),H&&this.validateSchema(z,!0),fe}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(O,z,W,j="error"){for(const H in O){const G=H;G in z&&this.logger[j](`${W}: option ${H}. ${O[G]}`)}}function S(O){return O=(0,u.normalizeId)(O),this.schemas[O]||this.refs[O]}function x(){const O=this.opts.schemas;if(O)if(Array.isArray(O))this.addSchema(O);else for(const z in O)this.addSchema(O[z],z)}function C(){for(const O in this.opts.formats){const z=this.opts.formats[O];z&&this.addFormat(O,z)}}function A(O){if(Array.isArray(O)){this.addVocabulary(O);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in O){const W=O[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function R(){const O={...this.opts};for(const z of p)delete O[z];return O}const P={log(){},warn(){},error(){}};function $(O){if(O===!1)return P;if(O===void 0)return console;if(O.log&&O.warn&&O.error)return O;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function D(O,z){const{RULES:W}=this;if((0,c.eachItem)(O,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!k.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function M(O,z,W){var j;const H=z==null?void 0:z.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let te=H?G.post:G.rules.find(({type:fe})=>fe===W);if(te||(te={type:W,rules:[]},G.rules.push(te)),G.keywords[O]=!0,!z)return;const he={keyword:O,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?L.call(this,te,he,z.before):te.rules.push(he),G.all[O]=he,(j=z.implements)===null||j===void 0||j.forEach(fe=>this.addKeyword(fe))}function L(O,z,W){const j=O.rules.findIndex(H=>H.keyword===W);j>=0?O.rules.splice(j,0,z):(O.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(O){let{metaSchema:z}=O;z!==void 0&&(O.$data&&this.opts.$data&&(z=V(z)),O.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(O){return{anyOf:[O,U]}}})(bSe);var IK={},kK={},RK={};Object.defineProperty(RK,"__esModule",{value:!0});const ift={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};RK.default=ift;var O1={};Object.defineProperty(O1,"__esModule",{value:!0});O1.callRef=O1.getValidate=void 0;const sft=Vx,rle=Rn,Eu=Pn,a_=Jh,ile=Nu,bN=wt,oft={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=ile.resolveRef.call(u,l,i,n);if(c===void 0)throw new sft.default(r.opts.uriResolver,i,n);if(c instanceof ile.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return aO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return aO(e,(0,Eu._)`${p}.validate`,l,l.$async)}function d(p){const m=JSe(e,p);aO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Eu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Eu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function JSe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Eu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}O1.getValidate=JSe;function aO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?a_.default.this:Eu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Eu._)`await ${(0,rle.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Eu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,rle.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Eu._)`${p}.errors`;i.assign(a_.default.vErrors,(0,Eu._)`${a_.default.vErrors} === null ? ${m} : ${a_.default.vErrors}.concat(${m})`),i.assign(a_.default.errors,(0,Eu._)`${a_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=bN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Eu._)`${p}.evaluated.props`);s.props=bN.mergeEvaluated.props(i,y,s.props,Eu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=bN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Eu._)`${p}.evaluated.items`);s.items=bN.mergeEvaluated.items(i,y,s.items,Eu.Name)}}}O1.callRef=aO;O1.default=oft;Object.defineProperty(kK,"__esModule",{value:!0});const aft=RK,uft=O1,lft=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",aft.default,uft.default];kK.default=lft;var NK={},PK={};Object.defineProperty(PK,"__esModule",{value:!0});const i3=Pn,yg=i3.operators,s3={maximum:{okStr:"<=",ok:yg.LTE,fail:yg.GT},minimum:{okStr:">=",ok:yg.GTE,fail:yg.LT},exclusiveMaximum:{okStr:"<",ok:yg.LT,fail:yg.GTE},exclusiveMinimum:{okStr:">",ok:yg.GT,fail:yg.LTE}},cft={message:({keyword:e,schemaCode:t})=>(0,i3.str)`must be ${s3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,i3._)`{comparison: ${s3[e].okStr}, limit: ${t}}`},fft={keyword:Object.keys(s3),type:"number",schemaType:"number",$data:!0,error:cft,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,i3._)`${n} ${s3[t].fail} ${r} || isNaN(${n})`)}};PK.default=fft;var OK={};Object.defineProperty(OK,"__esModule",{value:!0});const f2=Pn,dft={message:({schemaCode:e})=>(0,f2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,f2._)`{multipleOf: ${e}}`},hft={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:dft,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,f2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,f2._)`${o} !== parseInt(${o})`;e.fail$data((0,f2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};OK.default=hft;var DK={},$K={};Object.defineProperty($K,"__esModule",{value:!0});function ZSe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}$K.default=ZSe;ZSe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(DK,"__esModule",{value:!0});const $v=Pn,pft=wt,mft=$K,gft={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,$v.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,$v._)`{limit: ${e}}`},yft={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:gft,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?$v.operators.GT:$v.operators.LT,o=i.opts.unicode===!1?(0,$v._)`${n}.length`:(0,$v._)`${(0,pft.useFunc)(e.gen,mft.default)}(${n})`;e.fail$data((0,$v._)`${o} ${s} ${r}`)}};DK.default=yft;var MK={};Object.defineProperty(MK,"__esModule",{value:!0});const vft=Rn,o3=Pn,bft={message:({schemaCode:e})=>(0,o3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,o3._)`{pattern: ${e}}`},_ft={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:bft,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,o3._)`(new RegExp(${i}, ${o}))`:(0,vft.usePattern)(e,r);e.fail$data((0,o3._)`!${a}.test(${t})`)}};MK.default=_ft;var LK={};Object.defineProperty(LK,"__esModule",{value:!0});const d2=Pn,wft={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,d2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,d2._)`{limit: ${e}}`},Eft={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:wft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?d2.operators.GT:d2.operators.LT;e.fail$data((0,d2._)`Object.keys(${n}).length ${i} ${r}`)}};LK.default=Eft;var FK={};Object.defineProperty(FK,"__esModule",{value:!0});const aT=Rn,h2=Pn,xft=wt,Sft={message:({params:{missingProperty:e}})=>(0,h2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,h2._)`{missingProperty: ${e}}`},Tft={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Sft,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,xft.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(h2.nil,f);else for(const h of n)(0,aT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,aT.checkMissingProp)(e,n,h)),(0,aT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,aT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,aT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,h2.not)(p),()=>{e.error(),t.break()})},h2.nil)}}};FK.default=Tft;var jK={};Object.defineProperty(jK,"__esModule",{value:!0});const p2=Pn,Cft={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,p2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,p2._)`{limit: ${e}}`},Aft={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Cft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?p2.operators.GT:p2.operators.LT;e.fail$data((0,p2._)`${n}.length ${i} ${r}`)}};jK.default=Aft;var BK={},ak={};Object.defineProperty(ak,"__esModule",{value:!0});const eTe=xK;eTe.code='require("ajv/dist/runtime/equal").default';ak.default=eTe;Object.defineProperty(BK,"__esModule",{value:!0});const lj=Rs,wo=Pn,Ift=wt,kft=ak,Rft={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},Nft={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Rft,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,lj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,lj.checkDataTypes)(l,g,a.opts.strictNumbers,lj.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Ift.useFunc)(t,kft.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};BK.default=Nft;var UK={};Object.defineProperty(UK,"__esModule",{value:!0});const j7=Pn,Pft=wt,Oft=ak,Dft={message:"must be equal to constant",params:({schemaCode:e})=>(0,j7._)`{allowedValue: ${e}}`},$ft={keyword:"const",$data:!0,error:Dft,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,j7._)`!${(0,Pft.useFunc)(t,Oft.default)}(${n}, ${i})`):e.fail((0,j7._)`${s} !== ${n}`)}};UK.default=$ft;var zK={};Object.defineProperty(zK,"__esModule",{value:!0});const XT=Pn,Mft=wt,Lft=ak,Fft={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,XT._)`{allowedValues: ${e}}`},jft={keyword:"enum",schemaType:"array",$data:!0,error:Fft,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Mft.useFunc)(t,Lft.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,XT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,XT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,XT._)`${l()}(${n}, ${h}[${p}])`:(0,XT._)`${n} === ${m}`}}};zK.default=jft;Object.defineProperty(NK,"__esModule",{value:!0});const Bft=PK,Uft=OK,zft=DK,Vft=MK,Hft=LK,qft=FK,Wft=jK,Gft=BK,Yft=UK,Kft=zK,Xft=[Bft.default,Uft.default,zft.default,Vft.default,Hft.default,qft.default,Wft.default,Gft.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Yft.default,Kft.default];NK.default=Xft;var VK={},Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.validateAdditionalItems=void 0;const Mv=Pn,B7=wt,Qft={message:({params:{len:e}})=>(0,Mv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Mv._)`{limit: ${e}}`},Jft={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Qft,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,B7.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}tTe(e,r)}};function tTe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Mv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Mv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,B7.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Mv._)`${a} <= ${t.length}`);n.if((0,Mv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:B7.Type.Num},l),o.allErrors||n.if((0,Mv.not)(l),()=>n.break())})}}Hx.validateAdditionalItems=tTe;Hx.default=Jft;var HK={},qx={};Object.defineProperty(qx,"__esModule",{value:!0});qx.validateTuple=void 0;const sle=Pn,uO=wt,Zft=Rn,edt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return nTe(e,"additionalItems",t);n.items=!0,!(0,uO.alwaysValidSchema)(n,t)&&e.ok((0,Zft.validateArray)(e))}};function nTe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=uO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,sle._)`${s}.length`);n.forEach((f,d)=>{(0,uO.alwaysValidSchema)(a,f)||(r.if((0,sle._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,uO.checkStrictMode)(a,g,d.strictTuples)}}}qx.validateTuple=nTe;qx.default=edt;Object.defineProperty(HK,"__esModule",{value:!0});const tdt=qx,ndt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,tdt.validateTuple)(e,"items")};HK.default=ndt;var qK={};Object.defineProperty(qK,"__esModule",{value:!0});const ole=Pn,rdt=wt,idt=Rn,sdt=Hx,odt={message:({params:{len:e}})=>(0,ole.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ole._)`{limit: ${e}}`},adt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:odt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,rdt.alwaysValidSchema)(r,t)&&(i?(0,sdt.validateAdditionalItems)(e,i):e.ok((0,idt.validateArray)(e)))}};qK.default=adt;var WK={};Object.defineProperty(WK,"__esModule",{value:!0});const cc=Pn,_N=wt,udt={message:({params:{min:e,max:t}})=>t===void 0?(0,cc.str)`must contain at least ${e} valid item(s)`:(0,cc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,cc._)`{minContains: ${e}}`:(0,cc._)`{minContains: ${e}, maxContains: ${t}}`},ldt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:udt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,cc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,_N.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,_N.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,_N.alwaysValidSchema)(s,n)){let m=(0,cc._)`${c} >= ${o}`;a!==void 0&&(m=(0,cc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,cc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:_N.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,cc._)`${m}++`),a===void 0?t.if((0,cc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,cc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,cc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};WK.default=ldt;var rTe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=Rn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(rTe);var GK={};Object.defineProperty(GK,"__esModule",{value:!0});const iTe=Pn,cdt=wt,fdt={message:"property name must be valid",params:({params:e})=>(0,iTe._)`{propertyName: ${e.propertyName}}`},ddt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:fdt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,cdt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,iTe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};GK.default=ddt;var m6={};Object.defineProperty(m6,"__esModule",{value:!0});const wN=Rn,pf=Pn,hdt=Jh,EN=wt,pdt={message:"must NOT have additional properties",params:({params:e})=>(0,pf._)`{additionalProperty: ${e.additionalProperty}}`},mdt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:pdt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,EN.alwaysValidSchema)(o,n))return;const l=(0,wN.allSchemaProperties)(r.properties),c=(0,wN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,pf._)`${s} === ${hdt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,EN.schemaRefOrVal)(o,r.properties,"properties");y=(0,wN.isOwnProperty)(t,v,g)}else l.length?y=(0,pf.or)(...l.map(v=>(0,pf._)`${g} === ${v}`)):y=pf.nil;return c.length&&(y=(0,pf.or)(y,...c.map(v=>(0,pf._)`${(0,wN.usePattern)(e,v)}.test(${g})`))),(0,pf.not)(y)}function h(g){t.code((0,pf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,EN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,pf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,pf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:EN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};m6.default=mdt;var YK={};Object.defineProperty(YK,"__esModule",{value:!0});const gdt=Hf,ale=Rn,cj=wt,ule=m6,ydt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&ule.default.code(new gdt.KeywordCxt(s,ule.default,"additionalProperties"));const o=(0,ale.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=cj.mergeEvaluated.props(t,(0,cj.toHash)(o),s.props));const a=o.filter(f=>!(0,cj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,ale.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};YK.default=ydt;var KK={};Object.defineProperty(KK,"__esModule",{value:!0});const lle=Rn,xN=Pn,cle=wt,fle=wt,vdt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,lle.allSchemaProperties)(n),u=a.filter(m=>(0,cle.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof xN.Name)&&(s.props=(0,fle.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,cle.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,xN._)`${(0,lle.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:fle.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,xN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,xN.not)(c),()=>t.break())})})}}};KK.default=vdt;var XK={};Object.defineProperty(XK,"__esModule",{value:!0});const bdt=wt,_dt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,bdt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};XK.default=_dt;var QK={};Object.defineProperty(QK,"__esModule",{value:!0});const wdt=Rn,Edt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:wdt.validateUnion,error:{message:"must match a schema in anyOf"}};QK.default=Edt;var JK={};Object.defineProperty(JK,"__esModule",{value:!0});const lO=Pn,xdt=wt,Sdt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,lO._)`{passingSchemas: ${e.passing}}`},Tdt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Sdt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,xdt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,lO._)`${u} && ${o}`).assign(o,!1).assign(a,(0,lO._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,lO.Name)})})}}};JK.default=Tdt;var ZK={};Object.defineProperty(ZK,"__esModule",{value:!0});const Cdt=wt,Adt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Cdt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};ZK.default=Adt;var eX={};Object.defineProperty(eX,"__esModule",{value:!0});const a3=Pn,sTe=wt,Idt={message:({params:e})=>(0,a3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,a3._)`{failingKeyword: ${e.ifClause}}`},kdt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Idt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,sTe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=dle(r,"then"),s=dle(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,a3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,a3._)`${c}`):e.setParams({ifClause:c})}}}};function dle(e,t){const n=e.schema[t];return n!==void 0&&!(0,sTe.alwaysValidSchema)(e,n)}eX.default=kdt;var tX={};Object.defineProperty(tX,"__esModule",{value:!0});const Rdt=wt,Ndt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Rdt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};tX.default=Ndt;Object.defineProperty(VK,"__esModule",{value:!0});const Pdt=Hx,Odt=HK,Ddt=qx,$dt=qK,Mdt=WK,Ldt=rTe,Fdt=GK,jdt=m6,Bdt=YK,Udt=KK,zdt=XK,Vdt=QK,Hdt=JK,qdt=ZK,Wdt=eX,Gdt=tX;function Ydt(e=!1){const t=[zdt.default,Vdt.default,Hdt.default,qdt.default,Wdt.default,Gdt.default,Fdt.default,jdt.default,Ldt.default,Bdt.default,Udt.default];return e?t.push(Odt.default,$dt.default):t.push(Pdt.default,Ddt.default),t.push(Mdt.default),t}VK.default=Ydt;var nX={},rX={};Object.defineProperty(rX,"__esModule",{value:!0});const as=Pn,Kdt={message:({schemaCode:e})=>(0,as.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,as._)`{format: ${e}}`},Xdt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Kdt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,as._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,as._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,as._)`${m}.type || "string"`).assign(y,(0,as._)`${m}.validate`),()=>n.assign(g,(0,as._)`"string"`).assign(y,m)),e.fail$data((0,as.or)(v(),b()));function v(){return u.strictSchema===!1?as.nil:(0,as._)`${o} && !${y}`}function b(){const w=c.$async?(0,as._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,as._)`${y}(${r})`,E=(0,as._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,as._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,as.regexpCode)(E):u.code.formats?(0,as._)`${u.code.formats}${(0,as.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,as._)`${x}.validate`]:["string",E,x]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,as._)`await ${y}(${r})`}return typeof g=="function"?(0,as._)`${y}(${r})`:(0,as._)`${y}.test(${r})`}}}};rX.default=Xdt;Object.defineProperty(nX,"__esModule",{value:!0});const Qdt=rX,Jdt=[Qdt.default];nX.default=Jdt;var vE={};Object.defineProperty(vE,"__esModule",{value:!0});vE.contentVocabulary=vE.metadataVocabulary=void 0;vE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];vE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(IK,"__esModule",{value:!0});const Zdt=kK,eht=NK,tht=VK,nht=nX,hle=vE,rht=[Zdt.default,eht.default,(0,tht.default)(),nht.default,hle.metadataVocabulary,hle.contentVocabulary];IK.default=rht;var iX={},g6={};Object.defineProperty(g6,"__esModule",{value:!0});g6.DiscrError=void 0;var ple;(function(e){e.Tag="tag",e.Mapping="mapping"})(ple||(g6.DiscrError=ple={}));Object.defineProperty(iX,"__esModule",{value:!0});const N_=Pn,U7=g6,mle=Nu,iht=Vx,sht=wt,oht={message:({params:{discrError:e,tagName:t}})=>e===U7.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,N_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},aht={keyword:"discriminator",type:"object",schemaType:"object",error:oht,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,N_._)`${n}${(0,N_.getProperty)(a)}`);t.if((0,N_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:U7.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,N_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:U7.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,N_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,sht.schemaHasRulesButRef)(E,s.self.RULES)){const x=E.$ref;if(E=mle.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x),E instanceof mle.SchemaEnv&&(E=E.schema),E===void 0)throw new iht.default(s.opts.uriResolver,s.baseId,x)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};iX.default=aht;const uht="http://json-schema.org/draft-07/schema#",lht="http://json-schema.org/draft-07/schema#",cht="Core schema meta-schema",fht={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},dht=["object","boolean"],hht={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},pht={$schema:uht,$id:lht,title:cht,definitions:fht,type:dht,properties:hht,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=bSe,r=IK,i=iX,s=pht,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Hf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=ok;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=Vx;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(O7,O7.exports);var mht=O7.exports;const oTe=ol(mht),ght="#/definitions/StudyConfig",yht="http://json-schema.org/draft-07/schema#",vht={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},bht={$ref:ght,$schema:yht,definitions:vht},_ht="#/definitions/GlobalConfig",wht="http://json-schema.org/draft-07/schema#",Eht={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},xht={$ref:_ht,$schema:wht,definitions:Eht},aTe=new oTe;aTe.addSchema(xht);const gle=aTe.getSchema("#/definitions/GlobalConfig"),uTe=new oTe;uTe.addSchema(bht);const fj=uTe.getSchema("#/definitions/StudyConfig");function Sht(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function y6(e){return e.baseComponent!==void 0}function Tht(e){const t=mK.parse(e),n=gle(t),r=Sht(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...gle.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function lTe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):lTe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Cht(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;y6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=cSe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return lTe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function Aht(e){let t=!1,n;try{n=mK.parse(e),t=fj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=Cht(n);r=[...fj.errors||[],...s],i=o}else r=fj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function cTe(){const e=Ry(),{setAlertModal:t}=zl(),n=jc();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var yle=Object.prototype.hasOwnProperty;function vle(e,t,n){for(n of e.keys())if(m2(n,t))return n}function m2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&m2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=vle(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=vle(t,i),!i)||!m2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(yle.call(e,n)&&++r&&!yle.call(t,n)||!(n in t)||!m2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Iht(e){var t=I.useRef(e),n=I.useRef(0);return m2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function kht(e,t){return I.useEffect(e,Iht(t))}const vA=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return kht(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},ble=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],fTe=["participantId","trialId","trialOrder","responseId"];function sX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Rht(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Rc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=y6(u)&&u.baseComponent&&n.baseComponents?fK({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function Nht(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...fTe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Rht(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Pht({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...ble].filter(h=>h!=="meta")),a=Ci(),{value:u,status:l,error:c}=vA(Nht,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);sX(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(xs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(rY,{searchable:!0,nothingFoundMessage:"Property not found",data:[...ble],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(BQe,{}),variant:"filled"}),_.jsx(kc,{h:"md"}),_.jsxs(Ee,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(Cn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Cn.Thead,{children:_.jsx(Cn.Tr,{children:u.header.map(h=>_.jsx(Cn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(tn,{direction:"row",justify:"space-between",align:"center",children:[h,!fTe.includes(h)&&_.jsx(Cl,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(RY,{size:16})})]})},h))})}),_.jsx(Cn.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(Cn.Tr,{children:u.header.map(m=>_.jsx(Cn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(VI,{variant:"light",children:c.message}):null,_.jsx(jl,{visible:l==="pending"||l==="idle"})]}),_.jsx(kc,{h:"sm"}),_.jsx(tn,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(nt,{children:d})}),_.jsx(kc,{h:"md"}),_.jsxs(Kn,{justify:"right",children:[_.jsx(xn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(xn,{leftSection:_.jsx(Xwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function dTe(){const e=Ih(),{storageEngine:t}=Ci(),{answers:n}=Fo(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),cTe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{sX(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=zx(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(Ja,{style:{height:"100%"},children:_.jsx(tn,{direction:"column",children:r||!g?_.jsx(nt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Za,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(nt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(kc,{h:"lg"}),_.jsx(Ja,{children:_.jsx(Ku,{color:"blue"})})]})})})}function bE(e){return structuredClone(e)}const hTe=I.createContext(null);function Oht(){const e=I.useContext(hTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function _le(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Dht(){const e=Ry(),t=cK(),r=`${Qh()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Fo(S=>S),a=jc(),{saveTrialAnswer:u,setIframeAnswers:l}=zl(),{storageEngine:c}=Ci(),f=zx(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const x=await c.getModes(f);h(x.dataCollectionEnabled)}})()},[c,f]);const p=Put(r),m=typeof e!="number"||!p,g=hK(),y=tf(),v=Ih(),b=I.useMemo(()=>Date.now(),[]),w=Oht(),E=I.useCallback(()=>{if(typeof e!="number")return;const S=bE(i[r]),x=Object.values(S).reduce((M,L)=>Object.hasOwn(L,"values")?{...M,...L.values}:M,{}),{provenanceGraph:C}=S,A=Date.now(),R=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:x,startTime:b,endTime:A,provenanceGraph:C,windowEvents:R})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:b,endTime:A,provenanceGraph:C,windowEvents:R}}),a(l({})));let P=e+1;const $=dSe(s,e),k=$!==null&&$.some(M=>Object.hasOwn(M.currentBlock,"skip")&&M.currentBlock.skip!==void 0),D={...o,[r]:{answer:x,startTime:b,endTime:A,provenanceGraph:C,windowEvents:R}};k&&[...$.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(B=>({...B,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let B=!1;const U=Object.fromEntries(Object.entries(D).filter(([O])=>{const z=parseInt(O.slice(O.lastIndexOf("_")+1),10);return z>=L.firstIndex&&z<=e})),V=L.check!=="block"?Object.entries(U).filter(([O])=>O.slice(0,O.lastIndexOf("_"))===L.name):Object.entries(U);if(V.length===0)return!1;if(V.some(([O,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[O,z]=V[0];L.check==="response"?B=L.value!==z.answer[L.responseId]:B=!_le(z.answer,O,v.components[O.slice(0,O.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(V.length<L.value)return!1;const O=V.map(([j,H])=>_le(H.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=O.filter(j=>j).length,W=O.length-z;B=L.condition==="numCorrect"&&z===L.value||L.condition==="numIncorrect"&&W===L.value}if(B){const O=t.indexOf(L.to),z=O===-1?Rut(s,L.to):-1;return P=O===-1?z:O,!0}return!1}),y(`/${f}/${P}${window.location.search}`)},[i,r,w,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function $ht({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Dht(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(xn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Mht(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Lht=typeof window<"u"?I.useLayoutEffect:I.useEffect;function vo(e,t){Lht(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Fht(e,t){e&&Mht(e),vo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),vo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),vo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),vo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),vo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),vo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),vo(`mantine-form:${e}:clear-errors`,t.clearErrors),vo(`mantine-form:${e}:reset`,t.reset),vo(`mantine-form:${e}:validate`,t.validate),vo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),vo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),vo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),vo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),vo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),vo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),vo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),vo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function jht(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function z7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Bht(e){const[t,n]=I.useState(z7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=z7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function pTe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function wle(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Ele(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=pTe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=wle(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=wle(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Uht(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function xle(e,t,n){typeof n.value=="object"&&(n.value=sw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function sw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(sw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(sw(a),sw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(sw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)xle(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||xle(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function mTe(e){return typeof e!="string"?[]:e.split(".")}function $u(e,t){const n=mTe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function v6(e,t,n){const r=mTe(e);if(r.length===0)return n;const i=sw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function zht(e,{from:t,to:n},r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),v6(e,s,r)}function Vht(e,t,n,r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),v6(e,s,r)}function Hht(e,t,n){const r=$u(e,n);return Array.isArray(r)?v6(e,r.filter((i,s)=>s!==t),n):n}function qht({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Uht(o,a,u)),e.setValues({values:zht(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Ele(o,a,u,-1)),e.setValues({values:Hht(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Ele(o,u,l,1)),e.setValues({values:Vht(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function SN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Wht({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=I.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=I.useCallback((E,S)=>{c(x=>SN(x,E)===S?x:{...x,[E]:S})},[]),m=I.useCallback((E,S)=>{f(x=>SN(x,E)===S?x:{...x,[E]:S})},[]),g=I.useCallback(E=>SN(u.current,E),[]),y=I.useCallback(E=>f(S=>{if(typeof E!="string")return S;const x=pTe(E,S);return delete x[E],sO(x,S)?S:x}),[]),v=I.useCallback(E=>{if(E){const x=$u(E,l.current);if(typeof x=="boolean")return x;const C=$u(E,r.refValues.current),A=$u(E,r.valuesSnapshot.current);return!sO(C,A)}return Object.keys(l.current).length>0?SN(l.current):!sO(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Ght({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=$u(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=v6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[u]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[u]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Yht({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:$u(i,o.previousValues),value:$u(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Sle(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Tle(e){const t=z7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function V7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=$u(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>V7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||V7(o,t,a,i)),i},r)}function H7(e,t){return Tle(typeof e=="function"?e(t):V7(e,t))}function TN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=H7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Kht="__MANTINE_FORM_INDEX__";function Cle(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Kht}`)):!1:!1}function gTe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Bht(r),p=Ght({initialValues:n,onValuesChange:l,mode:t}),m=Wht({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=qht({$values:p,$errors:h,$status:m}),y=Yht({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),S=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(O=>O+1)},[]),x=I.useCallback(O=>{p.initialize(O,()=>t==="uncontrolled"&&b(z=>z+1))},[]),C=I.useCallback((O,z,W)=>{const j=Cle(O,a);m.clearFieldDirty(O),m.setFieldTouched(O,!0),!j&&o&&h.clearFieldError(O),p.setFieldValue({path:O,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(O),j?H=>{const G=TN(O,d,H.updatedValues);G.hasError?h.setFieldError(O,G.error):h.clearFieldError(O)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[O]:(H[O]||0)+1})):null]})},[l,d]),A=I.useCallback(O=>{const z=p.refValues.current;p.setValues({values:O,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=$u(W,p.refValues.current),H=$u(W,z);j!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),R=I.useCallback(()=>{const O=H7(d,p.refValues.current);return h.setErrors(O.errors),O},[d]),P=I.useCallback(O=>{const z=TN(O,d,p.refValues.current);return z.hasError?h.setFieldError(O,z.error):h.clearFieldError(O),z},[d]),$=(O,{type:z="input",withError:W=!0,withFocus:j=!0,...H}={})=>{const te={onChange:jht(he=>C(O,he,{forceUpdate:!1})),"data-path":Sle(e,O)};return W&&(te.error=h.errorsState[O]),z==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=$u(O,p.refValues.current):te[t==="controlled"?"value":"defaultValue"]=$u(O,p.refValues.current),j&&(te.onFocus=()=>m.setFieldTouched(O,!0),te.onBlur=()=>{if(Cle(O,u)){const he=TN(O,d,p.refValues.current);he.hasError?h.setFieldError(O,he.error):h.clearFieldError(O)}}),Object.assign(te,f==null?void 0:f({inputProps:te,field:O,options:{type:z,withError:W,withFocus:j,...H},form:V}))},k=(O,z)=>W=>{W==null||W.preventDefault();const j=R();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):O==null||O(c(p.refValues.current),W)},D=O=>c(O||p.refValues.current),M=I.useCallback(O=>{O.preventDefault(),S()},[]),L=I.useCallback(O=>O?!TN(O,d,p.refValues.current).hasError:!H7(d,p.refValues.current).hasErrors,[d]),B=O=>`${v}-${O}-${w[O]||0}`,U=I.useCallback(O=>document.querySelector(`[data-path="${Sle(e,O)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:x,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:R,validateField:P,getInputProps:$,onSubmit:k,onReset:M,isValid:L,getTransformedValues:D,key:B,getInputNode:U};return Fht(e,V),V}function Xht(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Qht(e){return Xht(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Jht=new URLSearchParams(window.location.search),Zht=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Jht.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},ept=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function tpt(e,t,n){const[r,i]=I.useState(null),s=gTe({initialValues:Zht(e,n),validate:ept(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Sb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function npt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(wm.Group,{label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:s,required:o})})]}),description:u,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Kn,{mt:"xs",children:a.map(l=>_.jsx(wm,{disabled:t,value:l.value,label:l.label},l.value))})})}function rpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(ph,{disabled:t,label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Sb(e,n,u)})}function ipt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(si.Wrapper,{label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Vf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Vf.Item,{children:a},a)):_.jsx(Vf.Item,{children:t.value})})})}function yTe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(R1.Group,{name:`radioInput${e.id}`,label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:s,required:o})})]}),description:c,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Kn,{mt:"xs",children:[u?_.jsx(nt,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(R1,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(nt,{children:l})]})},e.id)}function spt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(yTe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function opt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(sY,{disabled:t,placeholder:l,label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Sb(e,n)})}function apt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Sb(e,n);return _.jsx(si.Wrapper,{label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(WL,{disabled:t,marks:a,...n,h:40})})}function upt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(nm,{disabled:t,placeholder:s,label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function lpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(NL,{disabled:t,placeholder:s,label:_.jsxs(tn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Za,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function cpt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=IY(),u=Ih().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ee,{mb:"md",children:[e.type==="numerical"&&_.jsx(opt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(upt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(lpt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(spt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(rpt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(apt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(yTe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(npt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(ipt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function u3({config:e,location:t,status:n,style:r}){var w;const i=Ry(),s=Qh(),o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=jc(),{updateResponseBlockValidation:c}=zl(),f=tpt(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Fo(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:bE(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var x,C;return _.jsx(xi.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(cpt,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(nt,{children:`The correct answer is: ${(C=(x=a.correctAnswer)==null?void 0:x.find(A=>A.id===E.id))==null?void 0:C.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(Kn,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(xn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx($ht,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function fpt({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=I.useState(!1),[o,a]=I.useState(null),[u,l]=I.useState(null),[c,f]=I.useState(null);return i?_.jsxs(ri,{children:[_.jsx(ph,{data:e,onChange:d=>a(d),placeholder:"Select X Column"}),_.jsx(ph,{data:e,onChange:d=>l(d),placeholder:"Select Y Column"}),_.jsx(xn,{disabled:!o||!u,onClick:()=>{n(o,u),s(!1)},children:"Create plot"}),_.jsx(ph,{data:t,onChange:d=>f(d),placeholder:"Select X Column"}),_.jsx(xn,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):_.jsx(ri,{children:_.jsx(Cl,{variant:"light",size:150,onClick:()=>s(!0),children:_.jsx(Gwe,{size:50})})})}const dpt=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:fpt},Symbol.toStringTag,{value:"Module"})),vTe=I.createContext(null),oX=({id:e="waveform",children:t})=>xi.createElement("div",{id:e},t),hpt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],ppt=e=>e?hpt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};var mpt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function gpt(e,t){return mpt(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})}function ypt(e){const t=e[0];if(t.some(n=>n>1||n<-1)){const n=t.length;let r=0;for(let i=0;i<n;i++){const s=Math.abs(t[i]);s>r&&(r=s)}for(const i of e)for(let s=0;s<n;s++)i[s]/=r}return e}function vpt(e,t){return typeof e[0]=="number"&&(e=[e]),ypt(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const dj={decode:gpt,createBuffer:vpt};var Ale=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function bpt(e,t,n){var r,i;return Ale(this,void 0,void 0,function*(){const s=yield fetch(e,n);{const o=(r=s.clone().body)===null||r===void 0?void 0:r.getReader(),a=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let u=0;const l=(c,f)=>Ale(this,void 0,void 0,function*(){if(c)return;u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);return t(d),o==null?void 0:o.read().then(({done:h,value:p})=>l(h,p))});o==null||o.read().then(({done:c,value:f})=>l(c,f))}return s.blob()})}const _pt={fetchBlob:bpt};class b6{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r!=null&&r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class wpt extends b6{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n)}onceMediaEvent(t,n){return this.onMediaEvent(t,n,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const i=n instanceof Blob?URL.createObjectURL(n):t;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function Ept(e,t,n,r,i=5){let s=()=>{};if(!e)return s;const o=a=>{if(a.button===2)return;a.preventDefault(),a.stopPropagation(),e.style.touchAction="none";let u=a.clientX,l=a.clientY,c=!1;const f=p=>{p.preventDefault(),p.stopPropagation();const m=p.clientX,g=p.clientY;if(c||Math.abs(m-u)>=i||Math.abs(g-l)>=i){const{left:y,top:v}=e.getBoundingClientRect();c||(c=!0,n==null||n(u-y,l-v)),t(m-u,g-l,m-y,g-v),u=m,l=g}},d=p=>{c&&(p.preventDefault(),p.stopPropagation())},h=()=>{e.style.touchAction="",c&&(r==null||r()),s()};document.addEventListener("pointermove",f),document.addEventListener("pointerup",h),document.addEventListener("pointerleave",h),document.addEventListener("click",d,!0),s=()=>{document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",h),document.removeEventListener("pointerleave",h),setTimeout(()=>{document.removeEventListener("click",d,!0)},10)}};return e.addEventListener("pointerdown",o),()=>{s(),e.removeEventListener("pointerdown",o)}}let bTe=class _Te extends b6{constructor(t,n){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientX-i.left,a=s/i.width,u=o/i.height;return[a,u]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){Ept(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){const n={};return this.timeouts.push(n),r=>{n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(r,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d").createLinearGradient(0,0,0,n.height),s=1/(t.length-1);return t.forEach((o,a)=>{const u=a*s;i.addColorStop(u,o)}),i}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const C=Math.round(v*c*i),A=Math.round(b*c*i),R=C+A||1;let P=c-C;n.barAlign==="top"?P=0:n.barAlign==="bottom"&&(P=l-R),r[g](y*(d+h),P,d,R,p),y=E,v=0,b=0}const S=Math.abs(s[w]||0),x=Math.abs(o[w]||0);S>v&&(v=S),x>b&&(b=x)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=Math.round(h*c*i)||1,v=c+y*(o===0?-1:1);r.lineTo(d,v),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction){n.renderFunction(t,r);return}let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}if(n.barWidth||n.barGap||n.barAlign){this.renderBarWaveform(t,n,r,i);return}this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a,u){const l=window.devicePixelRatio||1,c=document.createElement("canvas"),f=t[0].length;c.width=Math.round(r*(o-s)/f),c.height=i*l,c.style.width=`${Math.floor(c.width/l)}px`,c.style.height=`${i}px`,c.style.left=`${Math.floor(s*r/l/f)}px`,a.appendChild(c);const d=c.getContext("2d");if(this.renderWaveform(t.map(h=>h.slice(s,o)),n,d),c.width>0&&c.height>0){const h=c.cloneNode(),p=h.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(n.progressColor),p.fillRect(0,0,c.width,c.height),u.appendChild(h)}}renderChannel(t,n,r){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:u,clientWidth:l}=this.scrollContainer,c=t[0].length,f=c/u;let d=Math.min(_Te.MAX_CANVAS_WIDTH,l);if(n.barWidth||n.barGap){const E=n.barWidth||.5,S=n.barGap||E/2,x=E+S;d%x!==0&&(d=Math.floor(d/x)*x)}const h=Math.floor(Math.abs(a)*f),p=Math.floor(h+d*f),m=p-h,g=(E,S)=>{this.renderSingleCanvas(t,n,r,s,Math.max(0,E),Math.min(S,c),i,o)},y=this.createDelay(),v=this.createDelay(),b=(E,S)=>{g(E,S),E>0&&y(()=>{b(E-m,S-m)})},w=(E,S)=>{g(E,S),S<c&&v(()=>{w(E+m,S+m)})};b(h,p),p<c&&w(p,p+m)}render(t){this.timeouts.forEach(a=>a.timeout&&clearTimeout(a.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>r;const s=this.options.fillParent&&!this.isScrolling,o=(s?r:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let a=0;a<t.numberOfChannels;a++){const u=Object.assign(Object.assign({},this.options),this.options.splitChannels[a]);this.renderChannel([t.getChannelData(a)],u,o)}else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),this.renderChannel(a,this.options,o)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const n=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=n-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{clientWidth:r,scrollLeft:i,scrollWidth:s}=this.scrollContainer,o=s*t,a=r/2,u=n&&this.options.autoCenter&&!this.isDragging?a:r;if(o>i+u||o<i)if(this.options.autoCenter&&!this.isDragging){const l=a/20;o-(i+a)>=l&&o<i+r?this.scrollContainer.scrollLeft+=l:this.scrollContainer.scrollLeft=o-a}else this.isDragging?this.scrollContainer.scrollLeft=o<i?o-10:o-r+10:this.scrollContainer.scrollLeft=o;{const{scrollLeft:l}=this.scrollContainer,c=l/s,f=(l+r)/s;this.emit("scroll",c,f)}}renderProgress(t,n){if(isNaN(t))return;const r=t*100;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.marginLeft=Math.round(r)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,n)}};bTe.MAX_CANVAS_WIDTH=4e3;let xpt=class extends b6{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var hj=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};class Spt extends b6{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return hj(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then(n=>n.arrayBuffer()).then(n=>this.audioContext.decodeAudioData(n)).then(n=>{this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var t;this.paused&&(this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return hj(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(t){return hj(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){var t,n;return(n=(t=this.bufferNode)===null||t===void 0?void 0:t.playbackRate.value)!==null&&n!==void 0?n:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var u_=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};const Tpt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let Cpt=class wTe extends wpt{static create(t){return new wTe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Spt:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},Tpt,t),this.timer=new xpt;const r=n?void 0:this.getMediaElement();this.renderer=new bTe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{this.options.interact&&(this.renderer.renderProgress(n),clearTimeout(t),t=setTimeout(()=>{this.seekTo(n)},this.isPlaying()?0:200),this.emit("interaction",n*this.getDuration()),this.emit("drag",n))}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return u_(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=dj.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return u_(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(t,n,r,i){return u_(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const s=o=>this.emit("loading",o);n=yield _pt.fetchBlob(t,s,this.options.fetchParams)}if(this.setSrc(t,n),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),r)this.decodedData=dj.createBuffer(r,i);else if(n){const s=yield n.arrayBuffer();this.decodedData=yield dj.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(t,n,r){return u_(this,void 0,void 0,function*(){yield this.loadAudio(t,void 0,n,r)})}loadBlob(t,n,r){return u_(this,void 0,void 0,function*(){yield this.loadAudio("blob",t,n,r)})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=Math.round(a.length/n);for(let c=0;c<n;c++){const f=a.slice(c*l,(c+1)*l),d=Math.max(...f);u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return(t===0||t===1/0)&&this.decodedData&&(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return u_(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};function Apt(e){return Cpt.create(e)}function Ile(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Ipt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var kpt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ETe(e){var{container:t,plugins:n=[],onMount:r}=e,i=kpt(e,["container","plugins","onMount"]);const s=I.useRef([]),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(Ile)),s.current=u;const l=Apt(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),I.useEffect(()=>{if(o){const u=n.map(Ile),{disabled:l,enabled:c}=Ipt(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function Rpt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var Npt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xTe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=Npt(e,["children","plugins","onMount"]);const s=I.useMemo(()=>{let a={};return I.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!Rpt(u))return;const{props:l,type:c}=u;if(c===oX){const{id:f}=l;a=ppt(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=ETe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return xi.createElement(vTe.Provider,{value:o},t)};xTe.defaultProps={children:null,plugins:[]};function pj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let Ppt=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Opt=class extends Ppt{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};const Dpt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let $pt=class STe extends Opt{constructor(t){var n;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3})),this.stream=null,this.mediaRecorder=null}static create(t){return new STe(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s),a=s/n.sampleRate;let u;const l=()=>{i.getFloatTimeDomainData(o),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[o],a)),u=requestAnimationFrame(l)};return l(),()=>{cancelAnimationFrame(u),r==null||r.disconnect(),n==null||n.close()}}startMic(t){return pj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const r=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return pj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t)),r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Dpt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},r.onstop=()=>{var s;const o=new Blob(i,{type:r.mimeType});this.emit("record-end",o),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(o)))},r.start(),this.emit("record-start")})}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}stopRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.stop())}pauseRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.pause(),this.emit("record-pause"))}resumeRecording(){var t;this.isPaused()&&((t=this.mediaRecorder)===null||t===void 0||t.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return pj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}};function TTe({width:e=70,height:t=50}){const n=I.useRef(null),r=I.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin($pt.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return _.jsx(Ee,{style:{width:`${e}px`,height:`${t}px`},children:_.jsx(xTe,{onMount:r,children:_.jsx(oX,{id:"waveform"})})})}function kle({parameters:e,setAnswer:t}){return I.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),_.jsx(Ja,{style:{height:"70%",width:"100%"},children:_.jsxs(ri,{children:[_.jsx(nt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(nt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(nt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please close it now."}),_.jsx(Ja,{children:_.jsx(TTe,{height:200,width:400})})]})})}const Mpt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:kle,default:kle},Symbol.toStringTag,{value:"Module"}));function sm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lpt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wx(e){let t,n,r;e.length!==2?(t=sm,n=(a,u)=>sm(e(a),u),r=(a,u)=>e(a)-u):(t=e===sm||e===Lpt?e:Fpt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Fpt(){return 0}function CTe(e){return e===null?NaN:+e}function*jpt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ATe=Wx(sm),B0=ATe.right,Bpt=ATe.left;Wx(CTe).center;function Upt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function zpt(e,t){const n=Upt(e,t);return n&&Math.sqrt(n)}function l3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ka{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Rle extends Map{constructor(t,n=RTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(q7(this,t))}has(t){return super.has(q7(this,t))}set(t,n){return super.set(ITe(this,t),n)}delete(t){return super.delete(kTe(this,t))}}class c3 extends Set{constructor(t,n=RTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(q7(this,t))}add(t){return super.add(ITe(this,t))}delete(t){return super.delete(kTe(this,t))}}function q7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ITe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function kTe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function RTe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Vpt(e,t){return Array.from(t,n=>e[n])}function Hpt(e=sm){if(e===sm)return NTe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function NTe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const qpt=Math.sqrt(50),Wpt=Math.sqrt(10),Gpt=Math.sqrt(2);function f3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=qpt?10:s>=Wpt?5:s>=Gpt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?f3(e,t,n*2):[a,u,l]}function W7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?f3(t,e,n):f3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function G7(e,t,n){return t=+t,e=+e,n=+n,f3(e,t,n)[2]}function U0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?G7(t,e,n):G7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Nc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Y7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function PTe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?NTe:Hpt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));PTe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(uT(e,n,t),i(e[r],s)>0&&uT(e,n,r);o<a;){for(uT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?uT(e,n,a):(++a,uT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function uT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function K7(e,t,n){if(e=Float64Array.from(jpt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Y7(e);if(t>=1)return Nc(e);var r,i=(r-1)*t,s=Math.floor(i),o=Nc(PTe(e,s).subarray(0,s+1)),a=Y7(e.subarray(s+1));return o+(a-o)*(i-s)}}function OTe(e,t,n=CTe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function DTe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function $Te(e,t){return K7(e,.5,t)}function*Ypt(e){for(const t of e)yield*t}function MTe(e){return Array.from(Ypt(e))}function Mu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function aX(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Kpt(e,...t){e=new c3(e),t=t.map(Xpt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Xpt(e){return e instanceof c3?e:new c3(e)}function Qpt(...e){const t=new c3;for(const n of e)for(const r of n)t.add(r);return t}var Jpt={value:()=>{}};function _6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cO(n)}function cO(e){this._=e}function Zpt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cO.prototype=_6.prototype={constructor:cO,on:function(e,t){var n=this._,r=Zpt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=emt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Nle(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Nle(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cO(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function emt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Nle(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Jpt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var X7="http://www.w3.org/1999/xhtml";const Ple={svg:"http://www.w3.org/2000/svg",xhtml:X7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function w6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ple.hasOwnProperty(t)?{space:Ple[t],local:e}:e}function tmt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===X7&&t.documentElement.namespaceURI===X7?t.createElement(e):t.createElementNS(n,e)}}function nmt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function LTe(e){var t=w6(e);return(t.local?nmt:tmt)(t)}function rmt(){}function uX(e){return e==null?rmt:function(){return this.querySelector(e)}}function imt(e){typeof e!="function"&&(e=uX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new eu(r,this._parents)}function FTe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function smt(){return[]}function jTe(e){return e==null?smt:function(){return this.querySelectorAll(e)}}function omt(e){return function(){return FTe(e.apply(this,arguments))}}function amt(e){typeof e=="function"?e=omt(e):e=jTe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new eu(r,i)}function BTe(e){return function(){return this.matches(e)}}function UTe(e){return function(t){return t.matches(e)}}var umt=Array.prototype.find;function lmt(e){return function(){return umt.call(this.children,e)}}function cmt(){return this.firstElementChild}function fmt(e){return this.select(e==null?cmt:lmt(typeof e=="function"?e:UTe(e)))}var dmt=Array.prototype.filter;function hmt(){return Array.from(this.children)}function pmt(e){return function(){return dmt.call(this.children,e)}}function mmt(e){return this.selectAll(e==null?hmt:pmt(typeof e=="function"?e:UTe(e)))}function gmt(e){typeof e!="function"&&(e=BTe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new eu(r,this._parents)}function zTe(e){return new Array(e.length)}function ymt(){return new eu(this._enter||this._groups.map(zTe),this._parents)}function d3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}d3.prototype={constructor:d3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vmt(e){return function(){return e}}function bmt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new d3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function _mt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new d3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function wmt(e){return e.__data__}function Emt(e,t){if(!arguments.length)return Array.from(this,wmt);var n=t?_mt:bmt,r=this._parents,i=this._groups;typeof e!="function"&&(e=vmt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=xmt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new eu(o,r),o._enter=a,o._exit=u,o}function xmt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Smt(){return new eu(this._exit||this._groups.map(zTe),this._parents)}function Tmt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Cmt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new eu(a,this._parents)}function Amt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Imt(e){e||(e=kmt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new eu(i,this._parents).order()}function kmt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rmt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Nmt(){return Array.from(this)}function Pmt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Omt(){let e=0;for(const t of this)++e;return e}function Dmt(){return!this.node()}function $mt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Mmt(e){return function(){this.removeAttribute(e)}}function Lmt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fmt(e,t){return function(){this.setAttribute(e,t)}}function jmt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bmt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Umt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zmt(e,t){var n=w6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Lmt:Mmt:typeof t=="function"?n.local?Umt:Bmt:n.local?jmt:Fmt)(n,t))}function VTe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Vmt(e){return function(){this.style.removeProperty(e)}}function Hmt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qmt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Wmt(e,t,n){return arguments.length>1?this.each((t==null?Vmt:typeof t=="function"?qmt:Hmt)(e,t,n??"")):_E(this.node(),e)}function _E(e,t){return e.style.getPropertyValue(t)||VTe(e).getComputedStyle(e,null).getPropertyValue(t)}function Gmt(e){return function(){delete this[e]}}function Ymt(e,t){return function(){this[e]=t}}function Kmt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Xmt(e,t){return arguments.length>1?this.each((t==null?Gmt:typeof t=="function"?Kmt:Ymt)(e,t)):this.node()[e]}function HTe(e){return e.trim().split(/^|\s+/)}function lX(e){return e.classList||new qTe(e)}function qTe(e){this._node=e,this._names=HTe(e.getAttribute("class")||"")}qTe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WTe(e,t){for(var n=lX(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function GTe(e,t){for(var n=lX(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Qmt(e){return function(){WTe(this,e)}}function Jmt(e){return function(){GTe(this,e)}}function Zmt(e,t){return function(){(t.apply(this,arguments)?WTe:GTe)(this,e)}}function egt(e,t){var n=HTe(e+"");if(arguments.length<2){for(var r=lX(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Zmt:t?Qmt:Jmt)(n,t))}function tgt(){this.textContent=""}function ngt(e){return function(){this.textContent=e}}function rgt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function igt(e){return arguments.length?this.each(e==null?tgt:(typeof e=="function"?rgt:ngt)(e)):this.node().textContent}function sgt(){this.innerHTML=""}function ogt(e){return function(){this.innerHTML=e}}function agt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ugt(e){return arguments.length?this.each(e==null?sgt:(typeof e=="function"?agt:ogt)(e)):this.node().innerHTML}function lgt(){this.nextSibling&&this.parentNode.appendChild(this)}function cgt(){return this.each(lgt)}function fgt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dgt(){return this.each(fgt)}function hgt(e){var t=typeof e=="function"?e:LTe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function pgt(){return null}function mgt(e,t){var n=typeof e=="function"?e:LTe(e),r=t==null?pgt:typeof t=="function"?t:uX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ggt(){var e=this.parentNode;e&&e.removeChild(this)}function ygt(){return this.each(ggt)}function vgt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bgt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _gt(e){return this.select(e?bgt:vgt)}function wgt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Egt(e){return function(t){e.call(this,t,this.__data__)}}function xgt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Sgt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Tgt(e,t,n){return function(){var r=this.__on,i,s=Egt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Cgt(e,t,n){var r=xgt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Tgt:Sgt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function YTe(e,t,n){var r=VTe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Agt(e,t){return function(){return YTe(this,e,t)}}function Igt(e,t){return function(){return YTe(this,e,t.apply(this,arguments))}}function kgt(e,t){return this.each((typeof t=="function"?Igt:Agt)(e,t))}function*Rgt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var cX=[null];function eu(e,t){this._groups=e,this._parents=t}function uk(){return new eu([[document.documentElement]],cX)}function Ngt(){return this}eu.prototype=uk.prototype={constructor:eu,select:imt,selectAll:amt,selectChild:fmt,selectChildren:mmt,filter:gmt,data:Emt,enter:ymt,exit:Smt,join:Tmt,merge:Cmt,selection:Ngt,order:Amt,sort:Imt,call:Rmt,nodes:Nmt,node:Pmt,size:Omt,empty:Dmt,each:$mt,attr:zmt,style:Wmt,property:Xmt,classed:egt,text:igt,html:ugt,raise:cgt,lower:dgt,append:hgt,insert:mgt,remove:ygt,clone:_gt,datum:wgt,on:Cgt,dispatch:kgt,[Symbol.iterator]:Rgt};function To(e){return typeof e=="string"?new eu([[document.querySelector(e)]],[document.documentElement]):new eu([[e]],cX)}function Pgt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ole(e,t){if(e=Pgt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ogt(e){return typeof e=="string"?new eu([document.querySelectorAll(e)],[document.documentElement]):new eu([FTe(e)],cX)}const Q7={capture:!0,passive:!1};function J7(e){e.preventDefault(),e.stopImmediatePropagation()}function Dgt(e){var t=e.document.documentElement,n=To(e).on("dragstart.drag",J7,Q7);"onselectstart"in t?n.on("selectstart.drag",J7,Q7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $gt(e,t){var n=e.document.documentElement,r=To(e).on("dragstart.drag",null);t&&(r.on("click.drag",J7,Q7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Gx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ny(){}var D1=.7,wE=1/D1,Ow="\\s*([+-]?\\d+)\\s*",bA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mgt=/^#([0-9a-f]{3,8})$/,Lgt=new RegExp(`^rgb\\(${Ow},${Ow},${Ow}\\)$`),Fgt=new RegExp(`^rgb\\(${mh},${mh},${mh}\\)$`),jgt=new RegExp(`^rgba\\(${Ow},${Ow},${Ow},${bA}\\)$`),Bgt=new RegExp(`^rgba\\(${mh},${mh},${mh},${bA}\\)$`),Ugt=new RegExp(`^hsl\\(${bA},${mh},${mh}\\)$`),zgt=new RegExp(`^hsla\\(${bA},${mh},${mh},${bA}\\)$`),Dle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gx(Ny,$1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$le,formatHex:$le,formatHex8:Vgt,formatHsl:Hgt,formatRgb:Mle,toString:Mle});function $le(){return this.rgb().formatHex()}function Vgt(){return this.rgb().formatHex8()}function Hgt(){return KTe(this).formatHsl()}function Mle(){return this.rgb().formatRgb()}function $1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Mgt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lle(t):n===3?new ro(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?CN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?CN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lgt.exec(e))?new ro(t[1],t[2],t[3],1):(t=Fgt.exec(e))?new ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jgt.exec(e))?CN(t[1],t[2],t[3],t[4]):(t=Bgt.exec(e))?CN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ugt.exec(e))?Ble(t[1],t[2]/100,t[3]/100,1):(t=zgt.exec(e))?Ble(t[1],t[2]/100,t[3]/100,t[4]):Dle.hasOwnProperty(e)?Lle(Dle[e]):e==="transparent"?new ro(NaN,NaN,NaN,0):null}function Lle(e){return new ro(e>>16&255,e>>8&255,e&255,1)}function CN(e,t,n,r){return r<=0&&(e=t=n=NaN),new ro(e,t,n,r)}function fX(e){return e instanceof Ny||(e=$1(e)),e?(e=e.rgb(),new ro(e.r,e.g,e.b,e.opacity)):new ro}function z0(e,t,n,r){return arguments.length===1?fX(e):new ro(e,t,n,r??1)}function ro(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gx(ro,z0,lk(Ny,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?D1:Math.pow(D1,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ro(f1(this.r),f1(this.g),f1(this.b),h3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fle,formatHex:Fle,formatHex8:qgt,formatRgb:jle,toString:jle}));function Fle(){return`#${Jv(this.r)}${Jv(this.g)}${Jv(this.b)}`}function qgt(){return`#${Jv(this.r)}${Jv(this.g)}${Jv(this.b)}${Jv((isNaN(this.opacity)?1:this.opacity)*255)}`}function jle(){const e=h3(this.opacity);return`${e===1?"rgb(":"rgba("}${f1(this.r)}, ${f1(this.g)}, ${f1(this.b)}${e===1?")":`, ${e})`}`}function h3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function f1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jv(e){return e=f1(e),(e<16?"0":"")+e.toString(16)}function Ble(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rf(e,t,n,r)}function KTe(e){if(e instanceof Rf)return new Rf(e.h,e.s,e.l,e.opacity);if(e instanceof Ny||(e=$1(e)),!e)return new Rf;if(e instanceof Rf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Rf(o,a,u,e.opacity)}function _A(e,t,n,r){return arguments.length===1?KTe(e):new Rf(e,t,n,r??1)}function Rf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(Rf,_A,lk(Ny,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new Rf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?D1:Math.pow(D1,e),new Rf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ro(mj(e>=240?e-240:e+120,i,r),mj(e,i,r),mj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Rf(Ule(this.h),AN(this.s),AN(this.l),h3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h3(this.opacity);return`${e===1?"hsl(":"hsla("}${Ule(this.h)}, ${AN(this.s)*100}%, ${AN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ule(e){return e=(e||0)%360,e<0?e+360:e}function AN(e){return Math.max(0,Math.min(1,e||0))}function mj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const XTe=Math.PI/180,QTe=180/Math.PI,p3=18,JTe=.96422,ZTe=1,eCe=.82521,tCe=4/29,Dw=6/29,nCe=3*Dw*Dw,Wgt=Dw*Dw*Dw;function rCe(e){if(e instanceof gh)return new gh(e.l,e.a,e.b,e.opacity);if(e instanceof qp)return iCe(e);e instanceof ro||(e=fX(e));var t=bj(e.r),n=bj(e.g),r=bj(e.b),i=gj((.2225045*t+.7168786*n+.0606169*r)/ZTe),s,o;return t===n&&n===r?s=o=i:(s=gj((.4360747*t+.3850649*n+.1430804*r)/JTe),o=gj((.0139322*t+.0971045*n+.7141733*r)/eCe)),new gh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function m3(e,t,n,r){return arguments.length===1?rCe(e):new gh(e,t,n,r??1)}function gh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Gx(gh,m3,lk(Ny,{brighter(e){return new gh(this.l+p3*(e??1),this.a,this.b,this.opacity)},darker(e){return new gh(this.l-p3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=JTe*yj(t),e=ZTe*yj(e),n=eCe*yj(n),new ro(vj(3.1338561*t-1.6168667*e-.4906146*n),vj(-.9787684*t+1.9161415*e+.033454*n),vj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function gj(e){return e>Wgt?Math.pow(e,1/3):e/nCe+tCe}function yj(e){return e>Dw?e*e*e:nCe*(e-tCe)}function vj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bj(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ggt(e){if(e instanceof qp)return new qp(e.h,e.c,e.l,e.opacity);if(e instanceof gh||(e=rCe(e)),e.a===0&&e.b===0)return new qp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*QTe;return new qp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function g3(e,t,n,r){return arguments.length===1?Ggt(e):new qp(e,t,n,r??1)}function qp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function iCe(e){if(isNaN(e.h))return new gh(e.l,0,0,e.opacity);var t=e.h*XTe;return new gh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Gx(qp,g3,lk(Ny,{brighter(e){return new qp(this.h,this.c,this.l+p3*(e??1),this.opacity)},darker(e){return new qp(this.h,this.c,this.l-p3*(e??1),this.opacity)},rgb(){return iCe(this).rgb()}}));var sCe=-.14861,dX=1.78277,hX=-.29227,E6=-.90649,wA=1.97294,zle=wA*E6,Vle=wA*dX,Hle=dX*hX-E6*sCe;function Ygt(e){if(e instanceof d1)return new d1(e.h,e.s,e.l,e.opacity);e instanceof ro||(e=fX(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Hle*r+zle*t-Vle*n)/(Hle+zle-Vle),s=r-i,o=(wA*(n-i)-hX*s)/E6,a=Math.sqrt(o*o+s*s)/(wA*i*(1-i)),u=a?Math.atan2(o,s)*QTe-120:NaN;return new d1(u<0?u+360:u,a,i,e.opacity)}function Z7(e,t,n,r){return arguments.length===1?Ygt(e):new d1(e,t,n,r??1)}function d1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(d1,Z7,lk(Ny,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new d1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?D1:Math.pow(D1,e),new d1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*XTe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ro(255*(t+n*(sCe*r+dX*i)),255*(t+n*(hX*r+E6*i)),255*(t+n*(wA*r)),this.opacity)}}));function oCe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function aCe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return oCe((n-r/t)*t,o,i,s,a)}}function uCe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return oCe((n-r/t)*t,i,s,o,a)}}const x6=e=>()=>e;function lCe(e,t){return function(n){return e+n*t}}function Kgt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function S6(e,t){var n=t-e;return n?lCe(e,n>180||n<-180?n-360*Math.round(n/360):n):x6(isNaN(e)?t:e)}function Xgt(e){return(e=+e)==1?io:function(t,n){return n-t?Kgt(t,n,e):x6(isNaN(t)?n:t)}}function io(e,t){var n=t-e;return n?lCe(e,n):x6(isNaN(e)?t:e)}const EA=function e(t){var n=Xgt(t);function r(i,s){var o=n((i=z0(i)).r,(s=z0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=io(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function cCe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=z0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Qgt=cCe(aCe),Jgt=cCe(uCe);function pX(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function fCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zgt(e,t){return(fCe(t)?pX:dCe)(e,t)}function dCe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Km(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function hCe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pCe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Km(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ez=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_j=new RegExp(ez.source,"g");function e0t(e){return function(){return e}}function t0t(e){return function(t){return e(t)+""}}function mX(e,t){var n=ez.lastIndex=_j.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=ez.exec(e))&&(i=_j.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:pc(r,i)})),n=_j.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?t0t(u[0].x):e0t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Km(e,t){var n=typeof t,r;return t==null||n==="boolean"?x6(t):(n==="number"?pc:n==="string"?(r=$1(t))?(t=r,EA):mX:t instanceof $1?EA:t instanceof Date?hCe:fCe(t)?pX:Array.isArray(t)?dCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pCe:pc)(e,t)}function n0t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function r0t(e,t){var n=S6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function ck(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var qle=180/Math.PI,tz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mCe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*qle,skewX:Math.atan(u)*qle,scaleX:o,scaleY:a}}var IN;function i0t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tz:mCe(t.a,t.b,t.c,t.d,t.e,t.f)}function s0t(e){return e==null||(IN||(IN=document.createElementNS("http://www.w3.org/2000/svg","g")),IN.setAttribute("transform",e),!(e=IN.transform.baseVal.consolidate()))?tz:(e=e.matrix,mCe(e.a,e.b,e.c,e.d,e.e,e.f))}function gCe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:pc(l,f)},{i:m-2,x:pc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:pc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:pc(l,f)},{i:m-2,x:pc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var yCe=gCe(i0t,"px, ","px)","deg)"),vCe=gCe(s0t,", ",")",")"),o0t=1e-12;function Wle(e){return((e=Math.exp(e))+1/e)/2}function a0t(e){return((e=Math.exp(e))-1/e)/2}function u0t(e){return((e=Math.exp(2*e))-1)/(e+1)}const l0t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<o0t)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(x){var C=x*y,A=Wle(E),R=l/(n*v)*(A*u0t(t*C+E)-a0t(E));return[a+R*h,u+R*p,l*A/Wle(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function bCe(e){return function(t,n){var r=e((t=_A(t)).h,(n=_A(n)).h),i=io(t.s,n.s),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const c0t=bCe(S6);var f0t=bCe(io);function d0t(e,t){var n=io((e=m3(e)).l,(t=m3(t)).l),r=io(e.a,t.a),i=io(e.b,t.b),s=io(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function _Ce(e){return function(t,n){var r=e((t=g3(t)).h,(n=g3(n)).h),i=io(t.c,n.c),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const h0t=_Ce(S6);var p0t=_Ce(io);function wCe(e){return function t(n){n=+n;function r(i,s){var o=e((i=Z7(i)).h,(s=Z7(s)).h),a=io(i.s,s.s),u=io(i.l,s.l),l=io(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const m0t=wCe(S6);var g0t=wCe(io);function gX(e,t){t===void 0&&(t=e,e=Km);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function y0t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const v0t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Km,interpolateArray:Zgt,interpolateBasis:aCe,interpolateBasisClosed:uCe,interpolateCubehelix:m0t,interpolateCubehelixLong:g0t,interpolateDate:hCe,interpolateDiscrete:n0t,interpolateHcl:h0t,interpolateHclLong:p0t,interpolateHsl:c0t,interpolateHslLong:f0t,interpolateHue:r0t,interpolateLab:d0t,interpolateNumber:pc,interpolateNumberArray:pX,interpolateObject:pCe,interpolateRgb:EA,interpolateRgbBasis:Qgt,interpolateRgbBasisClosed:Jgt,interpolateRound:ck,interpolateString:mX,interpolateTransformCss:yCe,interpolateTransformSvg:vCe,interpolateZoom:l0t,piecewise:gX,quantize:y0t},Symbol.toStringTag,{value:"Module"}));var EE=0,QT=0,lT=0,ECe=1e3,y3,JT,v3=0,M1=0,T6=0,xA=typeof performance=="object"&&performance.now?performance:Date,xCe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function C6(){return M1||(xCe(b0t),M1=xA.now()+T6)}function b0t(){M1=0}function SA(){this._call=this._time=this._next=null}SA.prototype=yX.prototype={constructor:SA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?C6():+n)+(t==null?0:+t),!this._next&&JT!==this&&(JT?JT._next=this:y3=this,JT=this),this._call=e,this._time=n,nz()},stop:function(){this._call&&(this._call=null,this._time=1/0,nz())}};function yX(e,t,n){var r=new SA;return r.restart(e,t,n),r}function _0t(){C6(),++EE;for(var e=y3,t;e;)(t=M1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--EE}function Gle(){M1=(v3=xA.now())+T6,EE=QT=0;try{_0t()}finally{EE=0,E0t(),M1=0}}function w0t(){var e=xA.now(),t=e-v3;t>ECe&&(T6-=t,v3=e)}function E0t(){for(var e,t=y3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:y3=n);JT=e,nz(r)}function nz(e){if(!EE){QT&&(QT=clearTimeout(QT));var t=e-M1;t>24?(e<1/0&&(QT=setTimeout(Gle,e-xA.now()-T6)),lT&&(lT=clearInterval(lT))):(lT||(v3=xA.now(),lT=setInterval(w0t,ECe)),EE=1,xCe(Gle))}}function Yle(e,t,n){var r=new SA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function x0t(e,t,n){var r=new SA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?C6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var S0t=_6("start","end","cancel","interrupt"),T0t=[],SCe=0,Kle=1,rz=2,fO=3,Xle=4,iz=5,dO=6;function A6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;C0t(e,n,{name:t,index:r,group:i,on:S0t,tween:T0t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:SCe})}function vX(e,t){var n=dd(e,t);if(n.state>SCe)throw new Error("too late; already scheduled");return n}function Zh(e,t){var n=dd(e,t);if(n.state>fO)throw new Error("too late; already running");return n}function dd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function C0t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=yX(s,0,n.time);function s(l){n.state=Kle,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Kle)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===fO)return Yle(o);h.state===Xle?(h.state=dO,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=dO,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Yle(function(){n.state===fO&&(n.state=Xle,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=rz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rz){for(n.state=fO,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=iz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===iz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=dO,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function sz(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>rz&&r.state<iz,r.state=dO,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function A0t(e){return this.each(function(){sz(this,e)})}function I0t(e,t){var n,r;return function(){var i=Zh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function k0t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Zh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function R0t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=dd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?I0t:k0t)(n,e,t))}function bX(e,t,n){var r=e._id;return e.each(function(){var i=Zh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return dd(i,r).value[t]}}function TCe(e,t){var n;return(typeof t=="number"?pc:t instanceof $1?EA:(n=$1(t))?(t=n,EA):mX)(e,t)}function N0t(e){return function(){this.removeAttribute(e)}}function P0t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function O0t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function D0t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function $0t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function M0t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function L0t(e,t){var n=w6(e),r=n==="transform"?vCe:TCe;return this.attrTween(e,typeof t=="function"?(n.local?M0t:$0t)(n,r,bX(this,"attr."+e,t)):t==null?(n.local?P0t:N0t)(n):(n.local?D0t:O0t)(n,r,t))}function F0t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function j0t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function B0t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&j0t(e,s)),n}return i._value=t,i}function U0t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&F0t(e,s)),n}return i._value=t,i}function z0t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=w6(e);return this.tween(n,(r.local?B0t:U0t)(r,t))}function V0t(e,t){return function(){vX(this,e).delay=+t.apply(this,arguments)}}function H0t(e,t){return t=+t,function(){vX(this,e).delay=t}}function q0t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?V0t:H0t)(t,e)):dd(this.node(),t).delay}function W0t(e,t){return function(){Zh(this,e).duration=+t.apply(this,arguments)}}function G0t(e,t){return t=+t,function(){Zh(this,e).duration=t}}function Y0t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?W0t:G0t)(t,e)):dd(this.node(),t).duration}function K0t(e,t){if(typeof t!="function")throw new Error;return function(){Zh(this,e).ease=t}}function X0t(e){var t=this._id;return arguments.length?this.each(K0t(t,e)):dd(this.node(),t).ease}function Q0t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Zh(this,e).ease=n}}function J0t(e){if(typeof e!="function")throw new Error;return this.each(Q0t(this._id,e))}function Z0t(e){typeof e!="function"&&(e=BTe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Tm(r,this._parents,this._name,this._id)}function eyt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Tm(o,this._parents,this._name,this._id)}function tyt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function nyt(e,t,n){var r,i,s=tyt(t)?vX:Zh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function ryt(e,t){var n=this._id;return arguments.length<2?dd(this.node(),n).on.on(e):this.each(nyt(n,e,t))}function iyt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function syt(){return this.on("end.remove",iyt(this._id))}function oyt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,A6(l[d],t,n,d,l,dd(c,n)));return new Tm(s,this._parents,t,n)}function ayt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jTe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=dd(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&A6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Tm(s,o,t,n)}var uyt=uk.prototype.constructor;function lyt(){return new uyt(this._groups,this._parents)}function cyt(e,t){var n,r,i;return function(){var s=_E(this,e),o=(this.style.removeProperty(e),_E(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function CCe(e){return function(){this.style.removeProperty(e)}}function fyt(e,t,n){var r,i=n+"",s;return function(){var o=_E(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function dyt(e,t,n){var r,i,s;return function(){var o=_E(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),_E(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function hyt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Zh(this,e),l=u.on,c=u.value[s]==null?a||(a=CCe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function pyt(e,t,n){var r=(e+="")=="transform"?yCe:TCe;return t==null?this.styleTween(e,cyt(e,r)).on("end.style."+e,CCe(e)):typeof t=="function"?this.styleTween(e,dyt(e,r,bX(this,"style."+e,t))).each(hyt(this._id,e)):this.styleTween(e,fyt(e,r,t),n).on("end.style."+e,null)}function myt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function gyt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&myt(e,o,n)),r}return s._value=t,s}function yyt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,gyt(e,t,n??""))}function vyt(e){return function(){this.textContent=e}}function byt(e){return function(){var t=e(this);this.textContent=t??""}}function _yt(e){return this.tween("text",typeof e=="function"?byt(bX(this,"text",e)):vyt(e==null?"":e+""))}function wyt(e){return function(t){this.textContent=e.call(this,t)}}function Eyt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&wyt(i)),t}return r._value=e,r}function xyt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Eyt(e))}function Syt(){for(var e=this._name,t=this._id,n=ACe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=dd(u,t);A6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tm(r,this._parents,e,n)}function Tyt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Zh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Cyt=0;function Tm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ACe(){return++Cyt}var _p=uk.prototype;Tm.prototype={constructor:Tm,select:oyt,selectAll:ayt,selectChild:_p.selectChild,selectChildren:_p.selectChildren,filter:Z0t,merge:eyt,selection:lyt,transition:Syt,call:_p.call,nodes:_p.nodes,node:_p.node,size:_p.size,empty:_p.empty,each:_p.each,on:ryt,attr:L0t,attrTween:z0t,style:pyt,styleTween:yyt,text:_yt,textTween:xyt,remove:syt,tween:R0t,delay:q0t,duration:Y0t,ease:X0t,easeVarying:J0t,end:Tyt,[Symbol.iterator]:_p[Symbol.iterator]};function Ayt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Iyt={time:null,delay:0,duration:250,ease:Ayt};function kyt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ryt(e){var t,n;e instanceof Tm?(t=e._id,e=e._name):(t=ACe(),(n=Iyt).time=C6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&A6(u,e,t,l,o,n||kyt(u,t));return new Tm(r,this._parents,e,t)}uk.prototype.interrupt=A0t;uk.prototype.transition=Ryt;const wj=e=>()=>e;function Nyt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Pyt(e){e.stopImmediatePropagation()}function Ej(e){e.preventDefault(),e.stopImmediatePropagation()}var Qle={name:"drag"},xj={name:"space"},l_={name:"handle"},c_={name:"center"};const{abs:Jle,max:Zo,min:ea}=Math;function Zle(e){return[+e[0],+e[1]]}function oz(e){return[Zle(e[0]),Zle(e[1])]}var hO={name:"x",handles:["w","e"].map(TA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},pO={name:"y",handles:["n","s"].map(TA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Oyt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(TA),input:function(e){return e==null?null:oz(e)},output:function(e){return e}},wp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ece={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},tce={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Dyt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},$yt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function TA(e){return{type:e}}function Myt(e){return!e.ctrlKey&&!e.button}function Lyt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Fyt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sj(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function jyt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Byt(){return _X(hO)}function Uyt(){return _X(pO)}function zyt(){return _X(Oyt)}function _X(e){var t=Lyt,n=Myt,r=Fyt,i=!0,s=_6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([TA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wp.overlay).merge(y).each(function(){var b=Sj(this).extent;To(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([TA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return wp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),S=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=Km(S,x);function A(R){w.selection=R===1&&x===null?null:C(R),l.call(b),E.brush()}return S!==null&&x!==null?A:A(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),x=c(b,w).beforestart();sz(b),E.selection=S===null?null:S,l.call(b),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=To(this),y=Sj(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=To(this.that).datum();s.call(g,this.that,new Nyt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?Qle:i&&g.altKey?c_:l_,w=e===pO?null:Dyt[v],E=e===hO?null:$yt[v],S=Sj(y),x=S.extent,C=S.selection,A=x[0][0],R,P,$=x[0][1],k,D,M=x[1][0],L,B,U=x[1][1],V,O,z=0,W=0,j,H=w&&E&&i&&g.shiftKey,G,te,he=Array.from(g.touches||[g],be=>{const pe=be.identifier;return be=Ole(be,y),be.point0=be.slice(),be.identifier=pe,be});sz(y);var fe=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const be=[he[0],he[1]||he[0]];S.selection=C=[[R=e===pO?A:ea(be[0][0],be[1][0]),k=e===hO?$:ea(be[0][1],be[1][1])],[L=e===pO?M:Zo(be[0][0],be[1][0]),V=e===hO?U:Zo(be[0][1],be[1][1])]],he.length>1&&ze(g)}else R=C[0][0],k=C[0][1],L=C[1][0],V=C[1][1];P=R,D=k,B=L,O=V;var ge=To(y).attr("pointer-events","none"),le=ge.selectAll(".overlay").attr("cursor",wp[v]);if(g.touches)fe.moved=ce,fe.ended=Ve;else{var Me=To(g.view).on("mousemove.brush",ce,!0).on("mouseup.brush",Ve,!0);i&&Me.on("keydown.brush",at,!0).on("keyup.brush",tt,!0),Dgt(g.view)}l.call(y),fe.start(g,b.name);function ce(be){for(const pe of be.changedTouches||[be])for(const Oe of he)Oe.identifier===pe.identifier&&(Oe.cur=Ole(pe,y));if(H&&!G&&!te&&he.length===1){const pe=he[0];Jle(pe.cur[0]-pe[0])>Jle(pe.cur[1]-pe[1])?te=!0:G=!0}for(const pe of he)pe.cur&&(pe[0]=pe.cur[0],pe[1]=pe.cur[1]);j=!0,Ej(be),ze(be)}function ze(be){const pe=he[0],Oe=pe.point0;var He;switch(z=pe[0]-Oe[0],W=pe[1]-Oe[1],b){case xj:case Qle:{w&&(z=Zo(A-R,ea(M-L,z)),P=R+z,B=L+z),E&&(W=Zo($-k,ea(U-V,W)),D=k+W,O=V+W);break}case l_:{he[1]?(w&&(P=Zo(A,ea(M,he[0][0])),B=Zo(A,ea(M,he[1][0])),w=1),E&&(D=Zo($,ea(U,he[0][1])),O=Zo($,ea(U,he[1][1])),E=1)):(w<0?(z=Zo(A-R,ea(M-R,z)),P=R+z,B=L):w>0&&(z=Zo(A-L,ea(M-L,z)),P=R,B=L+z),E<0?(W=Zo($-k,ea(U-k,W)),D=k+W,O=V):E>0&&(W=Zo($-V,ea(U-V,W)),D=k,O=V+W));break}case c_:{w&&(P=Zo(A,ea(M,R-z*w)),B=Zo(A,ea(M,L+z*w))),E&&(D=Zo($,ea(U,k-W*E)),O=Zo($,ea(U,V+W*E)));break}}B<P&&(w*=-1,He=R,R=L,L=He,He=P,P=B,B=He,v in ece&&le.attr("cursor",wp[v=ece[v]])),O<D&&(E*=-1,He=k,k=V,V=He,He=D,D=O,O=He,v in tce&&le.attr("cursor",wp[v=tce[v]])),S.selection&&(C=S.selection),G&&(P=C[0][0],B=C[1][0]),te&&(D=C[0][1],O=C[1][1]),(C[0][0]!==P||C[0][1]!==D||C[1][0]!==B||C[1][1]!==O)&&(S.selection=[[P,D],[B,O]],l.call(y),fe.brush(be,b.name))}function Ve(be){if(Pyt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else $gt(be.view,j),Me.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ge.attr("pointer-events","all"),le.attr("cursor",wp.overlay),S.selection&&(C=S.selection),jyt(C)&&(S.selection=null,l.call(y)),fe.end(be,b.name)}function at(be){switch(be.keyCode){case 16:{H=w&&E;break}case 18:{b===l_&&(w&&(L=B-z*w,R=P+z*w),E&&(V=O-W*E,k=D+W*E),b=c_,ze(be));break}case 32:{(b===l_||b===c_)&&(w<0?L=B-z:w>0&&(R=P-z),E<0?V=O-W:E>0&&(k=D-W),b=xj,le.attr("cursor",wp.selection),ze(be));break}default:return}Ej(be)}function tt(be){switch(be.keyCode){case 16:{H&&(G=te=H=!1,ze(be));break}case 18:{b===c_&&(w<0?L=B:w>0&&(R=P),E<0?V=O:E>0&&(k=D),b=l_,ze(be));break}case 32:{b===xj&&(be.altKey?(w&&(L=B-z*w,R=P+z*w),E&&(V=O-W*E,k=D+W*E),b=c_):(w<0?L=B:w>0&&(R=P),E<0?V=O:E>0&&(k=D),b=l_),le.attr("cursor",wp[v]),ze(be));break}default:return}Ej(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=oz(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:wj(oz(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:wj(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:wj(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const az=Math.PI,uz=2*az,_v=1e-6,Vyt=uz-_v;function ICe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hyt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ICe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let wX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ICe:Hyt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>_v)if(!(Math.abs(f*u-l*c)>_v)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((az-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>_v&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>_v||Math.abs(this._y1-c)>_v)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%uz+uz),d>Vyt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>_v&&this._append`A${r},${r},0,${+(d>=az)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function I6(){return new wX}I6.prototype=wX.prototype;const om=11102230246251565e-32,ta=134217729,qyt=(3+8*om)*om;function Tj(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Wyt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function fk(e){return new Float64Array(e)}const Gyt=(3+16*om)*om,Yyt=(2+12*om)*om,Kyt=(9+64*om)*om*om,f_=fk(4),nce=fk(8),rce=fk(12),ice=fk(16),Da=fk(4);function Xyt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,x,C;const A=e-i,R=n-i,P=t-s,$=r-s;w=A*$,d=ta*A,h=d-(d-A),p=A-h,d=ta*$,m=d-(d-$),g=$-m,E=p*g-(w-h*m-p*m-h*g),S=P*R,d=ta*P,h=d-(d-P),p=P-h,d=ta*R,m=d-(d-R),g=R-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,f=E-y,f_[0]=E-(y+f)+(f-x),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,f_[1]=b-(y+f)+(f-S),C=v+y,f=C-v,f_[2]=v-(C-f)+(y-f),f_[3]=C;let k=Wyt(4,f_),D=Yyt*o;if(k>=D||-k>=D||(f=e-A,a=e-(A+f)+(f-i),f=n-R,l=n-(R+f)+(f-i),f=t-P,u=t-(P+f)+(f-s),f=r-$,c=r-($+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(D=Kyt*o+qyt*Math.abs(k),k+=A*c+$*a-(P*l+R*u),k>=D||-k>=D))return k;w=a*$,d=ta*a,h=d-(d-a),p=a-h,d=ta*$,m=d-(d-$),g=$-m,E=p*g-(w-h*m-p*m-h*g),S=u*R,d=ta*u,h=d-(d-u),p=u-h,d=ta*R,m=d-(d-R),g=R-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,f=E-y,Da[0]=E-(y+f)+(f-x),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const M=Tj(4,f_,4,Da,nce);w=A*c,d=ta*A,h=d-(d-A),p=A-h,d=ta*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=P*l,d=ta*P,h=d-(d-P),p=P-h,d=ta*l,m=d-(d-l),g=l-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,f=E-y,Da[0]=E-(y+f)+(f-x),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const L=Tj(M,nce,4,Da,rce);w=a*c,d=ta*a,h=d-(d-a),p=a-h,d=ta*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=ta*u,h=d-(d-u),p=u-h,d=ta*l,m=d-(d-l),g=l-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,f=E-y,Da[0]=E-(y+f)+(f-x),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const B=Tj(L,rce,4,Da,ice);return ice[B-1]}function kN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Gyt*l?u:-Xyt(e,t,n,r,i,s,l)}const sce=Math.pow(2,-52),RN=new Uint32Array(512);class b3{static from(t,n=tvt,r=nvt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new b3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const R=t[2*A],P=t[2*A+1];R<a&&(a=R),P<u&&(u=P),R>l&&(l=R),P>c&&(c=P),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,R=1/0;A<o;A++){const P=Cj(f,d,t[2*A],t[2*A+1]);P<R&&(h=A,R=P)}const g=t[2*h],y=t[2*h+1];for(let A=0,R=1/0;A<o;A++){if(A===h)continue;const P=Cj(g,y,t[2*A],t[2*A+1]);P<R&&P>0&&(p=A,R=P)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const R=Zyt(g,y,v,b,t[2*A],t[2*A+1]);R<w&&(m=A,w=R)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];ow(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let R=0;for(let P=0,$=-1/0;P<o;P++){const k=this._ids[P],D=this._dists[k];D>$&&(A[R++]=k,$=D)}this.hull=A.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(kN(g,y,v,b,E,S)<0){const A=p,R=v,P=b;p=m,v=E,b=S,m=A,E=R,S=P}const x=evt(g,y,v,b,E,S);this._cx=x.x,this._cy=x.y;for(let A=0;A<o;A++)this._dists[A]=Cj(t[2*A],t[2*A+1],x.x,x.y);ow(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,R,P;A<this._ids.length;A++){const $=this._ids[A],k=t[2*$],D=t[2*$+1];if(A>0&&Math.abs(k-R)<=sce&&Math.abs(D-P)<=sce||(R=k,P=D,$===h||$===p||$===m))continue;let M=0;for(let O=0,z=this._hashKey(k,D);O<this._hashSize&&(M=s[(z+O)%this._hashSize],!(M!==-1&&M!==r[M]));O++);M=n[M];let L=M,B;for(;B=r[L],kN(k,D,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===M){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,$,r[L],-1,-1,i[L]);i[$]=this._legalize(U+2),i[L]=U,C++;let V=r[L];for(;B=r[V],kN(k,D,t[2*V],t[2*V+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(V,$,B,i[$],-1,i[V]),i[$]=this._legalize(U+2),r[V]=V,C--,V=B;if(L===M)for(;B=n[L],kN(k,D,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,$,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,C--,L=B;this._hullStart=n[$]=L,r[L]=n[V]=$,r[$]=V,s[this._hashKey(k,D)]=$,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(C);for(let A=0,R=this._hullStart;A<C;A++)this.hull[A]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Qyt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=RN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Jyt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<RN.length&&(RN[s++]=v)}else{if(s===0)break;t=RN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Qyt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Cj(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Jyt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Zyt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function evt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function ow(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;cT(e,i,s),t[e[n]]>t[e[r]]&&cT(e,n,r),t[e[s]]>t[e[r]]&&cT(e,s,r),t[e[n]]>t[e[s]]&&cT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;cT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(ow(e,t,s,r),ow(e,t,n,o-1)):(ow(e,t,n,o-1),ow(e,t,s,r))}}function cT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function tvt(e){return e[0]}function nvt(e){return e[1]}const oce=1e-6;class Zv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>oce||Math.abs(this._y1-s)>oce)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class lz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let rvt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,x=t[w],C=t[w+1],A=t[E],R=t[E+1],P=t[S],$=t[S+1],k=A-x,D=R-C,M=P-x,L=$-C,B=(k*L-D*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-x)*L-(o-C)*M);v=(x+P)/2-U*L,b=(C+$)/2+U*M}else{const U=1/B,V=k*k+D*D,O=M*M+L*L;v=x+(L*V-D*O)*U,b=C+(k*O-M*V)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Zv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Zv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Zv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new lz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const ivt=2*Math.PI,d_=Math.pow;function svt(e){return e[0]}function ovt(e){return e[1]}function avt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function uvt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class EX{static from(t,n=svt,r=ovt,i){return new EX("length"in t?lvt(t,n,r,i):Float64Array.from(cvt(t,n,r,i)))}constructor(t){this._delaunator=new b3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&avt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=uvt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new b3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new rvt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=d_(n-l[t*2],2)+d_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=d_(n-l[p*2],2)+d_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&d_(n-l[h*2],2)+d_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Zv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Zv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,ivt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Zv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new lz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Zv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new lz;return this.renderTriangle(t,n),n.value()}}function lvt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*cvt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var ace={},Aj={},Ij=34,fT=10,kj=13;function kCe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function fvt(e,t){var n=kCe(e);return function(r,i){return t(n(r),i,e)}}function uce(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function wu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function dvt(e){return e<0?"-"+wu(-e,6):e>9999?"+"+wu(e,6):wu(e,4)}function hvt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":dvt(e.getUTCFullYear())+"-"+wu(e.getUTCMonth()+1,2)+"-"+wu(e.getUTCDate(),2)+(i?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"."+wu(i,3)+"Z":r?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"Z":n||t?"T"+wu(t,2)+":"+wu(n,2)+"Z":"")}function RCe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?fvt(g,d):kCe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===fT&&--p,f.charCodeAt(p-1)===kj&&--p;function w(){if(v)return Aj;if(b)return b=!1,ace;var S,x=m,C;if(f.charCodeAt(x)===Ij){for(;m++<p&&f.charCodeAt(m)!==Ij||f.charCodeAt(++m)===Ij;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===fT?b=!0:C===kj&&(b=!0,f.charCodeAt(m)===fT&&++m),f.slice(x+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===fT)b=!0;else if(C===kj)b=!0,f.charCodeAt(m)===fT&&++m;else if(C!==n)continue;return f.slice(x,S)}return v=!0,f.slice(x,p)}for(;(y=w())!==Aj;){for(var E=[];y!==ace&&y!==Aj;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=uce(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=uce(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?hvt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var pvt=RCe(","),mvt=pvt.parse;function gvt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function yvt(e,t){return fetch(e,t).then(gvt)}function vvt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),yvt(t,n).then(function(i){return e(i,r)})}}var bvt=vvt(mvt);function _vt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function wvt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return NCe(this.cover(t,n),t,n,e)}function NCe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Evt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)NCe(this,o[n],a[n],e[n]);return this}function xvt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Svt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Tvt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function qa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Cvt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new qa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new qa(h[3],g,y,u,l),new qa(h[2],o,y,g,l),new qa(h[1],g,a,u,y),new qa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Avt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Ivt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function kvt(){return this._root}function Rvt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Nvt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new qa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new qa(i,l,c,a,u)),(i=r[2])&&t.push(new qa(i,s,c,l,u)),(i=r[1])&&t.push(new qa(i,l,o,a,c)),(i=r[0])&&t.push(new qa(i,s,o,l,c))}return this}function Pvt(e){var t=[],n=[],r;for(this._root&&t.push(new qa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new qa(s,o,a,c,f)),(s=i[1])&&t.push(new qa(s,c,a,u,f)),(s=i[2])&&t.push(new qa(s,o,f,c,l)),(s=i[3])&&t.push(new qa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Ovt(e){return e[0]}function Dvt(e){return arguments.length?(this._x=e,this):this._x}function $vt(e){return e[1]}function Mvt(e){return arguments.length?(this._y=e,this):this._y}function xX(e,t,n){var r=new SX(t??Ovt,n??$vt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function SX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function lce(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var lu=xX.prototype=SX.prototype;lu.copy=function(){var e=new SX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=lce(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=lce(r));return e};lu.add=wvt;lu.addAll=Evt;lu.cover=xvt;lu.data=Svt;lu.extent=Tvt;lu.find=Cvt;lu.remove=Avt;lu.removeAll=Ivt;lu.root=kvt;lu.size=Rvt;lu.visit=Nvt;lu.visitAfter=Pvt;lu.x=Dvt;lu.y=Mvt;function Wa(e){return function(){return e}}function Zg(e){return(e()-.5)*1e-6}function Lvt(e){return e.x+e.vx}function Fvt(e){return e.y+e.vy}function jvt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Wa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=xX(t,Lvt,Fvt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,x){var C=b.data,A=b.r,R=m+A;if(C){if(C.index>d.index){var P=h-C.x-C.vx,$=p-C.y-C.vy,k=P*P+$*$;k<R*R&&(P===0&&(P=Zg(r),k+=P*P),$===0&&($=Zg(r),k+=$*$),k=(R-(k=Math.sqrt(k)))/k*i,d.vx+=(P*=k)*(R=(A*=A)/(g+A)),d.vy+=($*=k)*R,C.vx-=P*(R=1-R),C.vy-=$*R)}return}return w>h+R||S<h-R||E>p+R||x<p-R}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Wa(+l),u(),o):e},o}function Bvt(e){return e.index}function cce(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Uvt(e){var t=Bvt,n=f,r,i=Wa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,x,C,A,R;b<v;++b)w=e[b],E=w.source,S=w.target,x=S.x+S.vx-E.x-E.vx||Zg(l),C=S.y+S.vy-E.y-E.vy||Zg(l),A=Math.sqrt(x*x+C*C),A=(A-s[b])/A*g*r[b],x*=A,C*=A,S.vx-=x*(R=u[b]),S.vy-=C*R,E.vx+=x*(R=1-R),E.vy+=C*R}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=cce(b,w.source)),typeof w.target!="object"&&(w.target=cce(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Wa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Wa(+g),m(),d):i},d}const zvt=1664525,Vvt=1013904223,fce=4294967296;function Hvt(){let e=1;return()=>(e=(zvt*e+Vvt)%fce)/fce}function qvt(e){return e.x}function Wvt(e){return e.y}var Gvt=10,Yvt=Math.PI*(3-Math.sqrt(5));function Kvt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=yX(f),l=_6("tick","end"),c=Hvt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Gvt*Math.sqrt(.5+m),b=m*Yvt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,x,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)x=e[v],w=m-x.x,E=g-x.y,S=w*w+E*E,S<y&&(C=x,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Xvt(){var e,t,n,r,i=Wa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=xX(e,qvt,Wvt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Zg(n),w+=y*y),v===0&&(v=Zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zg(n),w+=y*y),v===0&&(v=Zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Wa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Qvt(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function Jvt(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function Zvt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xE(e){return e=_3(Math.abs(e)),e?e[1]:NaN}function e1t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function t1t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var n1t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function L1(e){if(!(t=n1t.exec(e)))throw new Error("invalid format: "+e);var t;return new TX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}L1.prototype=TX.prototype;function TX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}TX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r1t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var PCe;function i1t(e,t){var n=_3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(PCe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_3(e,Math.max(0,t+s-1))[0]}function dce(e,t){var n=_3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hce={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Zvt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dce(e*100,t),r:dce,s:i1t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pce(e){return e}var mce=Array.prototype.map,gce=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OCe(e){var t=e.grouping===void 0||e.thousands===void 0?pce:e1t(mce.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?pce:t1t(mce.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=L1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):hce[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",C=hce[E],A=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(P){var $=S,k=x,D,M,L;if(E==="c")k=C(P)+k,P="";else{P=+P;var B=P<0||1/P<0;if(P=isNaN(P)?u:C(Math.abs(P),b),w&&(P=r1t(P)),B&&+P==0&&p!=="+"&&(B=!1),$=(B?p==="("?p:a:p==="-"||p==="("?"":p)+$,k=(E==="s"?gce[8+PCe/3]:"")+k+(B&&p==="("?")":""),A){for(D=-1,M=P.length;++D<M;)if(L=P.charCodeAt(D),48>L||L>57){k=(L===46?i+P.slice(D+1):P.slice(D))+k,P=P.slice(0,D);break}}}v&&!g&&(P=t(P,1/0));var U=$.length+P.length+k.length,V=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(P=t(V+P,V.length?y-k.length:1/0),V=""),h){case"<":P=$+P+k+V;break;case"=":P=$+V+P+k;break;case"^":P=V.slice(0,U=V.length>>1)+$+P+k+V.slice(U);break;default:P=V+$+P+k;break}return s(P)}return R.toString=function(){return f+""},R}function c(f,d){var h=l((f=L1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(xE(d)/3)))*3,m=Math.pow(10,-p),g=gce[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var NN,Yx,CX;s1t({thousands:",",grouping:[3],currency:["$",""]});function s1t(e){return NN=OCe(e),Yx=NN.format,CX=NN.formatPrefix,NN}function DCe(e){return Math.max(0,-xE(Math.abs(e)))}function $Ce(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xE(t)/3)))*3-xE(Math.abs(e)))}function MCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xE(t)-xE(e))+1}var Bt=1e-6,w3=1e-12,Nn=Math.PI,Qi=Nn/2,E3=Nn/4,tu=Nn*2,us=180/Nn,In=Nn/180,Xn=Math.abs,Kx=Math.atan,Bc=Math.atan2,zt=Math.cos,PN=Math.ceil,LCe=Math.exp,cz=Math.hypot,x3=Math.log,Rj=Math.pow,Lt=Math.sin,Sc=Math.sign||function(e){return e>0?1:e<0?-1:0},nu=Math.sqrt,AX=Math.tan;function FCe(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Qu(e){return e>1?Qi:e<-1?-Qi:Math.asin(e)}function No(){}function S3(e,t){e&&vce.hasOwnProperty(e.type)&&vce[e.type](e,t)}var yce={Feature:function(e,t){S3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)S3(n[r].geometry,t)}},vce={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){fz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fz(n[r],t,0)},Polygon:function(e,t){bce(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bce(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)S3(n[r],t)}};function fz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function bce(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)fz(e[n],t,1);t.polygonEnd()}function Lp(e,t){e&&yce.hasOwnProperty(e.type)?yce[e.type](e,t):S3(e,t)}var T3=new Ka,C3=new Ka,jCe,BCe,dz,hz,pz,kh={point:No,lineStart:No,lineEnd:No,polygonStart:function(){T3=new Ka,kh.lineStart=o1t,kh.lineEnd=a1t},polygonEnd:function(){var e=+T3;C3.add(e<0?tu+e:e),this.lineStart=this.lineEnd=this.point=No},sphere:function(){C3.add(tu)}};function o1t(){kh.point=u1t}function a1t(){UCe(jCe,BCe)}function u1t(e,t){kh.point=UCe,jCe=e,BCe=t,e*=In,t*=In,dz=e,hz=zt(t=t/2+E3),pz=Lt(t)}function UCe(e,t){e*=In,t*=In,t=t/2+E3;var n=e-dz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Lt(t),a=pz*o,u=hz*s+a*zt(i),l=a*r*Lt(i);T3.add(Bc(l,u)),dz=e,hz=s,pz=o}function l1t(e){return C3=new Ka,Lp(e,kh),C3*2}function A3(e){return[Bc(e[1],e[0]),Qu(e[2])]}function F1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Lt(t),Lt(n)]}function ON(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function SE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Nj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function DN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function I3(e){var t=nu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ri,ku,Hi,_l,wv,zCe,VCe,$w,g2,Ng,Cm,Op={point:mz,lineStart:_ce,lineEnd:wce,polygonStart:function(){Op.point=qCe,Op.lineStart=c1t,Op.lineEnd=f1t,g2=new Ka,kh.polygonStart()},polygonEnd:function(){kh.polygonEnd(),Op.point=mz,Op.lineStart=_ce,Op.lineEnd=wce,T3<0?(Ri=-(Hi=180),ku=-(_l=90)):g2>Bt?_l=90:g2<-Bt&&(ku=-90),Cm[0]=Ri,Cm[1]=Hi},sphere:function(){Ri=-(Hi=180),ku=-(_l=90)}};function mz(e,t){Ng.push(Cm=[Ri=e,Hi=e]),t<ku&&(ku=t),t>_l&&(_l=t)}function HCe(e,t){var n=F1([e*In,t*In]);if($w){var r=SE($w,n),i=[r[1],-r[0],0],s=SE(i,r);I3(s),s=A3(s);var o=e-wv,a=o>0?1:-1,u=s[0]*us*a,l,c=Xn(o)>180;c^(a*wv<u&&u<a*e)?(l=s[1]*us,l>_l&&(_l=l)):(u=(u+360)%360-180,c^(a*wv<u&&u<a*e)?(l=-s[1]*us,l<ku&&(ku=l)):(t<ku&&(ku=t),t>_l&&(_l=t))),c?e<wv?vl(Ri,e)>vl(Ri,Hi)&&(Hi=e):vl(e,Hi)>vl(Ri,Hi)&&(Ri=e):Hi>=Ri?(e<Ri&&(Ri=e),e>Hi&&(Hi=e)):e>wv?vl(Ri,e)>vl(Ri,Hi)&&(Hi=e):vl(e,Hi)>vl(Ri,Hi)&&(Ri=e)}else Ng.push(Cm=[Ri=e,Hi=e]);t<ku&&(ku=t),t>_l&&(_l=t),$w=n,wv=e}function _ce(){Op.point=HCe}function wce(){Cm[0]=Ri,Cm[1]=Hi,Op.point=mz,$w=null}function qCe(e,t){if($w){var n=e-wv;g2.add(Xn(n)>180?n+(n>0?360:-360):n)}else zCe=e,VCe=t;kh.point(e,t),HCe(e,t)}function c1t(){kh.lineStart()}function f1t(){qCe(zCe,VCe),kh.lineEnd(),Xn(g2)>Bt&&(Ri=-(Hi=180)),Cm[0]=Ri,Cm[1]=Hi,$w=null}function vl(e,t){return(t-=e)<0?t+360:t}function d1t(e,t){return e[0]-t[0]}function Ece(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function h1t(e){var t,n,r,i,s,o,a;if(_l=Hi=-(Ri=ku=1/0),Ng=[],Lp(e,Op),n=Ng.length){for(Ng.sort(d1t),t=1,r=Ng[0],s=[r];t<n;++t)i=Ng[t],Ece(r,i[0])||Ece(r,i[1])?(vl(r[0],i[1])>vl(r[0],r[1])&&(r[1]=i[1]),vl(i[0],r[1])>vl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=vl(r[1],i[0]))>o&&(o=a,Ri=i[0],Hi=r[1])}return Ng=Cm=null,Ri===1/0||ku===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ri,ku],[Hi,_l]]}var ZT,k3,R3,N3,P3,O3,D3,$3,gz,yz,vz,WCe,GCe,za,Va,Ha,$f={sphere:No,point:IX,lineStart:xce,lineEnd:Sce,polygonStart:function(){$f.lineStart=g1t,$f.lineEnd=y1t},polygonEnd:function(){$f.lineStart=xce,$f.lineEnd=Sce}};function IX(e,t){e*=In,t*=In;var n=zt(t);dk(n*zt(e),n*Lt(e),Lt(t))}function dk(e,t,n){++ZT,R3+=(e-R3)/ZT,N3+=(t-N3)/ZT,P3+=(n-P3)/ZT}function xce(){$f.point=p1t}function p1t(e,t){e*=In,t*=In;var n=zt(t);za=n*zt(e),Va=n*Lt(e),Ha=Lt(t),$f.point=m1t,dk(za,Va,Ha)}function m1t(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=Bc(nu((o=Va*s-Ha*i)*o+(o=Ha*r-za*s)*o+(o=za*i-Va*r)*o),za*r+Va*i+Ha*s);k3+=o,O3+=o*(za+(za=r)),D3+=o*(Va+(Va=i)),$3+=o*(Ha+(Ha=s)),dk(za,Va,Ha)}function Sce(){$f.point=IX}function g1t(){$f.point=v1t}function y1t(){YCe(WCe,GCe),$f.point=IX}function v1t(e,t){WCe=e,GCe=t,e*=In,t*=In,$f.point=YCe;var n=zt(t);za=n*zt(e),Va=n*Lt(e),Ha=Lt(t),dk(za,Va,Ha)}function YCe(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=Va*s-Ha*i,a=Ha*r-za*s,u=za*i-Va*r,l=cz(o,a,u),c=Qu(l),f=l&&-c/l;gz.add(f*o),yz.add(f*a),vz.add(f*u),k3+=c,O3+=c*(za+(za=r)),D3+=c*(Va+(Va=i)),$3+=c*(Ha+(Ha=s)),dk(za,Va,Ha)}function b1t(e){ZT=k3=R3=N3=P3=O3=D3=$3=0,gz=new Ka,yz=new Ka,vz=new Ka,Lp(e,$f);var t=+gz,n=+yz,r=+vz,i=cz(t,n,r);return i<w3&&(t=O3,n=D3,r=$3,k3<Bt&&(t=R3,n=N3,r=P3),i=cz(t,n,r),i<w3)?[NaN,NaN]:[Bc(n,t)*us,Qu(r/i)*us]}function bz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function _z(e,t){return Xn(e)>Nn&&(e-=Math.round(e/tu)*tu),[e,t]}_z.invert=_z;function KCe(e,t,n){return(e%=tu)?t||n?bz(Cce(e),Ace(t,n)):Cce(e):t||n?Ace(t,n):_z}function Tce(e){return function(t,n){return t+=e,Xn(t)>Nn&&(t-=Math.round(t/tu)*tu),[t,n]}}function Cce(e){var t=Tce(e);return t.invert=Tce(-e),t}function Ace(e,t){var n=zt(e),r=Lt(e),i=zt(t),s=Lt(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[Bc(f*i-h*s,c*n-d*r),Qu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[Bc(f*i+d*s,c*n+h*r),Qu(h*n-c*r)]},o}function _1t(e){e=KCe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=us,n[1]*=us,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=us,n[1]*=us,n},t}function w1t(e,t,n,r,i,s){if(n){var o=zt(t),a=Lt(t),u=r*n;i==null?(i=t+r*tu,s=t-u/2):(i=Ice(o,i),s=Ice(o,s),(r>0?i<s:i>s)&&(i+=r*tu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=A3([o,-a*zt(c),-a*Lt(c)]),e.point(l[0],l[1])}}function Ice(e,t){t=F1(t),t[0]-=e,I3(t);var n=FCe(-t[1]);return((-t[2]<0?-n:n)+tu-Bt)%tu}function XCe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:No,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mO(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function $N(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function QCe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(mO(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new $N(g,p,null,!0)),o.push(v.o=new $N(g,null,v,!1)),s.push(v=new $N(y,p,null,!1)),o.push(v.o=new $N(y,null,v,!0))}}),!!s.length){for(o.sort(t),kce(s),kce(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function kce(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Pj(e){return Xn(e[0])<=Nn?e[0]:Sc(e[0])*((Xn(e[0])+Nn)%tu-Nn)}function E1t(e,t){var n=Pj(t),r=t[1],i=Lt(r),s=[Lt(n),-zt(n),0],o=0,a=0,u=new Ka;i===1?r=Qi+Bt:i===-1&&(r=-Qi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Pj(h),m=h[1]/2+E3,g=Lt(m),y=zt(m),v=0;v<d;++v,p=w,g=S,y=x,h=b){var b=f[v],w=Pj(b),E=b[1]/2+E3,S=Lt(E),x=zt(E),C=w-p,A=C>=0?1:-1,R=A*C,P=R>Nn,$=g*S;if(u.add(Bc($*A*Lt(R),y*x+$*zt(R))),o+=P?C+A*tu:C,P^p>=n^w>=n){var k=SE(F1(h),F1(b));I3(k);var D=SE(s,k);I3(D);var M=(P^C>=0?-1:1)*Qu(D[2]);(r>M||r===M&&(k[0]||k[1]))&&(a+=P^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-w3)^a&1}function JCe(e,t,n,r){return function(i){var s=t(i),o=XCe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=MTe(c);var w=E1t(l,r);c.length?(u||(i.polygonStart(),u=!0),QCe(c,S1t,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,x=E.length,C,A,R;if(f.pop(),l.push(f),f=null,!!x){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((R=A[S])[0],R[1]);i.lineEnd()}return}x>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(x1t))}}return d}}function x1t(e){return e.length>1}function S1t(e,t){return((e=e.x)[0]<0?e[1]-Qi-Bt:Qi-e[1])-((t=t.x)[0]<0?t[1]-Qi-Bt:Qi-t[1])}const Rce=JCe(function(){return!0},T1t,A1t,[-Nn,-Qi]);function T1t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Xn(s-t);Xn(u-Nn)<Bt?(e.point(t,n=(n+o)/2>0?Qi:-Qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=C1t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function C1t(e,t,n,r){var i,s,o=Lt(e-n);return Xn(o)>Bt?Kx((Lt(t)*(s=zt(r))*Lt(n)-Lt(r)*(i=zt(t))*Lt(e))/(i*s*o)):(t+r)/2}function A1t(e,t,n,r){var i;if(e==null)i=n*Qi,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function I1t(e){var t=zt(e),n=2*In,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){w1t(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||mO(f,b)||mO(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!mO(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=F1(c),p=F1(f),m=[1,0,0],g=SE(h,p),y=ON(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=SE(m,g),x=DN(m,w),C=DN(g,E);Nj(x,C);var A=S,R=ON(x,A),P=ON(A,A),$=R*R-P*(ON(x,x)-1);if(!($<0)){var k=nu($),D=DN(A,(-R-k)/P);if(Nj(D,x),D=A3(D),!d)return D;var M=c[0],L=f[0],B=c[1],U=f[1],V;L<M&&(V=M,M=L,L=V);var O=L-M,z=Xn(O-Nn)<Bt,W=z||O<Bt;if(!z&&U<B&&(V=B,B=U,U=V),W?z?B+U>0^D[1]<(Xn(D[0]-M)<Bt?B:U):B<=D[1]&&D[1]<=U:O>Nn^(M<=D[0]&&D[0]<=L)){var j=DN(A,(-R+k)/P);return Nj(j,x),[D,A3(j)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return JCe(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function k1t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var eC=1e9,MN=-eC;function ZCe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=XCe(),d,h,p,m,g,y,v,b,w,E,S,x={point:C,lineStart:$,lineEnd:k,polygonStart:R,polygonEnd:P};function C(M,L){i(M,L)&&c.point(M,L)}function A(){for(var M=0,L=0,B=h.length;L<B;++L)for(var U=h[L],V=1,O=U.length,z=U[0],W,j,H=z[0],G=z[1];V<O;++V)W=H,j=G,z=U[V],H=z[0],G=z[1],j<=r?G>r&&(H-W)*(r-j)>(G-j)*(e-W)&&++M:G<=r&&(H-W)*(r-j)<(G-j)*(e-W)&&--M;return M}function R(){c=f,d=[],h=[],S=!0}function P(){var M=A(),L=S&&M,B=(d=MTe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&QCe(d,a,M,s,l),l.polygonEnd()),c=l,d=h=p=null}function $(){x.point=D,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function k(){d&&(D(m,g),y&&w&&f.rejoin(),d.push(f.result())),x.point=C,w&&c.lineEnd()}function D(M,L){var B=i(M,L);if(h&&p.push([M,L]),E)m=M,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(M,L));else if(B&&w)c.point(M,L);else{var U=[v=Math.max(MN,Math.min(eC,v)),b=Math.max(MN,Math.min(eC,b))],V=[M=Math.max(MN,Math.min(eC,M)),L=Math.max(MN,Math.min(eC,L))];k1t(U,V,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(V[0],V[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(M,L),S=!1)}v=M,b=L,w=B}return x}}function Nce(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Pce(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function R1t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Mu(PN(r/c)*c,n,c).map(p).concat(Mu(PN(a/f)*f,o,f).map(m)).concat(Mu(PN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>Bt}).map(d)).concat(Mu(PN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Nce(s,i,90),h=Pce(t,e,g),p=Nce(a,o,90),m=Pce(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const CA=e=>e;var Oj=new Ka,wz=new Ka,e2e,t2e,Ez,xz,Fp={point:No,lineStart:No,lineEnd:No,polygonStart:function(){Fp.lineStart=N1t,Fp.lineEnd=O1t},polygonEnd:function(){Fp.lineStart=Fp.lineEnd=Fp.point=No,Oj.add(Xn(wz)),wz=new Ka},result:function(){var e=Oj/2;return Oj=new Ka,e}};function N1t(){Fp.point=P1t}function P1t(e,t){Fp.point=n2e,e2e=Ez=e,t2e=xz=t}function n2e(e,t){wz.add(xz*e-Ez*t),Ez=e,xz=t}function O1t(){n2e(e2e,t2e)}var TE=1/0,M3=TE,AA=-TE,L3=AA,F3={point:D1t,lineStart:No,lineEnd:No,polygonStart:No,polygonEnd:No,result:function(){var e=[[TE,M3],[AA,L3]];return AA=L3=-(M3=TE=1/0),e}};function D1t(e,t){e<TE&&(TE=e),e>AA&&(AA=e),t<M3&&(M3=t),t>L3&&(L3=t)}var Sz=0,Tz=0,tC=0,j3=0,B3=0,aw=0,Cz=0,Az=0,nC=0,r2e,i2e,Xd,Qd,vc={point:j1,lineStart:Oce,lineEnd:Dce,polygonStart:function(){vc.lineStart=L1t,vc.lineEnd=F1t},polygonEnd:function(){vc.point=j1,vc.lineStart=Oce,vc.lineEnd=Dce},result:function(){var e=nC?[Cz/nC,Az/nC]:aw?[j3/aw,B3/aw]:tC?[Sz/tC,Tz/tC]:[NaN,NaN];return Sz=Tz=tC=j3=B3=aw=Cz=Az=nC=0,e}};function j1(e,t){Sz+=e,Tz+=t,++tC}function Oce(){vc.point=$1t}function $1t(e,t){vc.point=M1t,j1(Xd=e,Qd=t)}function M1t(e,t){var n=e-Xd,r=t-Qd,i=nu(n*n+r*r);j3+=i*(Xd+e)/2,B3+=i*(Qd+t)/2,aw+=i,j1(Xd=e,Qd=t)}function Dce(){vc.point=j1}function L1t(){vc.point=j1t}function F1t(){s2e(r2e,i2e)}function j1t(e,t){vc.point=s2e,j1(r2e=Xd=e,i2e=Qd=t)}function s2e(e,t){var n=e-Xd,r=t-Qd,i=nu(n*n+r*r);j3+=i*(Xd+e)/2,B3+=i*(Qd+t)/2,aw+=i,i=Qd*e-Xd*t,Cz+=i*(Xd+e),Az+=i*(Qd+t),nC+=i*3,j1(Xd=e,Qd=t)}function o2e(e){this._context=e}o2e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tu);break}}},result:No};var Iz=new Ka,Dj,a2e,u2e,rC,iC,IA={point:No,lineStart:function(){IA.point=B1t},lineEnd:function(){Dj&&l2e(a2e,u2e),IA.point=No},polygonStart:function(){Dj=!0},polygonEnd:function(){Dj=null},result:function(){var e=+Iz;return Iz=new Ka,e}};function B1t(e,t){IA.point=l2e,a2e=rC=e,u2e=iC=t}function l2e(e,t){rC-=e,iC-=t,Iz.add(nu(rC*rC+iC*iC)),rC=e,iC=t}let $ce,U3,Mce,Lce;class Fce{constructor(t){this._append=t==null?c2e:U1t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Mce||this._append!==U3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Mce=r,U3=this._append,Lce=this._,this._=i}this._+=Lce;break}}}result(){const t=this._;return this._="",t.length?t:null}}function c2e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function U1t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return c2e;if(t!==$ce){const n=10**t;$ce=t,U3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return U3}function f2e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Lp(a,i(s))),s.result()}return o.area=function(a){return Lp(a,i(Fp)),Fp.result()},o.measure=function(a){return Lp(a,i(IA)),IA.result()},o.bounds=function(a){return Lp(a,i(F3)),F3.result()},o.centroid=function(a){return Lp(a,i(vc)),vc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,CA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Fce(n)):new o2e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Fce(n)),o},o.projection(e).digits(n).context(t)}function k6(e){return function(t){var n=new kz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function kz(){}kz.prototype={constructor:kz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Lp(n,e.stream(F3)),t(F3.result()),r!=null&&e.clipExtent(r),e}function R6(e,t,n){return kX(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function RX(e,t,n){return R6(e,[[0,0],t],n)}function NX(e,t,n){return kX(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function PX(e,t,n){return kX(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var jce=16,z1t=zt(30*In);function Bce(e,t){return+t?H1t(e,t):V1t(e)}function V1t(e){return k6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function H1t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,x=nu(w*w+E*E+S*S),C=Qu(S/=x),A=Xn(Xn(S)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:Bc(E,w),R=e(A,C),P=R[0],$=R[1],k=P-r,D=$-i,M=v*k-y*D;(M*M/b>t||Xn((y*k+v*D)/b-.5)>.3||o*d+a*h+u*p<z1t)&&(n(r,i,s,o,a,u,P,$,A,w/=x,E/=x,S,m,g),g.point(P,$),n(P,$,A,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var R=F1([C,A]),P=e(C,A);n(f,d,c,h,p,m,f=P[0],d=P[1],c=C,h=R[0],p=R[1],m=R[2],jce,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=x}function S(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,jce,r),g.lineEnd=w,w()}return g}}var q1t=k6({point:function(e,t){this.stream.point(e*In,t*In)}});function W1t(e){return k6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function G1t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Uce(e,t,n,r,i,s){if(!s)return G1t(e,t,n,r,i);var o=zt(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function ep(e){return d2e(function(){return e})()}function d2e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Rce,g=null,y,v,b,w=CA,E=.5,S,x,C,A,R;function P(M){return C(M[0]*In,M[1]*In)}function $(M){return M=C.invert(M[0],M[1]),M&&[M[0]*us,M[1]*us]}P.stream=function(M){return A&&R===M?A:A=q1t(W1t(c)(m(S(w(R=M)))))},P.preclip=function(M){return arguments.length?(m=M,p=void 0,D()):m},P.postclip=function(M){return arguments.length?(w=M,g=y=v=b=null,D()):w},P.clipAngle=function(M){return arguments.length?(m=+M?I1t(p=M*In):(p=null,Rce),D()):p*us},P.clipExtent=function(M){return arguments.length?(w=M==null?(g=y=v=b=null,CA):ZCe(g=+M[0][0],y=+M[0][1],v=+M[1][0],b=+M[1][1]),D()):g==null?null:[[g,y],[v,b]]},P.scale=function(M){return arguments.length?(n=+M,k()):n},P.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],k()):[r,i]},P.center=function(M){return arguments.length?(s=M[0]%360*In,o=M[1]%360*In,k()):[s*us,o*us]},P.rotate=function(M){return arguments.length?(a=M[0]%360*In,u=M[1]%360*In,l=M.length>2?M[2]%360*In:0,k()):[a*us,u*us,l*us]},P.angle=function(M){return arguments.length?(f=M%360*In,k()):f*us},P.reflectX=function(M){return arguments.length?(d=M?-1:1,k()):d<0},P.reflectY=function(M){return arguments.length?(h=M?-1:1,k()):h<0},P.precision=function(M){return arguments.length?(S=Bce(x,E=M*M),D()):nu(E)},P.fitExtent=function(M,L){return R6(P,M,L)},P.fitSize=function(M,L){return RX(P,M,L)},P.fitWidth=function(M,L){return NX(P,M,L)},P.fitHeight=function(M,L){return PX(P,M,L)};function k(){var M=Uce(n,0,0,d,h,f).apply(null,t(s,o)),L=Uce(n,r-M[0],i-M[1],d,h,f);return c=KCe(a,u,l),x=bz(t,L),C=bz(c,x),S=Bce(x,E),D()}function D(){return A=R=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&$,k()}}function OX(e){var t=0,n=Nn/3,r=d2e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*us,n*us]},i}function Y1t(e){var t=zt(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Qu(i*t)]},n}function K1t(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Xn(r)<Bt)return Y1t(e);var i=1+n*(2*r-n),s=nu(i)/r;function o(a,u){var l=nu(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Bc(a,Xn(l))*Sc(l);return l*r<0&&(c-=Nn*Sc(a)*Sc(l)),[c/r,Qu((i-(a*a+l*l)*r*r)/(2*r))]},o}function z3(){return OX(K1t).scale(155.424).center([0,33.6442])}function h2e(){return z3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function X1t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Q1t(){var e,t,n=h2e(),r,i=z3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=z3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=X1t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return R6(c,d,h)},c.fitSize=function(d,h){return RX(c,d,h)},c.fitWidth=function(d,h){return NX(c,d,h)},c.fitHeight=function(d,h){return PX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function p2e(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function hk(e){return function(t,n){var r=nu(t*t+n*n),i=e(r),s=Lt(i),o=zt(i);return[Bc(t*s,r*o),Qu(r&&n*s/r)]}}var m2e=p2e(function(e){return nu(2/(1+e))});m2e.invert=hk(function(e){return 2*Qu(e/2)});function J1t(){return ep(m2e).scale(124.75).clipAngle(180-.001)}var g2e=p2e(function(e){return(e=FCe(e))&&e/Lt(e)});g2e.invert=hk(function(e){return e});function Z1t(){return ep(g2e).scale(79.4188).clipAngle(180-.001)}function N6(e,t){return[e,x3(AX((Qi+t)/2))]}N6.invert=function(e,t){return[e,2*Kx(LCe(t))-Qi]};function ebt(){return y2e(N6).scale(961/tu)}function y2e(e){var t=ep(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(_1t(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===N6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function LN(e){return AX((Qi+e)/2)}function tbt(e,t){var n=zt(e),r=e===t?Lt(e):x3(n/zt(t))/x3(LN(t)/LN(e)),i=n*Rj(LN(e),r)/r;if(!r)return N6;function s(o,a){i>0?a<-Qi+Bt&&(a=-Qi+Bt):a>Qi-Bt&&(a=Qi-Bt);var u=i/Rj(LN(a),r);return[u*Lt(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Sc(r)*nu(o*o+u*u),c=Bc(o,Xn(u))*Sc(u);return u*r<0&&(c-=Nn*Sc(o)*Sc(u)),[c/r,2*Kx(Rj(i/l,1/r))-Qi]},s}function nbt(){return OX(tbt).scale(109.5).parallels([30,30])}function V3(e,t){return[e,t]}V3.invert=V3;function rbt(){return ep(V3).scale(152.63)}function ibt(e,t){var n=zt(e),r=e===t?Lt(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return V3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Bc(o,Xn(u))*Sc(u);return u*r<0&&(l-=Nn*Sc(o)*Sc(u)),[l/r,i-Sc(r)*nu(o*o+u*u)]},s}function sbt(){return OX(ibt).scale(131.154).center([0,13.9389])}var y2=1.340264,v2=-.081106,b2=893e-6,_2=.003796,H3=nu(3)/2,obt=12;function v2e(e,t){var n=Qu(H3*Lt(t)),r=n*n,i=r*r*r;return[e*zt(n)/(H3*(y2+3*v2*r+i*(7*b2+9*_2*r))),n*(y2+v2*r+i*(b2+_2*r))]}v2e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<obt&&(a=n*(y2+v2*r+i*(b2+_2*r))-t,u=y2+3*v2*r+i*(7*b2+9*_2*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<w3));++s);return[H3*e*(y2+3*v2*r+i*(7*b2+9*_2*r))/zt(n),Qu(Lt(n)/H3)]};function abt(){return ep(v2e).scale(177.158)}function b2e(e,t){var n=zt(t),r=zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}b2e.invert=hk(Kx);function ubt(){return ep(b2e).scale(144.049).clipAngle(60)}function lbt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=k6({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=CA,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var x=S*o-E*a;E=E*o+S*a,S=x}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var x=S*o+E*a;E=E*o-S*a,S=x}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,CA):ZCe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Lt(s),o=zt(s),v()):s*us},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return R6(b,w,E)},b.fitSize=function(w,E){return RX(b,w,E)},b.fitWidth=function(w,E){return NX(b,w,E)},b.fitHeight=function(w,E){return PX(b,w,E)},b}function _2e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}_2e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function cbt(){return ep(_2e).scale(175.295)}function w2e(e,t){return[zt(t)*Lt(e),Lt(t)]}w2e.invert=hk(Qu);function fbt(){return ep(w2e).scale(249.5).clipAngle(90+Bt)}function E2e(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}E2e.invert=hk(function(e){return 2*Kx(e)});function dbt(){return ep(E2e).scale(250).clipAngle(142)}function x2e(e,t){return[x3(AX((Qi+t)/2)),-e]}x2e.invert=function(e,t){return[-t,2*Kx(LCe(e))-Qi]};function hbt(){var e=y2e(x2e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function pbt(e,t){return e.parent===t.parent?1:2}function mbt(e){return e.reduce(gbt,0)/e.length}function gbt(e,t){return e+t.x}function ybt(e){return 1+e.reduce(vbt,0)}function vbt(e,t){return Math.max(e,t.y)}function bbt(e){for(var t;t=e.children;)e=t[0];return e}function _bt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function wbt(){var e=pbt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=mbt(h),d.y=ybt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=bbt(s),l=_bt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Ebt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function xbt(){return this.eachAfter(Ebt)}function Sbt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Tbt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Cbt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Abt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Ibt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function kbt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Rbt(e){for(var t=this,n=Nbt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Nbt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Pbt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Obt(){return Array.from(this)}function Dbt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function $bt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Mbt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function DX(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=jbt)):t===void 0&&(t=Fbt);for(var n=new CE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new CE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(S2e)}function Lbt(){return DX(this).eachBefore(Bbt)}function Fbt(e){return e.children}function jbt(e){return Array.isArray(e)?e[1]:null}function Bbt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function S2e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function CE(e){this.data=e,this.depth=this.height=0,this.parent=null}CE.prototype=DX.prototype={constructor:CE,count:xbt,each:Sbt,eachAfter:Cbt,eachBefore:Tbt,find:Abt,sum:Ibt,sort:kbt,path:Rbt,ancestors:Pbt,descendants:Obt,leaves:Dbt,links:$bt,copy:Lbt,[Symbol.iterator]:Mbt};function gO(e){return e==null?null:T2e(e)}function T2e(e){if(typeof e!="function")throw new Error;return e}function Lv(){return 0}function P_(e){return function(){return e}}const Ubt=1664525,zbt=1013904223,zce=4294967296;function Vbt(){let e=1;return()=>(e=(Ubt*e+zbt)%zce)/zce}function Hbt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qbt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Wbt(e,t){for(var n=0,r=(e=qbt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&C2e(o,s)?++n:(o=Ybt(i=Gbt(i,s)),n=0);return o}function Gbt(e,t){var n,r;if($j(t,e))return[t];for(n=0;n<e.length;++n)if(FN(t,e[n])&&$j(sC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(FN(sC(e[n],e[r]),t)&&FN(sC(e[n],t),e[r])&&FN(sC(e[r],t),e[n])&&$j(A2e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function FN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function C2e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function $j(e,t){for(var n=0;n<t.length;++n)if(!C2e(e,t[n]))return!1;return!0}function Ybt(e){switch(e.length){case 1:return Kbt(e[0]);case 2:return sC(e[0],e[1]);case 3:return A2e(e[0],e[1],e[2])}}function Kbt(e){return{x:e.x,y:e.y,r:e.r}}function sC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function A2e(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,x=(m*g-p*y)/E,C=(h*b-d*w)/(E*2)-i,A=(d*y-h*g)/E,R=x*x+A*A-1,P=2*(s+S*x+C*A),$=S*S+C*C-s*s,k=-(Math.abs(R)>1e-6?(P+Math.sqrt(P*P-4*R*$))/(2*R):$/P);return{x:r+S+x*k,y:i+C+A*k,r:k}}function Vce(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Hce(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function qce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function jN(e){this._=e,this.next=null,this.previous=null}function Xbt(e,t){if(!(s=(e=Hbt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Vce(r,n,i=e[2]),n=new jN(n),r=new jN(r),i=new jN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Vce(n._,r._,i=e[u]),i=new jN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Hce(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Hce(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=qce(n);(i=i.next)!==r;)(a=qce(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Wbt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Qbt(e){return Math.sqrt(e.value)}function Jbt(){var e=null,t=1,n=1,r=Lv;function i(s){const o=Vbt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Wce(e)).eachAfter(Mj(r,.5,o)).eachBefore(Gce(1)):s.eachBefore(Wce(Qbt)).eachAfter(Mj(Lv,1,o)).eachAfter(Mj(r,s.r/Math.min(t,n),o)).eachBefore(Gce(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=gO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:P_(+s),i):r},i}function Wce(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Mj(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Xbt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Gce(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function I2e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function pk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Zbt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(I2e),o}function s(o,a){return function(u){u.children&&pk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var e_t={depth:-1},Yce={},Lj={};function t_t(e){return e.id}function n_t(e){return e.parentId}function Kce(){var e=t_t,t=n_t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>r_t(n(w,E,i))),v=y.map(Xce),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Xce(w)),s.push(Lj));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new CE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Yce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Yce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Lj&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===Lj);--y)h.data=null}if(f.parent=e_t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(S2e),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=gO(i),r):e},r.parentId=function(i){return arguments.length?(t=gO(i),r):t},r.path=function(i){return arguments.length?(n=gO(i),r):n},r}function r_t(e){e=`${e}`;let t=e.length;return Rz(e,t-1)&&!Rz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Xce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Rz(e,t););return e.slice(0,t)}function Rz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function i_t(e,t){return e.parent===t.parent?1:2}function Fj(e){var t=e.children;return t?t[0]:e.t}function jj(e){var t=e.children;return t?t[t.length-1]:e.t}function s_t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function o_t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function a_t(e,t,n){return e.a.parent===t.parent?e.a:n}function yO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}yO.prototype=Object.create(CE.prototype);function u_t(e){for(var t=new yO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new yO(s[o],o)),i.parent=n;return(t.parent=new yO(null,0)).children=[t],t}function l_t(){var e=i_t,t=1,n=1,r=null;function i(l){var c=u_t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){o_t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=jj(p),d=Fj(d),p&&d;)m=Fj(m),h=jj(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(s_t(a_t(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!jj(h)&&(h.t=p,h.m+=v-y),d&&!Fj(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function P6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var k2e=(1+Math.sqrt(5))/2;function R2e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?pk(u,n,r,i,m?r+=p*g/m:s):P6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const N2e=function e(t){function n(r,i,s,o,a){R2e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(k2e);function c_t(){var e=N2e,t=!1,n=1,r=1,i=[0],s=Lv,o=Lv,a=Lv,u=Lv,l=Lv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(I2e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=T2e(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:P_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:P_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:P_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:P_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:P_(+d),c):l},c}function f_t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var x=E+S>>>1;l[x]<w?E=x+1:S=x}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-b,A=h-C;if(g-p>y-m){var R=h?(p*A+g*C)/h:g;c(f,E,C,p,m,R,y),c(E,d,A,R,m,g,y)}else{var P=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,P),c(E,d,A,p,P,g,y)}}}function d_t(e,t,n,r,i){(e.depth&1?P6:pk)(e,t,n,r,i)}const h_t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?pk(l,i,s,o,m?s+=(a-s)*l.value/m:a):P6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=R2e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(k2e);function hd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Py(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Nz=Symbol("implicit");function Xx(){var e=new Rle,t=[],n=[],r=Nz;function i(s){let o=e.get(s);if(o===void 0){if(r!==Nz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Rle;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Xx(t,n).unknown(r)},hd.apply(i,arguments),i}function O6(){var e=Xx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Mu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return O6(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},hd.apply(f(),arguments)}function p_t(e){return function(){return e}}function Pz(e){return+e}var Qce=[0,1];function Lu(e){return e}function Oz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:p_t(isNaN(t)?NaN:.5)}function m_t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function g_t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Oz(i,r),s=n(o,s)):(r=Oz(r,i),s=n(s,o)),function(a){return s(r(a))}}function y_t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Oz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=B0(e,a,1,r)-1;return s[u](i[u](a))}}function mk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function D6(){var e=Qce,t=Qce,n=Km,r,i,s,o=Lu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Lu&&(o=m_t(e[0],e[d-1])),a=d>2?y_t:g_t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),pc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Pz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=ck,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Lu,c()):o!==Lu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function P2e(){return D6()(Lu,Lu)}function O2e(e,t,n,r){var i=U0(e,t,n),s;switch(r=L1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$Ce(i,o))&&(r.precision=s),CX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=MCe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=DCe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Yx(r)}function Tb(e){var t=e.domain;return e.ticks=function(n){var r=t();return W7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return O2e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=G7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Rh(){var e=P2e();return e.copy=function(){return mk(e,Rh())},hd.apply(e,arguments),Tb(e)}function D2e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Pz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return D2e(e).unknown(t)},e=arguments.length?Array.from(e,Pz):[0,1],Tb(n)}function $2e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Jce(e){return Math.log(e)}function Zce(e){return Math.exp(e)}function v_t(e){return-Math.log(-e)}function b_t(e){return-Math.exp(-e)}function __t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function w_t(e){return e===10?__t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function E_t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function efe(e){return(t,n)=>-e(-t,n)}function $X(e){const t=e(Jce,Zce),n=t.domain;let r=10,i,s;function o(){return i=E_t(r),s=w_t(r),n()[0]<0?(i=efe(i),s=efe(s),e(v_t,b_t)):e(Jce,Zce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=W7(l,c,g))}else y=W7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=L1(u)).precision==null&&(u.trim=!0),u=Yx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n($2e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function M2e(){const e=$X(D6()).domain([1,10]);return e.copy=()=>mk(e,M2e()).base(e.base()),hd.apply(e,arguments),e}function tfe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nfe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function MX(e){var t=1,n=e(tfe(t),nfe(t));return n.constant=function(r){return arguments.length?e(tfe(t=+r),nfe(t)):t},Tb(n)}function L2e(){var e=MX(D6());return e.copy=function(){return mk(e,L2e()).constant(e.constant())},hd.apply(e,arguments)}function rfe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function x_t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function S_t(e){return e<0?-e*e:e*e}function LX(e){var t=e(Lu,Lu),n=1;function r(){return n===1?e(Lu,Lu):n===.5?e(x_t,S_t):e(rfe(n),rfe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tb(t)}function FX(){var e=LX(D6());return e.copy=function(){return mk(e,FX()).exponent(e.exponent())},hd.apply(e,arguments),e}function T_t(){return FX.apply(null,arguments).exponent(.5)}function F2e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=OTe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[B0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(sm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return F2e().domain(e).range(t).unknown(r)},hd.apply(s,arguments)}function j2e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[B0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return j2e().domain([e,t]).range(i).unknown(s)},hd.apply(Tb(o),arguments)}function B2e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[B0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return B2e().domain(e).range(t).unknown(n)},hd.apply(i,arguments)}const Bj=new Date,Uj=new Date;function Gs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Gs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Bj.setTime(+s),Uj.setTime(+o),e(Bj),e(Uj),Math.floor(n(Bj,Uj))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const AE=Gs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);AE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):AE);AE.range;const Wp=1e3,Tc=Wp*60,Gp=Tc*60,Am=Gp*24,jX=Am*7,ife=Am*30,zj=Am*365,Yp=Gs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wp)},(e,t)=>(t-e)/Wp,e=>e.getUTCSeconds());Yp.range;const $6=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wp)},(e,t)=>{e.setTime(+e+t*Tc)},(e,t)=>(t-e)/Tc,e=>e.getMinutes());$6.range;const M6=Gs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tc)},(e,t)=>(t-e)/Tc,e=>e.getUTCMinutes());M6.range;const L6=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wp-e.getMinutes()*Tc)},(e,t)=>{e.setTime(+e+t*Gp)},(e,t)=>(t-e)/Gp,e=>e.getHours());L6.range;const F6=Gs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gp)},(e,t)=>(t-e)/Gp,e=>e.getUTCHours());F6.range;const am=Gs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tc)/Am,e=>e.getDate()-1);am.range;const w0=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Am,e=>e.getUTCDate()-1);w0.range;const U2e=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Am,e=>Math.floor(e/Am));U2e.range;function Cb(e){return Gs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tc)/jX)}const Qx=Cb(0),q3=Cb(1),C_t=Cb(2),A_t=Cb(3),IE=Cb(4),I_t=Cb(5),k_t=Cb(6);Qx.range;q3.range;C_t.range;A_t.range;IE.range;I_t.range;k_t.range;function Ab(e){return Gs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jX)}const Jx=Ab(0),W3=Ab(1),R_t=Ab(2),N_t=Ab(3),kE=Ab(4),P_t=Ab(5),O_t=Ab(6);Jx.range;W3.range;R_t.range;N_t.range;kE.range;P_t.range;O_t.range;const kA=Gs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kA.range;const RA=Gs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RA.range;const Nh=Gs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Nh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Nh.range;const Ph=Gs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ph.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ph.range;function z2e(e,t,n,r,i,s){const o=[[Yp,1,Wp],[Yp,5,5*Wp],[Yp,15,15*Wp],[Yp,30,30*Wp],[s,1,Tc],[s,5,5*Tc],[s,15,15*Tc],[s,30,30*Tc],[i,1,Gp],[i,3,3*Gp],[i,6,6*Gp],[i,12,12*Gp],[r,1,Am],[r,2,2*Am],[n,1,jX],[t,1,ife],[t,3,3*ife],[e,1,zj]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Wx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(U0(l/zj,c/zj,f));if(h===0)return AE.every(Math.max(U0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[D_t,$_t]=z2e(Ph,RA,Jx,U2e,F6,M6),[M_t,L_t]=z2e(Nh,kA,Qx,am,L6,$6);function Vj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function V2e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=hT(i),c=pT(i),f=hT(s),d=pT(s),h=hT(o),p=pT(o),m=hT(a),g=pT(a),y=hT(u),v=pT(u),b={a:B,A:U,b:V,B:O,c:null,d:cfe,e:cfe,f:owt,g:gwt,G:vwt,H:rwt,I:iwt,j:swt,L:H2e,m:awt,M:uwt,p:z,q:W,Q:hfe,s:pfe,S:lwt,u:cwt,U:fwt,V:dwt,w:hwt,W:pwt,x:null,X:null,y:mwt,Y:ywt,Z:bwt,"%":dfe},w={a:j,A:H,b:G,B:te,c:null,d:ffe,e:ffe,f:xwt,g:Owt,G:$wt,H:_wt,I:wwt,j:Ewt,L:W2e,m:Swt,M:Twt,p:he,q:fe,Q:hfe,s:pfe,S:Cwt,u:Awt,U:Iwt,V:kwt,w:Rwt,W:Nwt,x:null,X:null,y:Pwt,Y:Dwt,Z:Mwt,"%":dfe},E={a:R,A:P,b:$,B:k,c:D,d:ufe,e:ufe,f:Z_t,g:afe,G:ofe,H:lfe,I:lfe,j:K_t,L:J_t,m:Y_t,M:X_t,p:A,q:G_t,Q:twt,s:nwt,S:Q_t,u:z_t,U:V_t,V:H_t,w:U_t,W:q_t,x:M,X:L,y:afe,Y:ofe,Z:W_t,"%":ewt};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(ge,le){return function(Me){var ce=[],ze=-1,Ve=0,at=ge.length,tt,be,pe;for(Me instanceof Date||(Me=new Date(+Me));++ze<at;)ge.charCodeAt(ze)===37&&(ce.push(ge.slice(Ve,ze)),(be=sfe[tt=ge.charAt(++ze)])!=null?tt=ge.charAt(++ze):be=tt==="e"?" ":"0",(pe=le[tt])&&(tt=pe(Me,be)),ce.push(tt),Ve=ze+1);return ce.push(ge.slice(Ve,ze)),ce.join("")}}function x(ge,le){return function(Me){var ce=dT(1900,void 0,1),ze=C(ce,ge,Me+="",0),Ve,at;if(ze!=Me.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(le&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Ve=Hj(dT(ce.y,0,1)),at=Ve.getUTCDay(),Ve=at>4||at===0?W3.ceil(Ve):W3(Ve),Ve=w0.offset(Ve,(ce.V-1)*7),ce.y=Ve.getUTCFullYear(),ce.m=Ve.getUTCMonth(),ce.d=Ve.getUTCDate()+(ce.w+6)%7):(Ve=Vj(dT(ce.y,0,1)),at=Ve.getDay(),Ve=at>4||at===0?q3.ceil(Ve):q3(Ve),Ve=am.offset(Ve,(ce.V-1)*7),ce.y=Ve.getFullYear(),ce.m=Ve.getMonth(),ce.d=Ve.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),at="Z"in ce?Hj(dT(ce.y,0,1)).getUTCDay():Vj(dT(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(at+5)%7:ce.w+ce.U*7-(at+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,Hj(ce)):Vj(ce)}}function C(ge,le,Me,ce){for(var ze=0,Ve=le.length,at=Me.length,tt,be;ze<Ve;){if(ce>=at)return-1;if(tt=le.charCodeAt(ze++),tt===37){if(tt=le.charAt(ze++),be=E[tt in sfe?le.charAt(ze++):tt],!be||(ce=be(ge,Me,ce))<0)return-1}else if(tt!=Me.charCodeAt(ce++))return-1}return ce}function A(ge,le,Me){var ce=l.exec(le.slice(Me));return ce?(ge.p=c.get(ce[0].toLowerCase()),Me+ce[0].length):-1}function R(ge,le,Me){var ce=h.exec(le.slice(Me));return ce?(ge.w=p.get(ce[0].toLowerCase()),Me+ce[0].length):-1}function P(ge,le,Me){var ce=f.exec(le.slice(Me));return ce?(ge.w=d.get(ce[0].toLowerCase()),Me+ce[0].length):-1}function $(ge,le,Me){var ce=y.exec(le.slice(Me));return ce?(ge.m=v.get(ce[0].toLowerCase()),Me+ce[0].length):-1}function k(ge,le,Me){var ce=m.exec(le.slice(Me));return ce?(ge.m=g.get(ce[0].toLowerCase()),Me+ce[0].length):-1}function D(ge,le,Me){return C(ge,t,le,Me)}function M(ge,le,Me){return C(ge,n,le,Me)}function L(ge,le,Me){return C(ge,r,le,Me)}function B(ge){return o[ge.getDay()]}function U(ge){return s[ge.getDay()]}function V(ge){return u[ge.getMonth()]}function O(ge){return a[ge.getMonth()]}function z(ge){return i[+(ge.getHours()>=12)]}function W(ge){return 1+~~(ge.getMonth()/3)}function j(ge){return o[ge.getUTCDay()]}function H(ge){return s[ge.getUTCDay()]}function G(ge){return u[ge.getUTCMonth()]}function te(ge){return a[ge.getUTCMonth()]}function he(ge){return i[+(ge.getUTCHours()>=12)]}function fe(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var le=S(ge+="",b);return le.toString=function(){return ge},le},parse:function(ge){var le=x(ge+="",!1);return le.toString=function(){return ge},le},utcFormat:function(ge){var le=S(ge+="",w);return le.toString=function(){return ge},le},utcParse:function(ge){var le=x(ge+="",!0);return le.toString=function(){return ge},le}}}var sfe={"-":"",_:" ",0:"0"},po=/^\s*\d+/,F_t=/^%/,j_t=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function B_t(e){return e.replace(j_t,"\\$&")}function hT(e){return new RegExp("^(?:"+e.map(B_t).join("|")+")","i")}function pT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function U_t(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function z_t(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function V_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function H_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function q_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ofe(e,t,n){var r=po.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function afe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function W_t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function G_t(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Y_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ufe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function K_t(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lfe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function X_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Q_t(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function J_t(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Z_t(e,t,n){var r=po.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ewt(e,t,n){var r=F_t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function twt(e,t,n){var r=po.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function nwt(e,t,n){var r=po.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cfe(e,t){return mr(e.getDate(),t,2)}function rwt(e,t){return mr(e.getHours(),t,2)}function iwt(e,t){return mr(e.getHours()%12||12,t,2)}function swt(e,t){return mr(1+am.count(Nh(e),e),t,3)}function H2e(e,t){return mr(e.getMilliseconds(),t,3)}function owt(e,t){return H2e(e,t)+"000"}function awt(e,t){return mr(e.getMonth()+1,t,2)}function uwt(e,t){return mr(e.getMinutes(),t,2)}function lwt(e,t){return mr(e.getSeconds(),t,2)}function cwt(e){var t=e.getDay();return t===0?7:t}function fwt(e,t){return mr(Qx.count(Nh(e)-1,e),t,2)}function q2e(e){var t=e.getDay();return t>=4||t===0?IE(e):IE.ceil(e)}function dwt(e,t){return e=q2e(e),mr(IE.count(Nh(e),e)+(Nh(e).getDay()===4),t,2)}function hwt(e){return e.getDay()}function pwt(e,t){return mr(q3.count(Nh(e)-1,e),t,2)}function mwt(e,t){return mr(e.getFullYear()%100,t,2)}function gwt(e,t){return e=q2e(e),mr(e.getFullYear()%100,t,2)}function ywt(e,t){return mr(e.getFullYear()%1e4,t,4)}function vwt(e,t){var n=e.getDay();return e=n>=4||n===0?IE(e):IE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function bwt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function ffe(e,t){return mr(e.getUTCDate(),t,2)}function _wt(e,t){return mr(e.getUTCHours(),t,2)}function wwt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Ewt(e,t){return mr(1+w0.count(Ph(e),e),t,3)}function W2e(e,t){return mr(e.getUTCMilliseconds(),t,3)}function xwt(e,t){return W2e(e,t)+"000"}function Swt(e,t){return mr(e.getUTCMonth()+1,t,2)}function Twt(e,t){return mr(e.getUTCMinutes(),t,2)}function Cwt(e,t){return mr(e.getUTCSeconds(),t,2)}function Awt(e){var t=e.getUTCDay();return t===0?7:t}function Iwt(e,t){return mr(Jx.count(Ph(e)-1,e),t,2)}function G2e(e){var t=e.getUTCDay();return t>=4||t===0?kE(e):kE.ceil(e)}function kwt(e,t){return e=G2e(e),mr(kE.count(Ph(e),e)+(Ph(e).getUTCDay()===4),t,2)}function Rwt(e){return e.getUTCDay()}function Nwt(e,t){return mr(W3.count(Ph(e)-1,e),t,2)}function Pwt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function Owt(e,t){return e=G2e(e),mr(e.getUTCFullYear()%100,t,2)}function Dwt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function $wt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?kE(e):kE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function Mwt(){return"+0000"}function dfe(){return"%"}function hfe(e){return+e}function pfe(e){return Math.floor(+e/1e3)}var h_,BX,Y2e,j6,K2e;Lwt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lwt(e){return h_=V2e(e),BX=h_.format,Y2e=h_.parse,j6=h_.utcFormat,K2e=h_.utcParse,h_}function Fwt(e){return new Date(e)}function jwt(e){return e instanceof Date?+e:+new Date(+e)}function UX(e,t,n,r,i,s,o,a,u,l){var c=P2e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,jwt)):d().map(Fwt)},c.ticks=function(S){var x=d();return e(x[0],x[x.length-1],S??10)},c.tickFormat=function(S,x){return x==null?E:l(x)},c.nice=function(S){var x=d();return(!S||typeof S.range!="function")&&(S=t(x[0],x[x.length-1],S??10)),S?d($2e(x,S)):c},c.copy=function(){return mk(c,UX(e,t,n,r,i,s,o,a,u,l))},c}function X2e(){return hd.apply(UX(M_t,L_t,Nh,kA,Qx,am,L6,$6,Yp,BX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Bwt(){return hd.apply(UX(D_t,$_t,Ph,RA,Jx,w0,F6,M6,Yp,j6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B6(){var e=0,t=1,n,r,i,s,o=Lu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Km),l.rangeRound=c(ck),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Oy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zX(){var e=Tb(B6()(Lu));return e.copy=function(){return Oy(e,zX())},Py.apply(e,arguments)}function Q2e(){var e=$X(B6()).domain([1,10]);return e.copy=function(){return Oy(e,Q2e()).base(e.base())},Py.apply(e,arguments)}function J2e(){var e=MX(B6());return e.copy=function(){return Oy(e,J2e()).constant(e.constant())},Py.apply(e,arguments)}function VX(){var e=LX(B6());return e.copy=function(){return Oy(e,VX()).exponent(e.exponent())},Py.apply(e,arguments)}function Uwt(){return VX.apply(null,arguments).exponent(.5)}function U6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Lu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=gX(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Km),h.rangeRound=p(ck),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Z2e(){var e=Tb(U6()(Lu));return e.copy=function(){return Oy(e,Z2e())},Py.apply(e,arguments)}function eAe(){var e=$X(U6()).domain([.1,1,10]);return e.copy=function(){return Oy(e,eAe()).base(e.base())},Py.apply(e,arguments)}function tAe(){var e=MX(U6());return e.copy=function(){return Oy(e,tAe()).constant(e.constant())},Py.apply(e,arguments)}function HX(){var e=LX(U6());return e.copy=function(){return Oy(e,HX()).exponent(e.exponent())},Py.apply(e,arguments)}function zwt(){return HX.apply(null,arguments).exponent(.5)}function pd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Vwt=pd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Hwt=pd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),qwt=pd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Wwt=pd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Gwt=pd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ywt=pd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Kwt=pd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Xwt=pd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Qwt=pd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Jwt=pd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),nAe=pd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Tr(e){return function(){return e}}const mfe=Math.abs,na=Math.atan2,sv=Math.cos,Zwt=Math.max,qj=Math.min,Id=Math.sin,e1=Math.sqrt,ia=1e-12,RE=Math.PI,G3=RE/2,rAe=2*RE;function eEt(e){return e>1?0:e<-1?RE:Math.acos(e)}function gfe(e){return e>=1?G3:e<=-1?-G3:Math.asin(e)}function z6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wX(t)}function tEt(e){return e.innerRadius}function nEt(e){return e.outerRadius}function rEt(e){return e.startAngle}function iEt(e){return e.endAngle}function sEt(e){return e&&e.padAngle}function oEt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ia))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function BN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/e1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,x=(b<0?-1:1)*e1(Zwt(0,E*E*w-S*S)),C=(S*b-v*x)/w,A=(-S*v-b*x)/w,R=(S*b+v*x)/w,P=(-S*v+b*x)/w,$=C-g,k=A-y,D=R-g,M=P-y;return $*$+k*k>D*D+M*M&&(C=R,A=P),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function aEt(){var e=tEt,t=nEt,n=Tr(0),r=null,i=rEt,s=iEt,o=sEt,a=null,u=z6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-G3,m=s.apply(this,arguments)-G3,g=mfe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ia))a.moveTo(0,0);else if(g>rAe-ia)a.moveTo(h*sv(p),h*Id(p)),a.arc(0,0,h,p,m,!y),d>ia&&(a.moveTo(d*sv(m),d*Id(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,x=g,C=o.apply(this,arguments)/2,A=C>ia&&(r?+r.apply(this,arguments):e1(d*d+h*h)),R=qj(mfe(h-d)/2,+n.apply(this,arguments)),P=R,$=R,k,D;if(A>ia){var M=gfe(A/d*Id(C)),L=gfe(A/h*Id(C));(S-=M*2)>ia?(M*=y?1:-1,w+=M,E-=M):(S=0,w=E=(p+m)/2),(x-=L*2)>ia?(L*=y?1:-1,v+=L,b-=L):(x=0,v=b=(p+m)/2)}var B=h*sv(v),U=h*Id(v),V=d*sv(E),O=d*Id(E);if(R>ia){var z=h*sv(b),W=h*Id(b),j=d*sv(w),H=d*Id(w),G;if(g<RE)if(G=oEt(B,U,j,H,z,W,V,O)){var te=B-G[0],he=U-G[1],fe=z-G[0],ge=W-G[1],le=1/Id(eEt((te*fe+he*ge)/(e1(te*te+he*he)*e1(fe*fe+ge*ge)))/2),Me=e1(G[0]*G[0]+G[1]*G[1]);P=qj(R,(d-Me)/(le-1)),$=qj(R,(h-Me)/(le+1))}else P=$=0}x>ia?$>ia?(k=BN(j,H,B,U,h,$,y),D=BN(z,W,V,O,h,$,y),a.moveTo(k.cx+k.x01,k.cy+k.y01),$<R?a.arc(k.cx,k.cy,$,na(k.y01,k.x01),na(D.y01,D.x01),!y):(a.arc(k.cx,k.cy,$,na(k.y01,k.x01),na(k.y11,k.x11),!y),a.arc(0,0,h,na(k.cy+k.y11,k.cx+k.x11),na(D.cy+D.y11,D.cx+D.x11),!y),a.arc(D.cx,D.cy,$,na(D.y11,D.x11),na(D.y01,D.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>ia)||!(S>ia)?a.lineTo(V,O):P>ia?(k=BN(V,O,z,W,d,-P,y),D=BN(B,U,j,H,d,-P,y),a.lineTo(k.cx+k.x01,k.cy+k.y01),P<R?a.arc(k.cx,k.cy,P,na(k.y01,k.x01),na(D.y01,D.x01),!y):(a.arc(k.cx,k.cy,P,na(k.y01,k.x01),na(k.y11,k.x11),!y),a.arc(0,0,d,na(k.cy+k.y11,k.cx+k.x11),na(D.cy+D.y11,D.cx+D.x11),y),a.arc(D.cx,D.cy,P,na(D.y11,D.x11),na(D.y01,D.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-RE/2;return[sv(f)*c,Id(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Tr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Tr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Tr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Tr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Tr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Tr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Tr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function iAe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sAe(e){this._context=e}sAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qX(e){return new sAe(e)}function oAe(e){return e[0]}function aAe(e){return e[1]}function Y3(e,t){var n=Tr(!0),r=null,i=qX,s=null,o=z6(a);e=typeof e=="function"?e:e===void 0?oAe:Tr(e),t=typeof t=="function"?t:t===void 0?aAe:Tr(t);function a(u){var l,c=(u=iAe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Tr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Tr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Tr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function uAe(e,t,n){var r=null,i=Tr(!0),s=null,o=qX,a=null,u=z6(l);e=typeof e=="function"?e:e===void 0?oAe:Tr(+e),t=typeof t=="function"?t:Tr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aAe:Tr(+n);function l(f){var d,h,p,m=(f=iAe(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return Y3().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Tr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Tr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Tr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Tr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Tr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Tr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Tr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const uEt={draw(e,t){const n=e1(t/RE);e.moveTo(n,0),e.arc(0,0,n,0,rAe)}};function lEt(e,t){let n=null,r=z6(i);e=typeof e=="function"?e:Tr(e||uEt),t=typeof t=="function"?t:Tr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Tr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Tr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function V0(){}function K3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function V6(e){this._context=e}V6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dz(e){return new V6(e)}function lAe(e){this._context=e}lAe.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:K3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cEt(e){return new lAe(e)}function cAe(e){this._context=e}cAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:K3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fEt(e){return new cAe(e)}function fAe(e,t){this._basis=new V6(e),this._beta=t}fAe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const dEt=function e(t){function n(r){return t===1?new V6(r):new fAe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function X3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function WX(e,t){this._context=e,this._k=(1-t)/6}WX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:X3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hEt=function e(t){function n(r){return new WX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function GX(e,t){this._context=e,this._k=(1-t)/6}GX.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pEt=function e(t){function n(r){return new GX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function YX(e,t){this._context=e,this._k=(1-t)/6}YX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mEt=function e(t){function n(r){return new YX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function KX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ia){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ia){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function dAe(e,t){this._context=e,this._alpha=t}dAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gEt=function e(t){function n(r){return t?new dAe(r,t):new WX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hAe(e,t){this._context=e,this._alpha=t}hAe.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yEt=function e(t){function n(r){return t?new hAe(r,t):new GX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pAe(e,t){this._context=e,this._alpha=t}pAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vEt=function e(t){function n(r){return t?new pAe(r,t):new YX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mAe(e){this._context=e}mAe.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bEt(e){return new mAe(e)}function yfe(e){return e<0?-1:1}function vfe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(yfe(s)+yfe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function bfe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Wj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function Q3(e){this._context=e}Q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wj(this,this._t0,bfe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wj(this,bfe(this,n=vfe(this,e,t)),n);break;default:Wj(this,this._t0,n=vfe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function gAe(e){this._context=new yAe(e)}(gAe.prototype=Object.create(Q3.prototype)).point=function(e,t){Q3.prototype.point.call(this,t,e)};function yAe(e){this._context=e}yAe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function _Et(e){return new Q3(e)}function wEt(e){return new gAe(e)}function vAe(e){this._context=e}vAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=_fe(e),i=_fe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _fe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function EEt(e){return new vAe(e)}function H6(e,t){this._context=e,this._t=t}H6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xEt(e){return new H6(e,.5)}function SEt(e){return new H6(e,0)}function TEt(e){return new H6(e,1)}function oC(e,t,n){this.k=e,this.x=t,this.y=n}oC.prototype={constructor:oC,scale:function(e){return e===1?this:new oC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new oC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};oC.prototype;function gk({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:u=!1,columnList:l,setColumn:c,stringTicks:f=!1}){const d=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=I.useCallback(p=>(s?j6("%B"):Yx(".2s"))(p),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:_.jsx(Ja,{children:_.jsx(Kn,{gap:3,children:_.jsx(nt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>_.jsxs("g",{transform:`translate(${m}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-d/2,y:10,width:d,height:20,children:_.jsx(Ja,{children:_.jsx(Di,{withinPortal:!0,label:p,children:_.jsx(nt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:f?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const CEt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:gk},Symbol.toStringTag,{value:"Module"}));function q6({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>20?120:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ja,{children:_.jsx(Kn,{gap:3,children:_.jsx(nt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Kn,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(nt,{lineClamp:1,style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const AEt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:q6},Symbol.toStringTag,{value:"Module"})),vu={top:15,left:160,right:50,bottom:130};function $z({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=zf(),u=I.useMemo(()=>a-vu.left-vu.right,[a]),l=I.useMemo(()=>o-vu.top-vu.bottom,[o]),c=I.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),f=I.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return Xx(nAe).domain(g)},[r,n.category]),d=I.useMemo(()=>c?Rh([vu.left,u+vu.left]).domain([0,Nc(c.objects().map(g=>g.count))]).nice():null,[c,u]),h=I.useMemo(()=>c?O6([vu.top,l+vu.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,l,n.category]),p=I.useMemo(()=>!d||!h||!f||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:_.jsxs("g",{style:{cursor:"pointer"},children:[_.jsx("rect",{onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:vu.left,y:h(g[n.category]),fill:f(g[n.category]),height:h.bandwidth(),width:d(g.count)-vu.left},y),_.jsx("text",{x:d(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,f,r,n.category,n.ids,i,d,h]),m=I.useMemo(()=>!d||!h||!f||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:_.jsx("g",{style:{cursor:"pointer"},children:_.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:vu.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:d(g.count)-vu.left},y)},y)),[f,r,c,n.category,n.ids,i,d,h]);return h&&d?_.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(gk,{xScale:d,yRange:h.range(),vertPosition:l+vu.top,showLines:!1,label:"Count",ticks:d.ticks(5).map(g=>({value:g.toString(),offset:d(g)}))}),h?_.jsx(q6,{yScale:h,horizontalPosition:vu.left,xRange:d.range(),label:n.category,ticks:f.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):_.jsx(Ku,{})}const IEt=Object.freeze(Object.defineProperty({__proto__:null,Bar:$z,default:$z},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Ju(e){return e!=null?dr(e)?e:[e]:[]}function kEt(e=0,t=1/0){return`${wfe(e)} < row_number() && row_number() <= ${wfe(t)}`}function wfe(e){return e<0?`count() + ${e}`:e}class bAe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(kEt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ju(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Sn(e){throw Error(e)}function ru(e){return typeof e=="number"}function yi(e){return typeof e=="function"}function W6(e,t){const n=Array(e);if(yi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let REt=class extends bAe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Sn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Sn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Sn("Not implemented")}getter(t){Sn("Not implemented")}objects(t){Sn("Not implemented")}object(t){Sn("Not implemented")}[Symbol.iterator](){Sn("Not implemented")}print(t={}){ru(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=W6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},NEt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},PEt=function(e){return e&&yi(e.get)?e:new NEt(e)};function Im(e){return e instanceof Date}function xa(e){return e===Object(e)}function J3(e){return e instanceof RegExp}function zo(e){return typeof e=="string"}function OEt(e,t){const n=r=>Sn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Efe(e.entries(),t):Im(e)?n("Date"):J3(e)?n("RegExp"):zo(e)?n():dr(e)?DEt(e,t):yi(e[Symbol.iterator])?$Et(e,t):xa(e)?Efe(Object.entries(e),t):n()}function Efe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function DEt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function $Et(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:MEt}=Object.prototype;function ed(e,t){return MEt.call(e,t)}function Zl(e){return e?new xfe({...e.data()},e.columnNames()):new xfe}class xfe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return ed(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ur=void 0,LEt=Object.getPrototypeOf(Int8Array);function yk(e){return e instanceof LEt}function t1(e){return dr(e)||yk(e)}function Mf(e){return e!=null&&e===e}const mT=e=>t1(e)||zo(e),FEt={compact:e=>t1(e)?e.filter(t=>Mf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>mT(e)?e.includes(t,n):!1,indexof:(e,t)=>mT(e)?e.indexOf(t):-1,join:(e,t)=>t1(e)?e.join(t):ur,lastindexof:(e,t)=>mT(e)?e.lastIndexOf(t):-1,length:e=>mT(e)?e.length:0,pluck:(e,t)=>t1(e)?e.map(n=>Mf(n)?n[t]:ur):ur,reverse:e=>t1(e)?e.slice().reverse():zo(e)?e.split("").reverse().join(""):ur,slice:(e,t,n)=>mT(e)?e.slice(t,n):ur};function jEt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function vO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const kd=e=>(e<10?"0":"")+e,BEt=e=>e<0?"-"+vO(-e,6):e>9999?"+"+vO(e,6):vO(e,4);function _Ae(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return BEt(e)+"-"+kd(t+1)+"-"+kd(n)+(!u||o?"T"+kd(r)+":"+kd(i)+":"+kd(s)+"."+vO(o,3)+l:s?"T"+kd(r)+":"+kd(i)+":"+kd(s)+l:i||r||!a?"T"+kd(r)+":"+kd(i)+l:"")}function wAe(e,t){return isNaN(e)?"Invalid Date":_Ae(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function G6(e,t){return isNaN(e)?"Invalid Date":_Ae(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const UEt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function zEt(e){return e.match(UEt)&&!isNaN(Date.parse(e))}function VEt(e,t=Date.parse){return zEt(e)?t(e):e}const EAe=6e4,xAe=864e5,SAe=6048e5,Yi=new Date,Ki=new Date,os=e=>(Yi.setTime(typeof e=="string"?VEt(e):e),Yi);function HEt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function qEt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function WEt(e){Ki.setTime(+e),Ki.setHours(0,0,0,0),Yi.setTime(+Ki),Yi.setMonth(0),Yi.setDate(1);const t=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*EAe;return Math.floor(1+(Ki-Yi-t)/xAe)}function GEt(e){Ki.setTime(+e),Ki.setUTCHours(0,0,0,0);const t=Date.UTC(Ki.getUTCFullYear(),0,1);return Math.floor(1+(Ki-t)/xAe)}function YEt(e,t){const n=t||0;Ki.setTime(+e),Ki.setDate(Ki.getDate()-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0),Yi.setTime(+e),Yi.setMonth(0),Yi.setDate(1),Yi.setDate(1-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0);const r=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*EAe;return Math.floor((1+(Ki-Yi)-r)/SAe)}function KEt(e,t){const n=t||0;return Ki.setTime(+e),Ki.setUTCDate(Ki.getUTCDate()-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Yi.setTime(+e),Yi.setUTCMonth(0),Yi.setUTCDate(1),Yi.setUTCDate(1-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Math.floor((1+(Ki-Yi))/SAe)}const XEt={format_date:(e,t)=>wAe(os(e),!t),format_utcdate:(e,t)=>G6(os(e),!t),timestamp:e=>+os(e),year:e=>os(e).getFullYear(),quarter:e=>Math.floor(os(e).getMonth()/3),month:e=>os(e).getMonth(),date:e=>os(e).getDate(),dayofweek:e=>os(e).getDay(),hours:e=>os(e).getHours(),minutes:e=>os(e).getMinutes(),seconds:e=>os(e).getSeconds(),milliseconds:e=>os(e).getMilliseconds(),utcyear:e=>os(e).getUTCFullYear(),utcquarter:e=>Math.floor(os(e).getUTCMonth()/3),utcmonth:e=>os(e).getUTCMonth(),utcdate:e=>os(e).getUTCDate(),utcdayofweek:e=>os(e).getUTCDay(),utchours:e=>os(e).getUTCHours(),utcminutes:e=>os(e).getUTCMinutes(),utcseconds:e=>os(e).getUTCSeconds(),utcmilliseconds:e=>os(e).getUTCMilliseconds(),datetime:HEt,dayofyear:WEt,week:YEt,utcdatetime:qEt,utcdayofyear:GEt,utcweek:KEt,now:Date.now};function XX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Im(e)||Im(t)?+e==+t:J3(e)&&J3(t)?e+""==t+"":xa(e)&&xa(t)?QEt(e,t):!1}function QEt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Sfe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Sfe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!XX(e[o],t[o]))return!1}return!0}function Sfe(e,t,n=XX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const JEt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let ZEt=Math.random;function Zx(){return ZEt()}const ext={random:Zx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function QX(e){return e instanceof Map}function txt(e){return e instanceof Set}function bO(e){return QX(e)||txt(e)}function Gj(e){return Array.from(e)}const nxt={has:(e,t)=>bO(e)?e.has(t):e!=null?ed(e,t):!1,keys:e=>QX(e)?Gj(e.keys()):e!=null?Object.keys(e):[],values:e=>bO(e)?Gj(e.values()):e!=null?Object.values(e):[],entries:e=>bO(e)?Gj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ur};function rxt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(ed(t,e))return t[e];return n!==void 0?n:e}function ixt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const sxt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},uw={bin:jEt,equal:XX,recode:rxt,sequence:ixt,...FEt,...XEt,...JEt,...ext,...nxt,...sxt};function NA(e){return typeof e=="bigint"}function Oh(e){return e===void 0?e+"":NA(e)?e+"n":JSON.stringify(e)}function yn(e,t=[],n=[]){return new oxt(e,Ju(t),Ju(n))}let oxt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Oh(n)}]`),...this.params.map(Oh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const TAe=e=>yn("any",e),CAe=()=>yn("count"),AAe=e=>yn("array_agg",e),IAe=e=>yn("array_agg_distinct",e),kAe=(e,t)=>yn("map_agg",[e,t]),RAe=(e,t)=>yn("object_agg",[e,t]),NAe=(e,t)=>yn("entries_agg",[e,t]),w2={...uw,row_object:(...e)=>yn("row_object",null,e.flat()),count:CAe,any:TAe,array_agg:AAe,array_agg_distinct:IAe,object_agg:RAe,map_agg:kAe,entries_agg:NAe,valid:e=>yn("valid",e),invalid:e=>yn("invalid",e),distinct:e=>yn("distinct",e),mode:e=>yn("mode",e),sum:e=>yn("sum",e),product:e=>yn("product",e),mean:e=>yn("mean",e),average:e=>yn("average",e),variance:e=>yn("variance",e),variancep:e=>yn("variancep",e),stdev:e=>yn("stdev",e),stdevp:e=>yn("stdevp",e),min:e=>yn("min",e),max:e=>yn("max",e),quantile:(e,t)=>yn("quantile",e,t),median:e=>yn("median",e),covariance:(e,t)=>yn("covariance",[e,t]),covariancep:(e,t)=>yn("covariancep",[e,t]),corr:(e,t)=>yn("corr",[e,t]),bins:(e,t,n,r)=>yn("bins",e,[t,n,r]),row_number:()=>yn("row_number"),rank:()=>yn("rank"),avg_rank:()=>yn("avg_rank"),dense_rank:()=>yn("dense_rank"),percent_rank:()=>yn("percent_rank"),cume_dist:()=>yn("cume_dist"),ntile:e=>yn("ntile",null,e),lag:(e,t,n)=>yn("lag",e,[t,n]),lead:(e,t,n)=>yn("lead",e,[t,n]),first_value:e=>yn("first_value",e),last_value:e=>yn("last_value",e),nth_value:(e,t)=>yn("nth_value",e,t),fill_down:(e,t)=>yn("fill_down",e,t),fill_up:(e,t)=>yn("fill_up",e,t)};function axt(e,t){e=bO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function uxt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function lxt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function cxt(e,t,n,r){const i=r==="map"||r===!0?kAe:r==="entries"?NAe:r==="object"?RAe:Sn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=axt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:AAe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const fxt="ArrayPattern",dxt="ArrowFunctionExpression",hxt="FunctionExpression",E0="Identifier",eS="Literal",PAe="MemberExpression",pxt="ObjectExpression",OAe="ObjectPattern",DAe="Property",vk="Column",mxt="Constant",gxt="Dictionary",yxt="Function",vxt="Parameter",$Ae="Op",ei=(e,t)=>{const n=bxt[e.type];return n?n(e,t):Sn(`Unsupported expression construct: ${e.type}`)},Yj=(e,t)=>"("+ei(e.left,t)+" "+e.operator+" "+ei(e.right,t)+")",Kj=(e,t)=>"("+jd(e.params,t)+")=>"+ei(e.body,t),Tfe=(e,t)=>ei(e.callee,t)+"("+jd(e.arguments,t)+")",jd=(e,t,n=",")=>e.map(r=>ei(r,t)).join(n),MAe=e=>e.computed?`[${Oh(e.name)}]`:`.${e.name}`,Cfe=(e,t,n)=>{const r=e.table||"";return`data${r}${MAe(e)}.${n}(${t.index}${r})`},bxt={Constant:e=>e.raw,Column:(e,t)=>Cfe(e,t,"get"),Dictionary:(e,t)=>Cfe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${MAe(e)}`,Op:(e,t)=>`op(${Oh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ei(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ei(e.object,t),i=ei(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Tfe,NewExpression:(e,t)=>"new "+Tfe(e,t),ArrayExpression:(e,t)=>"["+jd(e.elements,t)+"]",AssignmentExpression:Yj,BinaryExpression:Yj,LogicalExpression:Yj,UnaryExpression:(e,t)=>"("+e.operator+ei(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ei(e.test,t)+"?"+ei(e.consequent,t)+":"+ei(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+jd(e.properties,t)+"})",Property:(e,t)=>{const n=ei(e.key,t);return(e.computed?`[${n}]`:n)+":"+ei(e.value,t)},ArrowFunctionExpression:Kj,FunctionExpression:Kj,FunctionDeclaration:Kj,ArrayPattern:(e,t)=>"["+jd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+jd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+jd(e.declarations,t,","),VariableDeclarator:(e,t)=>ei(e.id,t)+"="+ei(e.init,t),SpreadElement:(e,t)=>"..."+ei(e.argument,t),BlockStatement:(e,t)=>"{"+jd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ei(e.expression,t),IfStatement:(e,t)=>"if ("+ei(e.test,t)+")"+ei(e.consequent,t)+(e.alternate?" else "+ei(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ei(e.discriminant,t)+") {"+jd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ei(e.test,t):"default")+": "+jd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ei(e.argument,t),Program:(e,t)=>ei(e.body[0],t)};function Z3(e,t={index:"row"}){return ei(e,t)}function _xt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function NE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Im(e)?+e:dr(e)||yk(e)?`[${e.map(NE)}]`:J3(e)?e+"":wxt(e)}function wxt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${NE(e[r])}`;return t+="}",t}function e$(e,t){const n=e.length;return n===1?(r,i)=>NE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=NE(a)}return s}}function Ext(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=NE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=NE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Dp(){}function xxt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Cs(e){return e.init=e.init||Dp,e.add=e.add||Dp,e.rem=e.rem||Dp,e}function Afe(e,t){return e.product_v=!1,e.product=t}const LAe={count:{create:()=>Cs({value:e=>e.count}),param:[]},array_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ur}),param:[1]},valid:{create:()=>Cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Ext(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Cs({value:e=>{let t=ur,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ur,add:(e,t)=>NA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Afe(e,1),value:e=>e.valid?e.product_v?Afe(e,xxt(e.list.values())):e.product:void 0,add:(e,t)=>NA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ur,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Cs({value:e=>e.valid?e.mean:ur}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ur,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Cs({value:e=>e.valid>1?e.dev/e.valid:ur}),param:[1],req:["variance"]},stdev:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ur}),param:[1],req:["variance"]},stdevp:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ur}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ur,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ur)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ur,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ur)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ur,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Cs({value:e=>e.valid>1?e.cov/e.valid:ur}),param:[2],req:["covariance"]},corr:{create:()=>Cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ur}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Cs({value:i=>_xt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ife={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},kfe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},FAe={row_number:{create(){return{init:Dp,value:e=>e.index+1}},param:[]},rank:Ife,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ife.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:kfe,ntile:{create(e){e=+e,e>0||Sn("ntile num must be greater than zero.");const{init:t,value:n}=kfe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ur){return e=+e||1,{init:Dp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ur){return e=+e||1,{init:Dp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Dp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Dp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Sn("nth_value nth must be greater than zero."),{init:Dp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ur}}},param:[1,1]},fill_down:{create(e=ur){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Mf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ur){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Sxt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Sxt(e,t,n){for(const r=e.size;n<r;++n)if(Mf(e.value(n,t)))return n;return-1}function JX(e){return ed(LAe,e)}function ZX(e){return ed(FAe,e)}function jAe(e){return ed(uw,e)||e==="row_object"}function BAe(e){return JX(e)&&LAe[e]}function UAe(e){return ZX(e)&&FAe[e]}function gT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const eQ={escape:(e,t,n)=>gT(e,t,n),expr:(e,t)=>gT(`(row,data,op)=>${e}`,uw,t),expr2:(e,t)=>gT(`(row0,data0,row,data)=>${e}`,uw,t),join:(e,t)=>gT(`(row1,data1,row2,data2)=>${e}`,uw,t),param:(e,t)=>gT(e,uw,t)},Txt={"==":1,"!=":1,"===":1,"!==":1};function zAe(e,t,n=0,r,i){if(e.type=vk,e.name=t,e.table=n,i&&r&&yi(r.keyFor)){const s=Txt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===eS&&Cxt(i,e,s,r.keyFor(s.value))}return e}function Cxt(e,t,n,r){return r<0?(e.type=eS,e.value=!1,e.raw="false"):(t.type=gxt,n.value=r,n.raw=r+""),!0}function Y6(e){return dr(e)?e:QX(e)?e.entries():e?Object.entries(e):[]}const VAe="row_object";function HAe(e,t){e.type=pxt;const n=e.properties=[];for(const r of Y6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:DAe,key:{type:eS,raw:Oh(s)},value:zAe({computed:!0},i)})}return e}function qAe(e){return Z3(HAe({},e))}function WAe(e){return eQ.expr(qAe(e))}const Axt=new TextDecoder("utf-8"),Mz=e=>Axt.decode(e),Ixt=new TextEncoder,K6=e=>Ixt.encode(e),kxt=e=>typeof e=="boolean",Tu=e=>typeof e=="function",Dy=e=>e!=null&&Object(e)===e,X6=e=>Dy(e)&&Tu(e.then),tQ=e=>Dy(e)&&Tu(e[Symbol.iterator]),Q6=e=>Dy(e)&&Tu(e[Symbol.asyncIterator]),Rxt=e=>Dy(e)&&"done"in e&&"value"in e,GAe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Nxt=e=>Dy(e)&&Tu(e.abort)&&Tu(e.getWriter)&&!GAe(e),Pxt=e=>Dy(e)&&Tu(e.end)&&Tu(e.write)&&kxt(e.writable)&&!GAe(e),Oxt=e=>Dy(e)&&Tu(e.clear)&&Tu(e.bytes)&&Tu(e.position)&&Tu(e.setPosition)&&Tu(e.capacity)&&Tu(e.getBufferIdentifier)&&Tu(e.createLong),nQ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Dxt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function Lz(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Dh(e,t){const n=Dxt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?Lz(o,s,a):o=s;break}Lz(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Is(e,t){let n=Rxt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=K6(n)),n instanceof ArrayBuffer?new e(n):n instanceof nQ?new e(n):Oxt(n)?Is(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const yT=e=>Is(Int32Array,e),Rfe=e=>Is(BigInt64Array,e),er=e=>Is(Uint8Array,e),Fz=e=>(e.next(),e);function*$xt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nQ?n(t):tQ(t)?t:n(t);return yield*Fz(function*(i){let s=null;do s=i.next(yield Is(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Mxt=e=>$xt(Uint8Array,e);function YAe(e,t){return Yv(this,arguments,function*(){if(X6(t))return yield Gn(yield Gn(yield*b8(XC(YAe(e,yield Gn(t))))));const r=function(o){return Yv(this,arguments,function*(){yield yield Gn(yield Gn(o))})},i=function(o){return Yv(this,arguments,function*(){yield Gn(yield*b8(XC(Fz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nQ?r(t):tQ(t)?i(t):Q6(t)?t:r(t);return yield Gn(yield*b8(XC(Fz(function(o){return Yv(this,arguments,function*(){let a=null;do a=yield Gn(o.next(yield yield Gn(Is(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gn(new e)})}const Lxt=e=>YAe(Uint8Array,e);function KAe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Fxt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Nfe={fromIterable(e){return UN(jxt(e))},fromAsyncIterable(e){return UN(Bxt(e))},fromDOMStream(e){return UN(Uxt(e))},fromNodeStream(e){return UN(Vxt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},UN=e=>(e.next(),e);function*jxt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Dh(r,o)[0]:([i,r,a]=Dh(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const l=Mxt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Bxt(e){return Yv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Dh(i,a)[0]:([s,i,u]=Dh(i,a),s)}({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0});const c=Lxt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.next()):yield Gn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gn(c.return(new Uint8Array(0))))}return yield Gn(null)})}function Uxt(e){return Yv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Dh(i,a)[0]:([s,i,u]=Dh(i,a),s)}({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0});const c=new zxt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.read()):yield Gn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(er(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gn(c.cancel(f)))}finally{r===!1?yield Gn(c.cancel()):e.locked&&c.releaseLock()}return yield Gn(null)})}class zxt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Mp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Mp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=er(n)),n})}}const Xj=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Vxt(e){return Yv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Dh(l,a)[0]:([c,l,u]=Dh(l,a),c)}if({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0},e.isTTY)return yield yield Gn(new Uint8Array(0)),yield Gn(null);try{n[0]=Xj(e,"end"),n[1]=Xj(e,"error");do{if(n[2]=Xj(e,"readable"),[r,s]=yield Gn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=er(e.read(a-u)),c.byteLength<a-u&&(c=er(e.read()))):c=er(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gn(f()));while(a<u)}while(!i)}finally{yield Gn(d(n,r==="error"?s:null))}return yield Gn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Os;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Os||(Os={}));var iu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(iu||(iu={}));var Us;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Us||(Us={}));var Uc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Uc||(Uc={}));var jt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jt||(jt={}));var zc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zc||(zc={}));const Qj=2,Jd=4,jp=4,Ir=4,Pg=new Int32Array(2),Pfe=new Float32Array(Pg.buffer),Ofe=new Float64Array(Pg.buffer),zN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var jz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(jz||(jz={}));let t$=class XAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new XAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Pg[0]=this.readInt32(t),Pfe[0]}readFloat64(t){return Pg[zN?0:1]=this.readInt32(t),Pg[zN?1:0]=this.readInt32(t+4),Ofe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Pfe[0]=n,this.writeInt32(t,Pg[0])}writeFloat64(t,n){Ofe[0]=n,this.writeInt32(t,Pg[zN?0:1]),this.writeInt32(t+4,Pg[zN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Jd+jp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<jp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Jd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Jd;const i=this.bytes_.subarray(t,t+r);return n===jz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Jd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=jp)throw new Error("FlatBuffers: file identifier must be length "+jp);for(let n=0;n<jp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Jd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},QAe=class JAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=t$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=JAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=t$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Jd,0),this.writeInt32(this.offset()-t+Jd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Qj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=Qj;l<s;l+=Qj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ir:0;if(n){const s=n;if(this.prep(this.minalign,Jd+jp+i),s.length!=jp)throw new TypeError("FlatBuffers: file identifier must be length "+jp);for(let o=jp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Jd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Jd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var n$;(function(e){e[e.BUFFER=0]="BUFFER"})(n$||(n$={}));var r$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(r$||(r$={}));class Og{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Og).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ir),(n||new Og).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):r$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):n$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,r$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,n$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Og.startBodyCompression(t),Og.addCodec(t,n),Og.addMethod(t,r),Og.endBodyCompression(t)}}let ZAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},eIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},kp=class Bz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Bz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ir),(n||new Bz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new eIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ZAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Og).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},O_=class Uz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Uz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ir),(n||new Uz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new kp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var PE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(PE||(PE={}));var i$;(function(e){e[e.DenseArray=0]="DenseArray"})(i$||(i$={}));class wl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new wl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ir),(n||new wl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return wl.startInt(t),wl.addBitWidth(t,n),wl.addIsSigned(t,r),wl.endInt(t)}}class Bp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ir),(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):i$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,i$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ir),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}let Dfe=class aC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new aC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ir),(n||new aC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return aC.startBinary(t),aC.endBinary(t)}},$fe=class uC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new uC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ir),(n||new uC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return uC.startBool(t),uC.endBool(t)}},_O=class D_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ir),(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Uc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return D_.startDate(t),D_.addUnit(t,n),D_.endDate(t)}},$_=class Sg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Sg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ir),(n||new Sg).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Sg.startDecimal(t),Sg.addPrecision(t,n),Sg.addScale(t,r),Sg.addBitWidth(t,i),Sg.endDecimal(t)}},wO=class M_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Ir),(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,jt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return M_.startDuration(t),M_.addUnit(t,n),M_.endDuration(t)}},EO=class L_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ir),(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return L_.startFixedSizeBinary(t),L_.addByteWidth(t,n),L_.endFixedSizeBinary(t)}},xO=class F_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new F_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ir),(n||new F_).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return F_.startFixedSizeList(t),F_.addListSize(t,n),F_.endFixedSizeList(t)}};class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ir),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Us.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Us.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Zd.startFloatingPoint(t),Zd.addPrecision(t,n),Zd.endFloatingPoint(t)}}class eh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new eh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ir),(n||new eh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,zc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return eh.startInterval(t),eh.addUnit(t,n),eh.endInterval(t)}}let Mfe=class lC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new lC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Ir),(n||new lC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return lC.startLargeBinary(t),lC.endLargeBinary(t)}},Lfe=class cC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new cC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Ir),(n||new cC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return cC.startLargeUtf8(t),cC.endLargeUtf8(t)}},Ffe=class fC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new fC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ir),(n||new fC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return fC.startList(t),fC.endList(t)}},SO=class j_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new j_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ir),(n||new j_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return j_.startMap(t),j_.addKeysSorted(t,n),j_.endMap(t)}},jfe=class dC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new dC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ir),(n||new dC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return dC.startNull(t),dC.endNull(t)}};class n1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ir),(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return n1.startStruct_(t),n1.endStruct_(t)}}let hC=class Ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ir),(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Ev.startTime(t),Ev.addUnit(t,n),Ev.addBitWidth(t,r),Ev.endTime(t)}},pC=class xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ir),(n||new xv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return xv.startTimestamp(t),xv.addUnit(t,n),xv.addTimezone(t,r),xv.endTimestamp(t)}},Sv=class Tv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Tv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ir),(n||new Tv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):iu.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,iu.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Tv.startUnion(t),Tv.addMode(t,n),Tv.addTypeIds(t,r),Tv.endUnion(t)}},Bfe=class mC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new mC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ir),(n||new mC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return mC.startUtf8(t),mC.endUtf8(t)}};var Zr;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Zr||(Zr={}));let ac=class TO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new TO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ir),(n||new TO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Zr.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new TO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Zr.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Bd=class Ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ir),(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ac).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,PE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Ap.startSchema(t),Ap.addEndianness(t,n),Ap.addFields(t,r),Ap.addCustomMetadata(t,i),Ap.addFeatures(t,s),Ap.endSchema(t)}};var _s;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(_s||(_s={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Rp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Rp||(Rp={}));const Hxt=void 0;function B1(e){if(e===null)return"null";if(e===Hxt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>B1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const qxt=Symbol.for("isArrowBigNum");function md(e,...t){return t.length===0?Object.setPrototypeOf(Is(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}md.prototype[qxt]=!0;md.prototype.toJSON=function(){return`"${OA(this)}"`};md.prototype.valueOf=function(){return tIe(this)};md.prototype.toString=function(){return OA(this)};md.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return tIe(this);case"string":return OA(this);case"default":return Wxt(this)}return OA(this)};function Mw(...e){return md.apply(this,e)}function Lw(...e){return md.apply(this,e)}function PA(...e){return md.apply(this,e)}Object.setPrototypeOf(Mw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(PA.prototype,Object.create(Uint32Array.prototype));Object.assign(Mw.prototype,md.prototype,{constructor:Mw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Lw.prototype,md.prototype,{constructor:Lw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(PA.prototype,md.prototype,{constructor:PA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function tIe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const OA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Jj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Jj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${Jj(t)}`},Wxt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:OA(e);function Jj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class rQ{static new(t,n){switch(n){case!0:return new Mw(t);case!1:return new Lw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Mw(t)}return t.byteLength===16?new PA(t):new Lw(t)}static signed(t){return new Mw(t)}static unsigned(t){return new Lw(t)}static decimal(t){return new PA(t)}constructor(t,n){return rQ.new(t,n)}}function jo(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var nIe,rIe,iIe,sIe,oIe,aIe,uIe,lIe,cIe,fIe,dIe,hIe,pIe,mIe,gIe,yIe,vIe,bIe,_Ie,wIe,EIe,xIe;class fn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===re.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===re.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return fn.isUnion(t)&&t.mode===iu.Dense}static isSparseUnion(t){return fn.isUnion(t)&&t.mode===iu.Sparse}constructor(t){this.typeId=t}}nIe=Symbol.toStringTag;fn[nIe]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(fn.prototype);class km extends fn{constructor(){super(re.Null)}toString(){return"Null"}}rIe=Symbol.toStringTag;km[rIe]=(e=>e[Symbol.toStringTag]="Null")(km.prototype);class su extends fn{constructor(t,n){super(re.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}iIe=Symbol.toStringTag;su[iIe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(su.prototype);class iQ extends su{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class sQ extends su{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class H0 extends su{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class oQ extends su{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class aQ extends su{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class uQ extends su{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class lQ extends su{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class cQ extends su{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(iQ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(sQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(H0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(oQ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(aQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(uQ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(lQ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(cQ.prototype,"ArrayType",{value:BigUint64Array});class q0 extends fn{constructor(t){super(re.Float),this.precision=t}get ArrayType(){switch(this.precision){case Us.HALF:return Uint16Array;case Us.SINGLE:return Float32Array;case Us.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sIe=Symbol.toStringTag;q0[sIe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(q0.prototype);class SIe extends q0{constructor(){super(Us.HALF)}}class fQ extends q0{constructor(){super(Us.SINGLE)}}class dQ extends q0{constructor(){super(Us.DOUBLE)}}Object.defineProperty(SIe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(fQ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(dQ.prototype,"ArrayType",{value:Float64Array});class DA extends fn{constructor(){super(re.Binary)}toString(){return"Binary"}}oIe=Symbol.toStringTag;DA[oIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(DA.prototype);class s$ extends fn{constructor(){super(re.LargeBinary)}toString(){return"LargeBinary"}}aIe=Symbol.toStringTag;s$[aIe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(s$.prototype);class OE extends fn{constructor(){super(re.Utf8)}toString(){return"Utf8"}}uIe=Symbol.toStringTag;OE[uIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(OE.prototype);class o$ extends fn{constructor(){super(re.LargeUtf8)}toString(){return"LargeUtf8"}}lIe=Symbol.toStringTag;o$[lIe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(o$.prototype);class $A extends fn{constructor(){super(re.Bool)}toString(){return"Bool"}}cIe=Symbol.toStringTag;$A[cIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))($A.prototype);class a$ extends fn{constructor(t,n,r=128){super(re.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}fIe=Symbol.toStringTag;a$[fIe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(a$.prototype);class DE extends fn{constructor(t){super(re.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Uc[this.unit]}>`}}dIe=Symbol.toStringTag;DE[dIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(DE.prototype);class Gxt extends DE{constructor(){super(Uc.DAY)}}class Yxt extends DE{constructor(){super(Uc.MILLISECOND)}}class Rm extends fn{constructor(t,n){super(re.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${jt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}hIe=Symbol.toStringTag;Rm[hIe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Rm.prototype);class Kxt extends Rm{constructor(){super(jt.SECOND,32)}}class Xxt extends Rm{constructor(){super(jt.MILLISECOND,32)}}class Qxt extends Rm{constructor(){super(jt.MICROSECOND,64)}}class Jxt extends Rm{constructor(){super(jt.NANOSECOND,64)}}class u$ extends fn{constructor(t,n){super(re.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${jt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}pIe=Symbol.toStringTag;u$[pIe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(u$.prototype);class $E extends fn{constructor(t){super(re.Interval),this.unit=t}toString(){return`Interval<${zc[this.unit]}>`}}mIe=Symbol.toStringTag;$E[mIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))($E.prototype);class Zxt extends $E{constructor(){super(zc.DAY_TIME)}}class eSt extends $E{constructor(){super(zc.YEAR_MONTH)}}class l$ extends fn{constructor(t){super(re.Duration),this.unit=t}toString(){return`Duration<${jt[this.unit]}>`}}gIe=Symbol.toStringTag;l$[gIe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(l$.prototype);class ME extends fn{constructor(t){super(re.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}yIe=Symbol.toStringTag;ME[yIe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ME.prototype);class ha extends fn{constructor(t){super(re.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}vIe=Symbol.toStringTag;ha[vIe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ha.prototype);class MA extends fn{constructor(t,n,r){super(re.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}bIe=Symbol.toStringTag;MA[bIe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(MA.prototype);class c$ extends fn{constructor(t){super(re.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}_Ie=Symbol.toStringTag;c$[_Ie]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(c$.prototype);class LE extends fn{constructor(t,n){super(re.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}wIe=Symbol.toStringTag;LE[wIe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(LE.prototype);class LA extends fn{constructor(t,n=!1){var r,i,s;if(super(re.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}EIe=Symbol.toStringTag;LA[EIe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(LA.prototype);const tSt=(e=>()=>++e)(-1);class W0 extends fn{constructor(t,n,r,i){super(re.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?tSt():jo(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}xIe=Symbol.toStringTag;W0[xIe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(W0.prototype);function zd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class kn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return nSt(this,t,n)}getVisitFnByTypeId(t,n=!0){return B_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function nSt(e,t,n=!0){return typeof t=="number"?B_(e,t,n):typeof t=="string"&&t in re?B_(e,re[t],n):t&&t instanceof fn?B_(e,Ufe(t),n):t!=null&&t.type&&t.type instanceof fn?B_(e,Ufe(t.type),n):B_(e,re.NONE,n)}function B_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.LargeUtf8:r=e.visitLargeUtf8;break;case re.Binary:r=e.visitBinary;break;case re.LargeBinary:r=e.visitLargeBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Ufe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Us.HALF:return re.Float16;case Us.SINGLE:return re.Float32;case Us.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.LargeBinary:return re.LargeBinary;case re.Utf8:return re.Utf8;case re.LargeUtf8:return re.LargeUtf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jt.SECOND:return re.TimeSecond;case jt.MILLISECOND:return re.TimeMillisecond;case jt.MICROSECOND:return re.TimeMicrosecond;case jt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jt.SECOND:return re.TimestampSecond;case jt.MILLISECOND:return re.TimestampMillisecond;case jt.MICROSECOND:return re.TimestampMicrosecond;case jt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Uc.DAY:return re.DateDay;case Uc.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case zc.DAY_TIME:return re.IntervalDayTime;case zc.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case jt.SECOND:return re.DurationSecond;case jt.MILLISECOND:return re.DurationMillisecond;case jt.MICROSECOND:return re.DurationMicrosecond;case jt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case iu.Dense:return re.DenseUnion;case iu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}kn.prototype.visitInt8=null;kn.prototype.visitInt16=null;kn.prototype.visitInt32=null;kn.prototype.visitInt64=null;kn.prototype.visitUint8=null;kn.prototype.visitUint16=null;kn.prototype.visitUint32=null;kn.prototype.visitUint64=null;kn.prototype.visitFloat16=null;kn.prototype.visitFloat32=null;kn.prototype.visitFloat64=null;kn.prototype.visitDateDay=null;kn.prototype.visitDateMillisecond=null;kn.prototype.visitTimestampSecond=null;kn.prototype.visitTimestampMillisecond=null;kn.prototype.visitTimestampMicrosecond=null;kn.prototype.visitTimestampNanosecond=null;kn.prototype.visitTimeSecond=null;kn.prototype.visitTimeMillisecond=null;kn.prototype.visitTimeMicrosecond=null;kn.prototype.visitTimeNanosecond=null;kn.prototype.visitDenseUnion=null;kn.prototype.visitSparseUnion=null;kn.prototype.visitIntervalDayTime=null;kn.prototype.visitIntervalYearMonth=null;kn.prototype.visitDuration=null;kn.prototype.visitDurationSecond=null;kn.prototype.visitDurationMillisecond=null;kn.prototype.visitDurationMicrosecond=null;kn.prototype.visitDurationNanosecond=null;const TIe=new Float64Array(1),p_=new Uint32Array(TIe.buffer);function CIe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function AIe(e){if(e!==e)return 32256;TIe[0]=e;const t=(p_[1]&2147483648)>>16&65535;let n=p_[1]&2146435072,r=0;return n>=1089470464?p_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(p_[1]&1048575)>>10):n<=1056964608?(r=1048576+(p_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(p_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends kn{}function en(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const rSt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},hQ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},iSt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},sSt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},IIe=(e,t,n,r)=>{if(n+1<t.length){const i=jo(t[n]),s=jo(t[n+1]);e.set(r.subarray(0,s-i),i)}},oSt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Xm=({values:e},t,n)=>{e[t]=n},pQ=({values:e},t,n)=>{e[t]=n},kIe=({values:e},t,n)=>{e[t]=AIe(n)},aSt=(e,t,n)=>{switch(e.type.precision){case Us.HALF:return kIe(e,t,n);case Us.SINGLE:case Us.DOUBLE:return pQ(e,t,n)}},mQ=({values:e},t,n)=>{rSt(e,t,n.valueOf())},gQ=({values:e},t,n)=>{hQ(e,t*2,n.valueOf())},RIe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},NIe=({values:e,valueOffsets:t},n,r)=>IIe(e,t,n,r),PIe=({values:e,valueOffsets:t},n,r)=>IIe(e,t,n,K6(r)),OIe=(e,t,n)=>{e.type.unit===Uc.DAY?mQ(e,t,n):gQ(e,t,n)},yQ=({values:e},t,n)=>hQ(e,t*2,n/1e3),vQ=({values:e},t,n)=>hQ(e,t*2,n),bQ=({values:e},t,n)=>iSt(e,t*2,n),_Q=({values:e},t,n)=>sSt(e,t*2,n),DIe=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return yQ(e,t,n);case jt.MILLISECOND:return vQ(e,t,n);case jt.MICROSECOND:return bQ(e,t,n);case jt.NANOSECOND:return _Q(e,t,n)}},wQ=({values:e},t,n)=>{e[t]=n},EQ=({values:e},t,n)=>{e[t]=n},xQ=({values:e},t,n)=>{e[t]=n},SQ=({values:e},t,n)=>{e[t]=n},$Ie=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return wQ(e,t,n);case jt.MILLISECOND:return EQ(e,t,n);case jt.MICROSECOND:return xQ(e,t,n);case jt.NANOSECOND:return SQ(e,t,n)}},MIe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},uSt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Vc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},lSt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Vc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},cSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),fSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),dSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),hSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),pSt=(e,t,n)=>{const r=e.type.children.map(s=>Vc.getVisitFn(s.type)),i=n instanceof Map?dSt(t,n):n instanceof hr?fSt(t,n):Array.isArray(n)?cSt(t,n):hSt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},mSt=(e,t,n)=>{e.type.mode===iu.Dense?LIe(e,t,n):FIe(e,t,n)},LIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Vc.visit(i,e.valueOffsets[t],n)},FIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Vc.visit(i,t,n)},gSt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},jIe=(e,t,n)=>{e.type.unit===zc.DAY_TIME?TQ(e,t,n):CQ(e,t,n)},TQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},CQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},AQ=({values:e},t,n)=>{e[t]=n},IQ=({values:e},t,n)=>{e[t]=n},kQ=({values:e},t,n)=>{e[t]=n},RQ=({values:e},t,n)=>{e[t]=n},BIe=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return AQ(e,t,n);case jt.MILLISECOND:return IQ(e,t,n);case jt.MICROSECOND:return kQ(e,t,n);case jt.NANOSECOND:return RQ(e,t,n)}},ySt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Vc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=en(oSt);Qt.prototype.visitInt=en(Xm);Qt.prototype.visitInt8=en(Xm);Qt.prototype.visitInt16=en(Xm);Qt.prototype.visitInt32=en(Xm);Qt.prototype.visitInt64=en(Xm);Qt.prototype.visitUint8=en(Xm);Qt.prototype.visitUint16=en(Xm);Qt.prototype.visitUint32=en(Xm);Qt.prototype.visitUint64=en(Xm);Qt.prototype.visitFloat=en(aSt);Qt.prototype.visitFloat16=en(kIe);Qt.prototype.visitFloat32=en(pQ);Qt.prototype.visitFloat64=en(pQ);Qt.prototype.visitUtf8=en(PIe);Qt.prototype.visitLargeUtf8=en(PIe);Qt.prototype.visitBinary=en(NIe);Qt.prototype.visitLargeBinary=en(NIe);Qt.prototype.visitFixedSizeBinary=en(RIe);Qt.prototype.visitDate=en(OIe);Qt.prototype.visitDateDay=en(mQ);Qt.prototype.visitDateMillisecond=en(gQ);Qt.prototype.visitTimestamp=en(DIe);Qt.prototype.visitTimestampSecond=en(yQ);Qt.prototype.visitTimestampMillisecond=en(vQ);Qt.prototype.visitTimestampMicrosecond=en(bQ);Qt.prototype.visitTimestampNanosecond=en(_Q);Qt.prototype.visitTime=en($Ie);Qt.prototype.visitTimeSecond=en(wQ);Qt.prototype.visitTimeMillisecond=en(EQ);Qt.prototype.visitTimeMicrosecond=en(xQ);Qt.prototype.visitTimeNanosecond=en(SQ);Qt.prototype.visitDecimal=en(MIe);Qt.prototype.visitList=en(uSt);Qt.prototype.visitStruct=en(pSt);Qt.prototype.visitUnion=en(mSt);Qt.prototype.visitDenseUnion=en(LIe);Qt.prototype.visitSparseUnion=en(FIe);Qt.prototype.visitDictionary=en(gSt);Qt.prototype.visitInterval=en(jIe);Qt.prototype.visitIntervalDayTime=en(TQ);Qt.prototype.visitIntervalYearMonth=en(CQ);Qt.prototype.visitDuration=en(BIe);Qt.prototype.visitDurationSecond=en(AQ);Qt.prototype.visitDurationMillisecond=en(IQ);Qt.prototype.visitDurationMicrosecond=en(kQ);Qt.prototype.visitDurationNanosecond=en(RQ);Qt.prototype.visitFixedSizeList=en(ySt);Qt.prototype.visitMap=en(lSt);const Vc=new Qt,Ef=Symbol.for("parent"),Fw=Symbol.for("rowIndex");class NQ{constructor(t,n){return this[Ef]=t,this[Fw]=n,new Proxy(this,new bSt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Fw],n=this[Ef],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Zu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${B1(t)}: ${B1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new vSt(this[Ef],this[Fw])}}class vSt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Zu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(NQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ef]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Fw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class bSt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ef].type.children.map(n=>n.name)}has(t,n){return t[Ef].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ef].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ef].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Zu.visit(t[Ef].children[r],t[Fw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ef].type.children.findIndex(s=>s.name===n);return i!==-1?(Vc.visit(t[Ef].children[i],t[Fw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class qt extends kn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const _St=(e,t)=>864e5*e[t],PQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),wSt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,ESt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,UIe=e=>new Date(e),xSt=(e,t)=>UIe(_St(e,t)),SSt=(e,t)=>UIe(PQ(e,t)),TSt=(e,t)=>null,zIe=(e,t,n)=>{if(n+1>=t.length)return null;const r=jo(t[n]),i=jo(t[n+1]);return e.subarray(r,i)},CSt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},VIe=({values:e},t)=>xSt(e,t),HIe=({values:e},t)=>SSt(e,t*2),$y=({stride:e,values:t},n)=>t[e*n],ASt=({stride:e,values:t},n)=>CIe(t[e*n]),qIe=({values:e},t)=>e[t],ISt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),WIe=({values:e,valueOffsets:t},n)=>zIe(e,t,n),GIe=({values:e,valueOffsets:t},n)=>{const r=zIe(e,t,n);return r!==null?Mz(r):null},kSt=({values:e},t)=>e[t],RSt=({type:e,values:t},n)=>e.precision!==Us.HALF?t[n]:CIe(t[n]),NSt=(e,t)=>e.type.unit===Uc.DAY?VIe(e,t):HIe(e,t),YIe=({values:e},t)=>1e3*PQ(e,t*2),KIe=({values:e},t)=>PQ(e,t*2),XIe=({values:e},t)=>wSt(e,t*2),QIe=({values:e},t)=>ESt(e,t*2),PSt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return YIe(e,t);case jt.MILLISECOND:return KIe(e,t);case jt.MICROSECOND:return XIe(e,t);case jt.NANOSECOND:return QIe(e,t)}},JIe=({values:e},t)=>e[t],ZIe=({values:e},t)=>e[t],eke=({values:e},t)=>e[t],tke=({values:e},t)=>e[t],OSt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return JIe(e,t);case jt.MILLISECOND:return ZIe(e,t);case jt.MICROSECOND:return eke(e,t);case jt.NANOSECOND:return tke(e,t)}},DSt=({values:e,stride:t},n)=>rQ.decimal(e.subarray(t*n,t*(n+1))),$St=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},MSt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new J6(o.slice(i,s-i))},LSt=(e,t)=>new NQ(e,t),FSt=(e,t)=>e.type.mode===iu.Dense?nke(e,t):rke(e,t),nke=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Zu.visit(r,e.valueOffsets[t])},rke=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Zu.visit(r,t)},jSt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},BSt=(e,t)=>e.type.unit===zc.DAY_TIME?ike(e,t):ske(e,t),ike=({values:e},t)=>e.subarray(2*t,2*(t+1)),ske=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},oke=({values:e},t)=>e[t],ake=({values:e},t)=>e[t],uke=({values:e},t)=>e[t],lke=({values:e},t)=>e[t],USt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return oke(e,t);case jt.MILLISECOND:return ake(e,t);case jt.MICROSECOND:return uke(e,t);case jt.NANOSECOND:return lke(e,t)}},zSt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};qt.prototype.visitNull=Jt(TSt);qt.prototype.visitBool=Jt(CSt);qt.prototype.visitInt=Jt(kSt);qt.prototype.visitInt8=Jt($y);qt.prototype.visitInt16=Jt($y);qt.prototype.visitInt32=Jt($y);qt.prototype.visitInt64=Jt(qIe);qt.prototype.visitUint8=Jt($y);qt.prototype.visitUint16=Jt($y);qt.prototype.visitUint32=Jt($y);qt.prototype.visitUint64=Jt(qIe);qt.prototype.visitFloat=Jt(RSt);qt.prototype.visitFloat16=Jt(ASt);qt.prototype.visitFloat32=Jt($y);qt.prototype.visitFloat64=Jt($y);qt.prototype.visitUtf8=Jt(GIe);qt.prototype.visitLargeUtf8=Jt(GIe);qt.prototype.visitBinary=Jt(WIe);qt.prototype.visitLargeBinary=Jt(WIe);qt.prototype.visitFixedSizeBinary=Jt(ISt);qt.prototype.visitDate=Jt(NSt);qt.prototype.visitDateDay=Jt(VIe);qt.prototype.visitDateMillisecond=Jt(HIe);qt.prototype.visitTimestamp=Jt(PSt);qt.prototype.visitTimestampSecond=Jt(YIe);qt.prototype.visitTimestampMillisecond=Jt(KIe);qt.prototype.visitTimestampMicrosecond=Jt(XIe);qt.prototype.visitTimestampNanosecond=Jt(QIe);qt.prototype.visitTime=Jt(OSt);qt.prototype.visitTimeSecond=Jt(JIe);qt.prototype.visitTimeMillisecond=Jt(ZIe);qt.prototype.visitTimeMicrosecond=Jt(eke);qt.prototype.visitTimeNanosecond=Jt(tke);qt.prototype.visitDecimal=Jt(DSt);qt.prototype.visitList=Jt($St);qt.prototype.visitStruct=Jt(LSt);qt.prototype.visitUnion=Jt(FSt);qt.prototype.visitDenseUnion=Jt(nke);qt.prototype.visitSparseUnion=Jt(rke);qt.prototype.visitDictionary=Jt(jSt);qt.prototype.visitInterval=Jt(BSt);qt.prototype.visitIntervalDayTime=Jt(ike);qt.prototype.visitIntervalYearMonth=Jt(ske);qt.prototype.visitDuration=Jt(USt);qt.prototype.visitDurationSecond=Jt(oke);qt.prototype.visitDurationMillisecond=Jt(ake);qt.prototype.visitDurationMicrosecond=Jt(uke);qt.prototype.visitDurationNanosecond=Jt(lke);qt.prototype.visitFixedSizeList=Jt(zSt);qt.prototype.visitMap=Jt(MSt);const Zu=new qt,Nf=Symbol.for("keys"),jw=Symbol.for("vals");class J6{constructor(t){return this[Nf]=new hr([t.children[0]]).memoize(),this[jw]=t.children[1],new Proxy(this,new HSt)}[Symbol.iterator](){return new VSt(this[Nf],this[jw])}get size(){return this[Nf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Nf],n=this[jw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Zu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${B1(t)}: ${B1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class VSt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Zu.visit(this.vals,t)]})}}class HSt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Nf].toArray().map(String)}has(t,n){return t[Nf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Nf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Nf].indexOf(n);if(r!==-1){const i=Zu.visit(Reflect.get(t,jw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Nf].indexOf(n);return i!==-1?(Vc.visit(Reflect.get(t,jw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(J6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Nf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[jw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let zfe;function cke(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(zfe=s,s=o,o=zfe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Vfe=e=>e!==e;function tS(e){if(typeof e!=="object"||e===null)return Vfe(e)?Vfe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Fxt(e,n):!1:e instanceof Map?WSt(e):Array.isArray(e)?qSt(e):e instanceof hr?GSt(e):YSt(e,!0)}function qSt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tS(e[n]);return Z6(t)}function WSt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=tS(r);return Z6(n)}function GSt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tS(e.get(n));return Z6(t)}function YSt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=tS(e[n[i]]);return Z6(r,n)}function Z6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return KSt(e,n);case Map:return Hfe(e,n,n.keys());case J6:case NQ:case Object:case void 0:return Hfe(e,n,t||Object.keys(n))}return n instanceof hr?XSt(e,n):!1}}function KSt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function XSt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Hfe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function fke(e,t,n,r){return(n&1<<r)!==0}function QSt(e,t,n,r){return(n&1<<r)>>r}function f$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):dke(new OQ(n,e,t,null,fke)).subarray(0,r)),i}return n}function dke(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class OQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function zz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new OQ(e,t,n-t,e,QSt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return zz(e,t,i)+zz(e,r,n)+JSt(e,i>>3,r-i>>3)}function JSt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Zj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Zj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Zj(s.getUint8(i)),i+=1;return r}function Zj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const ZSt=-1;class br{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return fn.isSparseUnion(t)?this.children.some(n=>n.nullable):fn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(fn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=ZSt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-zz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof br?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=zd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(fn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===iu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(fn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===iu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(f$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new br(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(f$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Rp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Rp.TYPE])&&(o[Rp.TYPE]=s.subarray(t,t+n)),(s=o[Rp.OFFSET])&&(o[Rp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Rp.DATA])&&(o[Rp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}br.prototype.children=Object.freeze([]);class E2 extends kn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new br(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.data),s=er(t.nullBitmap),o=yT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.data),s=er(t.nullBitmap),o=Rfe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.data),s=er(t.nullBitmap),o=yT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.data),s=er(t.nullBitmap),o=Rfe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=er(t.nullBitmap),o=yT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=er(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Is(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(fn.isSparseUnion(n))return new br(n,r,o,a,[void 0,void 0,void 0,s],i);const u=yT(t.valueOffsets);return new br(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new E2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=er(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new E2().visit({type:n.valueType})}=t,s=er(t.nullBitmap),{["length"]:o=i.length/zd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new br(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new E2().visit({type:n.childType})}=t,s=er(t.nullBitmap),o=yT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new br(n,r,a,u,[o,void 0,s],[i])}}const eTt=new E2;function ua(e){return eTt.visit(e)}class qfe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function tTt(e){return e.some(t=>t.nullable)}function hke(e){return e.reduce((t,n)=>t+n.nullCount,0)}function pke(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function mke(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function DQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function $Q(e,t){return e.getValid(t)}function d$(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return DQ(r,this._offsets,n,t)}}function gke(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=DQ(s,this._offsets,r,n);return t=void 0,o}}function yke(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):DQ(s,this._offsets,i,n);return t=void 0,o}}class Wt extends kn{}function nTt(e,t){return t===null&&e.length>0?0:-1}function rTt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new OQ(n,e.offset+(t||0),e.length,n,fke)){if(!i)return r;++r}return-1}function sn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return rTt(e,n)}const r=Zu.getVisitFn(e),i=tS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function vke(e,t,n){const r=Zu.getVisitFn(e),i=tS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Wt.prototype.visitNull=nTt;Wt.prototype.visitBool=sn;Wt.prototype.visitInt=sn;Wt.prototype.visitInt8=sn;Wt.prototype.visitInt16=sn;Wt.prototype.visitInt32=sn;Wt.prototype.visitInt64=sn;Wt.prototype.visitUint8=sn;Wt.prototype.visitUint16=sn;Wt.prototype.visitUint32=sn;Wt.prototype.visitUint64=sn;Wt.prototype.visitFloat=sn;Wt.prototype.visitFloat16=sn;Wt.prototype.visitFloat32=sn;Wt.prototype.visitFloat64=sn;Wt.prototype.visitUtf8=sn;Wt.prototype.visitLargeUtf8=sn;Wt.prototype.visitBinary=sn;Wt.prototype.visitLargeBinary=sn;Wt.prototype.visitFixedSizeBinary=sn;Wt.prototype.visitDate=sn;Wt.prototype.visitDateDay=sn;Wt.prototype.visitDateMillisecond=sn;Wt.prototype.visitTimestamp=sn;Wt.prototype.visitTimestampSecond=sn;Wt.prototype.visitTimestampMillisecond=sn;Wt.prototype.visitTimestampMicrosecond=sn;Wt.prototype.visitTimestampNanosecond=sn;Wt.prototype.visitTime=sn;Wt.prototype.visitTimeSecond=sn;Wt.prototype.visitTimeMillisecond=sn;Wt.prototype.visitTimeMicrosecond=sn;Wt.prototype.visitTimeNanosecond=sn;Wt.prototype.visitDecimal=sn;Wt.prototype.visitList=sn;Wt.prototype.visitStruct=sn;Wt.prototype.visitUnion=sn;Wt.prototype.visitDenseUnion=vke;Wt.prototype.visitSparseUnion=vke;Wt.prototype.visitDictionary=sn;Wt.prototype.visitInterval=sn;Wt.prototype.visitIntervalDayTime=sn;Wt.prototype.visitIntervalYearMonth=sn;Wt.prototype.visitDuration=sn;Wt.prototype.visitDurationSecond=sn;Wt.prototype.visitDurationMillisecond=sn;Wt.prototype.visitDurationMicrosecond=sn;Wt.prototype.visitDurationNanosecond=sn;Wt.prototype.visitFixedSizeList=sn;Wt.prototype.visitMap=sn;const h$=new Wt;class Gt extends kn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof su&&t.bitWidth!==64||t instanceof Rm&&t.bitWidth!==64||t instanceof q0&&t.precision!==Us.HALF))return new qfe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new qfe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new iTt(o)})}class iTt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Gt.prototype.visitNull=Zt;Gt.prototype.visitBool=Zt;Gt.prototype.visitInt=Zt;Gt.prototype.visitInt8=Zt;Gt.prototype.visitInt16=Zt;Gt.prototype.visitInt32=Zt;Gt.prototype.visitInt64=Zt;Gt.prototype.visitUint8=Zt;Gt.prototype.visitUint16=Zt;Gt.prototype.visitUint32=Zt;Gt.prototype.visitUint64=Zt;Gt.prototype.visitFloat=Zt;Gt.prototype.visitFloat16=Zt;Gt.prototype.visitFloat32=Zt;Gt.prototype.visitFloat64=Zt;Gt.prototype.visitUtf8=Zt;Gt.prototype.visitLargeUtf8=Zt;Gt.prototype.visitBinary=Zt;Gt.prototype.visitLargeBinary=Zt;Gt.prototype.visitFixedSizeBinary=Zt;Gt.prototype.visitDate=Zt;Gt.prototype.visitDateDay=Zt;Gt.prototype.visitDateMillisecond=Zt;Gt.prototype.visitTimestamp=Zt;Gt.prototype.visitTimestampSecond=Zt;Gt.prototype.visitTimestampMillisecond=Zt;Gt.prototype.visitTimestampMicrosecond=Zt;Gt.prototype.visitTimestampNanosecond=Zt;Gt.prototype.visitTime=Zt;Gt.prototype.visitTimeSecond=Zt;Gt.prototype.visitTimeMillisecond=Zt;Gt.prototype.visitTimeMicrosecond=Zt;Gt.prototype.visitTimeNanosecond=Zt;Gt.prototype.visitDecimal=Zt;Gt.prototype.visitList=Zt;Gt.prototype.visitStruct=Zt;Gt.prototype.visitUnion=Zt;Gt.prototype.visitDenseUnion=Zt;Gt.prototype.visitSparseUnion=Zt;Gt.prototype.visitDictionary=Zt;Gt.prototype.visitInterval=Zt;Gt.prototype.visitIntervalDayTime=Zt;Gt.prototype.visitIntervalYearMonth=Zt;Gt.prototype.visitDuration=Zt;Gt.prototype.visitDurationSecond=Zt;Gt.prototype.visitDurationMillisecond=Zt;Gt.prototype.visitDurationMicrosecond=Zt;Gt.prototype.visitDurationNanosecond=Zt;Gt.prototype.visitFixedSizeList=Zt;Gt.prototype.visitMap=Zt;const MQ=new Gt;var bke;const _ke={},wke={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof br)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l}=_ke[o.typeId],c=s[0];this.isValid=f=>$Q(c,f),this.get=f=>a(c,f),this.set=(f,d)=>u(c,f,d),this.indexOf=f=>l(c,f),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,wke[o.typeId]),this._offsets=pke(s);break}this.data=s,this.type=o,this.stride=zd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return tTt(this.data)}get nullCount(){return hke(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return MQ.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(cke(this,t,n,({data:r,_offsets:i},s,o)=>mke(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return fn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(fn.isDictionary(this.type)){const t=new p$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new p$(this)}unmemoize(){if(fn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}bke=Symbol.toStringTag;hr[bke]=(e=>{e.type=fn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Zu.getVisitFnByTypeId(n),i=Vc.getVisitFnByTypeId(n),s=h$.getVisitFnByTypeId(n);_ke[n]={get:r,set:i,indexOf:s},wke[n]=Object.create(e,{isValid:{value:d$($Q)},get:{value:d$(Zu.getVisitFnByTypeId(n))},set:{value:gke(Vc.getVisitFnByTypeId(n))},indexOf:{value:yke(h$.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class p$ extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new p$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function sTt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${oTt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function oTt(e){return typeof e!="bigint"?B1(e):`${B1(e)}n`}function e9(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function Wfe(e,t=0){return e.length>=t?e.subarray(0,t):Lz(new e.constructor(t),e,0)}class bk{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?e9(r*1,this.BYTES_PER_ELEMENT):e9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=e9(t*this.stride,this.BYTES_PER_ELEMENT);const n=Wfe(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=Wfe(this.buffer,t)}}class _k extends bk{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Eke extends _k{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class xke extends _k{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let al=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=zd(t),this._nulls=new Eke,n&&n.length>0&&(this._isValid=sTt(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ua({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};al.prototype.length=1;al.prototype.stride=1;al.prototype.children=null;al.prototype.finished=!1;al.prototype.nullValues=null;al.prototype._isValid=()=>!0;class Qm extends al{constructor(t){super(t),this._values=new _k(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class nS extends al{constructor(t){super(t),this._pendingLength=0,this._offsets=new xke(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof J6?n[Nf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Vz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ir),(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Os.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Bd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Vz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Vz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Os.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Cr{constructor(t=[],n,r,i=Os.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=qz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Cr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Cr(n,this.metadata)}assign(...t){const n=t[0]instanceof Cr?t[0]:Array.isArray(t[0])?new Cr(t[0]):new Cr(t),r=[...this.fields],i=VN(VN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:VN(VN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=qz(s,new Map);return new Cr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Cr.prototype.fields=null;Cr.prototype.metadata=null;Cr.prototype.dictionaries=null;let jr=class Hz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Hz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Hz.new(n,r,i,s)}};jr.prototype.type=null;jr.prototype.name=null;jr.prototype.nullable=null;jr.prototype.metadata=null;function VN(e,t){return new Map([...e||new Map,...t||new Map])}function qz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(fn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&qz(s.children,t)}return t}var aTt=QAe,uTt=t$;class Wz{static decode(t){t=new uTt(er(t));const n=gl.getRootAsFooter(t),r=Cr.decode(n.schema(),new Map,n.version());return new lTt(r,n)}static encode(t){const n=new aTt,r=Cr.encode(n,t.schema);gl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())G0.encode(n,o);const i=n.endVector();gl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())G0.encode(n,o);const s=n.endVector();return gl.startFooter(n),gl.addSchema(n,r),gl.addVersion(n,Os.V5),gl.addRecordBatches(n,i),gl.addDictionaries(n,s),gl.finishFooterBuffer(n,gl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Os.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class lTt extends Wz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return G0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return G0.decode(n)}return null}}class G0{static decode(t){return new G0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Vz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=jo(r),this.bodyLength=jo(n)}}const HN=Object.freeze({done:!0,value:void 0});class Ske{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class cTt extends Ske{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Mp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(HN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Nfe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Nfe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Mp(this,void 0,void 0,function*(){return yield this.abort(t),HN})}return(t){return Mp(this,void 0,void 0,function*(){return yield this.close(),HN})}read(t){return Mp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Mp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(HN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class t9 extends cTt{write(t){if((t=er(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Mz(this.toUint8Array(!0)):this.toUint8Array(!1).then(Mz)}toUint8Array(t=!1){return t?Dh(this._values)[0]:Mp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=XC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Dh(o,a)[0]})}}class Tke extends nS{constructor(t){super(t),this._values=new bk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,er(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Cke extends nS{constructor(t){super(t),this._values=new bk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,er(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const u=a.length;i.set(a,s),r.set(o,BigInt(u)),s+=u}}}class fTt extends al{constructor(t){super(t),this._values=new Eke}setValue(t,n){this._values.set(t,+n)}}class e4 extends Qm{}e4.prototype._setValue=OIe;class Ake extends e4{}Ake.prototype._setValue=mQ;class Ike extends e4{}Ike.prototype._setValue=gQ;class kke extends Qm{}kke.prototype._setValue=MIe;class dTt extends al{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new W0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=m$({type:this.type.indices,nullValues:n}),this.dictionary=m$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Rke extends Qm{}Rke.prototype._setValue=RIe;class hTt extends al{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new LE(this.type.listSize,new jr(n,t.type,!0)),r}}class t4 extends Qm{setValue(t,n){this._values.set(t,n)}}class pTt extends t4{setValue(t,n){super.setValue(t,AIe(n))}}class mTt extends t4{}class gTt extends t4{}class n4 extends Qm{}n4.prototype._setValue=jIe;class Nke extends n4{}Nke.prototype._setValue=TQ;class Pke extends n4{}Pke.prototype._setValue=CQ;class rS extends Qm{}rS.prototype._setValue=BIe;class Oke extends rS{}Oke.prototype._setValue=AQ;class Dke extends rS{}Dke.prototype._setValue=IQ;class $ke extends rS{}$ke.prototype._setValue=kQ;class Mke extends rS{}Mke.prototype._setValue=RQ;class Jm extends Qm{setValue(t,n){this._values.set(t,n)}}class yTt extends Jm{}class vTt extends Jm{}class bTt extends Jm{}class _Tt extends Jm{}class wTt extends Jm{}class ETt extends Jm{}class xTt extends Jm{}class STt extends Jm{}class TTt extends nS{constructor(t){super(t),this._offsets=new xke(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ME(new jr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class CTt extends nS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new LA(new jr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class ATt extends al{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class ITt extends al{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ha([...this.type.children,new jr(n,t.type,!0)]),r}}class iS extends Qm{}iS.prototype._setValue=DIe;class Lke extends iS{}Lke.prototype._setValue=yQ;class Fke extends iS{}Fke.prototype._setValue=vQ;class jke extends iS{}jke.prototype._setValue=bQ;class Bke extends iS{}Bke.prototype._setValue=_Q;class sS extends Qm{}sS.prototype._setValue=$Ie;class Uke extends sS{}Uke.prototype._setValue=wQ;class zke extends sS{}zke.prototype._setValue=EQ;class Vke extends sS{}Vke.prototype._setValue=xQ;class Hke extends sS{}Hke.prototype._setValue=SQ;class LQ extends al{constructor(t){super(t),this._typeIds=new _k(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new jr(n,t.type)];return this.type=new MA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class kTt extends LQ{}class RTt extends LQ{constructor(t){super(t),this._offsets=new _k(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class qke extends nS{constructor(t){super(t),this._values=new bk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,K6(n))}_flushPending(t,n){}}qke.prototype._flushPending=Tke.prototype._flushPending;class Wke extends nS{constructor(t){super(t),this._values=new bk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,K6(n))}_flushPending(t,n){}}Wke.prototype._flushPending=Cke.prototype._flushPending;class NTt extends kn{visitNull(){return ATt}visitBool(){return fTt}visitInt(){return Jm}visitInt8(){return yTt}visitInt16(){return vTt}visitInt32(){return bTt}visitInt64(){return _Tt}visitUint8(){return wTt}visitUint16(){return ETt}visitUint32(){return xTt}visitUint64(){return STt}visitFloat(){return t4}visitFloat16(){return pTt}visitFloat32(){return mTt}visitFloat64(){return gTt}visitUtf8(){return qke}visitLargeUtf8(){return Wke}visitBinary(){return Tke}visitLargeBinary(){return Cke}visitFixedSizeBinary(){return Rke}visitDate(){return e4}visitDateDay(){return Ake}visitDateMillisecond(){return Ike}visitTimestamp(){return iS}visitTimestampSecond(){return Lke}visitTimestampMillisecond(){return Fke}visitTimestampMicrosecond(){return jke}visitTimestampNanosecond(){return Bke}visitTime(){return sS}visitTimeSecond(){return Uke}visitTimeMillisecond(){return zke}visitTimeMicrosecond(){return Vke}visitTimeNanosecond(){return Hke}visitDecimal(){return kke}visitList(){return TTt}visitStruct(){return ITt}visitUnion(){return LQ}visitDenseUnion(){return RTt}visitSparseUnion(){return kTt}visitDictionary(){return dTt}visitInterval(){return n4}visitIntervalDayTime(){return Nke}visitIntervalYearMonth(){return Pke}visitDuration(){return rS}visitDurationSecond(){return Oke}visitDurationMillisecond(){return Dke}visitDurationMicrosecond(){return $ke}visitDurationNanosecond(){return Mke}visitFixedSizeList(){return hTt}visitMap(){return CTt}}const PTt=new NTt;class Yt extends kn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function cu(e,t){return t instanceof e.constructor}function Ib(e,t){return e===t||cu(e,t)}function Zm(e,t){return e===t||cu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function r4(e,t){return e===t||cu(e,t)&&e.precision===t.precision}function OTt(e,t){return e===t||cu(e,t)&&e.byteWidth===t.byteWidth}function FQ(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function wk(e,t){return e===t||cu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ek(e,t){return e===t||cu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function DTt(e,t){return e===t||cu(e,t)&&e.children.length===t.children.length&&Y0.compareManyFields(e.children,t.children)}function $Tt(e,t){return e===t||cu(e,t)&&e.children.length===t.children.length&&Y0.compareManyFields(e.children,t.children)}function jQ(e,t){return e===t||cu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Y0.compareManyFields(e.children,t.children)}function MTt(e,t){return e===t||cu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Y0.visit(e.indices,t.indices)&&Y0.visit(e.dictionary,t.dictionary)}function BQ(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function xk(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function LTt(e,t){return e===t||cu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Y0.compareManyFields(e.children,t.children)}function FTt(e,t){return e===t||cu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Y0.compareManyFields(e.children,t.children)}Yt.prototype.visitNull=Ib;Yt.prototype.visitBool=Ib;Yt.prototype.visitInt=Zm;Yt.prototype.visitInt8=Zm;Yt.prototype.visitInt16=Zm;Yt.prototype.visitInt32=Zm;Yt.prototype.visitInt64=Zm;Yt.prototype.visitUint8=Zm;Yt.prototype.visitUint16=Zm;Yt.prototype.visitUint32=Zm;Yt.prototype.visitUint64=Zm;Yt.prototype.visitFloat=r4;Yt.prototype.visitFloat16=r4;Yt.prototype.visitFloat32=r4;Yt.prototype.visitFloat64=r4;Yt.prototype.visitUtf8=Ib;Yt.prototype.visitLargeUtf8=Ib;Yt.prototype.visitBinary=Ib;Yt.prototype.visitLargeBinary=Ib;Yt.prototype.visitFixedSizeBinary=OTt;Yt.prototype.visitDate=FQ;Yt.prototype.visitDateDay=FQ;Yt.prototype.visitDateMillisecond=FQ;Yt.prototype.visitTimestamp=wk;Yt.prototype.visitTimestampSecond=wk;Yt.prototype.visitTimestampMillisecond=wk;Yt.prototype.visitTimestampMicrosecond=wk;Yt.prototype.visitTimestampNanosecond=wk;Yt.prototype.visitTime=Ek;Yt.prototype.visitTimeSecond=Ek;Yt.prototype.visitTimeMillisecond=Ek;Yt.prototype.visitTimeMicrosecond=Ek;Yt.prototype.visitTimeNanosecond=Ek;Yt.prototype.visitDecimal=Ib;Yt.prototype.visitList=DTt;Yt.prototype.visitStruct=$Tt;Yt.prototype.visitUnion=jQ;Yt.prototype.visitDenseUnion=jQ;Yt.prototype.visitSparseUnion=jQ;Yt.prototype.visitDictionary=MTt;Yt.prototype.visitInterval=BQ;Yt.prototype.visitIntervalDayTime=BQ;Yt.prototype.visitIntervalYearMonth=BQ;Yt.prototype.visitDuration=xk;Yt.prototype.visitDurationSecond=xk;Yt.prototype.visitDurationMillisecond=xk;Yt.prototype.visitDurationMicrosecond=xk;Yt.prototype.visitDurationNanosecond=xk;Yt.prototype.visitFixedSizeList=LTt;Yt.prototype.visitMap=FTt;const Y0=new Yt;function Gz(e,t){return Y0.compareSchemas(e,t)}function m$(e){const t=e.type,n=new(PTt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(m$(Object.assign(Object.assign({},l),{type:u})))}}return n}function n9(e,t){return jTt(e,t.map(n=>n.data.concat()))}function jTt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=BTt(n,o,c,t,i),o>0&&(r[s++]=ua({type:new ha(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new El(e,f))]}function BTt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ua({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var Gke;class Ru{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Cr([]),this._offsets=[0],this;let i,s;t[0]instanceof Cr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof El)return[u];if(u instanceof Ru)return u.batches;if(u instanceof br){if(u.type instanceof ha)return[new El(new Cr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=i??new Cr(l.map((h,p)=>new jr(String(h),c[p].type,c[p].nullable))),[,d]=n9(f,c);return d.length===0?[new El(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Cr([]),!(i instanceof Cr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof El))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Gz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??pke(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=hke(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?MQ.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ru(n,r.map(i=>new El(n,i)))}slice(t,n){const r=this.schema;[t,n]=cke({length:this.numRows},t,n);const i=mke(this.data,this._offsets,t,n);return new Ru(r,i.map(s=>new El(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ua({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([ua({type:new km,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=n9(r,a)}return new Ru(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ru(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ru(...n9(s,o))}}Gke=Symbol.toStringTag;Ru[Gke]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=d$($Q),e.get=d$(Zu.getVisitFn(re.Struct)),e.set=gke(Vc.getVisitFn(re.Struct)),e.indexOf=yke(h$.getVisitFn(re.Struct)),"Table"))(Ru.prototype);var Yke;let El=class gC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Cr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ua({nullCount:0,type:new ha(this.schema.fields),children:this.schema.fields.map(n=>ua({type:n.type,nullCount:0}))})]=t,!(this.data instanceof br))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Gfe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=jr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Cr(r),a=ua({type:new ha(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Gfe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Kke(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Zu.visit(this.data,t)}set(t,n){return Vc.visit(this.data,t,n)}indexOf(t,n){return h$.visit(this.data,t,n)}[Symbol.iterator](){return MQ.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new Ru(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new gC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([ua({type:new km,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Cr(s,new Map(this.schema.metadata)),i=ua({type:new ha(s),children:o})}return new gC(r,i)}select(t){const n=this.schema.select(t),r=new ha(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new gC(n,ua({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ua({type:new ha(n.fields),length:this.numRows,children:r});return new gC(n,i)}};Yke=Symbol.toStringTag;El[Yke]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(El.prototype);function Gfe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ua({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ua({type:new ha(i),length:n,children:s})]}function Kke(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])Kke(a.children,l==null?void 0:l.children,n);if(fn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class UTt extends El{constructor(t){const n=t.fields.map(i=>ua({type:i.type})),r=ua({type:new ha(t.fields),nullCount:0,children:n});super(t,r)}}let vg=class Pd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Pd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ir),(n||new Pd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Os.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):_s.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Os.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,_s.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Pd.startMessage(t),Pd.addVersion(t,n),Pd.addHeaderType(t,r),Pd.addHeader(t,i),Pd.addBodyLength(t,s),Pd.addCustomMetadata(t,o),Pd.endMessage(t)}};class zTt extends kn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return jfe.startNull(n),jfe.endNull(n)}visitInt(t,n){return wl.startInt(n),wl.addBitWidth(n,t.bitWidth),wl.addIsSigned(n,t.isSigned),wl.endInt(n)}visitFloat(t,n){return Zd.startFloatingPoint(n),Zd.addPrecision(n,t.precision),Zd.endFloatingPoint(n)}visitBinary(t,n){return Dfe.startBinary(n),Dfe.endBinary(n)}visitLargeBinary(t,n){return Mfe.startLargeBinary(n),Mfe.endLargeBinary(n)}visitBool(t,n){return $fe.startBool(n),$fe.endBool(n)}visitUtf8(t,n){return Bfe.startUtf8(n),Bfe.endUtf8(n)}visitLargeUtf8(t,n){return Lfe.startLargeUtf8(n),Lfe.endLargeUtf8(n)}visitDecimal(t,n){return $_.startDecimal(n),$_.addScale(n,t.scale),$_.addPrecision(n,t.precision),$_.addBitWidth(n,t.bitWidth),$_.endDecimal(n)}visitDate(t,n){return _O.startDate(n),_O.addUnit(n,t.unit),_O.endDate(n)}visitTime(t,n){return hC.startTime(n),hC.addUnit(n,t.unit),hC.addBitWidth(n,t.bitWidth),hC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return pC.startTimestamp(n),pC.addUnit(n,t.unit),r!==void 0&&pC.addTimezone(n,r),pC.endTimestamp(n)}visitInterval(t,n){return eh.startInterval(n),eh.addUnit(n,t.unit),eh.endInterval(n)}visitDuration(t,n){return wO.startDuration(n),wO.addUnit(n,t.unit),wO.endDuration(n)}visitList(t,n){return Ffe.startList(n),Ffe.endList(n)}visitStruct(t,n){return n1.startStruct_(n),n1.endStruct_(n)}visitUnion(t,n){Sv.startTypeIdsVector(n,t.typeIds.length);const r=Sv.createTypeIdsVector(n,t.typeIds);return Sv.startUnion(n),Sv.addMode(n,t.mode),Sv.addTypeIds(n,r),Sv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Bp.startDictionaryEncoding(n),Bp.addId(n,BigInt(t.id)),Bp.addIsOrdered(n,t.isOrdered),r!==void 0&&Bp.addIndexType(n,r),Bp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return EO.startFixedSizeBinary(n),EO.addByteWidth(n,t.byteWidth),EO.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return xO.startFixedSizeList(n),xO.addListSize(n,t.listSize),xO.endFixedSizeList(n)}visitMap(t,n){return SO.startMap(n),SO.addKeysSorted(n,t.keysSorted),SO.endMap(n)}}const r9=new zTt;function VTt(e,t=new Map){return new Cr(qTt(e,t),CO(e.metadata),t)}function Xke(e){return new Vl(e.count,Qke(e.columns),Jke(e.columns))}function HTt(e){return new $h(Xke(e.data),e.id,e.isDelta)}function qTt(e,t){return(e.fields||[]).filter(Boolean).map(n=>jr.fromJSON(n,t))}function Yfe(e,t){return(e.children||[]).filter(Boolean).map(n=>jr.fromJSON(n,t))}function Qke(e){return(e||[]).reduce((t,n)=>[...t,new K0(n.count,WTt(n.VALIDITY)),...Qke(n.children)],[])}function Jke(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new oh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new oh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new oh(t.length,i.OFFSET.length)),i.DATA&&t.push(new oh(t.length,i.DATA.length)),t=Jke(i.children,t)}return t}function WTt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function GTt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Xfe(e,Yfe(e,t)),i=new jr(e.name,o,e.nullable,CO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Kfe(r):new H0,a=new W0(t.get(n),r,n,s.isOrdered),i=new jr(e.name,a,e.nullable,CO(e.metadata))):(r=(r=s.indexType)?Kfe(r):new H0,t.set(n,o=Xfe(e,Yfe(e,t))),a=new W0(o,r,n,s.isOrdered),i=new jr(e.name,a,e.nullable,CO(e.metadata))),i||null}function CO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Kfe(e){return new su(e.isSigned,e.bitWidth)}function Xfe(e,t){const n=e.type.name;switch(n){case"NONE":return new km;case"null":return new km;case"binary":return new DA;case"largebinary":return new s$;case"utf8":return new OE;case"largeutf8":return new o$;case"bool":return new $A;case"list":return new ME((t||[])[0]);case"struct":return new ha(t||[]);case"struct_":return new ha(t||[])}switch(n){case"int":{const r=e.type;return new su(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new q0(Us[r.precision])}case"decimal":{const r=e.type;return new a$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new DE(Uc[r.unit])}case"time":{const r=e.type;return new Rm(jt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new u$(jt[r.unit],r.timezone)}case"interval":{const r=e.type;return new $E(zc[r.unit])}case"duration":{const r=e.type;return new l$(jt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new MA(iu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new c$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new LE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new LA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var YTt=QAe,KTt=t$;class th{static fromJSON(t,n){const r=new th(0,Os.V5,n);return r._createHeader=XTt(t,n),r}static decode(t){t=new KTt(er(t));const n=vg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new th(r,i,s);return o._createHeader=QTt(n,s),o}static encode(t){const n=new YTt;let r=-1;return t.isSchema()?r=Cr.encode(n,t.header()):t.isRecordBatch()?r=Vl.encode(n,t.header()):t.isDictionaryBatch()&&(r=$h.encode(n,t.header())),vg.startMessage(n),vg.addVersion(n,Os.V5),vg.addHeader(n,r),vg.addHeaderType(n,t.headerType),vg.addBodyLength(n,BigInt(t.bodyLength)),vg.finishMessageBuffer(n,vg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Cr)return new th(0,Os.V5,_s.Schema,t);if(t instanceof Vl)return new th(n,Os.V5,_s.RecordBatch,t);if(t instanceof $h)return new th(n,Os.V5,_s.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===_s.Schema}isRecordBatch(){return this.headerType===_s.RecordBatch}isDictionaryBatch(){return this.headerType===_s.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=jo(t)}}class Vl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=jo(t)}}class $h{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=jo(n)}}class oh{constructor(t,n){this.offset=jo(t),this.length=jo(n)}}class K0{constructor(t,n){this.length=jo(t),this.nullCount=jo(n)}}function XTt(e,t){return()=>{switch(t){case _s.Schema:return Cr.fromJSON(e);case _s.RecordBatch:return Vl.fromJSON(e);case _s.DictionaryBatch:return $h.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${_s[t]}, type: ${t} }`)}}function QTt(e,t){return()=>{switch(t){case _s.Schema:return Cr.decode(e.header(new Bd),new Map,e.version());case _s.RecordBatch:return Vl.decode(e.header(new kp),e.version());case _s.DictionaryBatch:return $h.decode(e.header(new O_),e.version())}throw new Error(`Unrecognized Message type: { name: ${_s[t]}, type: ${t} }`)}}jr.encode=uCt;jr.decode=oCt;jr.fromJSON=GTt;Cr.encode=aCt;Cr.decode=JTt;Cr.fromJSON=VTt;Vl.encode=lCt;Vl.decode=ZTt;Vl.fromJSON=Xke;$h.encode=cCt;$h.decode=eCt;$h.fromJSON=HTt;K0.encode=fCt;K0.decode=nCt;oh.encode=dCt;oh.decode=tCt;function JTt(e,t=new Map,n=Os.V5){const r=sCt(e,t);return new Cr(r,AO(e),t,n)}function ZTt(e,t=Os.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Vl(e.length(),rCt(e),iCt(e,t))}function eCt(e,t=Os.V5){return new $h(Vl.decode(e.data(),t),e.id(),e.isDelta())}function tCt(e){return new oh(e.offset(),e.length())}function nCt(e){return new K0(e.length(),e.nullCount())}function rCt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=K0.decode(n));return t}function iCt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Os.V4&&(r.bb_pos+=8*(i+1)),n[++s]=oh.decode(r));return n}function sCt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=jr.decode(r,t));return n}function Qfe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=jr.decode(r,t));return n}function oCt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Zfe(e,Qfe(e,t)),r=new jr(e.name(),i,e.nullable(),AO(e))):t.has(n=jo(a.id()))?(s=(s=a.indexType())?Jfe(s):new H0,o=new W0(t.get(n),s,n,a.isOrdered()),r=new jr(e.name(),o,e.nullable(),AO(e))):(s=(s=a.indexType())?Jfe(s):new H0,t.set(n,i=Zfe(e,Qfe(e,t))),o=new W0(i,s,n,a.isOrdered()),r=new jr(e.name(),o,e.nullable(),AO(e))),r||null}function AO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Jfe(e){return new su(e.isSigned(),e.bitWidth())}function Zfe(e,t){const n=e.typeType();switch(n){case Zr.NONE:return new km;case Zr.Null:return new km;case Zr.Binary:return new DA;case Zr.LargeBinary:return new s$;case Zr.Utf8:return new OE;case Zr.LargeUtf8:return new o$;case Zr.Bool:return new $A;case Zr.List:return new ME((t||[])[0]);case Zr.Struct_:return new ha(t||[])}switch(n){case Zr.Int:{const r=e.type(new wl);return new su(r.isSigned(),r.bitWidth())}case Zr.FloatingPoint:{const r=e.type(new Zd);return new q0(r.precision())}case Zr.Decimal:{const r=e.type(new $_);return new a$(r.scale(),r.precision(),r.bitWidth())}case Zr.Date:{const r=e.type(new _O);return new DE(r.unit())}case Zr.Time:{const r=e.type(new hC);return new Rm(r.unit(),r.bitWidth())}case Zr.Timestamp:{const r=e.type(new pC);return new u$(r.unit(),r.timezone())}case Zr.Interval:{const r=e.type(new eh);return new $E(r.unit())}case Zr.Duration:{const r=e.type(new wO);return new l$(r.unit())}case Zr.Union:{const r=e.type(new Sv);return new MA(r.mode(),r.typeIdsArray()||[],t||[])}case Zr.FixedSizeBinary:{const r=e.type(new EO);return new c$(r.byteWidth())}case Zr.FixedSizeList:{const r=e.type(new xO);return new LE(r.listSize(),(t||[])[0])}case Zr.Map:{const r=e.type(new SO);return new LA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Zr[n]}" (${n})`)}function aCt(e,t){const n=t.fields.map(s=>jr.encode(e,s));Bd.startFieldsVector(e,n.length);const r=Bd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Bd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return Bd.startSchema(e),Bd.addFields(e,r),Bd.addEndianness(e,hCt?PE.Little:PE.Big),i!==-1&&Bd.addCustomMetadata(e,i),Bd.endSchema(e)}function uCt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;fn.isDictionary(s)?(o=s.dictionary.typeId,i=r9.visit(s,e),r=r9.visit(s.dictionary,e)):r=r9.visit(s,e);const a=(s.children||[]).map(c=>jr.encode(e,c)),u=ac.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?ac.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ac.startField(e),ac.addType(e,r),ac.addTypeType(e,o),ac.addChildren(e,u),ac.addNullable(e,!!t.nullable),n!==-1&&ac.addName(e,n),i!==-1&&ac.addDictionary(e,i),l!==-1&&ac.addCustomMetadata(e,l),ac.endField(e)}function lCt(e,t){const n=t.nodes||[],r=t.buffers||[];kp.startNodesVector(e,n.length);for(const o of n.slice().reverse())K0.encode(e,o);const i=e.endVector();kp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())oh.encode(e,o);const s=e.endVector();return kp.startRecordBatch(e),kp.addLength(e,BigInt(t.length)),kp.addNodes(e,i),kp.addBuffers(e,s),kp.endRecordBatch(e)}function cCt(e,t){const n=Vl.encode(e,t.data);return O_.startDictionaryBatch(e),O_.addId(e,BigInt(t.id)),O_.addIsDelta(e,t.isDelta),O_.addData(e,n),O_.endDictionaryBatch(e)}function fCt(e,t){return eIe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function dCt(e,t){return ZAe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const hCt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Yz="ARROW1",UQ=new Uint8Array(Yz.length);for(let e=0;e<Yz.length;e+=1)UQ[e]=Yz.codePointAt(e);UQ.length;class Fi extends kn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof El?s.data.children:s.data),r=new Fi;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!fn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(fn.isUnion(n))this.nodes.push(new K0(r,0));else{const{nullCount:i}=t;fn.isNull(n)||qf.call(this,i<=0?new Uint8Array(0):f$(t.offset,r,t.nullBitmap)),this.nodes.push(new K0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function qf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new oh(this._byteLength,t)),this._byteLength+=t,this}function pCt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(qf.call(this,i),n.mode===iu.Sparse)return Kz.call(this,e);if(n.mode===iu.Dense){if(e.offset<=0)return qf.call(this,s),Kz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);qf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function mCt(e){let t;return e.nullCount>=e.length?qf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?qf.call(this,f$(e.offset,e.length,t)):qf.call(this,dke(e.values))}function eg(e){return qf.call(this,e.values.subarray(0,e.length*e.stride))}function i4(e){const{length:t,values:n,valueOffsets:r}=e,i=jo(r[0]),s=jo(r[t]),o=Math.min(s-i,n.byteLength-i);return qf.call(this,KAe(-i,t+1,r)),qf.call(this,n.subarray(i,i+o)),this}function zQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return qf.call(this,KAe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Kz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Fi.prototype.visitBool=mCt;Fi.prototype.visitInt=eg;Fi.prototype.visitFloat=eg;Fi.prototype.visitUtf8=i4;Fi.prototype.visitLargeUtf8=i4;Fi.prototype.visitBinary=i4;Fi.prototype.visitLargeBinary=i4;Fi.prototype.visitFixedSizeBinary=eg;Fi.prototype.visitDate=eg;Fi.prototype.visitTimestamp=eg;Fi.prototype.visitTime=eg;Fi.prototype.visitDecimal=eg;Fi.prototype.visitList=zQ;Fi.prototype.visitStruct=Kz;Fi.prototype.visitUnion=pCt;Fi.prototype.visitInterval=eg;Fi.prototype.visitDuration=eg;Fi.prototype.visitFixedSizeList=zQ;Fi.prototype.visitMap=zQ;class Zke extends Ske{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new t9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Dy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return X6(t)?t.then(n=>this.writeAll(n)):Q6(t)?WQ(this,t):qQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof t9?this._sink=t:(this._sink=new t9,t&&Nxt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Pxt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Gz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ru&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof El&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Gz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof El?t instanceof UTt||this._writeRecordBatch(t):t instanceof Ru?this.writeAll(t.batches):tQ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=th.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===_s.RecordBatch?this._recordBatchBlocks.push(new G0(a,t.bodyLength,this._position)):t.headerType===_s.DictionaryBatch&&this._dictionaryBlocks.push(new G0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=er(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(th.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(UQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Fi.assemble(t),o=new Vl(t.numRows,r,i),a=th.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Fi.assemble(new hr([t])),u=new Vl(t.length,s,o),l=new $h(u,n,r),c=th.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class VQ extends Zke{static writeAll(t,n){const r=new VQ(n);return X6(t)?t.then(i=>r.writeAll(i)):Q6(t)?WQ(r,t):qQ(r,t)}}class HQ extends Zke{static writeAll(t){const n=new HQ;return X6(t)?t.then(r=>n.writeAll(r)):Q6(t)?WQ(n,t):qQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Wz.encode(new Wz(t,Os.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function qQ(e,t){let n=t;t instanceof Ru&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function WQ(e,t){var n,r,i,s,o,a,u;return Mp(this,void 0,void 0,function*(){try{for(n=!0,r=XC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function gCt(e,t="stream"){return(t==="stream"?VQ:HQ).writeAll(e).toUint8Array(!0)}function GQ(e,t=1){return(e*t+63&-64||64)/t}function X0(e,t,n=e.BYTES_PER_ELEMENT){return new e(GQ(t,n))}function YQ(e){return e instanceof br?e:new br(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function yCt(e){return new hr([YQ(e)])}const KQ=new TextEncoder;function vCt(e,t,n){const r=KQ.encode(n);return e.set(r,t),r.length}function bCt(e,t,n){return KQ.encodeInto(n,e.subarray(t)).written}const _Ct=KQ.encodeInto?bCt:vCt;function ede(e,t){const n=X0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function wCt(e,t){const n=X0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function ECt(e,t){const n=X0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function xCt(e,t){const n=X0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function SCt(e){const t=m$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function TCt(e,t,n){const r=X0(Int32Array,t+1),i=X0(Uint8Array,3*n);let s=0;return{set(o,a){s+=_Ct(i,s,o),r[a+1]=s},data:()=>{const o=GQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function CCt(e,t){const n=[],r=X0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:ACt(e.dictionary,n,o)})}}function ACt(e,t,n){const r=TCt(e,t.length,n);return t.forEach(r.set),yCt(r.data())}function ICt(e,t){const n=X0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function kCt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?ede:null;break;case re.Float:r=e.precision>0?ede:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?CCt:null;break;case re.Bool:r=wCt;break;case re.Date:r=e.unit?xCt:ECt;break}return r==null?SCt(e):n?ICt(r(e,t),t):r(e,t)}function RCt(e,t){const n=e.length,r=GQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),YQ({type:t,length:n,buffers:[null,i]})}function eRe(e,t,n,r,i=!0){const s=kCt(r,e,i);return t(n,s.set),YQ(s.data())}function XQ(e){if(e instanceof fn||e==null)return e;switch(e){case re.Binary:return new DA;case re.Bool:return new $A;case re.DateDay:return new Gxt;case re.DateMillisecond:case re.Date:return new Yxt;case re.Dictionary:return new W0(new OE,new H0);case re.Float16:return new SIe;case re.Float32:return new fQ;case re.Float64:case re.Float:return new dQ;case re.Int8:return new iQ;case re.Int16:return new sQ;case re.Int32:case re.Int:return new H0;case re.Int64:return new oQ;case re.IntervalDayTime:return new Zxt;case re.Interval:case re.IntervalYearMonth:return new eSt;case re.Null:return new km;case re.TimeMicrosecond:return new Qxt;case re.TimeMillisecond:case re.Time:return new Xxt;case re.TimeNanosecond:return new Jxt;case re.TimeSecond:return new Kxt;case re.Uint8:return new aQ;case re.Uint16:return new uQ;case re.Uint32:return new lQ;case re.Uint64:return new cQ;case re.Utf8:return new OE;default:Sn(`Unsupported type code: ${Oh(e)}. Use a data type constructor instead?`)}}function NCt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function tRe(e,t){const n=Xz();return e(t,n.add),n}function Xz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Im(t))++e.dates,NCt(t)&&++e.utcdays;else if(t1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Xz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Xz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return XQ(PCt(e))}};return e}function PCt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Sn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Sn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=jr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new LE(e.minlen,n):new ME(n)}else if(e.structs===t){const n=e.struct_prof;return new ha(Object.keys(n).map(r=>jr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Sn("Type inference failure")}}}}function OCt(e,t,n,r,i,s=!0){if(i=XQ(i),!i){const o=tRe(r,t);s=o.nulls>0,i=o.type()}return eRe(n,r,t,i,s)}function DCt(e,t,n,r,i,s=!0){i=XQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=$Ct(o);if(u&&a&&tde(u.type,i))return u;const l=o.data;if(yk(l)){const c=MCt(l);if(a&&c&&tde(c,i))return RCt(l,c);i=i||c,s=!1}if(!i){const c=tRe(r,o);s=c.nulls>0,i=c.type()}return eRe(n,r,o,i,s)}function $Ct(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function MCt(e){const n={Float32Array:fQ,Float64Array:dQ,Int8Array:iQ,Int16Array:sQ,Int32Array:H0,Uint8Array:aQ,Uint16Array:uQ,Uint32Array:lQ,BigInt64Array:oQ,BigUint64Array:cQ}[e.constructor.name];return n?new n:null}function tde(e,t){return!e||!t?!0:e.compareTo(t)}function LCt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function FCt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&t1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const jCt=()=>Sn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function BCt(){try{return Ru}catch{jCt()}}function nRe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=UCt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Sn("Column length mismatch"),a[l]=c});const u=BCt();return new u(a)}function UCt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=yi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:OCt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:LCt(e,r,i)};if(zCt(e))return{dataFrom:DCt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:FCt(e,r,i)};Sn("Unsupported input data type")}function zCt(e){return e&&yi(e.reify)}function VCt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return gCt(nRe(e,r),n)}function HCt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function qCt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Im(u))++i,HCt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function s4(e,t){return yi(t)?t(e):t||e.columnNames()}function rRe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=qCt(WCt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function WCt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function QQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function GCt(e,t={}){const n=s4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Im(l)?G6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return QQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function iRe(e,t={}){if(yi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Im(e))return t.utc?G6(e):wAe(e);{const r=JSON.stringify(e,(s,o)=>yk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function o4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function YCt(e,t={}){const n=s4(e,t.columns),{align:r,format:i}=rRe(e,n,t),s=KCt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(iRe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return QQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function KCt(e){return o4(e.style,t=>yi(t)?t:()=>t)}function XCt(e,t=!0,n=!1){return e===void 0||e?t:n}const QCt=e=>Im(e)?G6(e,!0):e;function JCt(e,t={}){const n=XCt(t.schema),r=t.format||{},i=s4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||QCt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function ZCt(e,t={}){const n=s4(e,t.columns),{align:r,format:i}=rRe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return QQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(iRe(u,i[l]))+"|"}}),a+`
`}function sRe(e,t){for(const[n,r]of Y6(t))e.set(n,r);return e}function e2t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Nm(e,t,n=new Map){return t=ru(t)?e.columnName(t):t,zo(t)?n.set(t,t):dr(t)?t.forEach(r=>Nm(e,r,n)):yi(t)?Nm(e,t(e),n):xa(t)?sRe(n,t):Sn(`Invalid column selection: ${Oh(t)}`),n}function a4(e,t){return e.toObject=t,e}function oRe(e){return dr(e)?e.map(oRe):e&&e.toObject?e.toObject():e}function FE(){return a4(e=>e.columnNames(),()=>({all:[]}))}function aRe(...e){return e=e.flat(),a4(t=>{const n=Nm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:oRe(e)}))}function t2t(e,t){return a4(n=>{let r=ru(e)?e:n.columnIndex(e),i=ru(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function n2t(e){return zo(e)&&(e=RegExp(e2t(e))),a4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function r2t(e){return yk(e.data)?e.data.constructor:Array}class nh extends REt{static from(t,n){return new nh(OEt(t,n),n)}static new(t,n){if(t instanceof nh)return t;const r={},i=[];for(const[s,o]of Y6(t))r[s]=o,i.push(s);return new nh(r,n||i)}constructor(t,n,r,i,s,o){o4(t,PEt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new nh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:uxt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Zl(r).groupby(r.groups());return t.forEach(s=>{s=nh.new(s),s.numRows()!==n&&Sn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Sn(`Unrecognized column: ${t}`)}object(t=0){return nde(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Nm(this,t.columns||FE()),o=WAe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),cxt(this,u,a,n)}return a}*[Symbol.iterator](){const t=nde(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(r2t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=lxt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return nRe(this,t)}toArrowBuffer(t){return VCt(this,t)}toCSV(t){return GCt(this,t)}toHTML(t){return YCt(this,t)}toJSON(t){return JCt(this,t)}toMarkdown(t){return ZCt(this,t)}}function nde(e){let t=e._builder;if(!t){const n=WAe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class i2t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function tr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=s2t[e.type];s&&s(e,t,n)}const qN=(e,t,n)=>{tr(e.argument,t,n,e)},i9=(e,t,n)=>{tr(e.left,t,n,e),tr(e.right,t,n,e)},rde=(e,t,n)=>{tr(e.test,t,n,e),tr(e.consequent,t,n,e),e.alternate&&tr(e.alternate,t,n,e)},s9=(e,t,n)=>{Ud(e.params,t,n,e),tr(e.body,t,n,e)},ide=(e,t,n)=>{tr(e.callee,t,n,e),Ud(e.arguments,t,n,e)},Ud=(e,t,n,r)=>{e.forEach(i=>tr(i,t,n,r))},s2t={TemplateLiteral:(e,t,n)=>{Ud(e.expressions,t,n,e),Ud(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{tr(e.object,t,n,e),tr(e.property,t,n,e)},CallExpression:ide,NewExpression:ide,ArrayExpression:(e,t,n)=>{Ud(e.elements,t,n,e)},AssignmentExpression:i9,AwaitExpression:qN,BinaryExpression:i9,LogicalExpression:i9,UnaryExpression:qN,UpdateExpression:qN,ConditionalExpression:rde,ObjectExpression:(e,t,n)=>{Ud(e.properties,t,n,e)},Property:(e,t,n)=>{tr(e.key,t,n,e),tr(e.value,t,n,e)},ArrowFunctionExpression:s9,FunctionExpression:s9,FunctionDeclaration:s9,VariableDeclaration:(e,t,n)=>{Ud(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{tr(e.id,t,n,e),tr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{tr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Ud(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{tr(e.expression,t,n,e)},IfStatement:rde,ForStatement:(e,t,n)=>{tr(e.init,t,n,e),tr(e.test,t,n,e),tr(e.update,t,n,e),tr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{tr(e.test,t,n,e),tr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{tr(e.body,t,n,e),tr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{tr(e.discriminant,t,n,e),Ud(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&tr(e.test,t,n,e),Ud(e.consequent,t,n,e)},ReturnStatement:qN,Program:(e,t,n)=>{tr(e.body[0],t,n,e)}};function uRe(e){delete e.start,delete e.end,delete e.optional}function sde(e){uRe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function o2t(e){return tr(e,null,{Column:sde,Constant:sde,Default:uRe}),e}function Ds(e,t){return t&&t.type===e}function a2t(e){return Ds(hxt,e)||Ds(dxt,e)}function u2t(e){return yi(e)?e:()=>e}const l2t="Escaped functions are not valid as rollup or pivot values.";function c2t(e,t,n){e.aggronly&&Sn(l2t);const r="(row,data)=>fn("+qAe(e.table.columnNames())+",$)";return{escape:eQ.escape(r,u2t(t.expr),n)}}var f2t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],lRe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],d2t="-----------------------------------------------------------------------------------------------------------------------------------------------------",cRe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",o9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},a9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h2t={5:a9,"5module":a9+" export import",6:a9+" const class extends export import super"},p2t=/^in(stanceof)?$/,m2t=new RegExp("["+cRe+"]"),g2t=new RegExp("["+cRe+d2t+"]");function Qz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Pm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&m2t.test(String.fromCharCode(e)):t===!1?!1:Qz(e,lRe)}function jE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&g2t.test(String.fromCharCode(e)):t===!1?!1:Qz(e,lRe)||Qz(e,f2t)}var ar=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function rc(e,t){return new ar(e,{beforeExpr:!0,binop:t})}var ic={beforeExpr:!0},bu={startsExpr:!0},JQ={};function qn(e,t){return t===void 0&&(t={}),t.keyword=e,JQ[e]=new ar(e,t)}var K={num:new ar("num",bu),regexp:new ar("regexp",bu),string:new ar("string",bu),name:new ar("name",bu),privateId:new ar("privateId",bu),eof:new ar("eof"),bracketL:new ar("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ar("]"),braceL:new ar("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ar("}"),parenL:new ar("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ar(")"),comma:new ar(",",ic),semi:new ar(";",ic),colon:new ar(":",ic),dot:new ar("."),question:new ar("?",ic),questionDot:new ar("?."),arrow:new ar("=>",ic),template:new ar("template"),invalidTemplate:new ar("invalidTemplate"),ellipsis:new ar("...",ic),backQuote:new ar("`",bu),dollarBraceL:new ar("${",{beforeExpr:!0,startsExpr:!0}),eq:new ar("=",{beforeExpr:!0,isAssign:!0}),assign:new ar("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ar("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ar("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:rc("||",1),logicalAND:rc("&&",2),bitwiseOR:rc("|",3),bitwiseXOR:rc("^",4),bitwiseAND:rc("&",5),equality:rc("==/!=/===/!==",6),relational:rc("</>/<=/>=",7),bitShift:rc("<</>>/>>>",8),plusMin:new ar("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:rc("%",10),star:rc("*",10),slash:rc("/",10),starstar:new ar("**",{beforeExpr:!0}),coalesce:rc("??",1),_break:qn("break"),_case:qn("case",ic),_catch:qn("catch"),_continue:qn("continue"),_debugger:qn("debugger"),_default:qn("default",ic),_do:qn("do",{isLoop:!0,beforeExpr:!0}),_else:qn("else",ic),_finally:qn("finally"),_for:qn("for",{isLoop:!0}),_function:qn("function",bu),_if:qn("if"),_return:qn("return",ic),_switch:qn("switch"),_throw:qn("throw",ic),_try:qn("try"),_var:qn("var"),_const:qn("const"),_while:qn("while",{isLoop:!0}),_with:qn("with"),_new:qn("new",{beforeExpr:!0,startsExpr:!0}),_this:qn("this",bu),_super:qn("super",bu),_class:qn("class",bu),_extends:qn("extends",ic),_export:qn("export"),_import:qn("import",bu),_null:qn("null",bu),_true:qn("true",bu),_false:qn("false",bu),_in:qn("in",{beforeExpr:!0,binop:7}),_instanceof:qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},rf=/\r\n?|\n|\u2028|\u2029/,y2t=new RegExp(rf.source,"g");function oS(e){return e===10||e===13||e===8232||e===8233}function fRe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(oS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var dRe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,mc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,hRe=Object.prototype,v2t=hRe.hasOwnProperty,b2t=hRe.toString,Sk=Object.hasOwn||function(e,t){return v2t.call(e,t)},ode=Array.isArray||function(e){return b2t.call(e)==="[object Array]"},ade=Object.create(null);function e0(e){return ade[e]||(ade[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Q0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var _2t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,FA=function(t,n){this.line=t,this.column=n};FA.prototype.offset=function(t){return new FA(this.line,this.column+t)};var u4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function pRe(e,t){for(var n=1,r=0;;){var i=fRe(e,r,t);if(i<0)return new FA(n,t-r);++n,r=i}}var Jz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ude=!1;function w2t(e){var t={};for(var n in Jz)t[n]=e&&Sk(e,n)?e[n]:Jz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ude&&typeof console=="object"&&console.warn&&(ude=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),ode(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return ode(t.onComment)&&(t.onComment=E2t(t,t.onComment)),t}function E2t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new u4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var jA=1,aS=2,ZQ=4,mRe=8,gRe=16,yRe=32,eJ=64,vRe=128,Tk=256,tJ=jA|aS|Tk;function nJ(e,t){return aS|(e?ZQ:0)|(t?mRe:0)}var g$=0,rJ=1,tg=2,bRe=3,_Re=4,wRe=5,qs=function(t,n,r){this.options=t=w2t(t),this.sourceFile=t.sourceFile,this.keywords=e0(h2t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=o9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=e0(i);var s=(i?i+" ":"")+o9.strict;this.reservedWordsStrict=e0(s),this.reservedWordsStrictBind=e0(s+" "+o9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(rf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(jA),this.regexpState=null,this.privateNameStack=[]},tp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};qs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};tp.inFunction.get=function(){return(this.currentVarScope().flags&aS)>0};tp.inGenerator.get=function(){return(this.currentVarScope().flags&mRe)>0&&!this.currentVarScope().inClassFieldInit};tp.inAsync.get=function(){return(this.currentVarScope().flags&ZQ)>0&&!this.currentVarScope().inClassFieldInit};tp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Tk)return!1;if(t.flags&aS)return(t.flags&ZQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};tp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&eJ)>0||n||this.options.allowSuperOutsideMethod};tp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&vRe)>0};tp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};tp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(aS|Tk))>0||n};tp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Tk)>0};qs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};qs.parse=function(t,n){return new this(n,t).parse()};qs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};qs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(qs.prototype,tp);var fu=qs.prototype,x2t=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;fu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){mc.lastIndex=e,e+=mc.exec(this.input)[0].length;var t=x2t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){mc.lastIndex=e+t[0].length;var n=mc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||rf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,mc.lastIndex=e,e+=mc.exec(this.input)[0].length,this.input[e]===";"&&e++}};fu.eat=function(e){return this.type===e?(this.next(),!0):!1};fu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};fu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};fu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};fu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||rf.test(this.input.slice(this.lastTokEnd,this.start))};fu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};fu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};fu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};fu.expect=function(e){this.eat(e)||this.unexpected()};fu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var l4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};fu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};fu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};fu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};fu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Dt=qs.prototype;Dt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var iJ={kind:"loop"},S2t={kind:"switch"};Dt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;mc.lastIndex=this.pos;var t=mc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Pm(r,!0)){for(var i=n+1;jE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!p2t.test(s))return!0}return!1};Dt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;mc.lastIndex=this.pos;var e=mc.exec(this.input),t=this.pos+e[0].length,n;return!rf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(jE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Dt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){mc.lastIndex=this.pos;var o=mc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Dt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Dt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Dt.parseDoStatement=function(e){return this.next(),this.labels.push(iJ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Dt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(iJ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,u=new l4,l=this.start,c=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===K._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===l&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,u),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};Dt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,x2|(n?0:Zz),!1,t)};Dt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Dt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Dt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(S2t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Dt.parseThrowStatement=function(e){return this.next(),rf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var T2t=[];Dt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?yRe:0),this.checkLValPattern(e,t?_Re:tg),this.expect(K.parenR),e};Dt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Dt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Dt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(iJ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Dt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Dt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Dt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Dt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Dt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Dt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Dt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Dt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Dt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?rJ:tg,!1)};var x2=1,Zz=2,ERe=4;Dt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Zz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&x2&&(e.id=t&ERe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Zz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?rJ:tg:bRe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(nJ(e.async,e.generator)),t&x2||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&x2?"FunctionDeclaration":"FunctionExpression")};Dt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Dt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&C2t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Dt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&y$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Dt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Dt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Dt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&y$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Dt.parseClassField=function(e){if(y$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&y$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Dt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Tk|eJ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Dt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,tg,!1)):(t===!0&&this.unexpected(),e.id=null)};Dt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Dt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Dt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Sk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function C2t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function y$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Dt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Dt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Dt.parseExportDeclaration=function(e){return this.parseStatement(null)};Dt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,x2|ERe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Dt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Sk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Dt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Dt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Dt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Dt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Dt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Dt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=T2t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Dt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,tg),this.finishNode(e,"ImportSpecifier")};Dt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,tg),this.finishNode(e,"ImportDefaultSpecifier")};Dt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,tg),this.finishNode(e,"ImportNamespaceSpecifier")};Dt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Dt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return _2t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Dt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Dt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var sf=qs.prototype;sf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};sf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};sf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};sf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};sf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};sf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};sf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};sf.parseBindingListItem=function(e){return e};sf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};sf.checkLValSimple=function(e,t,n){t===void 0&&(t=g$);var r=t!==g$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===tg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Sk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==wRe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};sf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=g$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};sf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=g$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var mf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Si={b_stat:new mf("{",!1),b_expr:new mf("{",!0),b_tmpl:new mf("${",!1),p_stat:new mf("(",!1),p_expr:new mf("(",!0),q_tmpl:new mf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new mf("function",!1),f_expr:new mf("function",!0),f_expr_gen:new mf("function",!0,!1,null,!0),f_gen:new mf("function",!1,!1,null,!0)},uS=qs.prototype;uS.initialContext=function(){return[Si.b_stat]};uS.curContext=function(){return this.context[this.context.length-1]};uS.braceIsBlock=function(e){var t=this.curContext();return t===Si.f_expr||t===Si.f_stat?!0:e===K.colon&&(t===Si.b_stat||t===Si.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?rf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Si.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};uS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};uS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};uS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Si.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Si.b_stat:Si.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Si.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Si.p_stat:Si.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Si.p_stat)&&!(e===K._return&&rf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Si.b_stat)?this.context.push(Si.f_expr):this.context.push(Si.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Si.q_tmpl?this.context.pop():this.context.push(Si.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Si.f_expr?this.context[t]=Si.f_expr_gen:this.context[t]=Si.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=qs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new l4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&xRe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&eV(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function xRe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&xRe(e.expression)}function eV(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&eV(e.expression)||e.type==="ParenthesizedExpression"&&eV(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new l4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Si.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Si.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new l4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var A2t=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=A2t,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!rf.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(nJ(t,r.generator)|eJ|(n?vRe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(nJ(n,!1)|gRe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,wRe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,rJ,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var v$=qs.prototype;v$.raise=function(e,t){var n=pRe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};v$.raiseRecoverable=v$.raise;v$.curPosition=function(){if(this.options.locations)return new FA(this.curLine,this.pos-this.lineStart)};var My=qs.prototype,I2t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};My.enterScope=function(e){this.scopeStack.push(new I2t(e))};My.exitScope=function(){this.scopeStack.pop()};My.treatFunctionsAsVarInScope=function(e){return e.flags&aS||!this.inModule&&e.flags&jA};My.declareName=function(e,t,n){var r=!1;if(t===tg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&jA&&delete this.undefinedExports[e]}else if(t===_Re){var s=this.currentScope();s.lexical.push(e)}else if(t===bRe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&yRe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&jA&&delete this.undefinedExports[e],u.flags&tJ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};My.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};My.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};My.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tJ)return t}};My.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tJ&&!(t.flags&gRe))return t}};var c4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new u4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Ck=qs.prototype;Ck.startNode=function(){return new c4(this,this.start,this.startLoc)};Ck.startNodeAt=function(e,t){return new c4(this,e,t)};function SRe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Ck.finishNode=function(e,t){return SRe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Ck.finishNodeAt=function(e,t,n,r){return SRe.call(this,e,t,n,r)};Ck.copyNode=function(e){var t=new c4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var TRe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",CRe=TRe+" Extended_Pictographic",ARe=CRe,IRe=ARe+" EBase EComp EMod EPres ExtPict",kRe=IRe,k2t=kRe,R2t={9:TRe,10:CRe,11:ARe,12:IRe,13:kRe,14:k2t},N2t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",P2t={9:"",10:"",11:"",12:"",13:"",14:N2t},lde="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",RRe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",NRe=RRe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",PRe=NRe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ORe=PRe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",DRe=ORe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",O2t=DRe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",D2t={9:RRe,10:NRe,11:PRe,12:ORe,13:DRe,14:O2t},$Re={};function $2t(e){var t=$Re[e]={binary:e0(R2t[e]+" "+lde),binaryOfStrings:e0(P2t[e]),nonBinary:{General_Category:e0(lde),Script:e0(D2t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var u9=0,cde=[9,10,11,12,13,14];u9<cde.length;u9+=1){var M2t=cde[u9];$2t(M2t)}var At=qs.prototype,b$=function(t,n){this.parent=t,this.base=n||this};b$.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};b$.prototype.sibling=function(){return new b$(this.parent,this.base)};var np=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=$Re[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};np.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};np.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};np.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};np.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};np.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};np.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};np.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};np.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};np.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function L2t(e){for(var t in e)return!0;return!1}At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&L2t(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new b$(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return MRe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function MRe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!MRe(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Q0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Q0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),F2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function F2t(e){return Pm(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),j2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function j2t(e){return jE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!f4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return LRe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function LRe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&B2t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function B2t(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var FRe=0,Om=1,bc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(U2t(t))return e.lastIntValue=-1,e.advance(),Om;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===bc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return FRe};function U2t(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Om}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return FRe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Sk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Om;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return bc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";jRe(t=e.current());)e.lastStringValue+=Q0(t),e.advance();return e.lastStringValue!==""};function jRe(e){return LRe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";z2t(t=e.current());)e.lastStringValue+=Q0(t),e.advance();return e.lastStringValue!==""};function z2t(e){return jRe(e)||f4(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===bc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Om:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Om)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||zRe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Om,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===bc&&(t=bc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==bc&&(t=Om);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===bc&&(t=bc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Om:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===bc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===bc&&(t=bc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Om:bc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&V2t(n)||H2t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function V2t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function H2t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return q2t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function q2t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return f4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;f4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function f4(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;BRe(n=e.current());)e.lastIntValue=16*e.lastIntValue+URe(n),e.advance();return e.pos!==t};function BRe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function URe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return zRe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function zRe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!BRe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+URe(i),e.advance()}return!0};var sJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new u4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Vn=qs.prototype;Vn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new sJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Vn.getToken=function(){return this.next(),new sJ(this)};typeof Symbol<"u"&&(Vn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Vn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Vn.readToken=function(e){return Pm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Vn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Vn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=fRe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Vn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!oS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Vn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&dRe.test(String.fromCharCode(e)))++this.pos;else break e}}};Vn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Vn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Vn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Vn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Vn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Vn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Vn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||rf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Vn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Vn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Vn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Vn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Pm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Q0(t)+"'")};Vn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Q0(e)+"'")};Vn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Vn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(rf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new np(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Vn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function W2t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function VRe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Vn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=VRe(this.input.slice(t,this.pos)),++this.pos):Pm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Vn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=VRe(this.input.slice(t,this.pos));return++this.pos,Pm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Pm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=W2t(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Vn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Vn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(oS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var HRe={};Vn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===HRe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Vn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw HRe;this.raise(e,t)};Vn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(oS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Vn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Vn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Q0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return oS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Vn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Vn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(jE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Pm:jE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Q0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Vn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=JQ[e]),this.finishToken(t,e)};var G2t="8.12.1";qs.acorn={Parser:qs,version:G2t,defaultOptions:Jz,Position:FA,SourceLocation:u4,getLineInfo:pRe,Node:c4,TokenType:ar,tokTypes:K,keywordTypes:JQ,TokContext:mf,tokContexts:Si,isIdentifierChar:jE,isIdentifierStart:Pm,Token:sJ,isNewLine:oS,lineBreak:rf,lineBreakG:y2t,nonASCIIwhitespace:dRe};function Y2t(e,t){return qs.parse(e,t)}const oJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},K2t={ecmaVersion:11},fde="$",X2t="d",Q2t="d1",J2t="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),Z2t=So("Aggregate function"),eAt=So("Window function"),tAt="Invalid argument",aJ="Invalid column reference",nAt=aJ+" (must be input to an aggregate function)",qRe="Invalid function call",rAt="Invalid member expression",iAt="Invalid operator parameter",sAt="Invalid param reference",oAt="Invalid variable reference",aAt="Variable not accessible in operator call",uAt="Unsupported variable declaration",lAt="Unsupported destructuring pattern",WRe="Table expressions do not support closures",GRe="Use aq.escape(fn) to use a function as-is (including closures)",cAt="use table.params({ name: value }) to define dynamic parameters",fAt="use aq.addFunction(name, fn) to add new op functions",dAt=`
Note: ${WRe}. ${GRe}, or ${cAt}.`,YRe=`
Note: ${WRe}. ${GRe}, or ${fAt}.`,hAt=`The ${VAe} method is not valid in multi-table expressions.`;function pAt(e,t){const n=mAt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,a2t(r)?(yAt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Q2t),e.scope.add(e.tuple2=J2t),e.scope.add(e.$param=fde)):(e.scope.add(e.tuple=X2t),e.scope.add(e.$param=fde)),tr(r,e,uJ),e.root}function mAt(e){try{const t=e.field?gAt(e):dr(e)?Oh(e):e;return Y2t(`expr=(${t})`,K2t).body[0].expression.right}catch{Sn(`Expression parse error: ${e+""}`)}}function gAt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const uJ={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){rV(e.id,t)},Identifier(e,t,n){QRe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,oAt,dAt)},CallExpression(e,t){const n=KRe(e.callee),r=BAe(n)||UAe(n);if(r){if((t.join||t.aggregate===!1)&&JX(n)&&Z2t(e,t),(t.join||t.window===!1)&&ZX(n)&&eAt(e,t),t.$op=1,t.ast)nV(e,n,t),e.arguments.forEach(i=>tr(i,t,tV));else{const i=t.op(vAt(t,r,n,e.arguments));Object.assign(e,{type:$Ae,name:i.id})}return t.$op=0,!1}else jAe(n)?nV(e,n,t):t.error(e,qRe,YRe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ds(E0,r))return;const{name:s}=r;if(XRe(e)&&Ds(E0,i)&&ed(oJ,i.name)){eNe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return dde(e,o,t,JRe,n);if(s===t.$param)return dde(e,o,t,_At);t.paramsRef.has(s)?BA(e,t.paramsRef.get(s)):t.columnRef.has(s)?ZRe(r,s,t,e):ed(t.params,s)&&BA(r,s)}};function dde(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ds(eS,s))a=s.value;else try{tr(s,n,uJ,e),a=n.param(s)}catch{n.error(e,rAt)}return r(e,a,t,n,i),!1}const tV={...uJ,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){QRe(e,t,n)&&t.error(e,aAt)},CallExpression(e,t){const n=KRe(e.callee);jAe(n)?nV(e,n,t):t.error(e,qRe,YRe)}};function yAt(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(vT(t,n[0],"tuple1",i(1)),r>1&&vT(t,n[1],"tuple2",i(2)),r>2&&vT(t,n[2],"$param",s)):(vT(t,n[0],"tuple",i(0)),r>1&&vT(t,n[1],"$param",s))),t.root=e.body}function vT(e,t,n,r){Ds(E0,t)?(e.scope.add(t.name),e[n]=t.name):Ds(OAe,t)&&t.properties.forEach(i=>{const s=Ds(E0,i.key)?i.key.name:Ds(eS,i.key)?i.key.value:e.error(i,tAt);Ds(E0,i.value)||e.error(i.value,lAt),r(i.value.name,s)})}function vAt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(tr(u,e,tV),i.push(e.field(u))):l<a?(tr(u,e,tV),s.push(e.param(u))):e.error(u,iAt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function KRe(e){return Ds(E0,e)?e.name:Ds(PAe,e)?XRe(e)?bAt(e.property.name):e.property.name:null}function XRe(e){return Ds(E0,e.object)&&e.object.name==="Math"}function bAt(e){return e==="max"?"greatest":e==="min"?"least":e}function QRe(e,t,n){const{name:r}=e;if(!(Ds(PAe,n)&&n.property===e)){if(!(Ds(DAe,n)&&n.key===e))if(t.paramsRef.has(r))BA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))ZRe(e,r,t,n);else if(ed(t.params,r))BA(e,r);else if(ed(oJ,r))eNe(e,r);else return!0}}function JRe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,aJ),r.aggronly&&!r.$op&&r.error(e,nAt),zAe(e,t,n,o,i)}function ZRe(e,t,n,r){const[i,s]=n.columnRef.get(t);JRe(e,i,s,n,r)}function _At(e,t,n,r){r.params&&!ed(r.params,t)&&r.error(e,sAt),BA(e,t)}function BA(e,t){e.type=vxt,e.name=t}function eNe(e,t){e.type=mxt,e.name=t,e.raw=oJ[t]}function nV(e,t,n){if(t===VAe){const r=n.table;r||n.error(e,hAt),HAe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=ru(s)?r.columnName(s):s;return r.column(o)||n.error(i,aJ),o}):r.columnNames())}else e.callee={type:yxt,name:t}}function rV(e,t){Ds(E0,e)?t.scope.add(e.name):Ds(fxt,e)?e.elements.forEach(n=>rV(n,t)):Ds(OAe,e)?e.properties.forEach(n=>rV(n.value,t)):t.error(e.id,uAt)}const wAt={[vk]:1,[$Ae]:1};function el(e,t={}){const n=t.generate||Z3,r=t.compiler||eQ,i=xAt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=EAt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ds(eS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?o2t(g):f(n(g),i));u.push(y),wAt[g.type]&&y!==g&&xa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Sn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of Y6(e))d.value(m+"",g.escape?c2t(d,g,i):pAt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function EAt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function xAt(e){return(e.table?l9(e.table):e.join?{...l9(e.join[1]),...l9(e.join[0])}:{})||{}}function l9(e){return e&&yi(e.params)?e.params():{}}const tNe="Expr",gf="ExprList",nNe="ExprNumber",yC="ExprObject",lw="JoinKeys",_$="JoinValues",uc="Options",lJ="OrderKeys",Tg="SelectionList",Fv="TableRef",cw="TableRefList",SAt="Descending",TAt="Query",CAt="Selection",AAt="Verb",IAt="Window";function d4(e,t){return e&&e.expr?new hde({...e,...t}):new hde(t,e)}class hde{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...yi(this.expr)?{func:!0}:{}}}}function kAt(e){return d4(e,{desc:!0})}function U1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return d4(e,t?{expr:t,...r}:r)}function RAt(e,t,n){return d4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function NAt(e){const t=n=>n;return t.toString=()=>e,t}function pde(e,t){return t=t&&yi(t.query)?t.query():t,t&&yi(t.evaluate)?t.evaluate(null,e):e(t)}function rNe(e){return xa(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function UA(e){return e&&yi(e.toObject)?e.toObject():yi(e)?{expr:String(e),func:!0}:dr(e)?e.map(UA):xa(e)?o4(e,t=>UA(t)):e}function cJ(e){return dr(e)?e.map(cJ):xa(e)?dr(e.verbs)?dJ.from(e):dr(e.all)?FE():dr(e.range)?t2t(...e.range):dr(e.match)?n2t(RegExp(...e.match)):dr(e.not)?aRe(e.not.map(UA)):PAt(e):e}function PAt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=U1(n):e.func===!0&&(t=n=NAt(n)),xa(e.window)){const{frame:r,peers:i}=e.window;t=n=RAt(n,r,i)}e.desc===!0&&(t=kAt(n))}return e===t?o4(e,r=>cJ(r)):t}function OAt(e){return dr(e)?e.map(DAt):e}function DAt(e){const t=[];return Ju(e).forEach(n=>{ru(n)?t.push(n):zo(n)?t.push(U1(n,null)):xa(n)&&n.expr||yi(n)?t.push(n):Sn(`Invalid key value: ${n+""}`)}),t}function $At(e){return dr(e)?e.map(MAt):e}function MAt(e,t){return t<2?Ju(e):e}function LAt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(xa(r)&&!yi(r))for(const i in r)t.push(r[i]);else n=ru(r)?r:zo(r)?U1(n):yi(r)?n:Sn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const FAt={[tNe]:aNe,[gf]:BE,[nNe]:HAt,[yC]:J0,[lw]:qAt,[_$]:WAt,[lJ]:BE,[Tg]:zAt};function jAt(e,t,n){return t===Fv?mde(e):t===cw?e.map(mde):iNe(UA(e),t,n)}function iNe(e,t,n){return t===uc?e&&BAt(e,n):FAt[t](e)}function BAt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?iNe(i,t[r]):i}return n}function UAt(e,t){return el({expr:e},{...t,ast:!0}).exprs[0]}function fJ(e){return{type:vk,name:e}}function sNe(e){return{type:vk,index:e}}function J0(e,t){if(zo(e))return UAt(e,t);if(e.expr){let n;if(e.field===!0?n=fJ(e.expr):e.func===!0&&(n=J0(e.expr,t)),n)return e.desc&&(n={type:SAt,expr:n}),e.window&&(n={type:IAt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...J0(e[n],t),as:n}))}function oNe(e){const t=CAt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:BE(e.not)}:e.range?{type:t,operator:"range",arguments:BE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Sn("Invalid input")}function zAt(e){return Ju(e).map(VAt).flat()}function VAt(e){return rNe(e)?oNe(e):ru(e)?sNe(e):zo(e)?fJ(e):xa(e)?Object.keys(e).map(t=>({type:vk,name:t,as:e[t]})):Sn("Invalid input")}function aNe(e){return rNe(e)?oNe(e):ru(e)?sNe(e):zo(e)?fJ(e):xa(e)?J0(e):Sn("Invalid input")}function BE(e){return Ju(e).map(aNe).flat()}function HAt(e){return ru(e)?e:J0(e)}function qAt(e){return dr(e)?e.map(BE):J0(e,{join:!0})}function WAt(e){return dr(e)?e.map((t,n)=>n<2?BE(t):J0(t,{join:!0})):J0(e,{join:!0})}function mde(e){return e&&yi(e.toAST)?e.toAST():e}class uNe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===lw?OAt(a):o===_$?$At(a):o===lJ?LAt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=iV[t.verb],r=(n.schema||[]).map(({name:i})=>cJ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Fv?pde(n,o):s===cw?o.map(a=>pde(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=UA(this[n])}),t}toAST(){const t={type:AAt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=jAt(this[n],r,i)}),t}}function Fr(e,t){return Object.assign((...n)=>new uNe(e,t,n),{schema:t})}const iV={count:Fr("count",[{name:"options",type:uc}]),derive:Fr("derive",[{name:"values",type:yC},{name:"options",type:uc,props:{before:Tg,after:Tg}}]),filter:Fr("filter",[{name:"criteria",type:yC}]),groupby:Fr("groupby",[{name:"keys",type:gf}]),orderby:Fr("orderby",[{name:"keys",type:lJ}]),relocate:Fr("relocate",[{name:"columns",type:Tg},{name:"options",type:uc,props:{before:Tg,after:Tg}}]),rename:Fr("rename",[{name:"columns",type:Tg}]),rollup:Fr("rollup",[{name:"values",type:yC}]),sample:Fr("sample",[{name:"size",type:nNe},{name:"options",type:uc,props:{weight:tNe}}]),select:Fr("select",[{name:"columns",type:Tg}]),ungroup:Fr("ungroup"),unorder:Fr("unorder"),reify:Fr("reify"),dedupe:Fr("dedupe",[{name:"keys",type:gf,default:[]}]),impute:Fr("impute",[{name:"values",type:yC},{name:"options",type:uc,props:{expand:gf}}]),fold:Fr("fold",[{name:"values",type:gf},{name:"options",type:uc}]),pivot:Fr("pivot",[{name:"keys",type:gf},{name:"values",type:gf},{name:"options",type:uc}]),spread:Fr("spread",[{name:"values",type:gf},{name:"options",type:uc}]),unroll:Fr("unroll",[{name:"values",type:gf},{name:"options",type:uc,props:{drop:gf}}]),lookup:Fr("lookup",[{name:"table",type:Fv},{name:"on",type:lw},{name:"values",type:gf}]),join:Fr("join",[{name:"table",type:Fv},{name:"on",type:lw},{name:"values",type:_$},{name:"options",type:uc}]),cross:Fr("cross",[{name:"table",type:Fv},{name:"values",type:_$},{name:"options",type:uc}]),semijoin:Fr("semijoin",[{name:"table",type:Fv},{name:"on",type:lw}]),antijoin:Fr("antijoin",[{name:"table",type:Fv},{name:"on",type:lw}]),concat:Fr("concat",[{name:"tables",type:cw}]),union:Fr("union",[{name:"tables",type:cw}]),intersect:Fr("intersect",[{name:"tables",type:cw}]),except:Fr("except",[{name:"tables",type:cw}])};let dJ=class lNe extends bAe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new lNe(t.map(uNe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return gde(this,"toObject")}toJSON(){return this.toObject()}toAST(){return gde(this,"toAST",{type:TAt})}};function gde(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function GAt(e,t){return new dJ(e._verbs.concat(t),e._params,e._table)}for(const e in iV){const t=iV[e];dJ.prototype["__"+e]=function(n,...r){return GAt(n,t(...r))}}function lS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function YAt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function hJ(e,t){const n=Zl();return t.forEach((r,i)=>{const s=zo(r)?r:i;if(s){const o=e.column(i)||Sn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function cNe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Sn("relocate requires a before or after option."),i&&s&&Sn("relocate accepts only one of the before or after options."),t=Nm(e,t);const o=[...Nm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),hJ(e,u)}function Ak(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function pJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function KAt(e,t=0,n=e.length){let r=n?e[t++]:ur;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function XAt(e,t=0,n=e.length){let r=n?e[t++]:ur;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function WN(e){return NA(e)?e:+e}function QAt(e,t){const n=e.length;if(!n)return ur;if((t=+t)<=0||n<2)return WN(e[0]);if(t>=1)return WN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=WN(e[i]);return NA(s)?s:s+(WN(e[i+1])-s)*(r-i)}class JAt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:KAt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:XAt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(pJ)),QAt(this._sorted,t)}}const w$=(e,t,n)=>lS(t,"{"+Ak(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function ZAt(e,t){const{ops:n,output:r}=eIt(e,t),i=e[0].fields,s=i.length,o=s===0?mJ:s===1?tIt:s===2?nIt:Sn("Unsupported field count: "+s);return new o(i,n,r,t)}function eIt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=BAe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class mJ extends i2t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new JAt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class tIt extends mJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=w$(n,s,"add"),this._rem=w$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Mf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Mf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class nIt extends mJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=w$(n,s,"add"),this._rem=w$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Mf(i)&&Mf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Mf(i)&&Mf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function kb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=cS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function cS(e,t,n){if(!t.length)return n;const r=fNe(t),i=e.groups(),s=i?i.size:1;return n=n||W6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=hNe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=dNe(e,o);o.write(a,n,0)}),n}function fNe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(ZAt(r[i],t));return n}function dNe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function hNe(e,t,n){const{keys:r,size:i}=n,s=W6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function pNe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function mNe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const yde=mNe(pJ);function rIt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?lS(["w","r","k"],"{"+Ak(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=yde.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=yde.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],x=a[E];for(let C=b;C<p.i0;++C)S.rem(x,s[C],e);for(let C=w;C<p.i1;++C)S.add(x,s[C],e);S.write(x,u,l)}return h(p,u,l),u}};return p}const iIt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),sIt=e=>!!e.peers;function oIt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=UAe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function aIt(e,t,n,r={},i){const s=e.data(),o=uIt(i,s),a=o.length,u=lS(["r","d","op"],"{"+Ak(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=lIt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function uIt(e,t){const n={};return e.forEach(r=>{const i=iIt(r),s=sIt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});JX(r.name)?a.push(r):u.push(oIt(r))}),Object.values(n).map(r=>rIt(t,r.frame,r.peers,r.winOps,fNe(r.aggOps,r.frame[0]!=null?-1:1)))}function lIt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function cIt(e){return ZX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function gJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Zl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=fIt(r),c=e.isGrouped()?e.groups().size:1,f=cS(e,u,W6(r.length,()=>Array(c)));return l.length?aIt(e,a,n,f,l):dIt(e,a,n,f),e.create(o)}function fIt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(cIt(s)?n:t).push(s)}return[t,n]}function dIt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function hIt(e,t,n={}){const r=gJ(e,el(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:cNe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function pIt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const GN=2147483648,mIt=4294967295;class gNe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&GN>>>t}set(t){this._bits[t>>5]|=GN>>>t}clear(t){this._bits[t>>5]&=~(GN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&mIt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=GN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function gIt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new gNe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function yIt(e,t){const n=el({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=gJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return gIt(e,r)}function yNe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=kb(e,r,n),l=Zl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,x)=>{const C=Ju(w(S,x)),A=Math.min(C.length,s);v(S,A);for(let R=0;R<A;++R)E[m+R]=C[R];b(m,A),m+=A})}else e.scan((w,E)=>{let S=0;const x=u.map(C=>{const A=Ju(C(w,E));return S=Math.min(Math.max(S,A.length),s),A});v(w,S);for(let C=0;C<y;++C){const A=h[C],R=x[C];for(let P=0;P<S;++P)A[m+P]=R[P]}b(m,S),m+=S});return e.create(l.new())}function vIt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=kb(e,r,n);return yNe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function td(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=ru(o)?t.columnName(o):o,zo(o)?i.set(o,U1(o)):yi(o)?Nm(t,o).forEach(s):xa(o)?sRe(i,o):Sn(`Invalid ${e} value: ${o+""}`)};return Ju(n).forEach(s),r.preparse&&r.preparse(i),el(i,{table:t,...r})}function bIt(e,t,n){return vIt(e,td("fold",e,t),n)}function vde(e,t,n,r){const i=n&&n.length;return _It(i?wIt(e,n,r):e,t,i)}function _It(e,{names:t,exprs:n,ops:r},i){const s=kb(e,r,n),o=i?null:Zl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Mf(p)?p:d(h)})}),i?e:e.create(o)}function wIt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=e$(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Zl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=e$(o.map((p,m)=>g=>g[m])),h=lS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),bde(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else bde(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function bde(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function yJ(e,{names:t,exprs:n,ops:r}){const i=Zl(),s=e.groups();return s&&pNe(i,s),EIt(t,n,s,cS(e,r),i),e.create(i.new())}function EIt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function xIt(e,t,n={}){if(t=el(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Sn(`Invalid impute column ${Oh(r)}`)),n.expand){const r={preparse:SIt,aggronly:!0},i=td("impute",e,n.expand,r),s=yJ(e.ungroup(),i);return vde(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return vde(e,t)}function SIt(e){e.forEach((t,n)=>t.field?e.set(n,IAe(t+"")):0)}function TIt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function vNe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function CIt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function AIt(e,t){const n=["i","a","j","b"];return lS(n,"{"+Ak(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function IIt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Zl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=AIt(g,y);if((dr(n)?RIt:kIt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function kIt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function RIt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,x,C,A)=>e(C,A,S,x));const w=CIt(v,m,g),E=p.length;for(let S=0;S<E;++S){const x=p[S],C=w.get(d(x,f));if(C){const A=C.length;for(let R=0;R<A;++R){const P=C[R];b(x,f,v[P],m),y[P]=1}h[S]=1}}}function E$(e,t,n){const r=new Map;Ju(n).forEach((s,o)=>{s=ru(s)?t.columnName(s):s,zo(s)?r.set(o,U1(s)):yi(s)||xa(s)&&s.expr?r.set(o,s):Sn(`Invalid ${e} key value: ${s+""}`)});const i=el(r,{table:t,aggregate:!1,window:!1});return e$(i.exprs,!0)}function NIt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function vJ(e,t,n){if(n)zo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=NIt(e.columnNames(),t.columnNames());r.length||Sn("Natural join requires shared column names."),n=[r,r]}return n}function bNe(e,t,n,r){return n.length!==r.length&&Sn("Mismatched number of join keys"),[E$("join",e,n),E$("join",t,r)]}const PIt={aggregate:!1,window:!1},OIt={...PIt,index:1};function _de(e,t,n,r,i={}){n=vJ(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Ju);o=bNe(e,t,a,u),r||(r=DIt(e,a,u,i))}else o=el({on:n},s).exprs[0],r||(r=[FE(),FE()]);return IIt(e,t,o,$It(e,t,r,s,i&&i.suffix),i)}function DIt(e,t,n,r){const i=[];t.forEach((o,a)=>zo(o)&&o===n[a]?i.push(o):0);const s=aRe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Oh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,FE()]:[FE(),s]}function $It(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=td("join",e,n[0],r)),u--&&(o=td("join",t,n[1],OIt)),u--&&(a=el(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&wde(s.names,l,i[0]||"_1"),i[1]!==""&&wde(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return el(n,r)}function wde(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function MIt(e,t,n,r={}){const i=new gNe(e.totalRows());return(dr(n)?LIt:FIt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function LIt(e,t,n,[r,i]){const s=vNe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function FIt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ede(e,t,n,r){n=vJ(e,t,n);const i=dr(n)?bNe(e,t,...n.map(Ju)):el({on:n},{join:[e,t]}).exprs[0];return MIt(e,t,i,r)}function jIt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Zl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ur)));const l=vNe(t,r),c=lS(["lr","rr","data"],"{"+Ak(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),kb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function BIt(e,t,n,r){return n=vJ(e,t,n),jIt(e,t,[E$("lookup",e,n[0]),E$("lookup",t,n[1])],td("lookup",t,r))}const sV=(e,t)=>e??t;function UIt(e,t,n,r={}){const{keys:i,keyColumn:s}=zIt(e,t,r),o=sV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>cS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(VIt(n,a,e.groups(),u))}function zIt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=sV(n.sort,!0),s=sV(n.keySeparator,"_"),o=kb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=cS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function VIt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Zl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&pNe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function HIt(e,t,n,r){return UIt(e,td("fold",e,t),td("fold",e,n,{preparse:qIt,aggronly:!0}),r)}function qIt(e){e.forEach((t,n)=>t.field?e.set(n,TAe(t+"")):0)}function WIt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),hJ(e,Nm(e,t,n))}function xde(e,t){return yJ(e,el(t,{table:e,aggronly:!0,window:!1}))}function GIt(e,t,n,r){return(t?r?KIt:YIt:r?QIt:XIt)(e.length,e,n,r)}function YIt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Zx()|0];return t}function KIt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=mNe(pJ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Zx())];return t}function XIt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Zx();s<e&&(t[s|0]=n[i])}return t}function QIt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Zx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function JIt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Zx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function ZIt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):GIt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&JIt(u),e.reify(u)}function ekt(e,t,n={}){return ZIt(e,tkt(e,t),nkt(e,n.weight),n)}const _Ne=e=>t=>e.get(t)||0;function tkt(e,t){return ru(t)?()=>t:_Ne(yJ(e,el({size:t},{table:e,window:!1})).column("size"))}function nkt(e,t){return t==null?null:(t=ru(t)?e.columnName(t):t,_Ne(zo(t)?e.column(t):gJ(e,el({w:t},{table:e}),{drop:!0}).column("w")))}function rkt(e,t){return hJ(e,Nm(e,t))}function ikt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=kb(e,r,n),l=Zl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=skt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function skt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Ju(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ur));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function okt(e,t,n){return ikt(e,td("spread",e,t),n)}function akt(e,t){return e.concat(t).dedupe()}function ukt(e,t,n){return yNe(e,td("unroll",e,t),n&&n.drop?{...n,drop:td("unroll",e,n.drop).names}:n)}function lkt(e,t){return e.create({groups:ckt(e,t)})}function ckt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=kb(e,r,n);const o=e$(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function fkt(e,t){return lkt(e,td("groupby",e,t))}function dkt(e,t){return e.create({order:t})}const hkt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function pkt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=el(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([Z3(p,{index:"a",op:o}),Z3(p,{index:"b",op:a})])},window:!1}),l=cS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=hkt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function mkt(e,t){return dkt(e,gkt(e,t))}function gkt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(xa(o)&&!yi(o))for(const a in o)i(o[a]);else i(ru(o)?U1(s,e.columnName(o)):zo(o)?U1(s):yi(o)?s:Sn(`Invalid orderby field: ${s+""}`))}),pkt(e,r)}function ykt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Zl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ur};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function vkt(e,t){const n=Zl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?hNe(e,t,r):[dNe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function bkt(e){return e.isGrouped()?e.create({groups:null}):e}function _kt(e){return e.isOrdered()?e.create({order:null}):e}const wkt={__antijoin:(e,t,n)=>Ede(e,t,n,{anti:!0}),__count:(e,t={})=>xde(e,{[t.as||"count"]:CAe()}),__cross:(e,t,n,r)=>_de(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:ykt,__dedupe:YAt,__derive:hIt,__except:pIt,__filter:yIt,__fold:bIt,__impute:xIt,__intersect:TIt,__join:_de,__lookup:BIt,__pivot:HIt,__relocate:cNe,__rename:WIt,__rollup:xde,__sample:ekt,__select:rkt,__semijoin:Ede,__spread:okt,__union:akt,__unroll:ukt,__groupby:fkt,__orderby:mkt,__ungroup:bkt,__unorder:_kt,__reduce:vkt};Object.assign(nh.prototype,wkt);function Ekt(e,t){return nh.new(e,t)}function bJ(e,t){return nh.from(e,t)}function YN(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,u=[r,i,s,o];let l=u.length;for(;l&&u[--l]==null;)u.pop();const c=u.length?", "+u.map(f=>f+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function jv(e){return d4(e,{escape:!0,toString(){Sn("Escaped values can not be serialized.")}})}nh.prototype;function Pf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Z0(e){return!!e&&!!e[_i]}function Dm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Nkt}(e)||Array.isArray(e)||!!e[Rde]||!!(!((t=e.constructor)===null||t===void 0)&&t[Rde])||_J(e)||wJ(e))}function z1(e,t,n){n===void 0&&(n=!1),fS(e)===0?(n?Object.keys:Uw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function fS(e){var t=e[_i];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:_J(e)?2:wJ(e)?3:0}function Bw(e,t){return fS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xkt(e,t){return fS(e)===2?e.get(t):e[t]}function wNe(e,t,n){var r=fS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function ENe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function _J(e){return kkt&&e instanceof Map}function wJ(e){return Rkt&&e instanceof Set}function Cv(e){return e.o||e.t}function EJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=SNe(e);delete t[_i];for(var n=Uw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xJ(e,t){return t===void 0&&(t=!1),SJ(e)||Z0(e)||!Dm(e)||(fS(e)>1&&(e.set=e.add=e.clear=e.delete=Skt),Object.freeze(e),t&&z1(e,function(n,r){return xJ(r,!0)},!0)),e}function Skt(){Pf(2)}function SJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function yh(e){var t=lV[e];return t||Pf(18,e),t}function Tkt(e,t){lV[e]||(lV[e]=t)}function oV(){return zA}function c9(e,t){t&&(yh("Patches"),e.u=[],e.s=[],e.v=t)}function x$(e){aV(e),e.p.forEach(Ckt),e.p=null}function aV(e){e===zA&&(zA=e.l)}function Sde(e){return zA={p:[],l:zA,h:e,m:!0,_:0}}function Ckt(e){var t=e[_i];t.i===0||t.i===1?t.j():t.g=!0}function f9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||yh("ES5").S(t,e,r),r?(n[_i].P&&(x$(t),Pf(4)),Dm(e)&&(e=S$(t,e),t.l||T$(t,e)),t.u&&yh("Patches").M(n[_i].t,e,t.u,t.s)):e=S$(t,n,[]),x$(t),t.u&&t.v(t.u,t.s),e!==xNe?e:void 0}function S$(e,t,n){if(SJ(t))return t;var r=t[_i];if(!r)return z1(t,function(a,u){return Tde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return T$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=EJ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),z1(s,function(a,u){return Tde(e,r,i,a,u,n,o)}),T$(e,i,!1),n&&e.u&&yh("Patches").N(r,n,e.u,e.s)}return r.o}function Tde(e,t,n,r,i,s,o){if(Z0(i)){var a=S$(e,i,s&&t&&t.i!==3&&!Bw(t.R,r)?s.concat(r):void 0);if(wNe(n,r,a),!Z0(a))return;e.m=!1}else o&&n.add(i);if(Dm(i)&&!SJ(i)){if(!e.h.D&&e._<1)return;S$(e,i),t&&t.A.l||T$(e,i)}}function T$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&xJ(t,n)}function d9(e,t){var n=e[_i];return(n?Cv(n):e)[t]}function Cde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vg(e){e.P||(e.P=!0,e.l&&Vg(e.l))}function h9(e){e.o||(e.o=EJ(e.t))}function uV(e,t,n){var r=_J(t)?yh("MapSet").F(t,n):wJ(t)?yh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:oV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=VA;o&&(u=[a],l=vC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):yh("ES5").J(t,n);return(n?n.A:oV()).p.push(r),r}function Akt(e){return Z0(e)||Pf(22,e),function t(n){if(!Dm(n))return n;var r,i=n[_i],s=fS(n);if(i){if(!i.P&&(i.i<4||!yh("ES5").K(i)))return i.t;i.I=!0,r=Ade(n,s),i.I=!1}else r=Ade(n,s);return z1(r,function(o,a){i&&xkt(i.t,o)===a||wNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ade(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return EJ(e)}function Ikt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[_i];return VA.get(u,s)},set:function(u){var l=this[_i];VA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][_i];if(!a.P)switch(a.i){case 5:r(a)&&Vg(a);break;case 4:n(a)&&Vg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Uw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==_i){var f=o[c];if(f===void 0&&!Bw(o,c))return!0;var d=a[c],h=d&&d[_i];if(h?h.t!==f:!ENe(d,f))return!0}}var p=!!o[_i];return u.length!==Uw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Tkt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=SNe(f);delete p[_i];for(var m=Uw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:oV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,_i,{value:l,writable:!0}),u},S:function(s,o,a){a?Z0(o)&&o[_i].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[_i];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)z1(d,function(b){b!==_i&&(f[b]!==void 0||Bw(f,b)?h[b]||u(d[b]):(h[b]=!0,Vg(c)))}),z1(f,function(b){d[b]!==void 0||Bw(d,b)||(h[b]=!1,Vg(c))});else if(p===5){if(r(c)&&(Vg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Ide,zA,TJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kkt=typeof Map<"u",Rkt=typeof Set<"u",kde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",xNe=TJ?Symbol.for("immer-nothing"):((Ide={})["immer-nothing"]=!0,Ide),Rde=TJ?Symbol.for("immer-draftable"):"__$immer_draftable",_i=TJ?Symbol.for("immer-state"):"__$immer_state",Nkt=""+Object.prototype.constructor,Uw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,SNe=Object.getOwnPropertyDescriptors||function(e){var t={};return Uw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},lV={},VA={get:function(e,t){if(t===_i)return e;var n=Cv(e);if(!Bw(n,t))return function(i,s,o){var a,u=Cde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Dm(r)?r:r===d9(e.t,t)?(h9(e),e.o[t]=uV(e.A.h,r,e)):r},has:function(e,t){return t in Cv(e)},ownKeys:function(e){return Reflect.ownKeys(Cv(e))},set:function(e,t,n){var r=Cde(Cv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=d9(Cv(e),t),s=i==null?void 0:i[_i];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(ENe(n,i)&&(n!==void 0||Bw(e.t,t)))return!0;h9(e),Vg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return d9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,h9(e),Vg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Cv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Pf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Pf(12)}},vC={};z1(VA,function(e,t){vC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),vC.deleteProperty=function(e,t){return vC.set.call(this,e,t,void 0)},vC.set=function(e,t,n){return VA.set.call(this,e[0],t,n,e[0])};var Pkt=function(){function e(n){var r=this;this.O=kde,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Pf(6),o!==void 0&&typeof o!="function"&&Pf(7),Dm(i)){var c=Sde(r),f=uV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?x$(c):aV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return c9(c,o),f9(m,c)},function(m){throw x$(c),m}):(c9(c,o),f9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===xNe&&(l=void 0),r.D&&xJ(l,!0),o){var h=[],p=[];yh("Patches").M(i,l,h,p),o(h,p)}return l}Pf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Dm(n)||Pf(8),Z0(n)&&(n=Akt(n));var r=Sde(this),i=uV(this,n,void 0);return i[_i].C=!0,aV(r),i},t.finishDraft=function(n,r){var i=n&&n[_i],s=i.A;return c9(s,r),f9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!kde&&Pf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yh("Patches").$;return Z0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Hl=new Pkt,Okt=Hl.produce;Hl.produceWithPatches.bind(Hl);Hl.setAutoFreeze.bind(Hl);Hl.setUseProxies.bind(Hl);Hl.applyPatches.bind(Hl);Hl.createDraft.bind(Hl);Hl.finishDraft.bind(Hl);const TNe=Okt;function HA(e){"@babel/helpers - typeof";return HA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HA(e)}function Dkt(e,t){if(HA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(HA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $kt(e){var t=Dkt(e,"string");return HA(t)=="symbol"?t:t+""}function Mkt(e,t,n){return(t=$kt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nde(Object(n),!0).forEach(function(r){Mkt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ode=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),p9=function(){return Math.random().toString(36).substring(7).split("").join(".")},C$={INIT:"@@redux/INIT"+p9(),REPLACE:"@@redux/REPLACE"+p9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p9()}};function Lkt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function CNe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(oa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(oa(1));return n(CNe)(e,t)}if(typeof e!="function")throw new Error(oa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(oa(3));return s}function f(m){if(typeof m!="function")throw new Error(oa(4));if(u)throw new Error(oa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(oa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Lkt(m))throw new Error(oa(7));if(typeof m.type>"u")throw new Error(oa(8));if(u)throw new Error(oa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(oa(10));i=m,d({type:C$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(oa(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Ode]=function(){return this},m}return d({type:C$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Ode]=p,r}function Fkt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:C$.INIT});if(typeof r>"u")throw new Error(oa(12));if(typeof n(void 0,{type:C$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(oa(13))})}function jkt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Fkt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(oa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function A$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Bkt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(oa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=A$.apply(void 0,a)(i.dispatch),Pde(Pde({},i),{},{dispatch:s})}}}function ANe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var cV=ANe();cV.withExtraArgument=ANe;var INe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ik=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},V1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ukt=Object.defineProperty,zkt=Object.defineProperties,Vkt=Object.getOwnPropertyDescriptors,Dde=Object.getOwnPropertySymbols,Hkt=Object.prototype.hasOwnProperty,qkt=Object.prototype.propertyIsEnumerable,$de=function(e,t,n){return t in e?Ukt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x0=function(e,t){for(var n in t||(t={}))Hkt.call(t,n)&&$de(e,n,t[n]);if(Dde)for(var r=0,i=Dde(t);r<i.length;r++){var n=i[r];qkt.call(t,n)&&$de(e,n,t[n])}return e},m9=function(e,t){return zkt(e,Vkt(t))},kk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},Wkt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?A$:A$.apply(null,arguments)};function kNe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Gkt=function(e){return e&&typeof e.match=="function"};function vh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return x0(x0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Ykt(e){return kNe(e)&&"type"in e}var Kkt=function(e){INe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,V1([void 0],n[0].concat(this)))):new(t.bind.apply(t,V1([void 0],n.concat(this))))},t}(Array),Xkt=function(e){INe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,V1([void 0],n[0].concat(this)))):new(t.bind.apply(t,V1([void 0],n.concat(this))))},t}(Array);function fV(e){return Dm(e)?TNe(e,function(){}):e}function Qkt(e){return typeof e=="boolean"}function Jkt(){return function(t){return Zkt(t)}}function Zkt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Kkt;return n&&(Qkt(n)?r.push(cV):r.push(cV.withExtraArgument(n.extraArgument))),r}var eRt=!0;function tRt(e){var t=Jkt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(kNe(i))h=jkt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Bkt.apply(void 0,p),g=A$;u&&(g=Wkt(x0({trace:!eRt},typeof u=="object"&&u)));var y=new Xkt(m),v=y;Array.isArray(d)?v=V1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return CNe(h,c,b)}function RNe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function nRt(e){return typeof e=="function"}function rRt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?RNe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(nRt(e))u=function(){return fV(e())};else{var l=fV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=V1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Z0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Dm(p))return TNe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function iRt(e,t){return e+"/"+t}function sRt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:fV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=iRt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?vh(d,p):vh(d)});function u(){var c=typeof e.extraReducers=="function"?RNe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=x0(x0({},d),o);return rRt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var oRt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NNe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=oRt[Math.random()*64|0];return t},aRt=["name","message","stack","code"],g9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Mde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),uRt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=aRt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=vh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:m9(x0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=vh(t+"/pending",function(l,c,f){return{payload:void 0,meta:m9(x0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=vh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||uRt)(l||"Rejected"),meta:m9(x0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):NNe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return kk(this,null,function(){var v,b,w,E,S,x,C;return Ik(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),cRt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(R,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(R,P){return new g9(R,P)},fulfillWithValue:function(R,P){return new Mde(R,P)}})).then(function(R){if(R instanceof g9)throw R;return R instanceof Mde?i(R.payload,h,l,R.meta):i(R,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return x=A.sent(),w=x instanceof g9?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(lRt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function lRt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function cRt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var fRt=function(e,t){return Gkt(e)?e.match(t):e(t)};function Lde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return fRt(r,n)})}}var CJ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},dV=function(){},PNe=function(e,t){return t===void 0&&(t=dV),e.catch(t),e},ONe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},zw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},dRt="task",DNe="listener",$Ne="completed",AJ="cancelled",hRt="task-"+AJ,pRt="task-"+$Ne,MNe=DNe+"-"+AJ,mRt=DNe+"-"+$Ne,h4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=dRt+" "+AJ+" (reason: "+t+")"}return e}(),Vw=function(e){if(e.aborted)throw new h4(e.reason)};function LNe(e,t){var n=dV;return new Promise(function(r,i){var s=function(){return i(new h4(e.reason))};if(e.aborted){s();return}n=ONe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=dV})}var gRt=function(e,t){return kk(void 0,null,function(){var n,r;return Ik(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof h4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},I$=function(e){return function(t){return PNe(LNe(e,t).then(function(n){return Vw(e),n}))}},FNe=function(e){var t=I$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},yRt=Object.assign,Fde={},Rk="listenerMiddleware",vRt=function(e,t){var n=function(r){return ONe(e,function(){return zw(r,e.reason)})};return function(r,i){CJ(r,"taskExecutor");var s=new AbortController;n(s);var o=gRt(function(){return kk(void 0,null,function(){var a;return Ik(this,function(u){switch(u.label){case 0:return Vw(e),Vw(s.signal),[4,r({pause:I$(s.signal),delay:FNe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Vw(s.signal),[2,a]}})})},function(){return zw(s,pRt)});return i!=null&&i.autoJoin&&t.push(o),{result:I$(e)(o),cancel:function(){zw(s,hRt)}}}},bRt=function(e,t){var n=function(r,i){return kk(void 0,null,function(){var s,o,a,u;return Ik(this,function(l){switch(l.label){case 0:Vw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,LNe(t,Promise.race(a))];case 2:return u=l.sent(),Vw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return PNe(n(r,i))}},jNe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=vh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return CJ(s,"options.listener"),{predicate:i,type:t,effect:s}},_Rt=function(e){var t=jNe(e),n=t.type,r=t.predicate,i=t.effect,s=NNe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},hV=function(e){e.pending.forEach(function(t){zw(t,MNe)})},wRt=function(e){return function(){e.forEach(hV),e.clear()}},jde=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},ERt=vh(Rk+"/add"),xRt=vh(Rk+"/removeAll"),SRt=vh(Rk+"/remove"),TRt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,V1([Rk+"/error"],e))};function CRt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?TRt:i;CJ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&hV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=_Rt(h)),o(p)},l=function(h){var p=jNe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&hV(v)),!!v},c=function(h,p,m,g){return kk(t,null,function(){var y,v,b,w;return Ik(this,function(E){switch(E.label){case 0:y=new AbortController,v=bRt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,yRt({},m,{getOriginalState:g,condition:function(S,x){return v(S,x).then(Boolean)},take:v,delay:FNe(y.signal),pause:I$(y.signal),extra:r,signal:y.signal,fork:vRt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,x,C){S!==y&&(zw(S,MNe),C.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof h4||jde(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),zw(y,mRt),h.pending.delete(y),[7];case 6:return[2]}})})},f=wRt(n),d=function(h){return function(p){return function(m){if(!Ykt(m))return p(m);if(ERt.match(m))return u(m.payload);if(xRt.match(m)){f();return}if(SRt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Fde)throw new Error(Rk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var x=S[E],C=!1;try{C=x.predicate(m,b,g)}catch(A){C=!1,jde(s,A,{raisedBy:"predicate"})}C&&c(x,m,h,y)}}finally{g=Fde}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Bde;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Ikt();function ARt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let KN;const IRt=new Uint8Array(16);function kRt(){if(!KN&&(KN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!KN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KN(IRt)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function RRt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const NRt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ude={randomUUID:NRt};function zde(e,t,n){if(Ude.randomUUID&&!t&&!e)return Ude.randomUUID();e=e||{};const r=e.random||(e.rng||kRt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,RRt(r)}class bh{static get(){let t=zde();for(;this.ids.has(t);)t=zde();return this.ids.set(t,!0),t}}bh.ids=new Map;function Wf(e){return"parent"in e}function PRt(e){return!Wf(e)}function ORt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:bh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:bh.get(),createdOn:Date.now(),val:r}]:[];return{id:bh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function DRt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:bh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:bh.get(),createdOn:Date.now(),val:s}]:[];return{id:bh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=VRt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function H1(e){return!!e&&!!e[ql]}function ey(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===HRt}(e)||Array.isArray(e)||!!e[S2]||!!(!((t=e.constructor)===null||t===void 0)&&t[S2])||p4(e)||m4(e))}function UE(e,t,n){n===void 0&&(n=!1),ty(e)===0?(n?Object.keys:OJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ty(e){var t=e[ql];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:p4(e)?2:m4(e)?3:0}function qA(e,t){return ty(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IO(e,t){return ty(e)===2?e.get(t):e[t]}function BNe(e,t,n){var r=ty(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function $Rt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function p4(e){return URt&&e instanceof Map}function m4(e){return zRt&&e instanceof Set}function Av(e){return e.o||e.t}function IJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=qRt(e);delete t[ql];for(var n=OJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kJ(e,t){return t===void 0&&(t=!1),RJ(e)||H1(e)||!ey(e)||(ty(e)>1&&(e.set=e.add=e.clear=e.delete=MRt),Object.freeze(e),t&&UE(e,function(n,r){return kJ(r,!0)},!0)),e}function MRt(){Xi(2)}function RJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function _h(e){var t=yV[e];return t||Xi(18,e),t}function LRt(e,t){yV[e]||(yV[e]=t)}function Vde(){return{}.NODE_ENV==="production"||zE||Xi(0),zE}function y9(e,t){t&&(_h("Patches"),e.u=[],e.s=[],e.v=t)}function k$(e){pV(e),e.p.forEach(FRt),e.p=null}function pV(e){e===zE&&(zE=e.l)}function Hde(e){return zE={p:[],l:zE,h:e,m:!0,_:0}}function FRt(e){var t=e[ql];t.i===0||t.i===1?t.j():t.O=!0}function v9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||_h("ES5").S(t,e,r),r?(n[ql].P&&(k$(t),Xi(4)),ey(e)&&(e=R$(t,e),t.l||N$(t,e)),t.u&&_h("Patches").M(n[ql].t,e,t.u,t.s)):e=R$(t,n,[]),k$(t),t.u&&t.v(t.u,t.s),e!==PJ?e:void 0}function R$(e,t,n){if(RJ(t))return t;var r=t[ql];if(!r)return UE(t,function(s,o){return qde(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return N$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=IJ(r.k):r.o;UE(r.i===3?new Set(i):i,function(s,o){return qde(e,r,i,s,o,n)}),N$(e,i,!1),n&&e.u&&_h("Patches").R(r,n,e.u,e.s)}return r.o}function qde(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Xi(5),H1(i)){var o=R$(e,i,s&&t&&t.i!==3&&!qA(t.D,r)?s.concat(r):void 0);if(BNe(n,r,o),!H1(o))return;e.m=!1}if(ey(i)&&!RJ(i)){if(!e.h.F&&e._<1)return;R$(e,i),t&&t.A.l||N$(e,i)}}function N$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&kJ(t,n)}function b9(e,t){var n=e[ql];return(n?Av(n):e)[t]}function Wde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function mV(e){e.P||(e.P=!0,e.l&&mV(e.l))}function _9(e){e.o||(e.o=IJ(e.t))}function gV(e,t,n){var r=p4(t)?_h("MapSet").N(t,n):m4(t)?_h("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Vde(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=vV;o&&(u=[a],l=bC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):_h("ES5").J(t,n);return(n?n.A:Vde()).p.push(r),r}function jRt(e){return H1(e)||Xi(22,e),function t(n){if(!ey(n))return n;var r,i=n[ql],s=ty(n);if(i){if(!i.P&&(i.i<4||!_h("ES5").K(i)))return i.t;i.I=!0,r=Gde(n,s),i.I=!1}else r=Gde(n,s);return UE(r,function(o,a){i&&IO(i.t,o)===a||BNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Gde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return IJ(e)}function BRt(){function e(r){if(!ey(r))return r;if(Array.isArray(r))return r.map(e);if(p4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(m4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return qA(r,S2)&&(i[S2]=r[S2]),i}function t(r){return H1(r)?e(r):r}var n="add";LRt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ty(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Xi(24),typeof u=="function"&&f==="prototype"&&Xi(24),typeof(u=IO(u,f))!="object"&&Xi(15,o.join("/"))}var d=ty(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Xi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Xi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;UE(a.D,function(h,p){var m=IO(f,h),g=IO(d,h),y=p?qA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===PJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Yde,zE,NJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",URt=typeof Map<"u",zRt=typeof Set<"u",Kde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",PJ=NJ?Symbol.for("immer-nothing"):((Yde={})["immer-nothing"]=!0,Yde),S2=NJ?Symbol.for("immer-draftable"):"__$immer_draftable",ql=NJ?Symbol.for("immer-state"):"__$immer_state",VRt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},HRt=""+Object.prototype.constructor,OJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qRt=Object.getOwnPropertyDescriptors||function(e){var t={};return OJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},yV={},vV={get:function(e,t){if(t===ql)return e;var n=Av(e);if(!qA(n,t))return function(i,s,o){var a,u=Wde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ey(r)?r:r===b9(e.t,t)?(_9(e),e.o[t]=gV(e.A.h,r,e)):r},has:function(e,t){return t in Av(e)},ownKeys:function(e){return Reflect.ownKeys(Av(e))},set:function(e,t,n){var r=Wde(Av(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=b9(Av(e),t),s=i==null?void 0:i[ql];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if($Rt(n,i)&&(n!==void 0||qA(e.t,t)))return!0;_9(e),mV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return b9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,_9(e),mV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Av(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Xi(12)}},bC={};UE(vV,function(e,t){bC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),bC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Xi(13),bC.set.call(this,e,t,void 0)},bC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Xi(14),vV.set.call(this,e[0],t,n,e[0])};var WRt=function(){function e(n){var r=this;this.g=Kde,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Xi(6),o!==void 0&&typeof o!="function"&&Xi(7),ey(i)){var c=Hde(r),f=gV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?k$(c):pV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return y9(c,o),v9(m,c)},function(m){throw k$(c),m}):(y9(c,o),v9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===PJ&&(l=void 0),r.F&&kJ(l,!0),o){var h=[],p=[];_h("Patches").M(i,l,h,p),o(h,p)}return l}Xi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ey(n)||Xi(8),H1(n)&&(n=jRt(n));var r=Hde(this),i=gV(this,n,void 0);return i[ql].C=!0,pV(r),i},t.finishDraft=function(n,r){var i=n&&n[ql];({}).NODE_ENV!=="production"&&(i&&i.C||Xi(9),i.I&&Xi(10));var s=i.A;return y9(s,r),v9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Kde&&Xi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=_h("Patches").$;return H1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Wl=new WRt,GRt=Wl.produce;Wl.produceWithPatches.bind(Wl);Wl.setAutoFreeze.bind(Wl);Wl.setUseProxies.bind(Wl);Wl.applyPatches.bind(Wl);Wl.createDraft.bind(Wl);Wl.finishDraft.bind(Wl);function YRt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=ORt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return sRt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:bh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:bh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function KRt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=YRt(e),s=CRt();s.startListening({matcher:Lde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Lde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=tRt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:bh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var XRt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QRt=Object.prototype.hasOwnProperty;function bV(e,t){return QRt.call(e,t)}function _V(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)bV(e,i)&&r.push(i);return r}function Fu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function wV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Iv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function UNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function EV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(EV(e[t]))return!0}else if(typeof e=="object"){for(var r=_V(e),i=r.length,s=0;s<i;s++)if(EV(e[r[s]]))return!0}}return!1}function Xde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var zNe=function(e){XRt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Xde(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Xde(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=zNe,JRt=Fu,fw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=P$(n,this.path);r&&(r=Fu(r));var i=h1(n,{op:"remove",path:this.from}).removed;return h1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=P$(n,this.from);return h1(n,{op:"add",path:this.path,value:Fu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:WA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ZRt={add:function(e,t,n){return wV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:fw.move,copy:fw.copy,test:fw.test,_get:fw._get};function P$(e,t){if(t=="")return e;var n={op:"_get",path:t};return h1(e,n),n.value}function h1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):O$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=P$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=WA(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Fu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=O$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=UNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!wV(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);wV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ZRt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=fw[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function g4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Fu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=h1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function eNt(e,t,n){var r=h1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function O$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(fw[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&EV(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=VNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function VNe(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)g4(Fu(t),Fu(e),n||!0);else{n=n||O$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function WA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!WA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!WA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const tNt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:WA,applyOperation:h1,applyPatch:g4,applyReducer:eNt,deepClone:JRt,getValueByPointer:P$,validate:VNe,validator:O$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var DJ=new WeakMap,nNt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),rNt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function iNt(e){return DJ.get(e)}function sNt(e,t){return e.observers.get(t)}function oNt(e,t){e.observers.delete(t.callback)}function aNt(e,t){t.unobserve()}function uNt(e,t){var n=[],r,i=iNt(e);if(!i)i=new nNt(e),DJ.set(e,i);else{var s=sNt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Fu(e),t){r.callback=t,r.next=null;var o=function(){xV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){xV(r),clearTimeout(r.next),oNt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new rNt(t,r)),r}function xV(e,t){t===void 0&&(t=!1);var n=DJ.get(e.object);$J(n.value,e.object,e.patches,"",t),e.patches.length&&g4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function $J(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=_V(t),o=_V(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(bV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?$J(c,f,n,r+"/"+Iv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Iv(l),value:Fu(c)}),n.push({op:"replace",path:r+"/"+Iv(l),value:Fu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Iv(l),value:Fu(c)}),n.push({op:"remove",path:r+"/"+Iv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!bV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Iv(l),value:Fu(t[l])})}}}function HNe(e,t,n){n===void 0&&(n=!1);var r=[];return $J(e,t,r,"",n),r}const lNt=Object.freeze(Object.defineProperty({__proto__:null,compare:HNe,generate:xV,observe:uNt,unobserve:aNt},Symbol.toStringTag,{value:"Module"}));Object.assign({},tNt,lNt,{JsonPatchError:zNe,deepClone:Fu,escapePathComponent:Iv,unescapePathComponent:UNe});var _C=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(_C||{});function kO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=qNe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=kO(i,t);return g4(a,Fu(o),!0,!1).newDocument}function cNt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function SV({registry:e,initialState:t}){let n=!1;const r=ARt(),i=KRt(t);function s(c){return i.backend.nodes[c]}r.listen(_C.TRAVERSAL_START,()=>{n=!0}),r.listen(_C.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return kO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=kO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=HNe(y,f);if(cNt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=DRt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=kO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(_C.TRAVERSAL_START);const f=qNe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);dNt(p,m)?Wf(p)&&d.push(...p.sideEffects.undo):Wf(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(_C.TRAVERSAL_END)},undo(){const{current:c}=i;return Wf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return WNe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function fNt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Wf(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Wf(r)&&(r=n[r.parent]),Wf(i)&&(i=n[i.parent]);return r.id}function qNe(e,t,n){const r=fNt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Wf(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Wf(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function dNt(e,t){if(Wf(e)&&e.parent===t.id)return!0;if(Wf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function WNe(e,t){return{...e,children:e.children.map(n=>WNe(t[n],t)),name:`${e.label}`}}BRt();function hNt(e){return e.length===2?GRt(e):e}class GA{static create(){return new GA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:hNt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),vh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var pNt="Expected a function",Qde=NaN,mNt="[object Symbol]",gNt=/^\s+|\s+$/g,yNt=/^[-+]0x[0-9a-f]+$/i,vNt=/^0b[01]+$/i,bNt=/^0o[0-7]+$/i,_Nt=parseInt,wNt=typeof Ms=="object"&&Ms&&Ms.Object===Object&&Ms,ENt=typeof self=="object"&&self&&self.Object===Object&&self,xNt=wNt||ENt||Function("return this")(),SNt=Object.prototype,TNt=SNt.toString,CNt=Math.max,ANt=Math.min,w9=function(){return xNt.Date.now()};function INt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(pNt);t=Jde(t)||0,TV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?CNt(Jde(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var x=r,C=i;return r=i=void 0,l=S,o=e.apply(C,x),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var x=S-u,C=S-l,A=t-x;return f?ANt(A,s-C):A}function g(S){var x=S-u,C=S-l;return u===void 0||x>=t||x<0||f&&C>=s}function y(){var S=w9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(w9())}function E(){var S=w9(),x=g(S);if(r=arguments,i=this,u=S,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function TV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function kNt(e){return!!e&&typeof e=="object"}function RNt(e){return typeof e=="symbol"||kNt(e)&&TNt.call(e)==mNt}function Jde(e){if(typeof e=="number")return e;if(RNt(e))return Qde;if(TV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=TV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(gNt,"");var n=vNt.test(e);return n||bNt.test(e)?_Nt(e.slice(2),n?2:8):yNt.test(e)?Qde:+e}var NNt=INt;const Od=ol(NNt);function GNe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>Yx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ja,{children:_.jsx(Kn,{gap:3,children:_.jsx(nt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const PNt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:GNe},Symbol.toStringTag,{value:"Module"})),E9=15;function YNe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:u}){const[l,c]=I.useState([0,0]),[f,d]=I.useState(!1);return I.useEffect(()=>{const h=To(u.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),f){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<E9&&Math.abs(t(v[r.y])-g[1])<E9);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const b=Array.from(v);n([[l[0],l[1]],[l[0],l[1]]],e,t,b.length===0?"clear":"drag",s.id,b)}else{const v=Array.from(new Set([...a,...y.map(b=>b[r.ids])]));v.length>0&&n([[l[0],l[1]],[l[0],l[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{d(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{d(!1)})}},[l,s.id,a,i,f,o,r,n,u,e,t]),_.jsx("circle",{style:{cursor:f?"pointer":"default",pointerEvents:"none"},r:E9,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const ONt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:YNe},Symbol.toStringTag,{value:"Module"}));function Bv(e){const t=I.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return I.useLayoutEffect(()=>{t.current=e}),I.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const Yr={top:15,left:100,right:15,bottom:130};function KNe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,setIsPaintbrushSelect:l}){const[c,{height:f,width:d}]=zf(),[h,p]=I.useState(i),[m]=zf(),[g]=zf(),y=I.useMemo(()=>d-Yr.left-Yr.right,[d]),v=I.useMemo(()=>f-Yr.top-Yr.bottom,[f]),b=I.useMemo(()=>{const k=Array.from(new Set(s.map(D=>D[h.category])));return Xx(nAe).domain(k)},[s,h.category]),{xMin:w,yMin:E,xMax:S,yMax:x}=I.useMemo(()=>{const k=s.map(V=>+V[h.x]).filter(V=>V!==null),[D,M]=l3(k),L=s.map(V=>+V[h.y]).filter(V=>V!==null),[B,U]=l3(L);return{xMin:D,xMax:M,yMin:B,yMax:U}},[s,h.x,h.y]),C=I.useMemo(()=>{const k=S-w;return y<=0?null:h.dataType==="date"?X2e([Yr.left,y+Yr.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Rh([Yr.left,y+Yr.left]).domain([w-k/10,S+k/10]).nice()},[h.dataType,y,S,w]),A=I.useMemo(()=>{const k=x-E;return v<=0?null:Rh([v+Yr.top,Yr.top]).domain([E-k/10,x+k/10]).nice()},[v,x,E]);I.useMemo(()=>{if(!C||!A)return()=>null;if(r==="Axis Selection"){const k=Byt().extent([[Yr.left,Yr.top+v-5],[Yr.left+y,Yr.top+v+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],C,A,M.mode,t.id)}),D=Uyt().extent([[Yr.left-5,Yr.top],[Yr.left+5,Yr.top+v]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],C,A,M.mode,t.id)});return m.current&&g.current&&(To(g.current).call(D),To(m.current).call(k),t.hasBrush||(To(g.current).call(D.move,[A(x),A(E)]),To(m.current).call(k.move,[C(new Date("2015-01-02")),C(new Date("2015-12-31"))]),n([[C(new Date("2015-01-02")),A(x)],[C(new Date("2015-12-31")),A(E)]],C,A,"drag",t.id))),()=>{To(g.current).call(D.move,[A(x),A(E)]),To(m.current).call(k.move,[C(new Date("2015-01-02")),C(new Date("2015-12-31"))]),n([[C(new Date("2015-01-02")),A(x)],[C(new Date("2015-12-31")),A(E)]],C,A,"clear",t.id)}}if(r==="Rectangular Selection"){const k=zyt().extent([[Yr.left,Yr.top],[Yr.left+y,Yr.top+v]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],C,A,D.mode,t.id)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(To(c.current).call(k.move,null),e(null))});return To(c.current).call(k),()=>{To(c.current).call(k.move,null),n([[null,null],[null,null]],C,A,"clear",t.id)}}return r==="Slider Selection"?()=>n([[C(w),A(x)],[C(S),A(E)]],C,A,"clear",t.id):r==="Paintbrush Selection"?()=>n([[C(w),A(x)],[C(S),A(E)]],C,A,"clear",t.id,[]):()=>null},[t,r,m,g,v,c,n,y,S,w,C,x,E,A]),I.useEffect(()=>{r==="Slider Selection"&&C&&A&&n([[C(w),A(x)],[C(S),A(E)]],C,A,null,t.id)},[r,S,w,C,x,E,A]);const R=I.useMemo(()=>o.length===0?null:new Set(o),[o]),P=I.useMemo(()=>!C||!A?null:s.filter(k=>h.year?+k.Year===h.year:!0).map((k,D)=>{if(k[h.x]===null||k[h.y]===null)return null;const M=h.dataType==="date"?C(new Date(k[h.x])):C(k[h.x]);return _.jsx(Di,{withinPortal:!0,label:k[h.ids],children:_.jsx("circle",{opacity:R&&!R.has(k[h.ids])?.3:.7,r:3,fill:R&&!R.has(k[h.ids])?"lightgray":h.hideCat?"gray":b(k[h.category]),cx:M,cy:A(k[h.y])},D)},D)}),[R,b,s,C,A,h]);I.useEffect(()=>{r==="Axis Selection"&&Ogt(".handle").style("fill","darkgrey")},[t,r]);const $=Bv(k=>{p({...h,year:k?+k:void 0})});return _.jsxs(ri,{gap:0,children:[_.jsx(Kn,{mr:Yr.right,style:{justifyContent:"space-between"},children:h.year?_.jsxs(ri,{gap:0,children:[_.jsx(nt,{size:"12px",ml:Yr.left,children:h.year}),_.jsx(WL,{min:2008,max:2022,value:h.year,onChange:$,ml:Yr.left,style:{width:"150px"},label:h.year})]}):null}),_.jsxs(Kn,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[C&&A?_.jsxs("g",{children:[_.jsx(GNe,{yScale:A,label:h.y,horizontalPosition:Yr.left,xRange:C.range()}),_.jsx(gk,{xScale:C,yRange:A.range(),isDate:h.dataType==="date",vertPosition:v+Yr.top,label:h.x,ticks:C.ticks(h.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:C(k)}))})]}):null,P,_.jsx("g",{id:"brushXRef",ref:m}),_.jsx("g",{id:"brushYRef",ref:g}),C&&A&&r==="Paintbrush Selection"?_.jsx(YNe,{currSelected:o,svgRef:c,brushState:t,setBrushedSpace:n,params:h,data:s.filter(k=>h.year?+k.Year===h.year:!0),isSelect:u,xScale:C,yScale:A}):null]}),r==="Slider Selection"&&C&&A?_.jsxs(ri,{style:{flexGrow:1},gap:50,children:[_.jsxs(ri,{gap:0,children:[_.jsx(nt,{children:h.x}),_.jsx(zD,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[C(k[0]),t.y1],[C(k[1]),t.y2]],C,A,"drag",t.id)},style:{width:"300px"},marks:C.ticks(5).map(k=>({value:k,label:k})),value:[C.invert(t.x1),C.invert(t.x2)]})]}),_.jsxs(ri,{gap:0,children:[_.jsx(nt,{children:h.y}),_.jsx(zD,{minRange:1,label:null,min:A.domain()[0],max:A.domain()[1],onChange:k=>{n([[t.x1,A(k[1])],[t.x2,A(k[0])]],C,A,"drag",t.id)},style:{width:"300px"},marks:A.ticks(5).map(k=>({value:k,label:k})),value:[A.invert(t.y2),A.invert(t.y1)]})]})]}):null]})]})}const DNt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:KNe},Symbol.toStringTag,{value:"Module"})),dl={top:15,left:100,right:15,bottom:130};function XNe({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,dataTable:l}){const[c,{height:f,width:d}]=zf(),[h,p]=I.useState(i),m=I.useMemo(()=>d-dl.left-dl.right,[d]),g=I.useMemo(()=>f-dl.top-dl.bottom,[f]),y=I.useMemo(()=>h.hideCat?l.groupby(t.xCol).count():l.groupby(t.xCol,"Survived").count(),[t.xCol,l,h.hideCat]),v=I.useMemo(()=>{if(!s)return null;const x=bJ(s);return h.hideCat?x.groupby(t.xCol).count():x.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),b=I.useMemo(()=>y?Rh([dl.top,g+dl.top]).domain([0,Nc(y.objects().map(x=>x.count))].reverse()).nice():null,[y,g]),w=I.useMemo(()=>y?O6([dl.left,m+dl.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),E=I.useMemo(()=>!w||!b||!v?null:v.objects().map((x,C)=>_.jsxs("g",{children:[h.hideCat?_.jsx("rect",{onClick:A=>n(l.objects().filter(R=>R[t.xCol]===x[t.xCol]).map(R=>R.Name),A),x:w(x[t.xCol]),y:g-(g-b(x.count)),fill:"gray",width:w.bandwidth(),height:dl.top+g-b(x.count)}):_.jsx("rect",{onClick:A=>n(l.objects().filter(R=>R[t.xCol]===x[t.xCol]&&R.Survived===x.Survived).map(R=>R.Name),A),x:x.Survived==="Yes"?w(x[t.xCol]):w(x[t.xCol])+w.bandwidth()/2,y:g-(g-b(x.count)),fill:x.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:dl.top+g-b(x.count)}),_.jsx("text",{x:w(x[t.xCol])+(h.hideCat?w.bandwidth()/2:x.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:b(x.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:x.count})]},`${C}fullRects`)),[v,t.xCol,l,g,h.hideCat,n,w,b]),S=I.useMemo(()=>!w||!b||!y?null:y.objects().map((x,C)=>_.jsx("g",{style:{cursor:"pointer"},children:_.jsx("rect",{onClick:A=>n(l.objects().filter(R=>R[t.xCol]===x[t.xCol]&&(h.hideCat?!0:R.Survived===x.Survived)).map(R=>R.Name),A),opacity:.7,x:x.Survived==="Yes"||h.hideCat?w(x[t.xCol]):w(x[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-b(x.count)),height:dl.top+g-b(x.count)})},`${C}survRects`)),[y,t.xCol,l,g,h.hideCat,n,w,b]);return b&&w&&v?_.jsx(ri,{gap:0,children:_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(gk,{xScale:w,yRange:b.range(),vertPosition:g+dl.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(l.array(t.xCol))].map(x=>({value:x,offset:w(x)+w.bandwidth()/2}))}),b?_.jsx(q6,{label:"Count",yScale:b,horizontalPosition:dl.left,xRange:w.range(),ticks:b.ticks(5).map(x=>({value:x.toString(),offset:b(x)}))}):null,S,E]})}):null}const $Nt=Object.freeze(Object.defineProperty({__proto__:null,Histogram:XNe},Symbol.toStringTag,{value:"Module"})),Rd={top:15,left:100,right:15,bottom:130};function QNe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:u,onClose:l,isPaintbrushSelect:c}){const[f,{height:d,width:h}]=zf(),[p,m]=I.useState(i),g=I.useMemo(()=>h-Rd.left-Rd.right,[h]),y=I.useMemo(()=>d-Rd.top-Rd.bottom,[d]),v=I.useMemo(()=>Rh([Rd.top,y+Rd.top]).domain([0,Nc(o.map(x=>+x[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),b=I.useMemo(()=>O6([Rd.left,g+Rd.left]).domain([...new Set(o.map(x=>x[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=I.useMemo(()=>bJ(o.map(x=>({...x,Age:+x.Age}))),[o]),E=I.useMemo(()=>new Set(s.map(x=>x[p.ids])),[s,p.ids]),S=I.useMemo(()=>{let x=p.hideCat?w.groupby(t.xCol,{group:YN(t.yCol,{maxbins:20}),group_max:YN(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:YN(t.yCol,{maxbins:20}),group_max:YN(t.yCol,{maxbins:20,offset:1})});x=x.rollup({ids:w2.array_agg(p.ids),count:w2.count()}).orderby("group");const C=x.derive({ids:jv($=>$.ids.filter(k=>E.has(k))),count:jv($=>$.ids.filter(k=>E.has(k)).length)}).orderby("group"),A=Rh([0,b.bandwidth()/2]).domain([0,Nc(x.array("count"))]),R=Y3($=>A($[1])+b.bandwidth()/2,$=>v($[0])).curve(Dz),P=Y3($=>b.bandwidth()/2-A($[1]),$=>v($[0])).curve(Dz);return _.jsx("g",{children:b.domain().map($=>_.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?_.jsxs("g",{children:[_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$).map(D=>D.ids).flat(),k),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${R(x.objects().filter(k=>k[t.xCol]===$).map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$).map(D=>D.ids).flat(),k),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${P(x.objects().filter(k=>k[t.xCol]===$).map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$).map(D=>D.ids).flat(),k),transform:`translate(${b($)}, 0)`,d:`${R(C.objects().filter(k=>k[t.xCol]===$).map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$).map(D=>D.ids).flat(),k),transform:`translate(${b($)}, 0)`,d:`${P(C.objects().filter(k=>k[t.xCol]===$).map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):_.jsxs("g",{children:[_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$&&D.Survived==="Yes").map(D=>D.ids).flat(),k),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${R(x.objects().filter(k=>k[t.xCol]===$&&k.Survived==="Yes").map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$&&D.Survived==="No").map(D=>D.ids).flat(),k),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${P(x.objects().filter(k=>k[t.xCol]===$&&k.Survived==="No").map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$&&D.Survived==="Yes").map(D=>D.ids).flat(),k),transform:`translate(${b($)}, 0)`,d:`${R(C.objects().filter(k=>k[t.xCol]===$&&k.Survived==="Yes").map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),_.jsx("path",{onClick:k=>a(x.objects().filter(D=>D[t.xCol]===$&&D.Survived==="No").map(D=>D.ids).flat(),k),transform:`translate(${b($)}, 0)`,d:`${P(C.objects().filter(k=>k[t.xCol]===$&&k.Survived==="No").map(k=>[k.group,k.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},$))})},[t.xCol,t.yCol,E,w,p.hideCat,p.ids,a,b,v]);return _.jsx(ri,{gap:0,children:_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:f,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(gk,{xScale:b,yRange:v.range(),vertPosition:y+Rd.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:b.domain().map(x=>({value:x,offset:b(x)+b.bandwidth()/2}))}),v?_.jsx(q6,{label:t.yCol,yScale:v,horizontalPosition:Rd.left,xRange:b.range(),ticks:v.ticks(5).map(x=>({value:x.toString(),offset:v(x)}))}):null,S]})})}const MNt=Object.freeze(Object.defineProperty({__proto__:null,Violin:QNe},Symbol.toStringTag,{value:"Module"}));function Zde({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=I.useState(null),[s,o]=I.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,u]=I.useState(!0),[l,c]=I.useState(null);I.useEffect(()=>{bvt(`/ThinkAloud/data/${e.dataset}.csv`).then(S=>{c(S)})},[e]);const f=I.useMemo(()=>l?bJ(l):null,[l]);I.useEffect(()=>{if(n){const S=n.all.brush||n.all;o(S);const x=new Set(S.selection);if(f){const C=f.filter(jv(A=>x.has(A[e.ids])));i(C)}}},[f,e.ids,n]);const{actions:d,trrack:h}=I.useMemo(()=>{const S=GA.create(),x=S.register("brush",($,k)=>($.all={brush:k},$)),C=S.register("brushMove",($,k)=>($.all={brush:k},$)),A=S.register("brushResize",($,k)=>($.all={brush:k},$)),R=S.register("brushClear",($,k)=>($.all={brush:k},$)),P=SV({registry:S,initialState:{all:s}});return{actions:{brush:x,brushMove:C,brushResize:A,clearBrush:R},trrack:P}},[]),p=I.useCallback((S,x)=>{S==="drag"?h.apply("Move Brush",d.brushMove(x)):(S==="handle"||S==="click")&&h.apply("Brush",d.brush(x)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[d,t,h]),m=I.useMemo(()=>Od(p,50,{maxWait:50}),[p]),g=I.useCallback((S,x,C,A,R,P)=>{if(!x||!C)return;const $=s[R],k=x.invert(S[0][0]||$.x1),D=x.invert(S[1][0]||$.x2),M=C.invert(S[1][1]||$.y2),L=C.invert(S[0][1]||$.y1);let B=null;if(A==="clear")B=f;else if(P){const O=new Set(P);B=f.filter(jv(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?B=f.filter(jv(O=>new Date(O[e.x])>=new Date(k)&&new Date(O[e.x])<=new Date(D)&&O[e.y]>=M&&O[e.y]<=L)):B=f.filter(jv(O=>O[e.x]>=k&&O[e.x]<=D&&O[e.y]>=M&&O[e.y]<=L));const U={xCol:$.xCol,yCol:$.yCol,x1:S[0][0]||($==null?void 0:$.x1)||0,x2:S[1][0]||($==null?void 0:$.x2)||0,y1:S[0][1]||($==null?void 0:$.y1)||0,y2:S[1][1]||($==null?void 0:$.y2)||0,hasBrush:A!=="clear",id:R},V=A!=="clear"?B==null?void 0:B.array(e.ids):[];o({...s,[R]:U,selection:V}),A==="drag"||A==="handle"||A==="click"?m(A,{...s,[R]:U,selection:V}):A==="clear"&&h.apply("Clear Brush",d.clearBrush({...s,[R]:U,selection:V})),i(B)},[s,f,e,h,m,d]),y=I.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():f?f==null?void 0:f.groupby(e.category).count():null,[r,f,e.category]),v=I.useCallback(S=>{i(S)},[]),b=I.useCallback((S,x)=>{const C=new Set(x.ctrlKey||x.metaKey?[...s.selection,...S]:S),A=f.filter(jv(R=>C.has(R[e.ids])));o({...s,selection:[...C]}),i(A),p("click",{...s,selection:[...C]})},[s,f,p,e.ids]),w=I.useMemo(()=>(f==null?void 0:f.objects())||[],[f]),E=I.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return l?_.jsxs(ri,{gap:"xs",children:[_.jsxs(Kn,{children:[_.jsx(xn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?_.jsx(fY,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:S=>u(S==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?_.jsxs(_.Fragment,{children:[_.jsx(Ah,{color:"#f28e2c"}),_.jsx(nt,{children:"Survived"}),_.jsx(Ah,{color:"#4e79a7"}),_.jsx(nt,{children:"Died"})]}):null]}),_.jsxs(Kn,{children:[Object.entries(s).map(S=>{const[x,C]=S;return x==="selection"?null:C.type==="histogram"?_.jsx(XNe,{onClose:A=>{const{[A]:R,...P}=s;o(P)},dataTable:f,setSelection:b,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:C.xCol,y:C.yCol},brushType:e.brushType,brushState:C,isPaintbrushSelect:a,setFilteredTable:v},x):C.type==="violin"?_.jsx(QNe,{onClose:A=>{const{[A]:R,...P}=s;o(P)},allData:w,setSelection:b,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:C.xCol,y:C.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:C,isPaintbrushSelect:a,setFilteredTable:v},x):_.jsx(KNe,{onClose:A=>{const{[A]:R,...P}=s;o(P)},brushedPoints:s.selection,data:w,initialParams:{...e,x:C.xCol,y:C.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:C,isPaintbrushSelect:a,setFilteredTable:v,setIsPaintbrushSelect:u},x)}),e.hideCat?null:_.jsx($z,{fullTable:f,setSelection:b,data:w,parameters:e,barsTable:y})]})]}):_.jsx(Ku,{})}const LNt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Zde,default:Zde},Symbol.toStringTag,{value:"Module"})),FNt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function JNe(e,t){return function(n){return t.map(r=>[r,DTe(n,i=>e(r-i))])}}function ZNe(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function ePe(e,t){return e*t/(t-1)}function tPe(e,t,n){let r=Math.sqrt(ePe(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function jNt({values:e,xScale:t,ticks:n}){const r=Ekt({values:e}).rollup({variance:w2.variance("values"),q1:w2.quantile("values",.25),q3:w2.quantile("values",.75)}).objects()[0];return JNe(ZNe(tPe(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const BNt=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:jNt,kernelDensityEstimator:JNe,kernelEpanechnikov:ZNe,silvermans:tPe,toSampleVariance:ePe},Symbol.toStringTag,{value:"Module"}));var nPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ms,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var b=v.call(g,y||"default");if(i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(b){return b.headers.has("Content-Type")&&!b.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(b.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),b.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),b=m.getChannelData(g).length-1;b>=0;b--)y[b]+=v[b];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),b=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var S=h.getChannelData(E),x=w.getChannelData(E),C=0;C<v;C++)x[C]=S[b+C],C<g*this._sampleRate&&(x[C]*=C/(g*this._sampleRate)),C>v-y*this._sampleRate&&(x[C]*=(v-C)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,b=new ArrayBuffer(8+v),w=new DataView(b);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,E){return w+E.length},0),y=new Float32Array(g),v=0,b=0;v<g;)p.forEach(function(w){y[v++]=w[b]}),b++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(nPe);var UNt=nPe.exports;const zNt=ol(UNt),XN=3,m_=25,QN=25,JN=20,ehe=1;function VNt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=I.useState(!1),[l,{width:c}]=zf();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ehe,width:e(t.endTime)-e(t.startTime)-ehe*2,y:r-m_,height:m_}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-XN,width:c+XN*2,y:r-m_-QN-o,height:JN,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-XN,x2:c+e(t.startTime)+XN,y1:r-m_-QN+JN-o,y2:r-m_-QN+JN-o}),_.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-m_-QN-o,height:JN,children:_.jsx(Ja,{style:{width:"fit-content"},children:_.jsx(nt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function HNt({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const the=25,qNt=8;function rPe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Fo(l=>l),a=I.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*qNt+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:_.jsx(HNt,{labelHeight:l*the,answer:p,height:r,xScale:e},h),label:_.jsx(VNt,{labelHeight:l*the,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=I.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>_.jsx(Di,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:_.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}function WNt({cx:e,cy:t,r:n,color:r}){return _.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function GNt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return _.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:_.jsx(WNt,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const nhe={left:5,top:0,right:5,bottom:0};function YNt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=I.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:d}=Zf(),h=Qh(),p=d?h:null,m=I.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(v=>v.startsWith(p))||null,[t,p]);I.useEffect(()=>{if(!m||!t)return;const v=t.answers[m].provenanceGraph;if(!v)return;const{startTime:b}=t.answers.introduction_0,w=b+o;if(!i||!v.nodes[i]){s(v.root);return}let E=v.nodes[i];for(;;)if(w<E.createdOn){if(PRt(E))break;{const S=E.parent;if(w<v.nodes[S].createdOn)E=v.nodes[S];else break}}else if(E.children.length>0){const S=E.children[0];if(w>v.nodes[S].createdOn)E=v.nodes[S];else break}else break;E.id!==i&&s(E.id)},[i,t,o,s,m]);const g=I.useCallback((v,b)=>{a(b,(b-e.domain()[0])/f),s(v)},[s,a,f,e]),y=I.useMemo(()=>Object.entries(t.answers).filter(v=>m?m===v[0]:!0).map(v=>{const[b,w]=v;return _.jsx(GNt,{taskName:b,answer:w,height:r,currentNode:i,setCurrentNode:g,xScale:e},b)}),[i,g,r,t.answers,m,e]);return _.jsx(ri,{children:_.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:nhe.left,x2:n+nhe.left,y1:r/2,y2:r/2}),y]})})}const rhe={top:5,left:5,right:5,bottom:5};function KNt({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=I.useMemo(()=>e.map(s=>_.jsxs("g",{children:[_.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:rhe.top,y2:rhe.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>_.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return _.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:_.jsx(Di,{label:u.name,withArrow:!0,arrowSize:6,children:_.jsx(Ah,{size:12,color:u.color})})},u.name)})},a))]},s.start)),[r,n,e,t]);return _.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function XNt({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:u,deleteRowCallback:l,addRowCallback:c,onSelectTags:f,addRef:d}){const h=bL(),[p,m]=I.useState(e),g=w=>f([...a,o.find(E=>E.id===w)]),y=w=>f(a.filter(E=>E.id!==w)),v=a.map(w=>{const E=_A(w.color).l;return _.jsx(k1,{withRemoveButton:!0,styles:{root:{backgroundColor:w.color,color:E>.7?"black":"white"}},onRemove:()=>y(w.id),children:w.name},w.id)}),b=o.filter(w=>!a.find(E=>E.id===w.id)).map(w=>_.jsx(vn.Option,{value:w.id,children:_.jsxs(Kn,{gap:"sm",children:[_.jsx(Ah,{size:10,color:w.color}),_.jsx("span",{children:w.name})]})},w.id));return _.jsxs(Kn,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[_.jsx(Kn,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:_.jsx(nm,{ref:w=>w?d(w):null,style:{width:"100%"},variant:"unstyled",value:s,onChange:w=>{u(w.currentTarget.value)},onKeyDown:w=>{w.key==="Enter"&&w.currentTarget.selectionStart!==null?c(w.currentTarget.selectionStart):w.key==="Backspace"&&w.currentTarget.selectionStart===0&&w.currentTarget.selectionEnd===0&&(l(),w.preventDefault(),w.stopPropagation())}})}),_.jsxs(Kn,{wrap:"nowrap",style:{width:"300px"},children:[_.jsx(xL,{orientation:"vertical",size:"xs"}),_.jsxs(vn,{width:300,store:h,onOptionSubmit:g,withinPortal:!1,children:[_.jsx(vn.DropdownTarget,{children:_.jsx(dE,{style:{width:"400px"},pointer:!0,onClick:()=>h.toggleDropdown(),children:_.jsxs(k1.Group,{children:[v.length>0?v:_.jsx(si.Placeholder,{children:"Add tags"}),_.jsx(vn.EventsTarget,{children:_.jsx(dE.Field,{type:"hidden",onBlur:()=>h.closeDropdown()})})]})})}),_.jsx(vn.Dropdown,{children:_.jsx(vn.Options,{children:b.length===0?_.jsx(vn.Empty,{children:"No additional tags"}):b})})]}),_.jsxs(Yn,{children:[_.jsx(Yn.Target,{children:_.jsx(WQe,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),_.jsx(Yn.Dropdown,{children:_.jsx(NL,{value:p,onChange:w=>m(w.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(p)})})]})]})]})}var _o=[];for(var x9=0;x9<256;++x9)_o.push((x9+256).toString(16).slice(1));function QNt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}var ZN,JNt=new Uint8Array(16);function ZNt(){if(!ZN&&(ZN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ZN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ZN(JNt)}var ePt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ihe={randomUUID:ePt};function YA(e,t,n){if(ihe.randomUUID&&!t&&!e)return ihe.randomUUID();e=e||{};var r=e.random||(e.rng||ZNt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QNt(r)}function she({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=I.useState(n?r.name:""),[o,a]=I.useState(n?r.color:"#fd7e14"),u=I.useCallback(()=>{const l=YA();e({color:o,name:i,id:l})},[e,o,i]);return _.jsxs(ri,{gap:"xs",children:[_.jsxs(Kn,{children:[_.jsx(Ah,{color:o}),_.jsx(nm,{required:!0,placeholder:"Enter tag name",value:i,onChange:l=>s(l.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),_.jsx(qG,{withPicker:n,style:{width:"100%"},value:o,onChange:l=>a(l),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),_.jsx(xn,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>u(),children:n?"Edit Tag":"Add Tag"})]})}function tPt({createTagCallback:e,editTagCallback:t,tags:n}){const[r,i]=I.useState(!1);return _.jsxs(ri,{style:{width:"300px"},gap:"xs",children:[n.length===0?_.jsx(nt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(s=>_.jsxs(Kn,{justify:"space-between",children:[_.jsxs(Kn,{children:[_.jsx(Ah,{color:s.color}),_.jsx(nt,{children:s.name})]}),_.jsxs(Yn,{trapFocus:!0,withinPortal:!1,children:[_.jsx(Yn.Target,{children:_.jsx(LQe,{color:"lightgray"})}),_.jsx(Yn.Dropdown,{children:_.jsx(she,{editTag:!0,currentNames:n.map(o=>o.name),addTagCallback:o=>{t(s,{...o,id:s.id})},editableTag:s})})]})]},s.id)),_.jsxs(Yn,{trapFocus:!0,opened:r,withinPortal:!1,children:[_.jsx(Yn.Target,{children:_.jsx(xn,{variant:"light",onClick:()=>i(!r),children:"Create new tag"})}),_.jsx(Yn.Dropdown,{children:_.jsx(she,{currentNames:n.map(s=>s.name),addTagCallback:s=>{i(!1),e(s)}})})]})]})}var ohe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iPe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},nPt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},MJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(iPe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):nPt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new rPt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rPt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iPt=function(e){const t=iPe(e);return MJ.encodeByteArray(t,!0)},D$=function(e){return iPt(e).replace(/\./g,"")},sPe=function(e){try{return MJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oPe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sPt=()=>oPe().__FIREBASE_DEFAULTS__,oPt=()=>{if(typeof process>"u"||typeof ohe>"u")return;const e=ohe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},aPt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&sPe(e[1]);return t&&JSON.parse(t)},y4=()=>{try{return sPt()||oPt()||aPt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},aPe=e=>{var t,n;return(n=(t=y4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},uPt=e=>{const t=aPe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},uPe=()=>{var e;return(e=y4())===null||e===void 0?void 0:e.config},lPe=e=>{var t;return(t=y4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D$(JSON.stringify(n)),D$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cPt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bo())}function fPt(){var e;const t=(e=y4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dPt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function hPt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pPt(){const e=Bo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mPt(){return!fPt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LJ(){try{return typeof indexedDB=="object"}catch{return!1}}function gPt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yPt="FirebaseError";class rp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=yPt,Object.setPrototypeOf(this,rp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dS.prototype.create)}}class dS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?vPt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rp(i,a,r)}}function vPt(e,t){return e.replace(bPt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const bPt=/\{\$([^}]+)}/g;function _Pt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function XA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ahe(s)&&ahe(o)){if(!XA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ahe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function wPt(e,t){const n=new EPt(e,t);return n.subscribe.bind(n)}class EPt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xPt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=S9),i.error===void 0&&(i.error=S9),i.complete===void 0&&(i.complete=S9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xPt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function S9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SPt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TPt=1e3,CPt=2,APt=4*60*60*1e3,IPt=.5;function kPt(e,t=TPt,n=CPt){const r=t*Math.pow(n,e),i=Math.round(IPt*r*(Math.random()-.5)*2);return Math.min(APt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e){return e&&e._delegate?e._delegate:e}class Mh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RPt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new KA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(PPt(t))try{this.getOrInitializeService({instanceIdentifier:kv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=kv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=kv){return this.instances.has(t)}getOptions(t=kv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NPt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=kv){return this.component?this.component.multipleInstances?t:kv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NPt(e){return e===kv?void 0:e}function PPt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OPt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new RPt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wn||(Wn={}));const DPt={debug:Wn.DEBUG,verbose:Wn.VERBOSE,info:Wn.INFO,warn:Wn.WARN,error:Wn.ERROR,silent:Wn.SILENT},$Pt=Wn.INFO,MPt={[Wn.DEBUG]:"log",[Wn.VERBOSE]:"log",[Wn.INFO]:"info",[Wn.WARN]:"warn",[Wn.ERROR]:"error"},LPt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=MPt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class v4{constructor(t){this.name=t,this._logLevel=$Pt,this._logHandler=LPt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DPt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wn.DEBUG,...t),this._logHandler(this,Wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wn.VERBOSE,...t),this._logHandler(this,Wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wn.INFO,...t),this._logHandler(this,Wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wn.WARN,...t),this._logHandler(this,Wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wn.ERROR,...t),this._logHandler(this,Wn.ERROR,...t)}}const FPt=(e,t)=>t.some(n=>e instanceof n);let uhe,lhe;function jPt(){return uhe||(uhe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BPt(){return lhe||(lhe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cPe=new WeakMap,CV=new WeakMap,fPe=new WeakMap,T9=new WeakMap,FJ=new WeakMap;function UPt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(S0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&cPe.set(n,e)}).catch(()=>{}),FJ.set(t,e),t}function zPt(e){if(CV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});CV.set(e,t)}let AV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return CV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||fPe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return S0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function VPt(e){AV=e(AV)}function HPt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(C9(this),t,...n);return fPe.set(r,t.sort?t.sort():[t]),S0(r)}:BPt().includes(e)?function(...t){return e.apply(C9(this),t),S0(cPe.get(this))}:function(...t){return S0(e.apply(C9(this),t))}}function qPt(e){return typeof e=="function"?HPt(e):(e instanceof IDBTransaction&&zPt(e),FPt(e,jPt())?new Proxy(e,AV):e)}function S0(e){if(e instanceof IDBRequest)return UPt(e);if(T9.has(e))return T9.get(e);const t=qPt(e);return t!==e&&(T9.set(e,t),FJ.set(t,e)),t}const C9=e=>FJ.get(e);function WPt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=S0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(S0(o.result),u.oldVersion,u.newVersion,S0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const GPt=["get","getKey","getAll","getAllKeys","count"],YPt=["put","add","delete","clear"],A9=new Map;function che(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(A9.get(t))return A9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=YPt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GPt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return A9.set(t,s),s}VPt(e=>({...e,get:(t,n,r)=>che(t,n)||e.get(t,n,r),has:(t,n)=>!!che(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XPt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XPt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const IV="@firebase/app",fhe="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new v4("@firebase/app"),QPt="@firebase/app-compat",JPt="@firebase/analytics-compat",ZPt="@firebase/analytics",eOt="@firebase/app-check-compat",tOt="@firebase/app-check",nOt="@firebase/auth",rOt="@firebase/auth-compat",iOt="@firebase/database",sOt="@firebase/database-compat",oOt="@firebase/functions",aOt="@firebase/functions-compat",uOt="@firebase/installations",lOt="@firebase/installations-compat",cOt="@firebase/messaging",fOt="@firebase/messaging-compat",dOt="@firebase/performance",hOt="@firebase/performance-compat",pOt="@firebase/remote-config",mOt="@firebase/remote-config-compat",gOt="@firebase/storage",yOt="@firebase/storage-compat",vOt="@firebase/firestore",bOt="@firebase/vertexai-preview",_Ot="@firebase/firestore-compat",wOt="firebase",EOt="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="[DEFAULT]",xOt={[IV]:"fire-core",[QPt]:"fire-core-compat",[ZPt]:"fire-analytics",[JPt]:"fire-analytics-compat",[tOt]:"fire-app-check",[eOt]:"fire-app-check-compat",[nOt]:"fire-auth",[rOt]:"fire-auth-compat",[iOt]:"fire-rtdb",[sOt]:"fire-rtdb-compat",[oOt]:"fire-fn",[aOt]:"fire-fn-compat",[uOt]:"fire-iid",[lOt]:"fire-iid-compat",[cOt]:"fire-fcm",[fOt]:"fire-fcm-compat",[dOt]:"fire-perf",[hOt]:"fire-perf-compat",[pOt]:"fire-rc",[mOt]:"fire-rc-compat",[gOt]:"fire-gcs",[yOt]:"fire-gcs-compat",[vOt]:"fire-fst",[_Ot]:"fire-fst-compat",[bOt]:"fire-vertex","fire-js":"fire-js",[wOt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=new Map,SOt=new Map,RV=new Map;function dhe(e,t){try{e.container.addComponent(t)}catch(n){q1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $m(e){const t=e.name;if(RV.has(t))return q1.debug(`There were multiple attempts to register component ${t}.`),!1;RV.set(t,e);for(const n of $$.values())dhe(n,e);for(const n of SOt.values())dhe(n,e);return!0}function hS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ah(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},T0=new dS("app","Firebase",TOt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw T0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=EOt;function dPe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:kV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw T0.create("bad-app-name",{appName:String(i)});if(n||(n=uPe()),!n)throw T0.create("no-options");const s=$$.get(i);if(s){if(XA(n,s.options)&&XA(r,s.config))return s;throw T0.create("duplicate-app",{appName:i})}const o=new OPt(i);for(const u of RV.values())o.addComponent(u);const a=new COt(n,r,o);return $$.set(i,a),a}function jJ(e=kV){const t=$$.get(e);if(!t&&e===kV&&uPe())return dPe();if(!t)throw T0.create("no-app",{appName:e});return t}function Gf(e,t,n){var r;let i=(r=xOt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),q1.warn(a.join(" "));return}$m(new Mh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AOt="firebase-heartbeat-database",IOt=1,QA="firebase-heartbeat-store";let I9=null;function hPe(){return I9||(I9=WPt(AOt,IOt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(QA)}catch(n){console.warn(n)}}}}).catch(e=>{throw T0.create("idb-open",{originalErrorMessage:e.message})})),I9}async function kOt(e){try{const n=(await hPe()).transaction(QA),r=await n.objectStore(QA).get(pPe(e));return await n.done,r}catch(t){if(t instanceof rp)q1.warn(t.message);else{const n=T0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});q1.warn(n.message)}}}async function hhe(e,t){try{const r=(await hPe()).transaction(QA,"readwrite");await r.objectStore(QA).put(t,pPe(e)),await r.done}catch(n){if(n instanceof rp)q1.warn(n.message);else{const r=T0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});q1.warn(r.message)}}}function pPe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ROt=1024,NOt=30*24*60*60*1e3;class POt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DOt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=phe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NOt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=phe(),{heartbeatsToSend:r,unsentEntries:i}=OOt(this._heartbeatsCache.heartbeats),s=D$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function phe(){return new Date().toISOString().substring(0,10)}function OOt(e,t=ROt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mhe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mhe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DOt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LJ()?gPt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kOt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hhe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hhe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function mhe(e){return D$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ot(e){$m(new Mh("platform-logger",t=>new KPt(t),"PRIVATE")),$m(new Mh("heartbeat",t=>new POt(t),"PRIVATE")),Gf(IV,fhe,e),Gf(IV,fhe,"esm2017"),Gf("fire-js","")}$Ot("");function mPe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MOt=mPe,gPe=new dS("auth","Firebase",mPe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=new v4("@firebase/auth");function LOt(e,...t){M$.logLevel<=Wn.WARN&&M$.warn(`Auth (${Rb}): ${e}`,...t)}function RO(e,...t){M$.logLevel<=Wn.ERROR&&M$.error(`Auth (${Rb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(e,...t){throw UJ(e,...t)}function Yf(e,...t){return UJ(e,...t)}function BJ(e,t,n){const r=Object.assign(Object.assign({},MOt()),{[t]:n});return new dS("auth","Firebase",r).create(t,{appName:e.name})}function C0(e){return BJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FOt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Lh(e,"argument-error"),BJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function UJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return gPe.create(e,...t)}function an(e,t,...n){if(!e)throw UJ(t,...n)}function Kp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw RO(t),new Error(t)}function Mm(e,t){e||Kp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function jOt(){return ghe()==="http:"||ghe()==="https:"}function ghe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BOt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jOt()||dPt()||"connection"in navigator)?navigator.onLine:!0}function UOt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Mm(n>t,"Short delay should be less than long delay!"),this.isMobile=cPt()||hPt()}get(){return BOt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(e,t){Mm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yPe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zOt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VOt=new Pk(3e4,6e4);function b4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pS(e,t,n,r,i={}){return vPe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Nk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),yPe.fetch()(_Pe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function vPe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},zOt),t);try{const i=new HOt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw eP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw eP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw eP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw BJ(e,c,l);Lh(e,c)}}catch(i){if(i instanceof rp)throw i;Lh(e,"network-request-failed",{message:String(i)})}}async function bPe(e,t,n,r,i={}){const s=await pS(e,t,n,r,i);return"mfaPendingCredential"in s&&Lh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function _Pe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zJ(e.config,i):`${e.config.apiScheme}://${i}`}class HOt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yf(this.auth,"network-request-failed")),VOt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qOt(e,t){return pS(e,"POST","/v1/accounts:delete",t)}async function wPe(e,t){return pS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function WOt(e,t=!1){const n=ai(e),r=await n.getIdToken(t),i=VJ(r);an(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:T2(k9(i.auth_time)),issuedAtTime:T2(k9(i.iat)),expirationTime:T2(k9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function k9(e){return Number(e)*1e3}function VJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return RO("JWT malformed, contained fewer than 3 sections"),null;try{const i=sPe(n);return i?JSON.parse(i):(RO("Failed to decode base64 JWT payload"),null)}catch(i){return RO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yhe(e){const t=VJ(e);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof rp&&GOt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function GOt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=T2(this.lastLoginAt),this.creationTime=T2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await JA(e,wPe(n,{idToken:r}));an(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?EPe(s.providerUserInfo):[],a=XOt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new PV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function KOt(e){const t=ai(e);await L$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function XOt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function EPe(e){return e.map(t=>{var{providerId:n}=t,r=FI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QOt(e,t){const n=await vPe(e,{},async()=>{const r=Nk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=_Pe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yPe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JOt(e,t){return pS(e,"POST","/v2/accounts:revokeToken",b4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yhe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){an(t.length!==0,"internal-error");const n=yhe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await QOt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hw;return r&&(an(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(an(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(an(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Hw,this.toJSON())}_performRefresh(){return Kp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(e,t){an(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Xp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=FI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YOt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await JA(this,this.stsTokenManager.getToken(this.auth,t));return an(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return WOt(this,t)}reload(){return KOt(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Xp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await L$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ah(this.auth.app))return Promise.reject(C0(this.auth));const t=await this.getIdToken();return await JA(this,qOt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:x}=n;an(b&&x,t,"internal-error");const C=Hw.fromJSON(this.name,x);an(typeof b=="string",t,"internal-error"),bg(f,t.name),bg(d,t.name),an(typeof w=="boolean",t,"internal-error"),an(typeof E=="boolean",t,"internal-error"),bg(h,t.name),bg(p,t.name),bg(m,t.name),bg(g,t.name),bg(y,t.name),bg(v,t.name);const A=new Xp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(R=>Object.assign({},R))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Hw;i.updateFromServerResponse(n);const s=new Xp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await L$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];an(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?EPe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Hw;a.updateFromIdToken(r);const u=new Xp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new PV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe=new Map;function Qp(e){Mm(e instanceof Function,"Expected a class definition");let t=vhe.get(e);return t?(Mm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vhe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xPe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}xPe.type="NONE";const bhe=xPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(e,t,n){return`firebase:${e}:${t}:${n}`}class qw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=NO(this.userKey,i.apiKey,s),this.fullPersistenceKey=NO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Xp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new qw(Qp(bhe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Qp(bhe);const o=NO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Xp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new qw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new qw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _he(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(CPe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(SPe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(IPe(t))return"Blackberry";if(kPe(t))return"Webos";if(HJ(t))return"Safari";if((t.includes("chrome/")||TPe(t))&&!t.includes("edge/"))return"Chrome";if(APe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SPe(e=Bo()){return/firefox\//i.test(e)}function HJ(e=Bo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function TPe(e=Bo()){return/crios\//i.test(e)}function CPe(e=Bo()){return/iemobile/i.test(e)}function APe(e=Bo()){return/android/i.test(e)}function IPe(e=Bo()){return/blackberry/i.test(e)}function kPe(e=Bo()){return/webos/i.test(e)}function _4(e=Bo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ZOt(e=Bo()){var t;return _4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function eDt(){return pPt()&&document.documentMode===10}function RPe(e=Bo()){return _4(e)||APe(e)||kPe(e)||IPe(e)||/windows phone/i.test(e)||CPe(e)}function tDt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NPe(e,t=[]){let n;switch(e){case"Browser":n=_he(Bo());break;case"Worker":n=`${_he(Bo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nDt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rDt(e,t={}){return pS(e,"GET","/v2/passwordPolicy",b4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iDt=6;class sDt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iDt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oDt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new whe(this),this.idTokenSubscription=new whe(this),this.beforeStateQueue=new nDt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gPe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Qp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await qw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await wPe(this,{idToken:t}),r=await Xp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ah(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await L$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=UOt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ah(this.app))return Promise.reject(C0(this));const n=t?ai(t):null;return n&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ah(this.app)?Promise.reject(C0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ah(this.app)?Promise.reject(C0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rDt(this),n=new sDt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new dS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JOt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Qp(t)||this._popupRedirectResolver;an(n,this,"argument-error"),this.redirectPersistenceManager=await qw.create(this,[Qp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=NPe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&LOt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ok(e){return ai(e)}class whe{constructor(t){this.auth=t,this.observer=null,this.addObserver=wPt(n=>this.observer=n)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aDt(e){qJ=e}function uDt(e){return qJ.loadJS(e)}function lDt(){return qJ.gapiScript}function cDt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fDt(e,t){const n=hS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(XA(s,t??{}))return i;Lh(i,"already-initialized")}return n.initialize({options:t})}function dDt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function hDt(e,t,n){const r=Ok(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=PPe(t),{host:o,port:a}=pDt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),mDt()}function PPe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pDt(e){const t=PPe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ehe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ehe(o)}}}function Ehe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function mDt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OPe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Kp("not implemented")}_getIdTokenResponse(t){return Kp("not implemented")}_linkToIdToken(t,n){return Kp("not implemented")}_getReauthenticationResolver(t){return Kp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(e,t){return bPe(e,"POST","/v1/accounts:signInWithIdp",b4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gDt="http://localhost";class W1 extends OPe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new W1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Lh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=FI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new W1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ww(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Ww(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ww(t,n)}buildRequest(){const t={requestUri:gDt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Nk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk extends WJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Dk{constructor(){super("facebook.com")}static credential(t){return W1._fromParams({providerId:Hg.PROVIDER_ID,signInMethod:Hg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hg.credentialFromTaggedObject(t)}static credentialFromError(t){return Hg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hg.credential(t.oauthAccessToken)}catch{return null}}}Hg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends Dk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return W1._fromParams({providerId:Up.PROVIDER_ID,signInMethod:Up.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Up.credentialFromTaggedObject(t)}static credentialFromError(t){return Up.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Up.credential(n,r)}catch{return null}}}Up.GOOGLE_SIGN_IN_METHOD="google.com";Up.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Dk{constructor(){super("github.com")}static credential(t){return W1._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.GITHUB_SIGN_IN_METHOD="github.com";qg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Dk{constructor(){super("twitter.com")}static credential(t,n){return W1._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Wg.credential(n,r)}catch{return null}}}Wg.TWITTER_SIGN_IN_METHOD="twitter.com";Wg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yDt(e,t){return bPe(e,"POST","/v1/accounts:signUp",b4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Xp._fromIdTokenResponse(t,r,i),o=xhe(r);return new ny({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=xhe(r);return new ny({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function xhe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vDt(e){var t;if(ah(e.app))return Promise.reject(C0(e));const n=Ok(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ny({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yDt(n,{returnSecureToken:!0}),i=await ny._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$ extends rp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,F$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new F$(t,n,r,i)}}function DPe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?F$._fromErrorAndOperation(e,s,t,r):s})}async function bDt(e,t,n=!1){const r=await JA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ny._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Dt(e,t,n=!1){const{auth:r}=e;if(ah(r.app))return Promise.reject(C0(r));const i="reauthenticate";try{const s=await JA(e,DPe(r,i,t,e),n);an(s.idToken,r,"internal-error");const o=VJ(s.idToken);an(o,r,"internal-error");const{sub:a}=o;return an(e.uid===a,r,"user-mismatch"),ny._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wDt(e,t,n=!1){if(ah(e.app))return Promise.reject(C0(e));const r="signIn",i=await DPe(e,r,t),s=await ny._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function EDt(e,t,n,r){return ai(e).onIdTokenChanged(t,n,r)}function xDt(e,t,n){return ai(e).beforeAuthStateChanged(t,n)}function SDt(e,t,n,r){return ai(e).onAuthStateChanged(t,n,r)}function TDt(e){return ai(e).signOut()}const j$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Pe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(j$,"1"),this.storage.removeItem(j$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CDt(){const e=Bo();return HJ(e)||_4(e)}const ADt=1e3,IDt=10;class MPe extends $Pe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CDt()&&tDt(),this.fallbackToPolling=RPe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);eDt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,IDt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ADt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}MPe.type="LOCAL";const kDt=MPe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe extends $Pe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}LPe.type="SESSION";const FPe=LPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RDt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new w4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await RDt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NDt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=GJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){return window}function PDt(e){wh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jPe(){return typeof wh().WorkerGlobalScope<"u"&&typeof wh().importScripts=="function"}async function ODt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DDt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function $Dt(){return jPe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BPe="firebaseLocalStorageDb",MDt=1,B$="firebaseLocalStorage",UPe="fbase_key";class $k{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function E4(e,t){return e.transaction([B$],t?"readwrite":"readonly").objectStore(B$)}function LDt(){const e=indexedDB.deleteDatabase(BPe);return new $k(e).toPromise()}function OV(){const e=indexedDB.open(BPe,MDt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(B$,{keyPath:UPe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(B$)?t(r):(r.close(),await LDt(),t(await OV()))})})}async function She(e,t,n){const r=E4(e,!0).put({[UPe]:t,value:n});return new $k(r).toPromise()}async function FDt(e,t){const n=E4(e,!1).get(t),r=await new $k(n).toPromise();return r===void 0?null:r.value}function The(e,t){const n=E4(e,!0).delete(t);return new $k(n).toPromise()}const jDt=800,BDt=3;class zPe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await OV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>BDt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jPe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w4._getInstance($Dt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ODt(),!this.activeServiceWorker)return;this.sender=new NDt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DDt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await OV();return await She(t,j$,"1"),await The(t,j$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>She(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>FDt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>The(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=E4(i,!1).getAll();return new $k(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zPe.type="LOCAL";const UDt=zPe;new Pk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VPe(e,t){return t?Qp(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ extends OPe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ww(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ww(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ww(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function zDt(e){return wDt(e.auth,new YJ(e),e.bypassAuthState)}function VDt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),_Dt(n,new YJ(e),e.bypassAuthState)}async function HDt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),bDt(n,new YJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zDt;case"linkViaPopup":case"linkViaRedirect":return HDt;case"reauthViaPopup":case"reauthViaRedirect":return VDt;default:Lh(this.auth,"internal-error")}}resolve(t){Mm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Mm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qDt=new Pk(2e3,1e4);async function WDt(e,t,n){if(ah(e.app))return Promise.reject(Yf(e,"operation-not-supported-in-this-environment"));const r=Ok(e);FOt(e,t,WJ);const i=VPe(r,n);return new r1(r,"signInViaPopup",t,i).executeNotNull()}class r1 extends HPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,r1.currentPopupAction&&r1.currentPopupAction.cancel(),r1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){Mm(this.filter.length===1,"Popup operations only handle one event");const t=GJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Yf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qDt.get())};t()}}r1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GDt="pendingRedirect",PO=new Map;class YDt extends HPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=PO.get(this.auth._key());if(!t){try{const r=await KDt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}PO.set(this.auth._key(),t)}return this.bypassAuthState||PO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KDt(e,t){const n=JDt(t),r=QDt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function XDt(e,t){PO.set(e._key(),t)}function QDt(e){return Qp(e._redirectPersistence)}function JDt(e){return NO(GDt,e.config.apiKey,e.name)}async function ZDt(e,t,n=!1){if(ah(e.app))return Promise.reject(C0(e));const r=Ok(e),i=VPe(r,t),o=await new YDt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3t=10*60*1e3;class t3t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!n3t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!qPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=e3t&&this.cachedEventUids.clear(),this.cachedEventUids.has(Che(t))}saveEventToCache(t){this.cachedEventUids.add(Che(t)),this.lastProcessedEventTime=Date.now()}}function Che(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function qPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function n3t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3t(e,t={}){return pS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s3t=/^https?/;async function o3t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await r3t(e);for(const n of t)try{if(a3t(n))return}catch{}Lh(e,"unauthorized-domain")}function a3t(e){const t=NV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!s3t.test(n))return!1;if(i3t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3t=new Pk(3e4,6e4);function Ahe(){const e=wh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function l3t(e){return new Promise((t,n)=>{var r,i,s;function o(){Ahe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ahe(),n(Yf(e,"network-request-failed"))},timeout:u3t.get()})}if(!((i=(r=wh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=wh().gapi)===null||s===void 0)&&s.load)o();else{const a=cDt("iframefcb");return wh()[a]=()=>{gapi.load?o():n(Yf(e,"network-request-failed"))},uDt(`${lDt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw OO=null,t})}let OO=null;function c3t(e){return OO=OO||l3t(e),OO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3t=new Pk(5e3,15e3),d3t="__/auth/iframe",h3t="emulator/auth/iframe",p3t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m3t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g3t(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zJ(t,h3t):`https://${e.config.authDomain}/${d3t}`,r={apiKey:t.apiKey,appName:e.name,v:Rb},i=m3t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Nk(r).slice(1)}`}async function y3t(e){const t=await c3t(e),n=wh().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:g3t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p3t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yf(e,"network-request-failed"),a=wh().setTimeout(()=>{s(o)},f3t.get());function u(){wh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b3t=500,_3t=600,w3t="_blank",E3t="http://localhost";class Ihe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x3t(e,t,n,r=b3t,i=_3t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},v3t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Bo().toLowerCase();n&&(a=TPe(l)?w3t:n),SPe(l)&&(t=t||E3t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(ZOt(l)&&a!=="_self")return S3t(t||"",a),new Ihe(null);const f=window.open(t||"",a,c);an(f,e,"popup-blocked");try{f.focus()}catch{}return new Ihe(f)}function S3t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3t="__/auth/handler",C3t="emulator/auth/handler",A3t=encodeURIComponent("fac");async function khe(e,t,n,r,i,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rb,eventId:i};if(t instanceof WJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",_Pt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Dk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${A3t}=${encodeURIComponent(u)}`:"";return`${I3t(e)}?${Nk(a).slice(1)}${l}`}function I3t({config:e}){return e.emulator?zJ(e,C3t):`https://${e.authDomain}/${T3t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="webStorageSupport";class k3t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FPe,this._completeRedirectFn=ZDt,this._overrideRedirectResult=XDt}async _openPopup(t,n,r,i){var s;Mm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await khe(t,n,r,NV(),i);return x3t(t,o,GJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await khe(t,n,r,NV(),i);return PDt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await y3t(t),r=new t3t(t);return n.register("authEvent",i=>(an(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(R9,{type:R9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[R9];o!==void 0&&n(!!o),Lh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o3t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return RPe()||HJ()||_4()}}const WPe=k3t;var Rhe="@firebase/auth",Nhe="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P3t(e){$m(new Mh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;an(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NPe(e)},l=new oDt(r,i,s,u);return dDt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),$m(new Mh("auth-internal",t=>{const n=Ok(t.getProvider("auth").getImmediate());return(r=>new R3t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gf(Rhe,Nhe,N3t(e)),Gf(Rhe,Nhe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3t=5*60,D3t=lPe("authIdTokenMaxAge")||O3t;let Phe=null;const $3t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D3t)return;const i=n==null?void 0:n.token;Phe!==i&&(Phe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function U$(e=jJ()){const t=hS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=fDt(e,{popupRedirectResolver:WPe,persistence:[UDt,kDt,FPe]}),r=lPe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=$3t(s.toString());xDt(n,o,()=>o(n.currentUser)),EDt(n,a=>o(a))}}const i=aPe("auth");return i&&hDt(n,`http://${i}`),n}function M3t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}aDt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Yf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",M3t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P3t("Browser");var L3t="firebase",F3t="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gf(L3t,F3t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GPe="firebasestorage.googleapis.com",YPe="storageBucket",j3t=2*60*1e3,B3t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends rp{constructor(t,n,r=0){super(N9(t),`Firebase Storage: ${n} (${N9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return N9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function N9(e){return"storage/"+e}function KJ(){const e="An unknown error occurred, please check the error payload for server response.";return new rs(ts.UNKNOWN,e)}function U3t(e){return new rs(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function z3t(e){return new rs(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V3t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(ts.UNAUTHENTICATED,e)}function H3t(){return new rs(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function q3t(e){return new rs(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function W3t(){return new rs(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G3t(){return new rs(ts.CANCELED,"User canceled the upload/download.")}function Y3t(e){return new rs(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function K3t(e){return new rs(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function X3t(){return new rs(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YPe+"' property when initializing the app?")}function Q3t(){return new rs(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J3t(){return new rs(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Z3t(e){return new rs(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function DV(e){return new rs(ts.INVALID_ARGUMENT,e)}function KPe(){return new rs(ts.APP_DELETED,"The Firebase app was deleted.")}function e$t(e){return new rs(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function C2(e,t){return new rs(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function bT(e){throw new rs(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ga.makeFromUrl(t,n)}catch{return new Ga(t,"")}if(r.path==="")return r;throw K3t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===GPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const x=S[E.indices.bucket];let C=S[E.indices.path];C||(C=""),r=new Ga(x,C),E.postModify(r);break}}if(r==null)throw Y3t(t);return r}}class t$t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function r$t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$t(e){return e!==void 0}function s$t(e){return typeof e=="object"&&!Array.isArray(e)}function XJ(e){return typeof e=="string"||e instanceof String}function Ohe(e){return QJ()&&e instanceof Blob}function QJ(){return typeof Blob<"u"}function $V(e,t,n,r){if(r<t)throw DV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw DV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function XPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(p1||(p1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new tP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===p1.NO_ERROR,u=s.getStatus();if(!a||o$t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===p1.ABORT;r(!1,new tP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new tP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());i$t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=KJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?KPe():G3t();o(u)}else{const u=W3t();o(u)}};this.canceled_?n(!1,new tP(!1,null,!0)):this.backoffId_=n$t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&r$t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function u$t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function l$t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function c$t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function f$t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function d$t(e,t,n,r,i,s,o=!0){const a=XPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return c$t(l,t),u$t(l,n),l$t(l,s),f$t(l,r),new a$t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p$t(...e){const t=h$t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(QJ())return new Blob(e);throw new rs(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function m$t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$t(e){if(typeof atob>"u")throw Z3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P9{constructor(t,n){this.data=t,this.contentType=n||null}}function y$t(e,t){switch(e){case uh.RAW:return new P9(QPe(t));case uh.BASE64:case uh.BASE64URL:return new P9(JPe(e,t));case uh.DATA_URL:return new P9(b$t(t),_$t(t))}throw KJ()}function QPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function v$t(e){let t;try{t=decodeURIComponent(e)}catch{throw C2(uh.DATA_URL,"Malformed data URL.")}return QPe(t)}function JPe(e,t){switch(e){case uh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw C2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case uh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw C2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=g$t(t)}catch(i){throw i.message.includes("polyfill")?i:C2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ZPe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw C2(uh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=w$t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function b$t(e){const t=new ZPe(e);return t.base64?JPe(uh.BASE64,t.rest):v$t(t.rest)}function _$t(e){return new ZPe(e).contentType}function w$t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n){let r=0,i="";Ohe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ohe(this.data_)){const r=this.data_,i=m$t(r,t,n);return i===null?null:new Gg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Gg(r,!0)}}static getBlob(...t){if(QJ()){const n=t.map(r=>r instanceof Gg?r.data_:r);return new Gg(p$t.apply(null,n))}else{const n=t.map(o=>XJ(o)?y$t(uh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Gg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(e){let t;try{t=JSON.parse(e)}catch{return null}return s$t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function x$t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function eOe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$t(e,t){return t}class $a{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||S$t}}let nP=null;function T$t(e){return!XJ(e)||e.length<2?e:eOe(e)}function tOe(){if(nP)return nP;const e=[];e.push(new $a("bucket")),e.push(new $a("generation")),e.push(new $a("metageneration")),e.push(new $a("name","fullPath",!0));function t(s,o){return T$t(o)}const n=new $a("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new $a("size");return i.xform=r,e.push(i),e.push(new $a("timeCreated")),e.push(new $a("updated")),e.push(new $a("md5Hash",null,!0)),e.push(new $a("cacheControl",null,!0)),e.push(new $a("contentDisposition",null,!0)),e.push(new $a("contentEncoding",null,!0)),e.push(new $a("contentLanguage",null,!0)),e.push(new $a("contentType",null,!0)),e.push(new $a("metadata","customMetadata",!0)),nP=e,nP}function C$t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ga(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function A$t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return C$t(r,e),r}function nOe(e,t,n){const r=JJ(t);return r===null?null:A$t(e,r,n)}function I$t(e,t,n,r){const i=JJ(t);if(i===null||!XJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Mk(d,n,r),p=XPe({alt:"media",token:l});return h+p})[0]}function k$t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dhe="prefixes",$he="items";function R$t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Dhe])for(const i of n[Dhe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ga(t,s));r.prefixes.push(o)}if(n[$he])for(const i of n[$he]){const s=e._makeStorageReference(new Ga(t,i.name));r.items.push(s)}return r}function N$t(e,t,n){const r=JJ(n);return r===null?null:R$t(e,t,r)}class x4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(e){if(!e)throw KJ()}function P$t(e,t){function n(r,i){const s=nOe(e,i,t);return ZJ(s!==null),s}return n}function O$t(e,t){function n(r,i){const s=N$t(e,t,i);return ZJ(s!==null),s}return n}function D$t(e,t){function n(r,i){const s=nOe(e,i,t);return ZJ(s!==null),I$t(s,i,e.host,e._protocol)}return n}function eZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=H3t():i=V3t():n.getStatus()===402?i=z3t(e.bucket):n.getStatus()===403?i=q3t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function rOe(e){const t=eZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=U3t(e.path)),s.serverResponse=i.serverResponse,s}return n}function $$t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Mk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new x4(a,u,O$t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=eZ(t),c}function M$t(e,t,n){const r=t.fullServerUrl(),i=Mk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new x4(i,s,D$t(e,n),o);return a.errorHandler=rOe(t),a}function L$t(e,t){const n=t.fullServerUrl(),r=Mk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new x4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=rOe(t),a}function F$t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function j$t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=F$t(null,t)),r}function B$t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=j$t(t,r,i),c=k$t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Gg.getBlob(f,r,d);if(h===null)throw Q3t();const p={name:l.fullPath},m=Mk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new x4(m,g,P$t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=eZ(t),v}class U$t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=p1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=p1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=p1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw bT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class z$t extends U$t{initXhr(){this.xhr_.responseType="text"}}function S4(){return new z$t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,n){this._service=t,n instanceof Ga?this._location=n:this._location=Ga.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new G1(t,n)}get root(){const t=new Ga(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eOe(this._location.path)}get storage(){return this._service}get parent(){const t=E$t(this._location.path);if(t===null)return null;const n=new Ga(this._location.bucket,t);return new G1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw e$t(t)}}function V$t(e,t,n){e._throwIfRoot("uploadBytes");const r=B$t(e.storage,e._location,tOe(),new Gg(t,!0),n);return e.storage.makeRequestWithTokens(r,S4).then(i=>({metadata:i,ref:e}))}function H$t(e){const t={prefixes:[],items:[]};return iOe(e,t).then(()=>t)}async function iOe(e,t,n){const i=await q$t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await iOe(e,t,i.nextPageToken)}function q$t(e,t){t!=null&&typeof t.maxResults=="number"&&$V("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=$$t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,S4)}function W$t(e){e._throwIfRoot("getDownloadURL");const t=M$t(e.storage,e._location,tOe());return e.storage.makeRequestWithTokens(t,S4).then(n=>{if(n===null)throw J3t();return n})}function G$t(e){e._throwIfRoot("deleteObject");const t=L$t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,S4)}function Y$t(e,t){const n=x$t(e._location.path,t),r=new Ga(e._location.bucket,n);return new G1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$t(e){return/^[A-Za-z]+:\/\//.test(e)}function X$t(e,t){return new G1(e,t)}function sOe(e,t){if(e instanceof tZ){const n=e;if(n._bucket==null)throw X3t();const r=new G1(n,n._bucket);return t!=null?sOe(r,t):r}else return t!==void 0?Y$t(e,t):e}function Q$t(e,t){if(t&&K$t(t)){if(e instanceof tZ)return X$t(e,t);throw DV("To use ref(service, url), the first argument must be a Storage instance.")}else return sOe(e,t)}function Mhe(e,t){const n=t==null?void 0:t[YPe];return n==null?null:Ga.makeFromBucketSpec(n,e)}function J$t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:lPt(i,e.app.options.projectId))}class tZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=GPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=j3t,this._maxUploadRetryTime=B3t,this._requests=new Set,i!=null?this._bucket=Ga.makeFromBucketSpec(i,this._host):this._bucket=Mhe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ga.makeFromBucketSpec(this._url,t):this._bucket=Mhe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){$V("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){$V("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new G1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new t$t(KPe());{const o=d$t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Lhe="@firebase/storage",Fhe="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oOe="storage";function g_(e,t,n){return e=ai(e),V$t(e,t,n)}function _T(e){return e=ai(e),H$t(e)}function ov(e){return e=ai(e),W$t(e)}function jhe(e){return e=ai(e),G$t(e)}function Vi(e,t){return e=ai(e),Q$t(e,t)}function y_(e=jJ(),t){e=ai(e);const r=hS(e,oOe).getImmediate({identifier:t}),i=uPt("storage");return i&&Z$t(r,...i),r}function Z$t(e,t,n,r={}){J$t(e,t,n,r)}function eMt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new tZ(n,r,i,t,Rb)}function tMt(){$m(new Mh(oOe,eMt,"PUBLIC").setMultipleInstances(!0)),Gf(Lhe,Fhe,""),Gf(Lhe,Fhe,"esm2017")}tMt();var Bhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m1,aOe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,C){function A(){}A.prototype=C.prototype,x.D=C.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(R,P,$){for(var k=Array(arguments.length-2),D=2;D<arguments.length;D++)k[D-2]=arguments[D];return C.prototype[P].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,C,A){A||(A=0);var R=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)R[P]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(P=0;16>P;++P)R[P]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=x.g[0],A=x.g[1],P=x.g[2];var $=x.g[3],k=C+($^A&(P^$))+R[0]+3614090360&4294967295;C=A+(k<<7&4294967295|k>>>25),k=$+(P^C&(A^P))+R[1]+3905402710&4294967295,$=C+(k<<12&4294967295|k>>>20),k=P+(A^$&(C^A))+R[2]+606105819&4294967295,P=$+(k<<17&4294967295|k>>>15),k=A+(C^P&($^C))+R[3]+3250441966&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+($^A&(P^$))+R[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=$+(P^C&(A^P))+R[5]+1200080426&4294967295,$=C+(k<<12&4294967295|k>>>20),k=P+(A^$&(C^A))+R[6]+2821735955&4294967295,P=$+(k<<17&4294967295|k>>>15),k=A+(C^P&($^C))+R[7]+4249261313&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+($^A&(P^$))+R[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=$+(P^C&(A^P))+R[9]+2336552879&4294967295,$=C+(k<<12&4294967295|k>>>20),k=P+(A^$&(C^A))+R[10]+4294925233&4294967295,P=$+(k<<17&4294967295|k>>>15),k=A+(C^P&($^C))+R[11]+2304563134&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+($^A&(P^$))+R[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=$+(P^C&(A^P))+R[13]+4254626195&4294967295,$=C+(k<<12&4294967295|k>>>20),k=P+(A^$&(C^A))+R[14]+2792965006&4294967295,P=$+(k<<17&4294967295|k>>>15),k=A+(C^P&($^C))+R[15]+1236535329&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+(P^$&(A^P))+R[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=$+(A^P&(C^A))+R[6]+3225465664&4294967295,$=C+(k<<9&4294967295|k>>>23),k=P+(C^A&($^C))+R[11]+643717713&4294967295,P=$+(k<<14&4294967295|k>>>18),k=A+($^C&(P^$))+R[0]+3921069994&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^$&(A^P))+R[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=$+(A^P&(C^A))+R[10]+38016083&4294967295,$=C+(k<<9&4294967295|k>>>23),k=P+(C^A&($^C))+R[15]+3634488961&4294967295,P=$+(k<<14&4294967295|k>>>18),k=A+($^C&(P^$))+R[4]+3889429448&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^$&(A^P))+R[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=$+(A^P&(C^A))+R[14]+3275163606&4294967295,$=C+(k<<9&4294967295|k>>>23),k=P+(C^A&($^C))+R[3]+4107603335&4294967295,P=$+(k<<14&4294967295|k>>>18),k=A+($^C&(P^$))+R[8]+1163531501&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^$&(A^P))+R[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=$+(A^P&(C^A))+R[2]+4243563512&4294967295,$=C+(k<<9&4294967295|k>>>23),k=P+(C^A&($^C))+R[7]+1735328473&4294967295,P=$+(k<<14&4294967295|k>>>18),k=A+($^C&(P^$))+R[12]+2368359562&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(A^P^$)+R[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=$+(C^A^P)+R[8]+2272392833&4294967295,$=C+(k<<11&4294967295|k>>>21),k=P+($^C^A)+R[11]+1839030562&4294967295,P=$+(k<<16&4294967295|k>>>16),k=A+(P^$^C)+R[14]+4259657740&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^$)+R[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=$+(C^A^P)+R[4]+1272893353&4294967295,$=C+(k<<11&4294967295|k>>>21),k=P+($^C^A)+R[7]+4139469664&4294967295,P=$+(k<<16&4294967295|k>>>16),k=A+(P^$^C)+R[10]+3200236656&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^$)+R[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=$+(C^A^P)+R[0]+3936430074&4294967295,$=C+(k<<11&4294967295|k>>>21),k=P+($^C^A)+R[3]+3572445317&4294967295,P=$+(k<<16&4294967295|k>>>16),k=A+(P^$^C)+R[6]+76029189&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^$)+R[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=$+(C^A^P)+R[12]+3873151461&4294967295,$=C+(k<<11&4294967295|k>>>21),k=P+($^C^A)+R[15]+530742520&4294967295,P=$+(k<<16&4294967295|k>>>16),k=A+(P^$^C)+R[2]+3299628645&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(P^(A|~$))+R[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=$+(A^(C|~P))+R[7]+1126891415&4294967295,$=C+(k<<10&4294967295|k>>>22),k=P+(C^($|~A))+R[14]+2878612391&4294967295,P=$+(k<<15&4294967295|k>>>17),k=A+($^(P|~C))+R[5]+4237533241&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~$))+R[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=$+(A^(C|~P))+R[3]+2399980690&4294967295,$=C+(k<<10&4294967295|k>>>22),k=P+(C^($|~A))+R[10]+4293915773&4294967295,P=$+(k<<15&4294967295|k>>>17),k=A+($^(P|~C))+R[1]+2240044497&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~$))+R[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=$+(A^(C|~P))+R[15]+4264355552&4294967295,$=C+(k<<10&4294967295|k>>>22),k=P+(C^($|~A))+R[6]+2734768916&4294967295,P=$+(k<<15&4294967295|k>>>17),k=A+($^(P|~C))+R[13]+1309151649&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~$))+R[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=$+(A^(C|~P))+R[11]+3174756917&4294967295,$=C+(k<<10&4294967295|k>>>22),k=P+(C^($|~A))+R[2]+718787259&4294967295,P=$+(k<<15&4294967295|k>>>17),k=A+($^(P|~C))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+$&4294967295}r.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var A=C-this.blockSize,R=this.B,P=this.h,$=0;$<C;){if(P==0)for(;$<=A;)i(this,x,$),$+=this.blockSize;if(typeof x=="string"){for(;$<C;)if(R[P++]=x.charCodeAt($++),P==this.blockSize){i(this,R),P=0;break}}else for(;$<C;)if(R[P++]=x[$++],P==this.blockSize){i(this,R),P=0;break}}this.h=P,this.o+=C},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var A=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=A&255,A/=256;for(this.u(x),x=Array(16),C=A=0;4>C;++C)for(var R=0;32>R;R+=8)x[A++]=this.g[C]>>>R&255;return x};function s(x,C){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=C(x)}function o(x,C){this.h=C;for(var A=[],R=!0,P=x.length-1;0<=P;P--){var $=x[P]|0;R&&$==C||(A[P]=$,R=!1)}this.g=A}var a={};function u(x){return-128<=x&&128>x?s(x,function(C){return new o([C|0],0>C?-1:0)}):new o([x|0],0>x?-1:0)}function l(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return g(l(-x));for(var C=[],A=1,R=0;x>=A;R++)C[R]=x/A|0,A*=4294967296;return new o(C,0)}function c(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return g(c(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),R=f,P=0;P<x.length;P+=8){var $=Math.min(8,x.length-P),k=parseInt(x.substring(P,P+$),C);8>$?($=l(Math.pow(C,$)),R=R.j($).add(l(k))):(R=R.j(A),R=R.add(l(k)))}return R}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var x=0,C=1,A=0;A<this.g.length;A++){var R=this.i(A);x+=(0<=R?R:4294967296+R)*C,C*=4294967296}return x},e.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(p(this))return"0";if(m(this))return"-"+g(this).toString(x);for(var C=l(Math.pow(x,6)),A=this,R="";;){var P=w(A,C).g;A=y(A,P.j(C));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=P,p(A))return $+R;for(;6>$.length;)$="0"+$;R=$+R}},e.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function p(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function m(x){return x.h==-1}e.l=function(x){return x=y(this,x),m(x)?-1:p(x)?0:1};function g(x){for(var C=x.g.length,A=[],R=0;R<C;R++)A[R]=~x.g[R];return new o(A,~x.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],R=0,P=0;P<=C;P++){var $=R+(this.i(P)&65535)+(x.i(P)&65535),k=($>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);R=k>>>16,$&=65535,k&=65535,A[P]=k<<16|$}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(x,C){return x.add(g(C))}e.j=function(x){if(p(this)||p(x))return f;if(m(this))return m(x)?g(this).j(g(x)):g(g(this).j(x));if(m(x))return g(this.j(g(x)));if(0>this.l(h)&&0>x.l(h))return l(this.m()*x.m());for(var C=this.g.length+x.g.length,A=[],R=0;R<2*C;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<x.g.length;P++){var $=this.i(R)>>>16,k=this.i(R)&65535,D=x.i(P)>>>16,M=x.i(P)&65535;A[2*R+2*P]+=k*M,v(A,2*R+2*P),A[2*R+2*P+1]+=$*M,v(A,2*R+2*P+1),A[2*R+2*P+1]+=k*D,v(A,2*R+2*P+1),A[2*R+2*P+2]+=$*D,v(A,2*R+2*P+2)}for(R=0;R<C;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=C;R<2*C;R++)A[R]=0;return new o(A,0)};function v(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function b(x,C){this.g=x,this.h=C}function w(x,C){if(p(C))throw Error("division by zero");if(p(x))return new b(f,f);if(m(x))return C=w(g(x),C),new b(g(C.g),g(C.h));if(m(C))return C=w(x,g(C)),new b(g(C.g),C.h);if(30<x.g.length){if(m(x)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,R=C;0>=R.l(x);)A=E(A),R=E(R);var P=S(A,1),$=S(R,1);for(R=S(R,2),A=S(A,2);!p(R);){var k=$.add(R);0>=k.l(x)&&(P=P.add(A),$=k),R=S(R,1),A=S(A,1)}return C=y(x,P.j(C)),new b(P,C)}for(P=f;0<=x.l(C);){for(A=Math.max(1,Math.floor(x.m()/C.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),$=l(A),k=$.j(C);m(k)||0<k.l(x);)A-=R,$=l(A),k=$.j(C);p($)&&($=d),P=P.add($),x=y(x,k)}return new b(P,x)}e.A=function(x){return w(this,x).h},e.and=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)&x.i(R);return new o(A,this.h&x.h)},e.or=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)|x.i(R);return new o(A,this.h|x.h)},e.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)^x.i(R);return new o(A,this.h^x.h)};function E(x){for(var C=x.g.length+1,A=[],R=0;R<C;R++)A[R]=x.i(R)<<1|x.i(R-1)>>>31;return new o(A,x.h)}function S(x,C){var A=C>>5;C%=32;for(var R=x.g.length-A,P=[],$=0;$<R;$++)P[$]=0<C?x.i($+A)>>>C|x.i($+A+1)<<32-C:x.i($+A);return new o(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aOe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,m1=o}).apply(typeof Bhe<"u"?Bhe:typeof self<"u"?self:typeof window<"u"?window:{});var rP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uOe,lOe,wC,cOe,DO,MV,fOe,dOe,hOe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,F,q){return T==Array.prototype||T==Object.prototype||(T[F]=q.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof rP=="object"&&rP];for(var F=0;F<T.length;++F){var q=T[F];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(T,F){if(F)e:{var q=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var we=T[Q];if(!(we in q))break e;q=q[we]}T=T[T.length-1],Q=q[T],F=F(Q),F!=Q&&F!=null&&t(q,T,{configurable:!0,writable:!0,value:F})}}function s(T,F){T instanceof String&&(T+="");var q=0,Q=!1,we={next:function(){if(!Q&&q<T.length){var Pe=q++;return{value:F(Pe,T[Pe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(T){return T||function(){return s(this,function(F,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var F=typeof T;return F=F!="object"?F:T?Array.isArray(T)?"array":F:"null",F=="array"||F=="object"&&typeof T.length=="number"}function l(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function c(T,F,q){return T.call.apply(T.bind,arguments)}function f(T,F,q){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),T.apply(F,we)}}return function(){return T.apply(F,arguments)}}function d(T,F,q){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,F){var q=Array.prototype.slice.call(arguments,1);return function(){var Q=q.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,F){function q(){}q.prototype=F.prototype,T.aa=F.prototype,T.prototype=new q,T.prototype.constructor=T,T.Qb=function(Q,we,Pe){for(var ht=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)ht[Gr-2]=arguments[Gr];return F.prototype[we].apply(Q,ht)}}function m(T){const F=T.length;if(0<F){const q=Array(F);for(let Q=0;Q<F;Q++)q[Q]=T[Q];return q}return[]}function g(T,F){for(let q=1;q<arguments.length;q++){const Q=arguments[q];if(u(Q)){const we=T.length||0,Pe=Q.length||0;T.length=we+Pe;for(let ht=0;ht<Pe;ht++)T[we+ht]=Q[ht]}else T.push(Q)}}class y{constructor(F,q){this.i=F,this.j=q,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function v(T){return/^[\s\xa0]*$/.test(T)}function b(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(T,F,q){for(const Q in T)F.call(q,T[Q],Q,T)}function x(T,F){for(const q in T)F.call(void 0,T[q],q,T)}function C(T){const F={};for(const q in T)F[q]=T[q];return F}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(T,F){let q,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(q in Q)T[q]=Q[q];for(let Pe=0;Pe<A.length;Pe++)q=A[Pe],Object.prototype.hasOwnProperty.call(Q,q)&&(T[q]=Q[q])}}function P(T){var F=1;T=T.split(":");const q=[];for(;0<F&&T.length;)q.push(T.shift()),F--;return T.length&&q.push(T.join(":")),q}function $(T){a.setTimeout(()=>{throw T},0)}function k(){var T=V;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class D{constructor(){this.h=this.g=null}add(F,q){const Q=M.get();Q.set(F,q),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var M=new y(()=>new L,T=>T.reset());class L{constructor(){this.next=this.g=this.h=null}set(F,q){this.h=F,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,V=new D,O=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(z)}};var z=()=>{for(var T;T=k();){try{T.h.call(T.g)}catch(q){$(q)}var F=M;F.j(T),100>F.h&&(F.h++,T.next=F.g,F.g=T)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const q=()=>{};a.addEventListener("test",q,F),a.removeEventListener("test",q,F)}catch{}return T}();function G(T,F){if(j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var q=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget){if(E){e:{try{w(F.nodeName);var we=!0;break e}catch{}we=!1}we||(F=null)}}else q=="mouseover"?F=T.fromElement:q=="mouseout"&&(F=T.toElement);this.relatedTarget=F,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:te[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ge(T,F,q,Q,we){this.listener=T,this.proxy=null,this.src=F,this.type=q,this.capture=!!Q,this.ha=we,this.key=++fe,this.da=this.fa=!1}function le(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Me(T){this.src=T,this.g={},this.h=0}Me.prototype.add=function(T,F,q,Q,we){var Pe=T.toString();T=this.g[Pe],T||(T=this.g[Pe]=[],this.h++);var ht=ze(T,F,Q,we);return-1<ht?(F=T[ht],q||(F.fa=!1)):(F=new ge(F,this.src,Pe,!!Q,we),F.fa=q,T.push(F)),F};function ce(T,F){var q=F.type;if(q in T.g){var Q=T.g[q],we=Array.prototype.indexOf.call(Q,F,void 0),Pe;(Pe=0<=we)&&Array.prototype.splice.call(Q,we,1),Pe&&(le(F),T.g[q].length==0&&(delete T.g[q],T.h--))}}function ze(T,F,q,Q){for(var we=0;we<T.length;++we){var Pe=T[we];if(!Pe.da&&Pe.listener==F&&Pe.capture==!!q&&Pe.ha==Q)return we}return-1}var Ve="closure_lm_"+(1e6*Math.random()|0),at={};function tt(T,F,q,Q,we){if(Array.isArray(F)){for(var Pe=0;Pe<F.length;Pe++)tt(T,F[Pe],q,Q,we);return null}return q=bt(q),T&&T[he]?T.K(F,q,l(Q)?!!Q.capture:!!Q,we):be(T,F,q,!1,Q,we)}function be(T,F,q,Q,we,Pe){if(!F)throw Error("Invalid event type");var ht=l(we)?!!we.capture:!!we,Gr=_e(T);if(Gr||(T[Ve]=Gr=new Me(T)),q=Gr.add(F,q,Q,ht,Pe),q.proxy)return q;if(Q=pe(),q.proxy=Q,Q.src=T,Q.listener=q,T.addEventListener)H||(we=ht),we===void 0&&(we=!1),T.addEventListener(F.toString(),Q,we);else if(T.attachEvent)T.attachEvent(pt(F.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return q}function pe(){function T(q){return F.call(T.src,T.listener,q)}const F=Ge;return T}function Oe(T,F,q,Q,we){if(Array.isArray(F))for(var Pe=0;Pe<F.length;Pe++)Oe(T,F[Pe],q,Q,we);else Q=l(Q)?!!Q.capture:!!Q,q=bt(q),T&&T[he]?(T=T.i,F=String(F).toString(),F in T.g&&(Pe=T.g[F],q=ze(Pe,q,Q,we),-1<q&&(le(Pe[q]),Array.prototype.splice.call(Pe,q,1),Pe.length==0&&(delete T.g[F],T.h--)))):T&&(T=_e(T))&&(F=T.g[F.toString()],T=-1,F&&(T=ze(F,q,Q,we)),(q=-1<T?F[T]:null)&&He(q))}function He(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[he])ce(F.i,T);else{var q=T.type,Q=T.proxy;F.removeEventListener?F.removeEventListener(q,Q,T.capture):F.detachEvent?F.detachEvent(pt(q),Q):F.addListener&&F.removeListener&&F.removeListener(Q),(q=_e(F))?(ce(q,T),q.h==0&&(q.src=null,F[Ve]=null)):le(T)}}}function pt(T){return T in at?at[T]:at[T]="on"+T}function Ge(T,F){if(T.da)T=!0;else{F=new G(F,this);var q=T.listener,Q=T.ha||T.src;T.fa&&He(T),T=q.call(Q,F)}return T}function _e(T){return T=T[Ve],T instanceof Me?T:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(T){return typeof T=="function"?T:(T[ct]||(T[ct]=function(F){return T.handleEvent(F)}),T[ct])}function ye(){W.call(this),this.i=new Me(this),this.M=this,this.F=null}p(ye,W),ye.prototype[he]=!0,ye.prototype.removeEventListener=function(T,F,q,Q){Oe(this,T,F,q,Q)};function Ne(T,F){var q,Q=T.F;if(Q)for(q=[];Q;Q=Q.F)q.push(Q);if(T=T.M,Q=F.type||F,typeof F=="string")F=new j(F,T);else if(F instanceof j)F.target=F.target||T;else{var we=F;F=new j(Q,T),R(F,we)}if(we=!0,q)for(var Pe=q.length-1;0<=Pe;Pe--){var ht=F.g=q[Pe];we=We(ht,Q,!0,F)&&we}if(ht=F.g=T,we=We(ht,Q,!0,F)&&we,we=We(ht,Q,!1,F)&&we,q)for(Pe=0;Pe<q.length;Pe++)ht=F.g=q[Pe],we=We(ht,Q,!1,F)&&we}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var T=this.i,F;for(F in T.g){for(var q=T.g[F],Q=0;Q<q.length;Q++)le(q[Q]);delete T.g[F],T.h--}}this.F=null},ye.prototype.K=function(T,F,q,Q){return this.i.add(String(T),F,!1,q,Q)},ye.prototype.L=function(T,F,q,Q){return this.i.add(String(T),F,!0,q,Q)};function We(T,F,q,Q){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();for(var we=!0,Pe=0;Pe<F.length;++Pe){var ht=F[Pe];if(ht&&!ht.da&&ht.capture==q){var Gr=ht.listener,yo=ht.ha||ht.src;ht.fa&&ce(T.i,ht),we=Gr.call(yo,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function Je(T,F,q){if(typeof T=="function")q&&(T=d(T,q));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:a.setTimeout(T,F||0)}function xt(T){T.g=Je(()=>{T.g=null,T.i&&(T.i=!1,xt(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class wn extends W{constructor(F,q){super(),this.m=F,this.l=q,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(T){W.call(this),this.h=T,this.g={}}p(yr,W);var vr=[];function kr(T){S(T.g,function(F,q){this.g.hasOwnProperty(q)&&He(F)},T),T.g={}}yr.prototype.N=function(){yr.aa.N.call(this),kr(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=a.JSON.stringify,Tn=a.JSON.parse,rr=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function ir(){}ir.prototype.h=null;function Ho(T){return T.h||(T.h=T.i())}function Bi(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){j.call(this,"d")}p(Ln,j);function Hn(){j.call(this,"c")}p(Hn,j);var gs={},pp=null;function cl(){return pp=pp||new ye}gs.La="serverreachability";function Sd(T){j.call(this,gs.La,T)}p(Sd,j);function xr(T){const F=cl();Ne(F,new Sd(F))}gs.STAT_EVENT="statevent";function Ii(T,F){j.call(this,gs.STAT_EVENT,T),this.stat=F}p(Ii,j);function li(T){const F=cl();Ne(F,new Ii(F,T))}gs.Ma="timingevent";function hu(T,F){j.call(this,gs.Ma,T),this.size=F}p(hu,j);function Ra(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},F)}function Na(){this.g=!0}Na.prototype.xa=function(){this.g=!1};function oe(T,F,q,Q,we,Pe){T.info(function(){if(T.g)if(Pe)for(var ht="",Gr=Pe.split("&"),yo=0;yo<Gr.length;yo++){var fr=Gr[yo].split("=");if(1<fr.length){var Yo=fr[0];fr=fr[1];var Ko=Yo.split("_");ht=2<=Ko.length&&Ko[1]=="type"?ht+(Yo+"="+fr+"&"):ht+(Yo+"=redacted&")}}else ht=null;else ht=Pe;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+F+`
`+q+`
`+ht})}function ee(T,F,q,Q,we,Pe,ht){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+F+`
`+q+`
`+Pe+" "+ht})}function ae(T,F,q,Q){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+Ae(T,q)+(Q?" "+Q:"")})}function Ce(T,F){T.info(function(){return"TIMEOUT: "+F})}Na.prototype.info=function(){};function Ae(T,F){if(!T.g)return F;if(!F)return null;try{var q=JSON.parse(F);if(q){for(T=0;T<q.length;T++)if(Array.isArray(q[T])){var Q=q[T];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Pe=we[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var ht=1;ht<we.length;ht++)we[ht]=""}}}}return Kt(q)}catch{return F}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xt;function On(){}p(On,ir),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Xt=new On;function Fn(T,F,q,Q){this.j=T,this.i=F,this.l=q,this.R=Q||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var sr={},Rr={};function Vt(T,F,q){T.L=1,T.v=jn(Ke(F)),T.m=q,T.P=!0,or(T,null)}function or(T,F){T.F=Date.now(),ki(T),T.A=Ke(T.v);var q=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),PR(q.i,"t",Q),T.C=0,q=T.j.J,T.h=new pn,T.g=Lie(T.j,q?F:null,!T.m),0<T.O&&(T.M=new wn(d(T.Y,T,T.g),T.O)),F=T.U,q=T.g,Q=T.ca;var we="readystatechange";Array.isArray(we)||(we&&(vr[0]=we.toString()),we=vr);for(var Pe=0;Pe<we.length;Pe++){var ht=tt(q,we[Pe],Q||F.handleEvent,!1,F.h||F);if(!ht)break;F.g[ht.key]=ht}F=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,F)):(T.u="GET",T.g.ea(T.A,T.u,null,F)),xr(),oe(T.i,T.u,T.A,T.l,T.R,T.m)}Fn.prototype.ca=function(T){T=T.target;const F=this.M;F&&ss(T)==3?F.j():this.Y(T)},Fn.prototype.Y=function(T){try{if(T==this.g)e:{const Ko=ss(this.g);var F=this.g.Ba();const Jb=this.g.Z();if(!(3>Ko)&&(Ko!=3||this.g&&(this.h.h||this.g.oa()||Go(this.g)))){this.J||Ko!=4||F==7||(F==8||0>=Jb?xr(3):xr(2)),Jr(this);var q=this.g.Z();this.X=q;t:if(Hr(this)){var Q=Go(this.g);T="";var we=Q.length,Pe=ss(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),go(this);var ht="";break t}this.h.i=new a.TextDecoder}for(F=0;F<we;F++)this.h.h=!0,T+=this.h.i.decode(Q[F],{stream:!(Pe&&F==we-1)});Q.length=0,this.h.g+=T,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=q==200,ee(this.i,this.u,this.A,this.l,this.R,Ko,q),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,yo=this.g;if((Gr=yo.g?yo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var fr=Gr;break t}}fr=null}if(q=fr)ae(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,q);else{this.o=!1,this.s=3,li(12),Ui(this),go(this);break e}}if(this.P){q=!0;let lf;for(;!this.J&&this.C<ht.length;)if(lf=Jn(this,ht),lf==Rr){Ko==4&&(this.s=4,li(14),q=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(lf==sr){this.s=4,li(15),ae(this.i,this.l,ht,"[Invalid Chunk]"),q=!1;break}else ae(this.i,this.l,lf,null),zi(this,lf);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ko!=4||ht.length!=0||this.h.h||(this.s=1,li(16),q=!1),this.o=this.o&&q,!q)ae(this.i,this.l,ht,"[Invalid Chunked Response]"),Ui(this),go(this);else if(0<ht.length&&!this.W){this.W=!0;var Yo=this.j;Yo.g==this&&Yo.ba&&!Yo.M&&(Yo.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),q5(Yo),Yo.M=!0,li(11))}}else ae(this.i,this.l,ht,null),zi(this,ht);Ko==4&&Ui(this),this.o&&!this.J&&(Ko==4?Oie(this.j,this):(this.o=!1,ki(this)))}else nv(this.g),q==400&&0<ht.indexOf("Unknown SID")?(this.s=3,li(12)):(this.s=0,li(13)),Ui(this),go(this)}}}catch{}finally{}};function Hr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Jn(T,F){var q=T.C,Q=F.indexOf(`
`,q);return Q==-1?Rr:(q=Number(F.substring(q,Q)),isNaN(q)?sr:(Q+=1,Q+q>F.length?Rr:(F=F.slice(Q,Q+q),T.C=Q+q,F)))}Fn.prototype.cancel=function(){this.J=!0,Ui(this)};function ki(T){T.S=Date.now()+T.I,Ks(T,T.I)}function Ks(T,F){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ra(d(T.ba,T),F)}function Jr(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Fn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ce(this.i,this.A),this.L!=2&&(xr(),li(17)),Ui(this),this.s=2,go(this)):Ks(this,this.S-T)};function go(T){T.j.G==0||T.J||Oie(T.j,T)}function Ui(T){Jr(T);var F=T.M;F&&typeof F.ma=="function"&&F.ma(),T.M=null,kr(T.U),T.g&&(F=T.g,T.g=null,F.abort(),F.ma())}function zi(T,F){try{var q=T.j;if(q.G!=0&&(q.g==T||Td(q.h,T))){if(!T.K&&Td(q.h,T)&&q.G==3){try{var Q=q.Da.g.parse(F)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<T.F)jR(q),LR(q);else break e;H5(q),li(18)}}else q.za=we[1],0<q.za-q.T&&37500>we[2]&&q.F&&q.v==0&&!q.C&&(q.C=Ra(d(q.Za,q),6e3));if(1>=tc(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else rv(q,11)}else if((T.K||q.g==T)&&jR(q),!v(F))for(we=q.Da.g.parse(F),F=0;F<we.length;F++){let fr=we[F];if(q.T=fr[0],fr=fr[1],q.G==2)if(fr[0]=="c"){q.K=fr[1],q.ia=fr[2];const Yo=fr[3];Yo!=null&&(q.la=Yo,q.j.info("VER="+q.la));const Ko=fr[4];Ko!=null&&(q.Aa=Ko,q.j.info("SVER="+q.Aa));const Jb=fr[5];Jb!=null&&typeof Jb=="number"&&0<Jb&&(Q=1.5*Jb,q.L=Q,q.j.info("backChannelRequestTimeoutMs_="+Q)),Q=q;const lf=T.g;if(lf){const UR=lf.g?lf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(UR){var Pe=Q.h;Pe.g||UR.indexOf("spdy")==-1&&UR.indexOf("quic")==-1&&UR.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Y(Pe,Pe.h),Pe.h=null))}if(Q.D){const W5=lf.g?lf.g.getResponseHeader("X-HTTP-Session-Id"):null;W5&&(Q.ya=W5,Pt(Q.I,Q.D,W5))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-T.F,q.j.info("Handshake RTT: "+q.R+"ms")),Q=q;var ht=T;if(Q.qa=Mie(Q,Q.J?Q.ia:null,Q.W),ht.K){se(Q.h,ht);var Gr=ht,yo=Q.L;yo&&(Gr.I=yo),Gr.B&&(Jr(Gr),ki(Gr)),Q.g=ht}else Nie(Q);0<q.i.length&&FR(q)}else fr[0]!="stop"&&fr[0]!="close"||rv(q,7);else q.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?rv(q,7):Xb(q):fr[0]!="noop"&&q.l&&q.l.ta(fr),q.v=0)}}xr(4)}catch{}}var qo=class{constructor(T,F){this.g=T,this.map=F}};function Pa(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xs(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function tc(T){return T.h?1:T.g?T.g.size:0}function Td(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function Y(T,F){T.g?T.g.add(F):T.h=F}function se(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}Pa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Z(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const q of T.g.values())F=F.concat(q.D);return F}return m(T.i)}function me(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var F=[],q=T.length,Q=0;Q<q;Q++)F.push(T[Q]);return F}F=[],q=0;for(Q in T)F[q++]=T[Q];return F}function ve(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var F=[];T=T.length;for(var q=0;q<T;q++)F.push(q);return F}F=[],q=0;for(const Q in T)F[q++]=Q;return F}}}function de(T,F){if(T.forEach&&typeof T.forEach=="function")T.forEach(F,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,F,void 0);else for(var q=ve(T),Q=me(T),we=Q.length,Pe=0;Pe<we;Pe++)F.call(void 0,Q[Pe],q&&q[Pe],T)}var De=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qe(T,F){if(T){T=T.split("&");for(var q=0;q<T.length;q++){var Q=T[q].indexOf("="),we=null;if(0<=Q){var Pe=T[q].substring(0,Q);we=T[q].substring(Q+1)}else Pe=T[q];F(Pe,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function Ye(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Ye){this.h=T.h,ut(this,T.j),this.o=T.o,this.g=T.g,Et(this,T.s),this.l=T.l;var F=T.i,q=new nc;q.i=F.i,F.g&&(q.g=new Map(F.g),q.h=F.h),mn(this,q),this.m=T.m}else T&&(F=String(T).match(De))?(this.h=!1,ut(this,F[1]||"",!0),this.o=Nr(F[2]||""),this.g=Nr(F[3]||"",!0),Et(this,F[4]),this.l=Nr(F[5]||"",!0),mn(this,F[6]||"",!0),this.m=Nr(F[7]||"")):(this.h=!1,this.i=new nc(null,this.h))}Ye.prototype.toString=function(){var T=[],F=this.j;F&&T.push(Pr(F,Cd,!0),":");var q=this.g;return(q||F=="file")&&(T.push("//"),(F=this.o)&&T.push(Pr(F,Cd,!0),"@"),T.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&T.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&T.push("/"),T.push(Pr(q,q.charAt(0)=="/"?BS:mp,!0))),(q=this.i.toString())&&T.push("?",q),(q=this.m)&&T.push("#",Pr(q,NR)),T.join("")};function Ke(T){return new Ye(T)}function ut(T,F,q){T.j=q?Nr(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function Et(T,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);T.s=F}else T.s=null}function mn(T,F,q){F instanceof nc?(T.i=F,US(T.i,T.h)):(q||(F=Pr(F,Jy)),T.i=new nc(F,T.h))}function Pt(T,F,q){T.i.set(F,q)}function jn(T){return Pt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Nr(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Pr(T,F,q){return typeof T=="string"?(T=encodeURI(T).replace(F,Wo),q&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Wo(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Cd=/[#\/\?@]/g,mp=/[#\?:]/g,BS=/[#\?]/g,Jy=/[#\?@]/g,NR=/#/g;function nc(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function pu(T){T.g||(T.g=new Map,T.h=0,T.i&&qe(T.i,function(F,q){T.add(decodeURIComponent(F.replace(/\+/g," ")),q)}))}e=nc.prototype,e.add=function(T,F){pu(this),this.i=null,T=yp(this,T);var q=this.g.get(T);return q||this.g.set(T,q=[]),q.push(F),this.h+=1,this};function gp(T,F){pu(T),F=yp(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function Yb(T,F){return pu(T),F=yp(T,F),T.g.has(F)}e.forEach=function(T,F){pu(this),this.g.forEach(function(q,Q){q.forEach(function(we){T.call(F,we,Q,this)},this)},this)},e.na=function(){pu(this);const T=Array.from(this.g.values()),F=Array.from(this.g.keys()),q=[];for(let Q=0;Q<F.length;Q++){const we=T[Q];for(let Pe=0;Pe<we.length;Pe++)q.push(F[Q])}return q},e.V=function(T){pu(this);let F=[];if(typeof T=="string")Yb(this,T)&&(F=F.concat(this.g.get(yp(this,T))));else{T=Array.from(this.g.values());for(let q=0;q<T.length;q++)F=F.concat(T[q])}return F},e.set=function(T,F){return pu(this),this.i=null,T=yp(this,T),Yb(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},e.get=function(T,F){return T?(T=this.V(T),0<T.length?String(T[0]):F):F};function PR(T,F,q){gp(T,F),0<q.length&&(T.i=null,T.g.set(yp(T,F),m(q)),T.h+=q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(var q=0;q<F.length;q++){var Q=F[q];const Pe=encodeURIComponent(String(Q)),ht=this.V(Q);for(Q=0;Q<ht.length;Q++){var we=Pe;ht[Q]!==""&&(we+="="+encodeURIComponent(String(ht[Q]))),T.push(we)}}return this.i=T.join("&")};function yp(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function US(T,F){F&&!T.j&&(pu(T),T.i=null,T.g.forEach(function(q,Q){var we=Q.toLowerCase();Q!=we&&(gp(this,Q),PR(this,we,q))},T)),T.j=F}function OR(T,F){const q=new Na;if(a.Image){const Q=new Image;Q.onload=h(mu,q,"TestLoadImage: loaded",!0,F,Q),Q.onerror=h(mu,q,"TestLoadImage: error",!1,F,Q),Q.onabort=h(mu,q,"TestLoadImage: abort",!1,F,Q),Q.ontimeout=h(mu,q,"TestLoadImage: timeout",!1,F,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else F(!1)}function vp(T,F){const q=new Na,Q=new AbortController,we=setTimeout(()=>{Q.abort(),mu(q,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:Q.signal}).then(Pe=>{clearTimeout(we),Pe.ok?mu(q,"TestPingServer: ok",!0,F):mu(q,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(we),mu(q,"TestPingServer: error",!1,F)})}function mu(T,F,q,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(q)}catch{}}function V5(){this.g=new rr}function DR(T,F,q){const Q=q||"";try{de(T,function(we,Pe){let ht=we;l(we)&&(ht=Kt(we)),F.push(Q+Pe+"="+encodeURIComponent(ht))})}catch(we){throw F.push(Q+"type="+encodeURIComponent("_badmap")),we}}function Zy(T){this.l=T.Ub||null,this.j=T.eb||!1}p(Zy,ir),Zy.prototype.g=function(){return new ev(this.l,this.j)},Zy.prototype.i=function(T){return function(){return T}}({});function ev(T,F){ye.call(this),this.D=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(ev,ye),e=ev.prototype,e.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=F,this.readyState=1,dg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(F.body=T),(this.D||a).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tv(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,dg(this)),this.g&&(this.readyState=3,dg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$R(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function $R(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?tv(this):dg(this),this.readyState==3&&$R(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,tv(this))},e.Qa=function(T){this.g&&(this.response=T,tv(this))},e.ga=function(){this.g&&tv(this)};function tv(T){T.readyState=4,T.l=null,T.j=null,T.v=null,dg(T)}e.setRequestHeader=function(T,F){this.u.append(T,F)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var q=F.next();!q.done;)q=q.value,T.push(q[0]+": "+q[1]),q=F.next();return T.join(`\r
`)};function dg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(ev.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function MR(T){let F="";return S(T,function(q,Q){F+=Q,F+=":",F+=q,F+=`\r
`}),F}function ne(T,F,q){e:{for(Q in q){var Q=!1;break e}Q=!0}Q||(q=MR(q),typeof T=="string"?q!=null&&encodeURIComponent(String(q)):Pt(T,F,q))}function ue(T){ye.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,ye);var Ie=/^https?$/i,It=["POST","PUT"];e=ue.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,F,q,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xt.g(),this.v=this.o?Ho(this.o):Ho(Xt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch(Pe){Dn(this,Pe);return}if(T=q||"",q=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)q.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Pe of Q.keys())q.set(Pe,Q.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(q.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),we=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,F,void 0))||Q||we||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,ht]of q)this.g.setRequestHeader(Pe,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(T),this.u=!1}catch(Pe){Dn(this,Pe)}};function Dn(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.m=5,Sr(T),Bn(T)}function Sr(T){T.A||(T.A=!0,Ne(T,"complete"),Ne(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Ne(this,"complete"),Ne(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||ss(T)!=4||T.Z()!=2)){if(T.u&&ss(T)==4)Je(T.Ea,0,T);else if(Ne(T,"readystatechange"),ss(T)==4){T.h=!1;try{const ht=T.Z();e:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var q;if(!(q=F)){var Q;if(Q=ht===0){var we=String(T.D).match(De)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Ie.test(we?we.toLowerCase():"")}q=Q}if(q)Ne(T,"complete"),Ne(T,"success");else{T.m=6;try{var Pe=2<ss(T)?T.g.statusText:""}catch{Pe=""}T.l=Pe+" ["+T.Z()+"]",Sr(T)}}finally{Bn(T)}}}}function Bn(T,F){if(T.g){Wr(T);const q=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,F||Ne(T,"ready");try{q.onreadystatechange=Q}catch{}}}function Wr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function ss(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<ss(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),Tn(F)}};function Go(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function nv(T){const F={};T=(T.g&&2<=ss(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var q=P(T[Q]);const we=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Pe=F[we]||[];F[we]=Pe,Pe.push(q)}x(F,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bp(T,F,q){return q&&q.internalChannelParams&&q.internalChannelParams[T]||F}function Kb(T){this.Aa=0,this.i=[],this.j=new Na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bp("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bp("baseRetryDelayMs",5e3,T),this.cb=bp("retryDelaySeedMs",1e4,T),this.Wa=bp("forwardChannelMaxRetries",2,T),this.wa=bp("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Pa(T&&T.concurrentRequestLimit),this.Da=new V5,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kb.prototype,e.la=8,e.G=1,e.connect=function(T,F,q,Q){li(0),this.W=T,this.H=F||{},q&&Q!==void 0&&(this.H.OSID=q,this.H.OAID=Q),this.F=this.X,this.I=Mie(this,null,this.W),FR(this)};function Xb(T){if(Iie(T),T.G==3){var F=T.U++,q=Ke(T.I);if(Pt(q,"SID",T.K),Pt(q,"RID",F),Pt(q,"TYPE","terminate"),zS(T,q),F=new Fn(T,T.j,F),F.L=2,F.v=jn(Ke(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(F.v.toString(),"")}catch{}!q&&a.Image&&(new Image().src=F.v,q=!0),q||(F.g=Lie(F.j,null),F.g.ea(F.v)),F.F=Date.now(),ki(F)}$ie(T)}function LR(T){T.g&&(q5(T),T.g.cancel(),T.g=null)}function Iie(T){LR(T),T.u&&(a.clearTimeout(T.u),T.u=null),jR(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function FR(T){if(!Xs(T.h)&&!T.s){T.s=!0;var F=T.Ga;B||O(),U||(B(),U=!0),V.add(F,T),T.B=0}}function Vje(T,F){return tc(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=F.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ra(d(T.Ga,T,F),Die(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const we=new Fn(this,this.j,T);let Pe=this.o;if(this.S&&(Pe?(Pe=C(Pe),R(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(we.H=Pe,Pe=null),this.P)e:{for(var F=0,q=0;q<this.i.length;q++){t:{var Q=this.i[q];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(F+=Q,4096<F){F=q;break e}if(F===4096||q===this.i.length-1){F=q+1;break e}}F=1e3}else F=1e3;F=Rie(this,we,F),q=Ke(this.I),Pt(q,"RID",T),Pt(q,"CVER",22),this.D&&Pt(q,"X-HTTP-Session-Id",this.D),zS(this,q),Pe&&(this.O?F="headers="+encodeURIComponent(String(MR(Pe)))+"&"+F:this.m&&ne(q,this.m,Pe)),Y(this.h,we),this.Ua&&Pt(q,"TYPE","init"),this.P?(Pt(q,"$req",F),Pt(q,"SID","null"),we.T=!0,Vt(we,q,null)):Vt(we,q,F),this.G=2}}else this.G==3&&(T?kie(this,T):this.i.length==0||Xs(this.h)||kie(this))};function kie(T,F){var q;F?q=F.l:q=T.U++;const Q=Ke(T.I);Pt(Q,"SID",T.K),Pt(Q,"RID",q),Pt(Q,"AID",T.T),zS(T,Q),T.m&&T.o&&ne(Q,T.m,T.o),q=new Fn(T,T.j,q,T.B+1),T.m===null&&(q.H=T.o),F&&(T.i=F.D.concat(T.i)),F=Rie(T,q,1e3),q.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,q),Vt(q,Q,F)}function zS(T,F){T.H&&S(T.H,function(q,Q){Pt(F,Q,q)}),T.l&&de({},function(q,Q){Pt(F,Q,q)})}function Rie(T,F,q){q=Math.min(T.i.length,q);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var we=T.i;let Pe=-1;for(;;){const ht=["count="+q];Pe==-1?0<q?(Pe=we[0].g,ht.push("ofs="+Pe)):Pe=0:ht.push("ofs="+Pe);let Gr=!0;for(let yo=0;yo<q;yo++){let fr=we[yo].g;const Yo=we[yo].map;if(fr-=Pe,0>fr)Pe=Math.max(0,we[yo].g-100),Gr=!1;else try{DR(Yo,ht,"req"+fr+"_")}catch{Q&&Q(Yo)}}if(Gr){Q=ht.join("&");break e}}}return T=T.i.splice(0,q),F.D=T,Q}function Nie(T){if(!T.g&&!T.u){T.Y=1;var F=T.Fa;B||O(),U||(B(),U=!0),V.add(F,T),T.v=0}}function H5(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ra(d(T.Fa,T),Die(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,Pie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ra(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,li(10),LR(this),Pie(this))};function q5(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function Pie(T){T.g=new Fn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var F=Ke(T.qa);Pt(F,"RID","rpc"),Pt(F,"SID",T.K),Pt(F,"AID",T.T),Pt(F,"CI",T.F?"0":"1"),!T.F&&T.ja&&Pt(F,"TO",T.ja),Pt(F,"TYPE","xmlhttp"),zS(T,F),T.m&&T.o&&ne(F,T.m,T.o),T.L&&(T.g.I=T.L);var q=T.g;T=T.ia,q.L=1,q.v=jn(Ke(F)),q.m=null,q.P=!0,or(q,T)}e.Za=function(){this.C!=null&&(this.C=null,LR(this),H5(this),li(19))};function jR(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function Oie(T,F){var q=null;if(T.g==F){jR(T),q5(T),T.g=null;var Q=2}else if(Td(T.h,F))q=F.D,se(T.h,F),Q=1;else return;if(T.G!=0){if(F.o)if(Q==1){q=F.m?F.m.length:0,F=Date.now()-F.F;var we=T.B;Q=cl(),Ne(Q,new hu(Q,q)),FR(T)}else Nie(T);else if(we=F.s,we==3||we==0&&0<F.X||!(Q==1&&Vje(T,F)||Q==2&&H5(T)))switch(q&&0<q.length&&(F=T.h,F.i=F.i.concat(q)),we){case 1:rv(T,5);break;case 4:rv(T,10);break;case 3:rv(T,6);break;default:rv(T,2)}}}function Die(T,F){let q=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(q*=2),q*F}function rv(T,F){if(T.j.info("Error code "+F),F==2){var q=d(T.fb,T),Q=T.Xa;const we=!Q;Q=new Ye(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ut(Q,"https"),jn(Q),we?OR(Q.toString(),q):vp(Q.toString(),q)}else li(2);T.G=0,T.l&&T.l.sa(F),$ie(T),Iie(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),li(2)):(this.j.info("Failed to ping google.com"),li(1))};function $ie(T){if(T.G=0,T.ka=[],T.l){const F=Z(T.h);(F.length!=0||T.i.length!=0)&&(g(T.ka,F),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function Mie(T,F,q){var Q=q instanceof Ye?Ke(q):new Ye(q);if(Q.g!="")F&&(Q.g=F+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,F=F?F+"."+we.hostname:we.hostname,we=+we.port;var Pe=new Ye(null);Q&&ut(Pe,Q),F&&(Pe.g=F),we&&Et(Pe,we),q&&(Pe.l=q),Q=Pe}return q=T.D,F=T.ya,q&&F&&Pt(Q,q,F),Pt(Q,"VER",T.la),zS(T,Q),Q}function Lie(T,F,q){if(F&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Ca&&!T.pa?new ue(new Zy({eb:q})):new ue(T.pa),F.Ha(T.J),F}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fie(){}e=Fie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function BR(){}BR.prototype.g=function(T,F){return new fl(T,F)};function fl(T,F){ye.call(this),this.g=new Kb(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(T?T["X-WebChannel-Client-Profile"]=F.va:T={"X-WebChannel-Client-Profile":F.va}),this.g.S=T,(T=F&&F.Sb)&&!v(T)&&(this.g.m=T),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!v(F)&&(this.g.D=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new Qb(this)}p(fl,ye),fl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fl.prototype.close=function(){Xb(this.g)},fl.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var q={};q.__data__=T,T=q}else this.u&&(q={},q.__data__=Kt(T),T=q);F.i.push(new qo(F.Ya++,T)),F.G==3&&FR(F)},fl.prototype.N=function(){this.g.l=null,delete this.j,Xb(this.g),delete this.g,fl.aa.N.call(this)};function jie(T){Ln.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const q in F){T=q;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}p(jie,Ln);function Bie(){Hn.call(this),this.status=1}p(Bie,Hn);function Qb(T){this.g=T}p(Qb,Fie),Qb.prototype.ua=function(){Ne(this.g,"a")},Qb.prototype.ta=function(T){Ne(this.g,new jie(T))},Qb.prototype.sa=function(T){Ne(this.g,new Bie)},Qb.prototype.ra=function(){Ne(this.g,"b")},BR.prototype.createWebChannel=BR.prototype.g,fl.prototype.send=fl.prototype.o,fl.prototype.open=fl.prototype.m,fl.prototype.close=fl.prototype.close,hOe=function(){return new BR},dOe=function(){return cl()},fOe=gs,MV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,DO=lt,Tt.COMPLETE="complete",cOe=Tt,Bi.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",ye.prototype.listen=ye.prototype.K,wC=Bi,lOe=Zy,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,uOe=ue}).apply(typeof rP<"u"?rP:typeof self<"u"?self:typeof window<"u"?window:{});const Uhe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xu.UNAUTHENTICATED=new xu(null),xu.GOOGLE_CREDENTIALS=new xu("google-credentials-uid"),xu.FIRST_PARTY=new xu("first-party-uid"),xu.MOCK_USER=new xu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mS="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new v4("@firebase/firestore");function wT(){return Y1.logLevel}function kt(e,...t){if(Y1.logLevel<=Wn.DEBUG){const n=t.map(nZ);Y1.debug(`Firestore (${mS}): ${e}`,...n)}}function Lm(e,...t){if(Y1.logLevel<=Wn.ERROR){const n=t.map(nZ);Y1.error(`Firestore (${mS}): ${e}`,...n)}}function ZA(e,...t){if(Y1.logLevel<=Wn.WARN){const n=t.map(nZ);Y1.warn(`Firestore (${mS}): ${e}`,...n)}}function nZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e="Unexpected state"){const t=`FIRESTORE (${mS}) INTERNAL ASSERTION FAILED: `+e;throw Lm(t),new Error(t)}function oi(e,t){e||un()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends rp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nMt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rMt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xu.UNAUTHENTICATED))}shutdown(){}}class iMt{constructor(t){this.t=t,this.currentUser=xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new um;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new um,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new um)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oi(typeof r.accessToken=="string"),new nMt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return oi(t===null||typeof t=="string"),new xu(t)}}class sMt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=xu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oMt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new sMt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(xu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aMt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uMt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(oi(typeof n.token=="string"),this.R=n.token,new aMt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lMt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pOe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=lMt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function _r(e,t){return e<t?-1:e>t?1:0}function VE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zs.fromMillis(Date.now())}static fromDate(t){return zs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new zs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new zs(0,0))}static max(){return new dn(new zs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,n,r){n===void 0?n=0:n>t.length&&un(),r===void 0?r=t.length-n:r>t.length-n&&un(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return eI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof eI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class hi extends eI{construct(t,n,r){return new hi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new hi(n)}static emptyPath(){return new hi([])}}const cMt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ro extends eI{construct(t,n,r){return new Ro(t,n,r)}static isValidIdentifier(t){return cMt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ro.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ro(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(Ue.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ro(n)}static emptyPath(){return new Ro([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(hi.fromString(t))}static fromName(t){return new Ut(hi.fromString(t).popFirst(5))}static empty(){return new Ut(hi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&hi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return hi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new hi(t.slice()))}}function fMt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new zs(n+1,0):new zs(n,r));return new ry(i,Ut.empty(),t)}function dMt(e){return new ry(e.readTime,e.key,-1)}class ry{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ry(dn.min(),Ut.empty(),-1)}static max(){return new ry(dn.max(),Ut.empty(),-1)}}function hMt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:_r(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pMt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mMt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(e){if(e.code!==Ue.FAILED_PRECONDITION||e.message!==pMt)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function gMt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}rZ.oe=-1;function T4(e){return e==null}function z$(e){return e===0&&1/e==-1/0}function yMt(e){return typeof e=="number"&&Number.isInteger(e)&&!z$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mOe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.comparator=t,this.root=n||Co.EMPTY}insert(t,n){return new ji(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(t){return new ji(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Co.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new iP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new iP(this.root,t,this.comparator,!1)}getReverseIterator(){return new iP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new iP(this.root,t,this.comparator,!0)}}class iP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Co{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Co.RED,this.left=i??Co.EMPTY,this.right=s??Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Co(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Co.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const t=this.left.check();if(t!==this.right.check())throw un();return t+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1;Co.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Co(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.comparator=t,this.data=new ji(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vhe(this.data.getIterator())}getIteratorFrom(t){return new Vhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Do(this.comparator);return n.data=t,n}}class Vhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t){this.fields=t,t.sort(Ro.comparator)}static empty(){return new kl([])}unionWith(t){let n=new Do(Ro.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new kl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return VE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gOe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gOe("Invalid base64 string: "+s):s}}(t);return new Sa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Sa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _r(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sa.EMPTY_BYTE_STRING=new Sa("");const vMt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iy(e){if(oi(!!e),typeof e=="string"){let t=0;const n=vMt.exec(e);if(oi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bs(e.seconds),nanos:bs(e.nanos)}}function bs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function K1(e){return typeof e=="string"?Sa.fromBase64String(e):Sa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sZ(e){const t=e.mapValue.fields.__previous_value__;return iZ(t)?sZ(t):t}function tI(e){const t=iy(e.mapValue.fields.__local_write_time__.timestampValue);return new zs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bMt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class nI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new nI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof nI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function X1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?iZ(e)?4:_Mt(e)?9007199254740991:10:un()}function Fh(e,t){if(e===t)return!0;const n=X1(e);if(n!==X1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tI(e).isEqual(tI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=iy(i.timestampValue),a=iy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return K1(i.bytesValue).isEqual(K1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return bs(i.geoPointValue.latitude)===bs(s.geoPointValue.latitude)&&bs(i.geoPointValue.longitude)===bs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bs(i.integerValue)===bs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bs(i.doubleValue),a=bs(s.doubleValue);return o===a?z$(o)===z$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return VE(e.arrayValue.values||[],t.arrayValue.values||[],Fh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zhe(o)!==zhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Fh(o[u],a[u])))return!1;return!0}(e,t);default:return un()}}function rI(e,t){return(e.values||[]).find(n=>Fh(n,t))!==void 0}function HE(e,t){if(e===t)return 0;const n=X1(e),r=X1(t);if(n!==r)return _r(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _r(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bs(s.integerValue||s.doubleValue),u=bs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Hhe(e.timestampValue,t.timestampValue);case 4:return Hhe(tI(e),tI(t));case 5:return _r(e.stringValue,t.stringValue);case 6:return function(s,o){const a=K1(s),u=K1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=_r(a[l],u[l]);if(c!==0)return c}return _r(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=_r(bs(s.latitude),bs(o.latitude));return a!==0?a:_r(bs(s.longitude),bs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=HE(a[l],u[l]);if(c)return c}return _r(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===sP.mapValue&&o===sP.mapValue)return 0;if(s===sP.mapValue)return 1;if(o===sP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=_r(u[f],c[f]);if(d!==0)return d;const h=HE(a[u[f]],l[c[f]]);if(h!==0)return h}return _r(u.length,c.length)}(e.mapValue,t.mapValue);default:throw un()}}function Hhe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return _r(e,t);const n=iy(e),r=iy(t),i=_r(n.seconds,r.seconds);return i!==0?i:_r(n.nanos,r.nanos)}function qE(e){return LV(e)}function LV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=iy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return K1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=LV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${LV(n.fields[o])}`;return i+"}"}(e.mapValue):un()}function qhe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function FV(e){return!!e&&"integerValue"in e}function oZ(e){return!!e&&"arrayValue"in e}function Whe(e){return!!e&&"nullValue"in e}function Ghe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $O(e){return!!e&&"mapValue"in e}function A2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=A2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=A2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _Mt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t){this.value=t}static empty(){return new Pu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!$O(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=A2(n)}setAll(t){let n=Ro.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=A2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());$O(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Fh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];$O(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Nb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Pu(A2(this.value))}}function yOe(e){const t=[];return Nb(e.fields,(n,r)=>{const i=new Ro([n]);if($O(r)){const s=yOe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new kl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new da(t,0,dn.min(),dn.min(),dn.min(),Pu.empty(),0)}static newFoundDocument(t,n,r,i){return new da(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new da(t,2,n,dn.min(),dn.min(),Pu.empty(),0)}static newUnknownDocument(t,n){return new da(t,3,n,dn.min(),dn.min(),Pu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof da&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new da(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Yhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=HE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Khe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,n="asc"){this.field=t,this.dir=n}}function wMt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vOe=class{};class Es extends vOe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new xMt(t,n,r):n==="array-contains"?new CMt(t,r):n==="in"?new AMt(t,r):n==="not-in"?new IMt(t,r):n==="array-contains-any"?new kMt(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new SMt(t,r):new TMt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(HE(n,this.value)):n!==null&&X1(this.value)===X1(n)&&this.matchesComparison(HE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nd extends vOe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new nd(t,n)}matches(t){return bOe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bOe(e){return e.op==="and"}function _Oe(e){return EMt(e)&&bOe(e)}function EMt(e){for(const t of e.filters)if(t instanceof nd)return!1;return!0}function jV(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+qE(e.value);if(_Oe(e))return e.filters.map(t=>jV(t)).join(",");{const t=e.filters.map(n=>jV(n)).join(",");return`${e.op}(${t})`}}function wOe(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&Fh(r.value,i.value)}(e,t):e instanceof nd?function(r,i){return i instanceof nd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wOe(o,i.filters[a]),!0):!1}(e,t):void un()}function EOe(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${qE(n.value)}`}(e):e instanceof nd?function(n){return n.op.toString()+" {"+n.getFilters().map(EOe).join(" ,")+"}"}(e):"Filter"}class xMt extends Es{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class SMt extends Es{constructor(t,n){super(t,"in",n),this.keys=xOe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class TMt extends Es{constructor(t,n){super(t,"not-in",n),this.keys=xOe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function xOe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class CMt extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oZ(n)&&rI(n.arrayValue,this.value)}}class AMt extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&rI(this.value.arrayValue,n)}}class IMt extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(rI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!rI(this.value.arrayValue,n)}}class kMt extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RMt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Xhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new RMt(e,t,n,r,i,s,o)}function aZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>jV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),T4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>qE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>qE(r)).join(",")),t.ue=n}return t.ue}function uZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wMt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wOe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Khe(e.startAt,t.startAt)&&Khe(e.endAt,t.endAt)}function BV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function NMt(e,t,n,r,i,s,o,a){return new gS(e,t,n,r,i,s,o,a)}function lZ(e){return new gS(e)}function Qhe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function SOe(e){return e.collectionGroup!==null}function I2(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Do(Ro.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new iI(s,r))}),n.has(Ro.keyField().canonicalString())||t.ce.push(new iI(Ro.keyField(),r))}return t.ce}function Eh(e){const t=hn(e);return t.le||(t.le=PMt(t,I2(e))),t.le}function PMt(e,t){if(e.limitType==="F")return Xhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new iI(i.field,s)});const n=e.endAt?new V$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new V$(e.startAt.position,e.startAt.inclusive):null;return Xhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function UV(e,t){const n=e.filters.concat([t]);return new gS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zV(e,t,n){return new gS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function C4(e,t){return uZ(Eh(e),Eh(t))&&e.limitType===t.limitType}function TOe(e){return`${aZ(Eh(e))}|lt:${e.limitType}`}function U_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EOe(i)).join(", ")}]`),T4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qE(i)).join(",")),`Target(${r})`}(Eh(e))}; limitType=${e.limitType})`}function A4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of I2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Yhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,I2(r),i)||r.endAt&&!function(o,a,u){const l=Yhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,I2(r),i))}(e,t)}function OMt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function COe(e){return(t,n)=>{let r=!1;for(const i of I2(e)){const s=DMt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DMt(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?HE(u,l):un()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return un()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Nb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return mOe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Mt=new ji(Ut.comparator);function Fm(){return $Mt}const AOe=new ji(Ut.comparator);function EC(...e){let t=AOe;for(const n of e)t=t.insert(n.key,n);return t}function IOe(e){let t=AOe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function i1(){return k2()}function kOe(){return k2()}function k2(){return new yS(e=>e.toString(),(e,t)=>e.isEqual(t))}const MMt=new ji(Ut.comparator),LMt=new Do(Ut.comparator);function Un(...e){let t=LMt;for(const n of e)t=t.add(n);return t}const FMt=new Do(_r);function jMt(){return FMt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ROe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z$(t)?"-0":t}}function NOe(e){return{integerValue:""+e}}function BMt(e,t){return yMt(t)?NOe(t):ROe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this._=void 0}}function UMt(e,t,n){return e instanceof sI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iZ(s)&&(s=sZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof oI?OOe(e,t):e instanceof aI?DOe(e,t):function(i,s){const o=POe(i,s),a=Jhe(o)+Jhe(i.Pe);return FV(o)&&FV(i.Pe)?NOe(a):ROe(i.serializer,a)}(e,t)}function zMt(e,t,n){return e instanceof oI?OOe(e,t):e instanceof aI?DOe(e,t):n}function POe(e,t){return e instanceof H$?function(r){return FV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class sI extends I4{}class oI extends I4{constructor(t){super(),this.elements=t}}function OOe(e,t){const n=$Oe(t);for(const r of e.elements)n.some(i=>Fh(i,r))||n.push(r);return{arrayValue:{values:n}}}class aI extends I4{constructor(t){super(),this.elements=t}}function DOe(e,t){let n=$Oe(t);for(const r of e.elements)n=n.filter(i=>!Fh(i,r));return{arrayValue:{values:n}}}class H$ extends I4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Jhe(e){return bs(e.integerValue||e.doubleValue)}function $Oe(e){return oZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VMt{constructor(t,n){this.field=t,this.transform=n}}function HMt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof oI&&i instanceof oI||r instanceof aI&&i instanceof aI?VE(r.elements,i.elements,Fh):r instanceof H$&&i instanceof H$?Fh(r.Pe,i.Pe):r instanceof sI&&i instanceof sI}(e.transform,t.transform)}class qMt{constructor(t,n){this.version=t,this.transformResults=n}}class Wu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wu}static exists(t){return new Wu(void 0,t)}static updateTime(t){return new Wu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function MO(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class k4{}function MOe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new R4(e.key,Wu.none()):new jk(e.key,e.data,Wu.none());{const n=e.data,r=Pu.empty();let i=new Do(Ro.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ly(e.key,r,new kl(i.toArray()),Wu.none())}}function WMt(e,t,n){e instanceof jk?function(i,s,o){const a=i.value.clone(),u=epe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Ly?function(i,s,o){if(!MO(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=epe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(LOe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function R2(e,t,n,r){return e instanceof jk?function(s,o,a,u){if(!MO(s.precondition,o))return a;const l=s.value.clone(),c=tpe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ly?function(s,o,a,u){if(!MO(s.precondition,o))return a;const l=tpe(s.fieldTransforms,u,o),c=o.data;return c.setAll(LOe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return MO(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function GMt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=POe(r.transform,i||null);s!=null&&(n===null&&(n=Pu.empty()),n.set(r.field,s))}return n||null}function Zhe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&VE(r,i,(s,o)=>HMt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jk extends k4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ly extends k4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LOe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function epe(e,t,n){const r=new Map;oi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,zMt(o,a,n[i]))}return r}function tpe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,UMt(s,o,t))}return r}class R4 extends k4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YMt extends k4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&WMt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=R2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=R2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=kOe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=MOe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&VE(this.mutations,t.mutations,(n,r)=>Zhe(n,r))&&VE(this.baseMutations,t.baseMutations,(n,r)=>Zhe(n,r))}}class cZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){oi(t.mutations.length===r.length);let i=function(){return MMt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XMt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QMt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,Zn;function JMt(e){switch(e){default:return un();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function FOe(e){if(e===void 0)return Lm("GRPC error has no .code"),Ue.UNKNOWN;switch(e){case ys.OK:return Ue.OK;case ys.CANCELLED:return Ue.CANCELLED;case ys.UNKNOWN:return Ue.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Ue.INTERNAL;case ys.UNAVAILABLE:return Ue.UNAVAILABLE;case ys.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case ys.NOT_FOUND:return Ue.NOT_FOUND;case ys.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case ys.ABORTED:return Ue.ABORTED;case ys.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case ys.DATA_LOSS:return Ue.DATA_LOSS;default:return un()}}(Zn=ys||(ys={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZMt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eLt=new m1([4294967295,4294967295],0);function npe(e){const t=ZMt().encode(e),n=new aOe;return n.update(t),new Uint8Array(n.digest())}function rpe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new m1([n,r],0),new m1([i,s],0)]}class fZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xC(`Invalid padding: ${n}`);if(r<0)throw new xC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new xC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new xC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=m1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(m1.fromNumber(r)));return i.compare(eLt)===1&&(i=new m1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=npe(t),[r,i]=rpe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=npe(t),[r,i]=rpe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class xC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Bk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new N4(dn.min(),i,new ji(_r),Fm(),Un())}}class Bk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Bk(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class jOe{constructor(t,n){this.targetId=t,this.me=n}}class BOe{constructor(t,n,r=Sa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ipe{constructor(){this.fe=0,this.ge=ope(),this.pe=Sa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:un()}}),new Bk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=ope()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,oi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tLt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Fm(),this.qe=spe(),this.Qe=new ji(_r)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:un()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(BV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,da.newNoDocument(o,dn.min()))}else oi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=K1(r).toUint8Array()}catch(u){if(u instanceof gOe)return ZA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fZ(o,i,s)}catch(u){return ZA(u instanceof xC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&BV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,da.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new N4(t,n,this.Qe,this.ke,r);return this.ke=Fm(),this.qe=spe(),this.Qe=new ji(_r),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new ipe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Do(_r),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ipe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function spe(){return new ji(Ut.comparator)}function ope(){return new ji(Ut.comparator)}const nLt={asc:"ASCENDING",desc:"DESCENDING"},rLt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iLt={and:"AND",or:"OR"};class sLt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function VV(e,t){return e.useProto3Json||T4(t)?t:{value:t}}function q$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function UOe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function oLt(e,t){return q$(e,t.toTimestamp())}function xh(e){return oi(!!e),dn.fromTimestamp(function(n){const r=iy(n);return new zs(r.seconds,r.nanos)}(e))}function dZ(e,t){return HV(e,t).canonicalString()}function HV(e,t){const n=function(i){return new hi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function zOe(e){const t=hi.fromString(e);return oi(GOe(t)),t}function qV(e,t){return dZ(e.databaseId,t.path)}function O9(e,t){const n=zOe(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(HOe(n))}function VOe(e,t){return dZ(e.databaseId,t)}function aLt(e){const t=zOe(e);return t.length===4?hi.emptyPath():HOe(t)}function WV(e){return new hi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function HOe(e){return oi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function ape(e,t,n){return{name:qV(e,t),fields:n.value.mapValue.fields}}function uLt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:un()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(oi(c===void 0||typeof c=="string"),Sa.fromBase64String(c||"")):(oi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Sa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Ue.UNKNOWN:FOe(l.code);return new _t(c,l.message||"")}(o);n=new BOe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=O9(e,r.document.name),s=xh(r.document.updateTime),o=r.document.createTime?xh(r.document.createTime):dn.min(),a=new Pu({mapValue:{fields:r.document.fields}}),u=da.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new LO(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=O9(e,r.document),s=r.readTime?xh(r.readTime):dn.min(),o=da.newNoDocument(i,s),a=r.removedTargetIds||[];n=new LO([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=O9(e,r.document),s=r.removedTargetIds||[];n=new LO([],s,i,null)}else{if(!("filter"in t))return un();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QMt(i,s),a=r.targetId;n=new jOe(a,o)}}return n}function lLt(e,t){let n;if(t instanceof jk)n={update:ape(e,t.key,t.value)};else if(t instanceof R4)n={delete:qV(e,t.key)};else if(t instanceof Ly)n={update:ape(e,t.key,t.data),updateMask:vLt(t.fieldMask)};else{if(!(t instanceof YMt))return un();n={verify:qV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof sI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof H$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw un()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oLt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:un()}(e,t.precondition)),n}function cLt(e,t){return e&&e.length>0?(oi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?xh(i.updateTime):xh(s);return o.isEqual(dn.min())&&(o=xh(s)),new qMt(o,i.transformResults||[])}(n,t))):[]}function fLt(e,t){return{documents:[VOe(e,t.path)]}}function dLt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VOe(e,i);const s=function(l){if(l.length!==0)return WOe(nd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:z_(d.field),direction:mLt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=VV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function hLt(e){let t=aLt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=qOe(f);return d instanceof nd&&_Oe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new iI(V_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,T4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new V$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new V$(h,d)}(n.endAt)),NMt(t,i,o,s,a,"F",u,l)}function pLt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qOe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=V_(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=V_(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=V_(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=V_(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(V_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return nd.create(n.compositeFilter.filters.map(r=>qOe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return un()}}(n.compositeFilter.op))}(e):un()}function mLt(e){return nLt[e]}function gLt(e){return rLt[e]}function yLt(e){return iLt[e]}function z_(e){return{fieldPath:e.canonicalString()}}function V_(e){return Ro.fromServerFormat(e.fieldPath)}function WOe(e){return e instanceof Es?function(n){if(n.op==="=="){if(Ghe(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NAN"}};if(Whe(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ghe(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NOT_NAN"}};if(Whe(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:z_(n.field),op:gLt(n.op),value:n.value}}}(e):e instanceof nd?function(n){const r=n.getFilters().map(i=>WOe(i));return r.length===1?r[0]:{compositeFilter:{op:yLt(n.op),filters:r}}}(e):un()}function vLt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function GOe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Sa.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new t0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new t0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new t0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new t0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bLt{constructor(t){this.ct=t}}function _Lt(e){const t=hLt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?zV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wLt{constructor(){this._n=new ELt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(ry.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(ry.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class ELt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Do(hi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Do(hi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new WE(0)}static Ln(){return new WE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xLt{constructor(){this.changes=new yS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,da.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SLt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TLt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&R2(r.mutation,i,kl.empty(),zs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=i1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=EC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=i1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Fm();const o=k2(),a=function(){return k2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Ly)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),R2(c.mutation,l,c.mutation.getFieldMask(),zs.now())):o.set(l.key,kl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new SLt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=k2();let i=new ji((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||kl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=kOe();c.forEach(d=>{if(!s.has(d)){const h=MOe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):SOe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(i1());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:IOe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=EC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=EC();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new gS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,da.newInvalidDocument(c)))});let a=EC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&R2(c.mutation,l,kl.empty(),zs.now()),A4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CLt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xh(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:_Lt(i.bundledQuery),readTime:xh(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ALt{constructor(){this.overlays=new ji(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=i1();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=i1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new ji((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=i1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=i1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XMt(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this.Pr=new Do(Js.Ir),this.Tr=new Do(Js.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Js(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Js(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new hi([])),r=new Js(n,t),i=new Js(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new hi([])),r=new Js(n,t),i=new Js(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Js(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Js{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||_r(t.pr,n.pr)}static Er(t,n){return _r(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ILt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Do(Js.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KMt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Js(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Js(n,0),i=new Js(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Do(_r);return n.forEach(i=>{const s=new Js(i,0),o=new Js(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Js(new Ut(s),0);let a=new Do(_r);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){oi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Js(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Js(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kLt{constructor(t){this.vr=t,this.docs=function(){return new ji(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():da.newInvalidDocument(n))}getEntries(t,n){let r=Fm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():da.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Fm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||hMt(dMt(c),r)<=0||(i.has(c.key)||A4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){un()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new RLt(this)}getSize(t){return Qe.resolve(this.size)}}class RLt extends xLt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NLt{constructor(t){this.persistence=t,this.Mr=new yS(n=>aZ(n),uZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hZ,this.targetCount=0,this.Lr=WE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new WE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PLt{constructor(t,n){this.Br={},this.overlays={},this.kr=new rZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new NLt(this),this.indexManager=new wLt,this.remoteDocumentCache=function(i){return new kLt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bLt(n),this.$r=new CLt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ALt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new ILt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new OLt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class OLt extends mMt{constructor(t){super(),this.currentSequenceNumber=t}}class pZ{constructor(t){this.persistence=t,this.zr=new hZ,this.jr=null}static Hr(t){return new pZ(t)}get Jr(){if(this.jr)return this.jr;throw un()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Lt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return mPt()?8:gMt(Bo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new DLt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(wT()<=Wn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",U_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(wT()<=Wn.DEBUG&&kt("QueryEngine","Query:",U_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(wT()<=Wn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",U_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Eh(n))):Qe.resolve())}ji(t,n){if(Qhe(n))return Qe.resolve(null);let r=Eh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zV(n,null,"F"),r=Eh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,zV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Qhe(n)||i.isEqual(dn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(wT()<=Wn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),U_(n)),this.es(t,o,n,fMt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Do(COe(t));return n.forEach((i,s)=>{A4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return wT()<=Wn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",U_(n)),this.zi.getDocumentsMatchingQuery(t,n,ry.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MLt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new ji(_r),this.rs=new yS(s=>aZ(s),uZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TLt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function LLt(e,t,n,r){return new MLt(e,t,n,r)}async function YOe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function FLt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);oi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function KOe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function jLt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Sa.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Fm(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(BLt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function BLt(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Fm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function ULt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function zLt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new t0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function GV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fk(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function upe(e,t,n){const r=hn(e);let i=dn.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Eh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:Un())).next(a=>(VLt(r,OMt(t),a),{documents:a,hs:s})))}function VLt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class lpe{constructor(){this.activeTargetIds=jMt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HLt{constructor(){this.no=new lpe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new lpe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qLt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cpe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oP=null;function D9(){return oP===null?oP=function(){return 268435456+Math.round(2147483648*Math.random())}():oP++,"0x"+oP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WLt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GLt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="WebChannelConnection";class YLt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=D9(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw ZA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=WLt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=D9();return new Promise((o,a)=>{const u=new uOe;u.setWithCredentials(!0),u.listenOnce(cOe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case DO.NO_ERROR:const c=u.getResponseJson();kt(ra,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case DO.TIMEOUT:kt(ra,`RPC '${t}' ${s} timed out`),a(new _t(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case DO.HTTP_ERROR:const f=u.getStatus();if(kt(ra,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(y)>=0?y:Ue.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(Ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(Ue.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{kt(ra,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(ra,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=D9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=hOe(),a=dOe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new lOe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(ra,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new GLt({lo:g=>{h?kt(ra,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(ra,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(ra,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,wC.EventType.OPEN,()=>{h||(kt(ra,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,wC.EventType.CLOSE,()=>{h||(h=!0,kt(ra,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,wC.EventType.ERROR,g=>{h||(h=!0,ZA(ra,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(Ue.UNAVAILABLE,"The operation could not be completed")))}),m(f,wC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];oi(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){kt(ra,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(A){const R=ys[A];if(R!==void 0)return FOe(R)}(E),x=w.message;S===void 0&&(S=Ue.INTERNAL,x="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new _t(S,x)),f.close()}else kt(ra,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,fOe.STAT_EVENT,g=>{g.stat===MV.PROXY?kt(ra,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===MV.NOPROXY&&kt(ra,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function $9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(e){return new sLt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XOe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QOe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new XOe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Ue.RESOURCE_EXHAUSTED?(Lm(n.toString()),Lm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(Ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KLt extends QOe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=uLt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?xh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=WV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=BV(u)?{documents:fLt(s,u)}:{query:dLt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UOe(s,o.resumeToken);const l=VV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=q$(s,o.snapshotVersion.toTimestamp());const l=VV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=pLt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=WV(this.serializer),n.removeTarget=t,this.i_(n)}}class XLt extends QOe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(oi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=cLt(t.writeResults,t.commitTime),r=xh(t.commitTime);return this.listener.A_(r,n)}return oi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=WV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>lLt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QLt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,HV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(Ue.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,HV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(Ue.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class JLt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Lm(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZLt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Pb(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await zk(l),l.N_.set("Unknown"),l.M_.delete(4),await Uk(l)}(this))})}),this.N_=new JLt(r,i)}}async function Uk(e){if(Pb(e))for(const t of e.x_)await t(!0)}async function zk(e){for(const t of e.x_)await t(!1)}function JOe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),bZ(n)?vZ(n):vS(n).Xo()&&yZ(n,t))}function gZ(e,t){const n=hn(e),r=vS(n);n.F_.delete(t),r.Xo()&&ZOe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Pb(n)&&n.N_.set("Unknown"))}function yZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vS(e).P_(t)}function ZOe(e,t){e.L_.xe(t),vS(e).I_(t)}function vZ(e){e.L_=new tLt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),vS(e).start(),e.N_.w_()}function bZ(e){return Pb(e)&&!vS(e).Zo()&&e.F_.size>0}function Pb(e){return hn(e).M_.size===0}function eDe(e){e.L_=void 0}async function e6t(e){e.N_.set("Online")}async function t6t(e){e.F_.forEach((t,n)=>{yZ(e,t)})}async function n6t(e,t){eDe(e),bZ(e)?(e.N_.D_(t),vZ(e)):e.N_.set("Unknown")}async function r6t(e,t,n){if(e.N_.set("Online"),t instanceof BOe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await W$(e,r)}else if(t instanceof LO?e.L_.Ke(t):t instanceof jOe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await KOe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Sa.EMPTY_BYTE_STRING,c.snapshotVersion)),ZOe(s,u);const f=new t0(c.target,u,l,c.sequenceNumber);yZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await W$(e,r)}}async function W$(e,t,n){if(!Fk(t))throw t;e.M_.add(1),await zk(e),e.N_.set("Offline"),n||(n=()=>KOe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Uk(e)})}function tDe(e,t){return t().catch(n=>W$(e,n,t))}async function O4(e){const t=hn(e),n=sy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;i6t(t);)try{const i=await ULt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,s6t(t,i)}catch(i){await W$(t,i)}nDe(t)&&rDe(t)}function i6t(e){return Pb(e)&&e.v_.length<10}function s6t(e,t){e.v_.push(t);const n=sy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function nDe(e){return Pb(e)&&!sy(e).Zo()&&e.v_.length>0}function rDe(e){sy(e).start()}async function o6t(e){sy(e).V_()}async function a6t(e){const t=sy(e);for(const n of e.v_)t.d_(n.mutations)}async function u6t(e,t,n){const r=e.v_.shift(),i=cZ.from(r,t,n);await tDe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await O4(e)}async function l6t(e,t){t&&sy(e).E_&&await async function(r,i){if(function(o){return JMt(o)&&o!==Ue.ABORTED}(i.code)){const s=r.v_.shift();sy(r).t_(),await tDe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await O4(r)}}(e,t),nDe(e)&&rDe(e)}async function fpe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=Pb(n);n.M_.add(3),await zk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Uk(n)}async function c6t(e,t){const n=hn(e);t?(n.M_.delete(2),await Uk(n)):t||(n.M_.add(2),await zk(n),n.N_.set("Unknown"))}function vS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new KLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:e6t.bind(null,e),To:t6t.bind(null,e),Ao:n6t.bind(null,e),h_:r6t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),bZ(e)?vZ(e):e.N_.set("Unknown")):(await e.B_.stop(),eDe(e))})),e.B_}function sy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new XLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:o6t.bind(null,e),Ao:l6t.bind(null,e),R_:a6t.bind(null,e),A_:u6t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await O4(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new um,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new _Z(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(Ue.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wZ(e,t){if(Lm("AsyncQueue",`${t}: ${e}`),Fk(e))return new _t(Ue.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=EC(),this.sortedSet=new ji(this.comparator)}static emptySet(t){return new Gw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Gw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Gw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpe{constructor(){this.q_=new ji(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):un():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class GE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new GE(t,n,Gw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&C4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class d6t{constructor(){this.queries=new yS(t=>TOe(t),C4),this.onlineState="Unknown",this.z_=new Set}}async function iDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new f6t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wZ(o,`Initialization of query '${U_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&EZ(n)}async function sDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h6t(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&EZ(n)}function p6t(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function EZ(e){e.z_.forEach(t=>{t.next()})}var YV,hpe;(hpe=YV||(YV={})).J_="default",hpe.Cache="cache";class oDe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new GE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=GE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==YV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aDe{constructor(t){this.key=t}}class uDe{constructor(t){this.key=t}}class m6t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=COe(t),this.Ta=new Gw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new dpe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=A4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new GE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new dpe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new uDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new aDe(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return GE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class g6t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class y6t{constructor(t){this.key=t,this.wa=!1}}class v6t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new yS(a=>TOe(a),C4),this.Da=new Map,this.Ca=new Set,this.va=new ji(Ut.comparator),this.Fa=new Map,this.Ma=new hZ,this.xa={},this.Oa=new Map,this.Na=WE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function b6t(e,t,n=!0){const r=pDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await lDe(r,t,n,!0),i}async function _6t(e,t){const n=pDe(e);await lDe(n,t,!0,!1)}async function lDe(e,t,n,r){const i=await zLt(e.localStore,Eh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await w6t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&JOe(e.remoteStore,i),a}async function w6t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await upe(m.localStore,g.query,!1).then(({documents:x})=>g.view.da(x,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return mpe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await upe(e.localStore,t,!0),o=new m6t(t,s.hs),a=o.da(s.documents),u=Bk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);mpe(e,n,l.fa);const c=new g6t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function E6t(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!C4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await GV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gZ(r.remoteStore,i.targetId),KV(r,i.targetId)}).catch(Lk)):(KV(r,i.targetId),await GV(r.localStore,i.targetId,!0))}async function x6t(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gZ(n.remoteStore,r.targetId))}async function S6t(e,t,n){const r=N6t(e);try{const i=await function(o,a){const u=hn(o),l=zs.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Fm(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=GMt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Ly(v.key,b,yOe(b.value.mapValue),Wu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:IOe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new ji(_r)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Vk(r,i.changes),await O4(r.remoteStore)}catch(i){const s=wZ(i,"Failed to persist write");n.reject(s)}}async function cDe(e,t){const n=hn(e);try{const r=await jLt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(oi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?oi(o.wa):i.removedDocuments.size>0&&(oi(o.wa),o.wa=!1))}),await Vk(n,r,t)}catch(r){await Lk(r)}}function ppe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&EZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function T6t(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new ji(Ut.comparator);o=o.insert(s,da.newNoDocument(s,dn.min()));const a=Un().add(s),u=new N4(dn.min(),new Map,new ji(_r),o,a);await cDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),xZ(r)}else await GV(r.localStore,t,!1).then(()=>KV(r,t,n)).catch(Lk)}async function C6t(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await FLt(n.localStore,t);dDe(n,r,null),fDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vk(n,i)}catch(i){await Lk(i)}}async function A6t(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(oi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);dDe(r,t,n),fDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Vk(r,i)}catch(i){await Lk(i)}}function fDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function dDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function KV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||hDe(e,r)})}function hDe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(gZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),xZ(e))}function mpe(e,t,n){for(const r of n)r instanceof aDe?(e.Ma.addReference(r.key,t),I6t(e,r)):r instanceof uDe?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||hDe(e,r.key)):un()}function I6t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),xZ(e))}function xZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(hi.fromString(t)),r=e.Na.next();e.Fa.set(r,new y6t(n)),e.va=e.va.insert(n,r),JOe(e.remoteStore,new t0(Eh(lZ(n.path)),r,"TargetPurposeLimboResolution",rZ.oe))}}async function Vk(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=mZ.Ki(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Fk(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function k6t(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await YOe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(Ue.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Vk(n,r.us)}}function R6t(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function pDe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R6t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=T6t.bind(null,t),t.Sa.h_=h6t.bind(null,t.eventManager),t.Sa.ka=p6t.bind(null,t.eventManager),t}function N6t(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=C6t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=A6t.bind(null,t),t}class gpe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=P4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return LLt(this.persistence,new $Lt,t.initialUser,this.serializer)}createPersistence(t){return new PLt(pZ.Hr,this.serializer)}createSharedClientState(t){return new HLt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class P6t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ppe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k6t.bind(null,this.syncEngine),await c6t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new d6t}()}createDatastore(t){const n=P4(t.databaseInfo.databaseId),r=function(s){return new YLt(s)}(t.databaseInfo);return function(s,o,a,u){return new QLt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new ZLt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ppe(this.syncEngine,n,0),function(){return cpe.D()?new cpe:new qLt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new v6t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await zk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Lm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xu.UNAUTHENTICATED,this.clientId=pOe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new um;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function M9(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YOe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ype(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gDe(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>fpe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>fpe(t.remoteStore,i)),e._onlineComponents=t}function D6t(e){return e.name==="FirebaseError"?e.code===Ue.FAILED_PRECONDITION||e.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function gDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await M9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!D6t(n))throw n;ZA("Error using user provided cache. Falling back to memory cache: "+n),await M9(e,new gpe)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await M9(e,new gpe);return e._offlineComponents}async function SZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await ype(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await ype(e,new P6t))),e._onlineComponents}function $6t(e){return gDe(e).then(t=>t.persistence)}function M6t(e){return SZ(e).then(t=>t.remoteStore)}function L6t(e){return SZ(e).then(t=>t.syncEngine)}async function yDe(e){const t=await SZ(e),n=t.eventManager;return n.onListen=b6t.bind(null,t.syncEngine),n.onUnlisten=E6t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_6t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=x6t.bind(null,t.syncEngine),n}function F6t(e){return e.asyncQueue.enqueue(async()=>{const t=await $6t(e),n=await M6t(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),Uk(s)}(n)})}function j6t(e,t,n={}){const r=new um;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new mDe({next:d=>{o.enqueueAndForget(()=>sDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new oDe(lZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return iDe(s,f)}(await yDe(e),e.asyncQueue,t,n,r)),r.promise}function B6t(e,t,n={}){const r=new um;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new mDe({next:d=>{o.enqueueAndForget(()=>sDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new oDe(a,c,{includeMetadataChanges:!0,ra:!0});return iDe(s,f)}(await yDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vpe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bDe(e,t,n){if(!n)throw new _t(Ue.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function U6t(e,t,n,r){if(t===!0&&r===!0)throw new _t(Ue.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bpe(e){if(!Ut.isDocumentKey(e))throw new _t(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _pe(e){if(Ut.isDocumentKey(e))throw new _t(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function D4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":un()}function rd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=D4(e);throw new _t(Ue.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wpe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}U6t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class TZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wpe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wpe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rMt;switch(r.type){case"firstParty":return new oMt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vpe.get(n);r&&(kt("ComponentProvider","Removing Datastore"),vpe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ob(this.firestore,t,this._query)}}class Xa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new A0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xa(this.firestore,t,this._key)}}class A0 extends Ob{constructor(t,n,r){super(t,n,lZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xa(this.firestore,null,new Ut(t))}withConverter(t){return new A0(this.firestore,t,this._path)}}function df(e,t,...n){if(e=ai(e),bDe("collection","path",t),e instanceof TZ){const r=hi.fromString(t,...n);return _pe(r),new A0(e,null,r)}{if(!(e instanceof Xa||e instanceof A0))throw new _t(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return _pe(r),new A0(e.firestore,null,r)}}function As(e,t,...n){if(e=ai(e),arguments.length===1&&(t=pOe.newId()),bDe("doc","path",t),e instanceof TZ){const r=hi.fromString(t,...n);return bpe(r),new Xa(e,null,new Ut(r))}{if(!(e instanceof Xa||e instanceof A0))throw new _t(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hi.fromString(t,...n));return bpe(r),new Xa(e.firestore,e instanceof A0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new XOe(this,"async_queue_retry"),this.hu=()=>{const n=$9();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=$9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=$9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new um;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Fk(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=_Z.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&un()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Fy extends TZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new z6t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_De(this),this._firestoreClient.terminate()}}function V6t(e,t,n){n||(n="(default)");const r=hS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(XA(s,t))return i;throw new _t(Ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(Ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Hk(e){return e._firestoreClient||_De(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _De(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new bMt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,vDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new O6t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function H6t(e){return F6t(Hk(e=rd(e,Fy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new YE(Sa.fromBase64String(t))}catch(n){throw new _t(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new YE(Sa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ro(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _r(this._lat,t._lat)||_r(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6t=/^__.*__$/;class W6t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ly(t,this.data,this.fieldMask,n,this.fieldTransforms):new jk(t,this.data,n,this.fieldTransforms)}}class wDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ly(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function EDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class AZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new AZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return G$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(EDe(this.fu)&&q6t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class G6t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||P4(t)}Fu(t,n,r,i=!1){return new AZ({fu:t,methodName:n,vu:r,path:Ro.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M4(e){const t=e._freezeSettings(),n=P4(e._databaseId);return new G6t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);kZ("Data must be an object, but it was:",o,r);const a=CDe(r,o);let u,l;if(s.merge)u=new kl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=XV(t,f,n);if(!o.contains(d))throw new _t(Ue.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);IDe(c,d)||c.push(d)}u=new kl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new W6t(new Pu(a),u,l)}class L4 extends $4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof L4}}class IZ extends $4{_toFieldTransform(t){return new VMt(t.path,new sI)}isEqual(t){return t instanceof IZ}}function SDe(e,t,n,r){const i=e.Fu(1,t,n);kZ("Data must be an object, but it was:",i,r);const s=[],o=Pu.empty();Nb(r,(u,l)=>{const c=RZ(t,u,n);l=ai(l);const f=i.Su(c);if(l instanceof L4)s.push(c);else{const d=Wk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new kl(s);return new wDe(o,a,i.fieldTransforms)}function TDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[XV(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(Ue.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(XV(t,s[d])),u.push(s[d+1]);const l=[],c=Pu.empty();for(let d=a.length-1;d>=0;--d)if(!IDe(l,a[d])){const h=a[d];let p=u[d];p=ai(p);const m=o.Su(h);if(p instanceof L4)l.push(h);else{const g=Wk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new kl(l);return new wDe(c,f,o.fieldTransforms)}function Y6t(e,t,n,r=!1){return Wk(n,e.Fu(r?4:3,t))}function Wk(e,t){if(ADe(e=ai(e)))return kZ("Unsupported field value:",t,e),CDe(e,t);if(e instanceof $4)return function(r,i){if(!EDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Wk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ai(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BMt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zs.fromDate(r);return{timestampValue:q$(i.serializer,s)}}if(r instanceof zs){const s=new zs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:q$(i.serializer,s)}}if(r instanceof CZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof YE)return{bytesValue:UOe(i.serializer,r._byteString)};if(r instanceof Xa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${D4(r)}`)}(e,t)}function CDe(e,t){const n={};return mOe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nb(e,(r,i)=>{const s=Wk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ADe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zs||e instanceof CZ||e instanceof YE||e instanceof Xa||e instanceof $4)}function kZ(e,t,n){if(!ADe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=D4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function XV(e,t,n){if((t=ai(t))instanceof qk)return t._internalPath;if(typeof t=="string")return RZ(e,t);throw G$("Field path arguments must be of type string or ",e,!1,void 0,n)}const K6t=new RegExp("[~\\*/\\[\\]]");function RZ(e,t,n){if(t.search(K6t)>=0)throw G$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qk(...t.split("."))._internalPath}catch{throw G$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function G$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(Ue.INVALID_ARGUMENT,a+e+u)}function IDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new X6t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(F4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X6t extends kDe{data(){return super.data()}}function F4(e,t){return typeof t=="string"?RZ(e,t):t instanceof qk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NZ{}class RDe extends NZ{}function Epe(e,t,...n){let r=[];t instanceof NZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof PZ).length,a=s.filter(u=>u instanceof j4).length;if(o>1||o>0&&a>0)throw new _t(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class j4 extends RDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new j4(t,n,r)}_apply(t){const n=this._parse(t);return NDe(t._query,n),new Ob(t.firestore,t.converter,UV(t._query,n))}_parse(t){const n=M4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Spe(f,c);const h=[];for(const p of f)h.push(xpe(u,s,p));d={arrayValue:{values:h}}}else d=xpe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Spe(f,c),d=Y6t(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function J6t(e,t,n){const r=t,i=F4("where",e);return j4._create(i,r,n)}class PZ extends NZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new PZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)NDe(o,u),o=UV(o,u)}(t._query,n),new Ob(t.firestore,t.converter,UV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OZ extends RDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new OZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iI(s,o)}(t._query,this._field,this._direction);return new Ob(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Z6t(e,t="asc"){const n=t,r=F4("orderBy",e);return OZ._create(r,n)}function xpe(e,t,n){if(typeof(n=ai(n))=="string"){if(n==="")throw new _t(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SOe(t)&&n.indexOf("/")!==-1)throw new _t(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(hi.fromString(n));if(!Ut.isDocumentKey(r))throw new _t(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qhe(e,new Ut(r))}if(n instanceof Xa)return qhe(e,n._key);throw new _t(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D4(n)}.`)}function Spe(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function NDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class e4t{convertValue(t,n="none"){switch(X1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(K1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw un()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Nb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new CZ(bs(t.latitude),bs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tI(t));default:return null}}convertTimestamp(t){const n=iy(t);return new zs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=hi.fromString(t);oi(GOe(r));const i=new nI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Lm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ODe extends kDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new FO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(F4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class FO extends ODe{data(t={}){return super.data(t)}}class t4t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new SC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new FO(this._firestore,this._userDataWriter,r.key,r,new SC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new FO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new SC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new FO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new SC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:n4t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function n4t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(e){e=rd(e,Xa);const t=rd(e.firestore,Fy);return j6t(Hk(t),e._key).then(n=>s4t(t,e,n))}class DDe extends e4t{constructor(t){super(),this.firestore=t}convertBytes(t){return new YE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Xa(this.firestore,null,n)}}function ET(e){e=rd(e,Ob);const t=rd(e.firestore,Fy),n=Hk(t),r=new DDe(t);return Q6t(e._query),B6t(n,e._query).then(i=>new t4t(t,r,e,i))}function hl(e,t,n){e=rd(e,Xa);const r=rd(e.firestore,Fy),i=PDe(e.converter,t,n);return B4(r,[xDe(M4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wu.none())])}function r4t(e,t,n,...r){e=rd(e,Xa);const i=rd(e.firestore,Fy),s=M4(i);let o;return o=typeof(t=ai(t))=="string"||t instanceof qk?TDe(s,"updateDoc",e._key,t,n,r):SDe(s,"updateDoc",e._key,t),B4(i,[o.toMutation(e._key,Wu.exists(!0))])}function i4t(e){return B4(rd(e.firestore,Fy),[new R4(e._key,Wu.none())])}function B4(e,t){return function(r,i){const s=new um;return r.asyncQueue.enqueueAndForget(async()=>S6t(await L6t(r),i,s)),s.promise}(Hk(e),t)}function s4t(e,t,n){const r=n.docs.get(t._key),i=new DDe(e);return new ODe(e,i,t._key,r,new SC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=M4(t)}set(t,n,r){this._verifyNotCommitted();const i=F9(t,this._firestore),s=PDe(i.converter,n,r),o=xDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=F9(t,this._firestore);let o;return o=typeof(n=ai(n))=="string"||n instanceof qk?TDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):SDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=F9(t,this._firestore);return this._mutations=this._mutations.concat(new R4(n._key,Wu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function F9(e,t){if((e=ai(e)).firestore!==t)throw new _t(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function a4t(){return new IZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpe(e){return Hk(e=rd(e,Fy)),new o4t(e,t=>B4(e,t))}(function(t,n=!0){(function(i){mS=i})(Rb),$m(new Mh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Fy(new iMt(r.getProvider("auth-internal")),new uMt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Gf(Uhe,"4.6.4",t),Gf(Uhe,"4.6.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new Map,$De={activated:!1,tokenObservers:[]},u4t={initialized:!1,enabled:!1};function Vs(e){return QV.get(e)||Object.assign({},$De)}function l4t(e,t){return QV.set(e,t),QV.get(e)}function U4(){return u4t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MDe="https://content-firebaseappcheck.googleapis.com/v1",c4t="exchangeRecaptchaV3Token",f4t="exchangeDebugToken",Cpe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},d4t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new KA,this.pending.promise.catch(n=>{}),await p4t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new KA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function p4t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ju=new dS("appCheck","AppCheck",m4t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ape(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function DZ(e){if(!Vs(e).activated)throw ju.create("use-before-activation",{appName:e.name})}function LDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=aP(n)+"d:"),r&&(o+=aP(r)+"h:"),o+=aP(i)+"m:"+aP(s)+"s",o}function aP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Z({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ju.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ju.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ju.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ju.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function g4t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${MDe}/projects/${n}/apps/${r}:${c4t}?key=${i}`,body:{recaptcha_v3_token:t}}}function FDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${MDe}/projects/${n}/apps/${r}:${f4t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4t="firebase-app-check-database",v4t=1,uI="firebase-app-check-store",jDe="debug-token";let uP=null;function BDe(){return uP||(uP=new Promise((e,t)=>{try{const n=indexedDB.open(y4t,v4t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ju.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(uI,{keyPath:"compositeKey"})}}}catch(n){t(ju.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),uP)}function b4t(e){return zDe(VDe(e))}function _4t(e,t){return UDe(VDe(e),t)}function w4t(e){return UDe(jDe,e)}function E4t(){return zDe(jDe)}async function UDe(e,t){const r=(await BDe()).transaction(uI,"readwrite"),s=r.objectStore(uI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ju.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function zDe(e){const n=(await BDe()).transaction(uI,"readonly"),i=n.objectStore(uI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ju.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function VDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new v4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4t(e){if(LJ()){let t;try{t=await b4t(e)}catch(n){lI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function j9(e,t){return LJ()?_4t(e,t).catch(n=>{lI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function S4t(){let e;try{e=await E4t()}catch{}if(e)return e;{const t=SPt();return w4t(t).catch(n=>lI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZ(){return U4().enabled}async function LZ(){const e=U4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function T4t(){const e=oPe(),t=U4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new KA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(S4t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4t={error:"UNKNOWN_ERROR"};function A4t(e){return MJ.encodeString(JSON.stringify(e),!1)}async function JV(e,t=!1){const n=e.app;DZ(n);const r=Vs(n);let i=r.token,s;if(i&&!dw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(dw(u)?i=u:await j9(n,void 0))}if(!t&&i&&dw(i))return{token:i.token};let o=!1;if(MZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$Z(FDe(n,await LZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await j9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Vs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?lI.warn(u.message):lI.error(u),s=u}let a;return i?s?dw(i)?a={token:i.token,internalError:s}:a=kpe(s):(a={token:i.token},r.token=i,await j9(n,i)):a=kpe(s),o&&WDe(n,a),a}async function I4t(e){const t=e.app;DZ(t);const{provider:n}=Vs(t);if(MZ()){const r=await LZ(),{token:i}=await $Z(FDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function HDe(e,t,n,r){const{app:i}=e,s=Vs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&dw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ipe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ipe(e))}function qDe(e,t){const n=Vs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ipe(e){const{app:t}=e,n=Vs(t);let r=n.tokenRefresher;r||(r=k4t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function k4t(e){const{app:t}=e;return new h4t(async()=>{const n=Vs(t);let r;if(n.token?r=await JV(e,!0):r=await JV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Vs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Cpe.RETRIAL_MIN_WAIT,Cpe.RETRIAL_MAX_WAIT)}function WDe(e,t){const n=Vs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function dw(e){return e.expireTimeMillis-Date.now()>0}function kpe(e){return{token:A4t(C4t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Vs(this.app);for(const n of t)qDe(this.app,n.next);return Promise.resolve()}}function N4t(e,t){return new R4t(e,t)}function P4t(e){return{getToken:t=>JV(e,t),getLimitedUseToken:()=>I4t(e),addTokenListener:t=>HDe(e,"INTERNAL",t),removeTokenListener:t=>qDe(e.app,t)}}const O4t="@firebase/app-check",D4t="0.8.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4t="https://www.google.com/recaptcha/api.js";function M4t(e,t){const n=new KA,r=Vs(e);r.reCAPTCHAState={initialized:n};const i=L4t(e),s=Ape(!1);return s?Rpe(e,t,s,i,n):B4t(()=>{const o=Ape(!1);if(!o)throw new Error("no recaptcha");Rpe(e,t,o,i,n)}),n.promise}function Rpe(e,t,n,r,i){n.ready(()=>{j4t(e,t,n,r),i.resolve(n)})}function L4t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function F4t(e){DZ(e);const n=await Vs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Vs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function j4t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Vs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Vs(e).reCAPTCHAState.succeeded=!1}}),s=Vs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function B4t(e){const t=document.createElement("script");t.src=$4t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;z4t(this._throttleData);const i=await F4t(this._app).catch(o=>{throw ju.create("recaptcha-error")});if(!(!((t=Vs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ju.create("recaptcha-error");let s;try{s=await $Z(g4t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=U4t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ju.create("throttled",{time:LDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=hS(t,"heartbeat"),M4t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof FZ?this._siteKey===t._siteKey:!1}}function U4t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+d4t,httpStatus:e};{const n=t?t.backoffCount:0,r=kPt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function z4t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ju.create("throttled",{time:LDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4t(e=jJ(),t){e=ai(e);const n=hS(e,"app-check");if(U4().initialized||T4t(),MZ()&&LZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ju.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return H4t(e,t.provider,t.isTokenAutoRefreshEnabled),Vs(e).isTokenAutoRefreshEnabled&&HDe(r,"INTERNAL",()=>{}),r}function H4t(e,t,n){const r=l4t(e,Object.assign({},$De));r.activated=!0,r.provider=t,r.cachedTokenPromise=x4t(e).then(i=>(i&&dw(i)&&(r.token=i,WDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const q4t="app-check",Npe="app-check-internal";function W4t(){$m(new Mh(q4t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return N4t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Npe).initialize()})),$m(new Mh(Npe,e=>{const t=e.getProvider("app-check").getImmediate();return P4t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gf(O4t,D4t)}W4t();function lP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var GDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof lP=="function"&&lP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof lP=="function"&&lP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:S;h(x,C,this.outcome)}else this.queue.push(new d(x,E,S));return x};function d(E,S,x){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,x){s(function(){var C;try{C=S(x)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,S){var x=g(p,S);if(x.status==="error")return a.reject(E,x.value);var C=x.value;if(C)m(E,C);else{E.state=l,E.outcome=S;for(var A=-1,R=E.queue.length;++A<R;)E.queue[A].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var x=-1,C=E.queue.length;++x<C;)E.queue[x].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var x=!1;function C($){x||(x=!0,a.reject(E,$))}function A($){x||(x=!0,a.resolve(E,$))}function R(){S(A,C)}var P=g(R);P.status==="error"&&C(P.value)}function g(E,S){var x={};try{x.value=E(S),x.status="success"}catch(C){x.status="error",x.value=C}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,C=!1;if(!x)return this.resolve([]);for(var A=new Array(x),R=0,P=-1,$=new this(o);++P<x;)k(E[P],P);return $;function k(D,M){S.resolve(D).then(L,function(B){C||(C=!0,a.reject($,B))});function L(B){A[M]=B,++R===x&&!C&&(C=!0,a.resolve($,A))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,C=!1;if(!x)return this.resolve([]);for(var A=-1,R=new this(o);++A<x;)P(E[A]);return R;function P($){S.resolve($).then(function(k){C||(C=!0,a.resolve(R,k))},function(k){C||(C=!0,a.reject(R,k))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(de){if(de.name!=="TypeError")throw de;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,me=new Z,ve=0;ve<Y.length;ve+=1)me.append(Y[ve]);return me.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),me=new Uint8Array(Z),ve=0;ve<se;ve++)me[ve]=Y.charCodeAt(ve);return Z}function x(Y){return new f(function(se){var Z=Y.transaction(g,E),me=c([""]);Z.objectStore(g).put(me,"key"),Z.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),se(!1)},Z.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),de=navigator.userAgent.match(/Edge\//);se(de||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):x(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(me,ve){Z.resolve=me,Z.reject=ve}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function R(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function P(Y,se){var Z=v[Y.name],me=Z.deferredOperations.pop();if(me)return me.reject(se),me.promise}function $(Y,se){return new f(function(Z,me){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ve=[Y.name];se&&ve.push(Y.version);var de=u.open.apply(u,ve);se&&(de.onupgradeneeded=function(De){var qe=de.result;try{qe.createObjectStore(Y.storeName),De.oldVersion<=1&&qe.createObjectStore(g)}catch(Ye){if(Ye.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Ye}}),de.onerror=function(De){De.preventDefault(),me(de.error)},de.onsuccess=function(){var De=de.result;De.onversionchange=function(qe){qe.target.close()},Z(De),R(Y)}})}function k(Y){return $(Y,!1)}function D(Y){return $(Y,!0)}function M(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),me=Y.version<Y.db.version,ve=Y.version>Y.db.version;if(me&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ve||Z){if(Z){var de=Y.db.version+1;de>Y.version&&(Y.version=de)}return!0}return!1}function L(Y){return new f(function(se,Z){var me=new FileReader;me.onerror=Z,me.onloadend=function(ve){var de=btoa(ve.target.result||"");se({__local_forage_encoded_blob:!0,data:de,type:Y.type})},me.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function V(Y){var se=this,Z=se._initReady().then(function(){var me=v[se._dbInfo.name];if(me&&me.dbReady)return me.dbReady});return h(Z,Y,Y),Z}function O(Y){A(Y);for(var se=v[Y.name],Z=se.forages,me=0;me<Z.length;me++){var ve=Z[me];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return Y.db=null,k(Y).then(function(de){return Y.db=de,M(Y)?D(Y):de}).then(function(de){Y.db=se.db=de;for(var De=0;De<Z.length;De++)Z[De]._dbInfo.db=de}).catch(function(de){throw P(Y,de),de})}function z(Y,se,Z,me){me===void 0&&(me=1);try{var ve=Y.db.transaction(Y.storeName,se);Z(null,ve)}catch(de){if(me>0&&(!Y.db||de.name==="InvalidStateError"||de.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||de.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),D(Y)}).then(function(){return O(Y).then(function(){z(Y,se,Z,me-1)})}).catch(Z);Z(de)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var me in Y)Z[me]=Y[me];var ve=v[Z.name];ve||(ve=W(),v[Z.name]=ve),ve.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=V);var de=[];function De(){return f.resolve()}for(var qe=0;qe<ve.forages.length;qe++){var Ye=ve.forages[qe];Ye!==se&&de.push(Ye._initReady().catch(De))}var Ke=ve.forages.slice(0);return f.all(de).then(function(){return Z.db=ve.db,k(Z)}).then(function(ut){return Z.db=ut,M(Z,se._defaultConfig.version)?D(Z):ut}).then(function(ut){Z.db=ve.db=ut,se._dbInfo=Z;for(var Et=0;Et<Ke.length;Et++){var mn=Ke[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var me=new f(function(ve,de){Z.ready().then(function(){z(Z._dbInfo,w,function(De,qe){if(De)return de(De);try{var Ye=qe.objectStore(Z._dbInfo.storeName),Ke=Ye.get(Y);Ke.onsuccess=function(){var ut=Ke.result;ut===void 0&&(ut=null),U(ut)&&(ut=B(ut)),ve(ut)},Ke.onerror=function(){de(Ke.error)}}catch(ut){de(ut)}})}).catch(de)});return d(me,se),me}function G(Y,se){var Z=this,me=new f(function(ve,de){Z.ready().then(function(){z(Z._dbInfo,w,function(De,qe){if(De)return de(De);try{var Ye=qe.objectStore(Z._dbInfo.storeName),Ke=Ye.openCursor(),ut=1;Ke.onsuccess=function(){var Et=Ke.result;if(Et){var mn=Et.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,Et.key,ut++);Pt!==void 0?ve(Pt):Et.continue()}else ve()},Ke.onerror=function(){de(Ke.error)}}catch(Et){de(Et)}})}).catch(de)});return d(me,se),me}function te(Y,se,Z){var me=this;Y=p(Y);var ve=new f(function(de,De){var qe;me.ready().then(function(){return qe=me._dbInfo,b.call(se)==="[object Blob]"?C(qe.db).then(function(Ye){return Ye?se:L(se)}):se}).then(function(Ye){z(me._dbInfo,E,function(Ke,ut){if(Ke)return De(Ke);try{var Et=ut.objectStore(me._dbInfo.storeName);Ye===null&&(Ye=void 0);var mn=Et.put(Ye,Y);ut.oncomplete=function(){Ye===void 0&&(Ye=null),de(Ye)},ut.onabort=ut.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;De(Pt)}}catch(Pt){De(Pt)}})}).catch(De)});return d(ve,Z),ve}function he(Y,se){var Z=this;Y=p(Y);var me=new f(function(ve,de){Z.ready().then(function(){z(Z._dbInfo,E,function(De,qe){if(De)return de(De);try{var Ye=qe.objectStore(Z._dbInfo.storeName),Ke=Ye.delete(Y);qe.oncomplete=function(){ve()},qe.onerror=function(){de(Ke.error)},qe.onabort=function(){var ut=Ke.error?Ke.error:Ke.transaction.error;de(ut)}}catch(ut){de(ut)}})}).catch(de)});return d(me,se),me}function fe(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){z(se._dbInfo,E,function(de,De){if(de)return ve(de);try{var qe=De.objectStore(se._dbInfo.storeName),Ye=qe.clear();De.oncomplete=function(){me()},De.onabort=De.onerror=function(){var Ke=Ye.error?Ye.error:Ye.transaction.error;ve(Ke)}}catch(Ke){ve(Ke)}})}).catch(ve)});return d(Z,Y),Z}function ge(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){z(se._dbInfo,w,function(de,De){if(de)return ve(de);try{var qe=De.objectStore(se._dbInfo.storeName),Ye=qe.count();Ye.onsuccess=function(){me(Ye.result)},Ye.onerror=function(){ve(Ye.error)}}catch(Ke){ve(Ke)}})}).catch(ve)});return d(Z,Y),Z}function le(Y,se){var Z=this,me=new f(function(ve,de){if(Y<0){ve(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(De,qe){if(De)return de(De);try{var Ye=qe.objectStore(Z._dbInfo.storeName),Ke=!1,ut=Ye.openKeyCursor();ut.onsuccess=function(){var Et=ut.result;if(!Et){ve(null);return}Y===0||Ke?ve(Et.key):(Ke=!0,Et.advance(Y))},ut.onerror=function(){de(ut.error)}}catch(Et){de(Et)}})}).catch(de)});return d(me,se),me}function Me(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){z(se._dbInfo,w,function(de,De){if(de)return ve(de);try{var qe=De.objectStore(se._dbInfo.storeName),Ye=qe.openKeyCursor(),Ke=[];Ye.onsuccess=function(){var ut=Ye.result;if(!ut){me(Ke);return}Ke.push(ut.key),ut.continue()},Ye.onerror=function(){ve(Ye.error)}}catch(ut){ve(ut)}})}).catch(ve)});return d(Z,Y),Z}function ce(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var me=this,ve;if(!Y.name)ve=f.reject("Invalid arguments");else{var de=Y.name===Z.name&&me._dbInfo.db,De=de?f.resolve(me._dbInfo.db):k(Y).then(function(qe){var Ye=v[Y.name],Ke=Ye.forages;Ye.db=qe;for(var ut=0;ut<Ke.length;ut++)Ke[ut]._dbInfo.db=qe;return qe});Y.storeName?ve=De.then(function(qe){if(qe.objectStoreNames.contains(Y.storeName)){var Ye=qe.version+1;A(Y);var Ke=v[Y.name],ut=Ke.forages;qe.close();for(var Et=0;Et<ut.length;Et++){var mn=ut[Et];mn._dbInfo.db=null,mn._dbInfo.version=Ye}var Pt=new f(function(jn,Nr){var Pr=u.open(Y.name,Ye);Pr.onerror=function(Wo){var Cd=Pr.result;Cd.close(),Nr(Wo)},Pr.onupgradeneeded=function(){var Wo=Pr.result;Wo.deleteObjectStore(Y.storeName)},Pr.onsuccess=function(){var Wo=Pr.result;Wo.close(),jn(Wo)}});return Pt.then(function(jn){Ke.db=jn;for(var Nr=0;Nr<ut.length;Nr++){var Pr=ut[Nr];Pr._dbInfo.db=jn,R(Pr._dbInfo)}}).catch(function(jn){throw(P(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ve=De.then(function(qe){A(Y);var Ye=v[Y.name],Ke=Ye.forages;qe.close();for(var ut=0;ut<Ke.length;ut++){var Et=Ke[ut];Et._dbInfo.db=null}var mn=new f(function(Pt,jn){var Nr=u.deleteDatabase(Y.name);Nr.onerror=function(){var Pr=Nr.result;Pr&&Pr.close(),jn(Nr.error)},Nr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Nr.onsuccess=function(){var Pr=Nr.result;Pr&&Pr.close(),Pt(Pr)}});return mn.then(function(Pt){Ye.db=Pt;for(var jn=0;jn<Ke.length;jn++){var Nr=Ke[jn];R(Nr._dbInfo)}}).catch(function(Pt){throw(P(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ve,se),ve}var ze={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:H,setItem:te,removeItem:he,clear:fe,length:ge,key:le,keys:Me,dropInstance:ce};function Ve(){return typeof openDatabase=="function"}var at="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tt="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,pe="__lfsc__:",Oe=pe.length,He="arbf",pt="blob",Ge="si08",_e="ui08",ct="uic8",bt="si16",ye="si32",Ne="ur16",We="ui32",Je="fl32",xt="fl64",wn=Oe+He.length,yr=Object.prototype.toString;function vr(Y){var se=Y.length*.75,Z=Y.length,me,ve=0,de,De,qe,Ye;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ke=new ArrayBuffer(se),ut=new Uint8Array(Ke);for(me=0;me<Z;me+=4)de=at.indexOf(Y[me]),De=at.indexOf(Y[me+1]),qe=at.indexOf(Y[me+2]),Ye=at.indexOf(Y[me+3]),ut[ve++]=de<<2|De>>4,ut[ve++]=(De&15)<<4|qe>>2,ut[ve++]=(qe&3)<<6|Ye&63;return Ke}function kr(Y){var se=new Uint8Array(Y),Z="",me;for(me=0;me<se.length;me+=3)Z+=at[se[me]>>2],Z+=at[(se[me]&3)<<4|se[me+1]>>4],Z+=at[(se[me+1]&15)<<2|se[me+2]>>6],Z+=at[se[me+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function Kt(Y,se){var Z="";if(Y&&(Z=yr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&yr.call(Y.buffer)==="[object ArrayBuffer]")){var me,ve=pe;Y instanceof ArrayBuffer?(me=Y,ve+=He):(me=Y.buffer,Z==="[object Int8Array]"?ve+=Ge:Z==="[object Uint8Array]"?ve+=_e:Z==="[object Uint8ClampedArray]"?ve+=ct:Z==="[object Int16Array]"?ve+=bt:Z==="[object Uint16Array]"?ve+=Ne:Z==="[object Int32Array]"?ve+=ye:Z==="[object Uint32Array]"?ve+=We:Z==="[object Float32Array]"?ve+=Je:Z==="[object Float64Array]"?ve+=xt:se(new Error("Failed to get type for BinaryArray"))),se(ve+kr(me))}else if(Z==="[object Blob]"){var de=new FileReader;de.onload=function(){var De=tt+Y.type+"~"+kr(this.result);se(pe+pt+De)},de.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(De){console.error("Couldn't convert value into a JSON string: ",Y),se(null,De)}}function Tn(Y){if(Y.substring(0,Oe)!==pe)return JSON.parse(Y);var se=Y.substring(wn),Z=Y.substring(Oe,wn),me;if(Z===pt&&be.test(se)){var ve=se.match(be);me=ve[1],se=se.substring(ve[0].length)}var de=vr(se);switch(Z){case He:return de;case pt:return c([de],{type:me});case Ge:return new Int8Array(de);case _e:return new Uint8Array(de);case ct:return new Uint8ClampedArray(de);case bt:return new Int16Array(de);case Ne:return new Uint16Array(de);case ye:return new Int32Array(de);case We:return new Uint32Array(de);case Je:return new Float32Array(de);case xt:return new Float64Array(de);default:throw new Error("Unkown type: "+Z)}}var rr={serialize:Kt,deserialize:Tn,stringToBuffer:vr,bufferToString:kr};function ir(Y,se,Z,me){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,me)}function Ho(Y){var se=this,Z={db:null};if(Y)for(var me in Y)Z[me]=typeof Y[me]!="string"?Y[me].toString():Y[me];var ve=new f(function(de,De){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(qe){return De(qe)}Z.db.transaction(function(qe){ir(qe,Z,function(){se._dbInfo=Z,de()},function(Ye,Ke){De(Ke)})},De)});return Z.serializer=rr,ve}function Bi(Y,se,Z,me,ve,de){Y.executeSql(Z,me,ve,function(De,qe){qe.code===qe.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(Ye,Ke){Ke.rows.length?de(Ye,qe):ir(Ye,se,function(){Ye.executeSql(Z,me,ve,de)},de)},de):de(De,qe)},de)}function is(Y,se){var Z=this;Y=p(Y);var me=new f(function(ve,de){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(qe){Bi(qe,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[Y],function(Ye,Ke){var ut=Ke.rows.length?Ke.rows.item(0).value:null;ut&&(ut=De.serializer.deserialize(ut)),ve(ut)},function(Ye,Ke){de(Ke)})})}).catch(de)});return d(me,se),me}function Ln(Y,se){var Z=this,me=new f(function(ve,de){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(qe){Bi(qe,De,"SELECT * FROM "+De.storeName,[],function(Ye,Ke){for(var ut=Ke.rows,Et=ut.length,mn=0;mn<Et;mn++){var Pt=ut.item(mn),jn=Pt.value;if(jn&&(jn=De.serializer.deserialize(jn)),jn=Y(jn,Pt.key,mn+1),jn!==void 0){ve(jn);return}}ve()},function(Ye,Ke){de(Ke)})})}).catch(de)});return d(me,se),me}function Hn(Y,se,Z,me){var ve=this;Y=p(Y);var de=new f(function(De,qe){ve.ready().then(function(){se===void 0&&(se=null);var Ye=se,Ke=ve._dbInfo;Ke.serializer.serialize(se,function(ut,Et){Et?qe(Et):Ke.db.transaction(function(mn){Bi(mn,Ke,"INSERT OR REPLACE INTO "+Ke.storeName+" (key, value) VALUES (?, ?)",[Y,ut],function(){De(Ye)},function(Pt,jn){qe(jn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(me>0){De(Hn.apply(ve,[Y,Ye,Z,me-1]));return}qe(mn)}})})}).catch(qe)});return d(de,Z),de}function gs(Y,se,Z){return Hn.apply(this,[Y,se,Z,1])}function pp(Y,se){var Z=this;Y=p(Y);var me=new f(function(ve,de){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(qe){Bi(qe,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[Y],function(){ve()},function(Ye,Ke){de(Ke)})})}).catch(de)});return d(me,se),me}function cl(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(De){Bi(De,de,"DELETE FROM "+de.storeName,[],function(){me()},function(qe,Ye){ve(Ye)})})}).catch(ve)});return d(Z,Y),Z}function Sd(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(De){Bi(De,de,"SELECT COUNT(key) as c FROM "+de.storeName,[],function(qe,Ye){var Ke=Ye.rows.item(0).c;me(Ke)},function(qe,Ye){ve(Ye)})})}).catch(ve)});return d(Z,Y),Z}function xr(Y,se){var Z=this,me=new f(function(ve,de){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(qe){Bi(qe,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Ye,Ke){var ut=Ke.rows.length?Ke.rows.item(0).key:null;ve(ut)},function(Ye,Ke){de(Ke)})})}).catch(de)});return d(me,se),me}function Ii(Y){var se=this,Z=new f(function(me,ve){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(De){Bi(De,de,"SELECT key FROM "+de.storeName,[],function(qe,Ye){for(var Ke=[],ut=0;ut<Ye.rows.length;ut++)Ke.push(Ye.rows.item(ut).key);me(Ke)},function(qe,Ye){ve(Ye)})})}).catch(ve)});return d(Z,Y),Z}function li(Y){return new f(function(se,Z){Y.transaction(function(me){me.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,de){for(var De=[],qe=0;qe<de.rows.length;qe++)De.push(de.rows.item(qe).name);se({db:Y,storeNames:De})},function(ve,de){Z(de)})},function(me){Z(me)})})}function hu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var me=this,ve;return Y.name?ve=new f(function(de){var De;Y.name===Z.name?De=me._dbInfo.db:De=openDatabase(Y.name,"","",0),Y.storeName?de({db:De,storeNames:[Y.storeName]}):de(li(De))}).then(function(de){return new f(function(De,qe){de.db.transaction(function(Ye){function Ke(Pt){return new f(function(jn,Nr){Ye.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){jn()},function(Pr,Wo){Nr(Wo)})})}for(var ut=[],Et=0,mn=de.storeNames.length;Et<mn;Et++)ut.push(Ke(de.storeNames[Et]));f.all(ut).then(function(){De()}).catch(function(Pt){qe(Pt)})},function(Ye){qe(Ye)})})}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var Ra={_driver:"webSQLStorage",_initStorage:Ho,_support:Ve(),iterate:Ln,getItem:is,setItem:gs,removeItem:pp,clear:cl,length:Sd,key:xr,keys:Ii,dropInstance:hu};function Na(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var me in Y)Z[me]=Y[me];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=rr,f.resolve()):f.reject()}function Ae(Y){var se=this,Z=se.ready().then(function(){for(var me=se._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var de=localStorage.key(ve);de.indexOf(me)===0&&localStorage.removeItem(de)}});return d(Z,Y),Z}function lt(Y,se){var Z=this;Y=p(Y);var me=Z.ready().then(function(){var ve=Z._dbInfo,de=localStorage.getItem(ve.keyPrefix+Y);return de&&(de=ve.serializer.deserialize(de)),de});return d(me,se),me}function Tt(Y,se){var Z=this,me=Z.ready().then(function(){for(var ve=Z._dbInfo,de=ve.keyPrefix,De=de.length,qe=localStorage.length,Ye=1,Ke=0;Ke<qe;Ke++){var ut=localStorage.key(Ke);if(ut.indexOf(de)===0){var Et=localStorage.getItem(ut);if(Et&&(Et=ve.serializer.deserialize(Et)),Et=Y(Et,ut.substring(De),Ye++),Et!==void 0)return Et}}});return d(me,se),me}function Xt(Y,se){var Z=this,me=Z.ready().then(function(){var ve=Z._dbInfo,de;try{de=localStorage.key(Y)}catch{de=null}return de&&(de=de.substring(ve.keyPrefix.length)),de});return d(me,se),me}function On(Y){var se=this,Z=se.ready().then(function(){for(var me=se._dbInfo,ve=localStorage.length,de=[],De=0;De<ve;De++){var qe=localStorage.key(De);qe.indexOf(me.keyPrefix)===0&&de.push(qe.substring(me.keyPrefix.length))}return de});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(me){return me.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var me=Z.ready().then(function(){var ve=Z._dbInfo;localStorage.removeItem(ve.keyPrefix+Y)});return d(me,se),me}function sr(Y,se,Z){var me=this;Y=p(Y);var ve=me.ready().then(function(){se===void 0&&(se=null);var de=se;return new f(function(De,qe){var Ye=me._dbInfo;Ye.serializer.serialize(se,function(Ke,ut){if(ut)qe(ut);else try{localStorage.setItem(Ye.keyPrefix+Y,Ke),De(de)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&qe(Et),qe(Et)}})})});return d(ve,Z),ve}function Rr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var me=this,ve;return Y.name?ve=new f(function(de){Y.storeName?de(oe(Y,me._defaultConfig)):de(Y.name+"/")}).then(function(de){for(var De=localStorage.length-1;De>=0;De--){var qe=localStorage.key(De);qe.indexOf(de)===0&&localStorage.removeItem(qe)}}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var Vt={_driver:"localStorageWrapper",_initStorage:Ce,_support:Na(),iterate:Tt,getItem:lt,setItem:sr,removeItem:pn,clear:Ae,length:Fn,key:Xt,keys:On,dropInstance:Rr},or=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var me=se.length,ve=0;ve<me;){if(or(se[ve],Z))return!0;ve++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},ki={},Ks={},Jr={INDEXEDDB:ze,WEBSQL:Ra,LOCALSTORAGE:Vt},go=[Jr.INDEXEDDB._driver,Jr.WEBSQL._driver,Jr.LOCALSTORAGE._driver],Ui=["dropInstance"],zi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ui),qo={description:"",driver:go.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Pa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Xs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var tc=function(){function Y(se){o(this,Y);for(var Z in Jr)if(Jr.hasOwnProperty(Z)){var me=Jr[Z],ve=me._driver;this[Z]=ve,ki[ve]||this.defineDriver(me)}this._defaultConfig=Xs({},qo),this._config=Xs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var me in Z){if(me==="storeName"&&(Z[me]=Z[me].replace(/\W/g,"_")),me==="version"&&typeof Z[me]!="number")return new Error("Database version must be a number.");this._config[me]=Z[me]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,me,ve){var de=new f(function(De,qe){try{var Ye=Z._driver,Ke=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){qe(Ke);return}for(var ut=zi.concat("_initStorage"),Et=0,mn=ut.length;Et<mn;Et++){var Pt=ut[Et],jn=!Hr(Ui,Pt);if((jn||Z[Pt])&&typeof Z[Pt]!="function"){qe(Ke);return}}var Nr=function(){for(var Cd=function(nc){return function(){var pu=new Error("Method "+nc+" is not implemented by the current driver"),gp=f.reject(pu);return d(gp,arguments[arguments.length-1]),gp}},mp=0,BS=Ui.length;mp<BS;mp++){var Jy=Ui[mp];Z[Jy]||(Z[Jy]=Cd(Jy))}};Nr();var Pr=function(Cd){ki[Ye]&&console.info("Redefining LocalForage driver: "+Ye),ki[Ye]=Z,Ks[Ye]=Cd,De()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Pr,qe):Pr(!!Z._support):Pr(!0)}catch(Wo){qe(Wo)}});return h(de,me,ve),de},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,me,ve){var de=ki[Z]?f.resolve(ki[Z]):f.reject(new Error("Driver not found."));return h(de,me,ve),de},Y.prototype.getSerializer=function(Z){var me=f.resolve(rr);return h(me,Z),me},Y.prototype.ready=function(Z){var me=this,ve=me._driverSet.then(function(){return me._ready===null&&(me._ready=me._initDriver()),me._ready});return h(ve,Z,Z),ve},Y.prototype.setDriver=function(Z,me,ve){var de=this;Jn(Z)||(Z=[Z]);var De=this._getSupportedDrivers(Z);function qe(){de._config.driver=de.driver()}function Ye(Et){return de._extend(Et),qe(),de._ready=de._initStorage(de._config),de._ready}function Ke(Et){return function(){var mn=0;function Pt(){for(;mn<Et.length;){var jn=Et[mn];return mn++,de._dbInfo=null,de._ready=null,de.getDriver(jn).then(Ye).catch(Pt)}qe();var Nr=new Error("No available storage method found.");return de._driverSet=f.reject(Nr),de._driverSet}return Pt()}}var ut=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ut.then(function(){var Et=De[0];return de._dbInfo=null,de._ready=null,de.getDriver(Et).then(function(mn){de._driver=mn._driver,qe(),de._wrapLibraryMethodsWithReady(),de._initDriver=Ke(De)})}).catch(function(){qe();var Et=new Error("No available storage method found.");return de._driverSet=f.reject(Et),de._driverSet}),h(this._driverSet,me,ve),this._driverSet},Y.prototype.supports=function(Z){return!!Ks[Z]},Y.prototype._extend=function(Z){Xs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var me=[],ve=0,de=Z.length;ve<de;ve++){var De=Z[ve];this.supports(De)&&me.push(De)}return me},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,me=zi.length;Z<me;Z++)Pa(this,zi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),Td=new tc;r.exports=Td},{3:3}]},{},[4])(4)})})(GDe);var G4t=GDe.exports;const H_=ol(G4t);class YDe{constructor(t){gu(this,"engine");gu(this,"connected",!1);gu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Y$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function xT(e){return e.participantId!==void 0}class gc extends YDe{constructor(){super("firebase");gu(this,"RECAPTCHAV3TOKEN","6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ");gu(this,"firestore");gu(this,"collectionPrefix","prod-");gu(this,"studyCollection");gu(this,"storage");gu(this,"studyId","");gu(this,"localForage",H_.createInstance({name:"currentParticipantId"}));gu(this,"participantData",null);const n=mK.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=dPe(n);this.firestore=V6t(r,{}),this.storage=y_();try{V4t(r,{provider:new FZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveTags(n){const r=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/tags`),i=new Blob([JSON.stringify(n)],{type:"application/json"});await g_(r,i)}async getTags(){const n=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/tags`),r=await this._getFromFirebaseStorageByRef(n,"config");return Promise.resolve(r)}async saveEditedTranscript(n,r,i,s){const o=s.map(l=>({...l,selectedTags:l.selectedTags.map(c=>c.id)})),a=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),u=new Blob([JSON.stringify(o)],{type:"application/json"});await g_(a,u)}async getEditedTranscript(n,r,i){const s=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/tags`),u=await this._getFromFirebaseStorageByRef(a,"config"),l=o.map(c=>({...c,selectedTags:c.selectedTags.map(f=>u.find(d=>f===d.id))}));return Promise.resolve(l)}async connect(){try{await H6t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=U$();if(!i.currentUser&&(await vDt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Y$(JSON.stringify(r));if(this.studyCollection=df(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=y_(),i=Vi(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await ov(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=y_(),i=Vi(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await ov(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(xT(a))return this.participantData=a,a;const l=await Y$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Vi(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=YA(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=y_(),o=Vi(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);g_(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=y_(),s=await Promise.all(n.map(async a=>await ov(Vi(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=y_(),s=await Promise.all(n.map(async a=>await ov(Vi(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=As(this.studyCollection,"sequenceAssignment");await hl(s,{});const o=df(s,"sequenceAssignment"),a=As(o,this.currentParticipantId),u=Epe(o,J6t("participantId","==","")),l=await ET(u);if(l.docs.length>0){const g=l.docs[0],y=g.data().timestamp;i.dataCollectionEnabled&&(await i4t(g.ref),await hl(a,{participantId:this.currentParticipantId,timestamp:y}))}else i.dataCollectionEnabled&&await hl(a,{participantId:this.currentParticipantId,timestamp:a4t()});const c=Epe(o,Z6t("timestamp","asc")),h=(await ET(c)).docs.map(g=>g.data()).findIndex(g=>g.participantId===n||this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await _T(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");xT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return xT(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=YA();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=df(this.firestore,"user-management"),i=await ET(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await hl(As(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await hl(As(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await hl(As(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await hl(As(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await hl(As(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Vi(this.storage,`${this.collectionPrefix}${n}/participants`),i=await _T(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");xT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=df(this.firestore,`${this.collectionPrefix}${n}`),s=Vi(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!xT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=As(i,"sequenceAssignment"),u=df(a,"sequenceAssignment"),l=As(u,r);await r4t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=As(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await hl(s,{[r]:i},{merge:!0})}async getModes(n){const r=As(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await L9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await hl(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=As(this.firestore,"metadata","collections"),i=await L9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=As(this.firestore,"metadata","collections");await hl(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=As(this.firestore,"metadata","collections"),i=await L9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await hl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Vi(this.storage,n),s=(await _T(r)).items.map(o=>jhe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Vi(this.storage,n),o=(await _T(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Vi(this.storage,n),s=Vi(this.storage,r),o=await ov(i),u=await(await fetch(o)).blob();await g_(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=df(this.firestore,n),s=As(i,"sequenceAssignment"),o=df(s,"sequenceAssignment"),a=df(this.firestore,r),u=As(a,"sequenceAssignment");await hl(u,{});const l=df(u,"sequenceAssignment"),c=await ET(o),f=Tpe(this.firestore);c.docs.forEach(d=>{const h=As(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=df(this.firestore,n),i=As(r,"sequenceAssignment"),s=df(i,"sequenceAssignment"),o=await ET(s),a=Tpe(this.firestore);o.forEach(u=>{const l=As(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Vi(this.storage,n);return(await _T(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await ov(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await ov(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await g_(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await g_(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Vi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await jhe(i)}}const KDe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),ng=()=>I.useContext(KDe);function Y4t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Ci(),l=async()=>{const h=U$();try{await TDt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof gc)try{h=U$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof gc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=SDt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(KDe.Provider,{value:d,children:i.determiningStatus?_.jsx(jl,{visible:!0}):e})}async function K4t(e){return e?await e.getTags():[]}function X4t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var $;const[a,u]=I.useState(null),l=ng(),{trrackId:c,studyId:f,index:d}=Zf(),h=Qh(),p=d?h:null,{storageEngine:m}=Ci(),{value:g,execute:y}=vA(K4t,[m]),v=I.useCallback(k=>{m&&m.saveTags(k).then(()=>y(m))},[y,m]),b=Ih(),w=I.useRef([]),E=I.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(k=>k.startsWith(p))||null,[e,p]),S=Bv((k,D)=>{const M=[...s];M[k].text=D,o(M)}),x=Bv((k,D)=>{const M=[...s];M[k].selectedTags=D,o(M)}),C=Bv((k,D)=>{const M=[...s];M[k].annotation=D,o(M)}),A=Bv(k=>{if(k===0)return;const D=structuredClone(s);D[k-1].text=s[k-1].text+s[k].text,D[k-1].transcriptMappingEnd=s[k].transcriptMappingEnd,D[k-1].selectedTags=[...s[k-1].selectedTags,...s[k].selectedTags.filter(M=>!s[k-1].selectedTags.find(L=>L.id===M.id))],D.splice(k,1),D.filter(M=>M.transcriptMappingStart===D[k-1].transcriptMappingStart).forEach(M=>{M.transcriptMappingEnd=D[k-1].transcriptMappingEnd}),o(D),setTimeout(()=>{w.current[k-1].focus(),w.current[k-1].setSelectionRange(s[k-1].text.length,s[k-1].text.length,"none")})}),R=Bv((k,D)=>{const M=structuredClone(s),L=M[k];M.splice(k+1,0,{transcriptMappingEnd:L.transcriptMappingEnd,transcriptMappingStart:L.transcriptMappingStart,text:L.text.slice(D),selectedTags:L.selectedTags,annotation:""}),M[k].text=M[k].text.slice(0,D),o(M),setTimeout(()=>{w.current[k+1].focus(),w.current[k+1].setSelectionRange(0,0)})});I.useEffect(()=>{const k=[];a&&s.length>a.results.length||(s.forEach((D,M)=>{a&&(M===0||D.transcriptMappingStart!==s[M-1].transcriptMappingStart)&&k.push({start:M===0?0:a.results[D.transcriptMappingStart-1].resultEndTime,end:a.results[D.transcriptMappingEnd].resultEndTime,lineStart:D.transcriptMappingStart,lineEnd:D.transcriptMappingEnd,tags:s.filter(L=>L.transcriptMappingStart===D.transcriptMappingStart&&L.transcriptMappingEnd===D.transcriptMappingEnd).map(L=>L.selectedTags)})}),n(k))},[s,n,a]),I.useEffect(()=>{f&&c&&e&&(m==null||m.getTranscription(Rc(e.sequence).filter(k=>b.tasksToNotRecordAudio===void 0||!b.tasksToNotRecordAudio.includes(k)).filter(k=>p?k===p:!0),c).then(k=>{const D=k.map(B=>JSON.parse(B));let M=0;const L=D.map(B=>{const U=B.results.map(V=>({...V,resultEndTime:+V.resultEndTime.split("s")[0]+M}));return M+=+B.results[B.results.length-1].resultEndTime.split("s")[0],U}).flat();u({results:L}),s.length===0&&o(L.map((B,U)=>{var V;return{transcriptMappingStart:U,transcriptMappingEnd:U,text:((V=B.alternatives[0].transcript)==null?void 0:V.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,f,c,b.tasksToNotRecordAudio,e,p,o,i,s.length]),I.useEffect(()=>{if(a&&r!==null&&e&&t>0){let k=r;const D=E?e.answers[E].startTime:e.answers.audioTest.startTime,M=Math.abs(t-D)/1e3;if(M>a.results[k].resultEndTime){for(;M>a.results[k].resultEndTime;)if(k+=1,k>a.results.length-1){k=a.results.length-1;break}}else if(k>0&&M<a.results[k-1].resultEndTime)for(;k>0&&M<a.results[k-1].resultEndTime;)k-=1;if(r===k)return;i(k)}},[r,e,t,i,a,E]);const P=I.useCallback((k,D)=>{if(!g)return;const M=g.findIndex(U=>U.id===k.id),L=Array.from(g);L[M]=D;const B=Array.from(s);B.forEach(U=>{U.selectedTags=U.selectedTags.map(V=>V.id===k.id?D:V)}),o(B),v(L)},[v,o,g,s]);return _.jsxs(ri,{gap:0,children:[_.jsxs(Kn,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[_.jsx(nt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),_.jsxs(Yn,{children:[_.jsx(Yn.Target,{children:_.jsxs(ri,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[_.jsxs(Kn,{children:[_.jsx(Gwe,{}),_.jsx(nt,{children:"Tags"})]}),_.jsx(nt,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:(($=l.user.user)==null?void 0:$.email)||""})]})}),g?_.jsx(Yn.Dropdown,{children:_.jsx(tPt,{createTagCallback:k=>{v([...g,k])},editTagCallback:P,tags:g})}):_.jsx(Ku,{})]})]}),_.jsx(ri,{gap:2,children:g?s.map((k,D)=>_.jsx(XNt,{annotation:k.annotation,setAnnotation:M=>C(D,M),addRef:M=>{w.current[D]=M},onSelectTags:M=>x(D,M),addRowCallback:M=>R(D,M),deleteRowCallback:()=>A(D),onTextChange:M=>S(D,M),tags:g,selectedTags:k.selectedTags,text:k.text,start:k.transcriptMappingStart,end:k.transcriptMappingEnd,current:r===null?0:r},D)):_.jsx(Ku,{})})]})}const B9={left:5,top:0,right:5,bottom:0};function Q4t(e,t){return t?t.getParticipantData(e):null}async function J4t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}const Ppe=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Ope=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function XDe({mini:e}){var tt,be;const{trrackId:t,index:n}=Zf(),r=Qh(),i=ng(),s=I.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=Ci(),[a,u]=I.useState(0),[l,{width:c}]=zf(),[f,d]=I.useState(null),{value:h,status:p}=vA(Q4t,[t,o]),{saveAnalysisState:m}=zl(),g=jc(),[y,v]=I.useState(!1),[b,w]=P7e(0,50),E=I.useRef(null),S=Ih(),x=tf(),{analysisTrialName:C,analysisWaveformTime:A}=Fo(pe=>pe),{setAnalysisTrialName:R,setAnalysisParticipantName:P,setAnalysisWaveformTime:$}=zl(),[k,D]=I.useState(!0),M=I.useRef(null),[L,B]=I.useState([]),[U,V]=I.useState(null),O=I.useCallback(pe=>{var Oe;V(pe),o&&t&&r&&o.saveEditedTranscript(t,((Oe=i.user.user)==null?void 0:Oe.email)||"temp",r,pe)},[r,(tt=i.user.user)==null?void 0:tt.email,o,t]),{value:z,status:W}=vA(J4t,[o,h==null?void 0:h.participantId,r,(be=i.user.user)==null?void 0:be.email]);I.useEffect(()=>{z&&V(z)},[z,W]);const j=I.useMemo(()=>[...Ppe,...Ope],[]),H=I.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(pe=>pe.startsWith(s))||null,[h,s]);I.useEffect(()=>{if(H&&h){const pe=GA.create(),Oe=SV({registry:pe,initialState:{}});h.answers[H].provenanceGraph&&(Oe.importObject(bE(h.answers[H].provenanceGraph)),M.current=Oe)}},[h,H]);const G=I.useCallback(pe=>{var Oe;pe&&(H&&h&&M.current&&!e&&(g(m(M.current.getState((Oe=h.answers[H].provenanceGraph)==null?void 0:Oe.nodes[pe]))),M.current.to(pe)),d(pe))},[e,h,m,g,H]),te=I.useCallback(pe=>{var Oe;if(pe!==C&&!e){g(R(pe)),g(m(null)),u(0);const He=h?Object.keys(h.answers).find(pt=>pt.startsWith(pe)):"";if(h&&He&&h.answers[He].provenanceGraph){const pt=GA.create(),Ge=SV({registry:pt,initialState:{}});Ge.importObject(bE(h.answers[He].provenanceGraph)),M.current=Ge,G(((Oe=h.answers[He].provenanceGraph)==null?void 0:Oe.root)||"")}else g(m(null)),d(null),M.current=null}},[G,e,h,m,R,g,C]);I.useEffect(()=>{s&&te(s)},[te,s]);const he=Bv((pe,Oe=!0)=>{if(h&&C&&H&&(h.answers[H].endTime-h.answers.audioTest_2.startTime)/1e3<pe){const He=Rc(h.sequence);te(He[He.indexOf(C)+1])}else h&&C&&M.current&&M.current.current.children.length>0&&(M.current.graph.backend.nodes[M.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<pe&&G(M.current.current.children[0]);if(h&&C){const He=H?h.answers[H].startTime:h.answers.audioTest_2.startTime;w(pe*1e3+He)}Oe&&g($(pe))}),fe=I.useCallback(pe=>{if(pe&&h&&t){const Oe=new zNt;o==null||o.getAudio(Rc(h.sequence).filter(He=>S.tasksToNotRecordAudio===void 0||!S.tasksToNotRecordAudio.includes(He)).filter(He=>s?He===s:!0),t).then(He=>{pe&&Oe.fetchAudio(...He).then(pt=>Oe.concatAudio(pt)).then(pt=>Oe.export(pt,"audio/mp3")).then(pt=>pe.loadBlob(pt.blob).then(()=>{D(!1)})).catch(pt=>{throw new Error(pt)}),pe.on("timeupdate",he)})}},[S.tasksToNotRecordAudio,h,o,he,s,t]),ge=I.useMemo(()=>[],[]),le=ETe({container:E.current,plugins:ge,onMount:fe,progressColor:"cornflowerblue",waveColor:"lightgray"}),Me=I.useCallback((pe,Oe)=>{w(pe),le&&Oe&&setTimeout(()=>{le.seekTo(Oe)})},[w,le]),ce=I.useCallback(pe=>{v(pe),le&&(pe?le.play():le.pause())},[le]);I.useEffect(()=>{he(A,!1),le&&setTimeout(()=>{le.setTime(A)})},[A,he,le]);const ze=I.useMemo(()=>{if(!h)return null;const pe=Object.values(h.answers||{}).map(pt=>[pt.startTime,pt.endTime]).flat(),Oe=l3(pe);return Rh([B9.left,c+B9.left+B9.right]).domain(H?[h.answers[H].startTime,h.answers[H].endTime]:Oe).clamp(!0)},[h,H,c]);I.useEffect(()=>{fe(le)},[fe,h,le]);const Ve=I.useCallback(pe=>{var Oe;if(pe&&H&&h&&M.current&&ze){const He=h.answers[H].provenanceGraph.nodes[pe];g(m(M.current.getState((Oe=h.answers[H].provenanceGraph)==null?void 0:Oe.nodes[pe]))),M.current.to(pe);const pt=ze.domain()[1]-ze.domain()[0];Me(He.createdOn+1,(He.createdOn-ze.domain()[0])/pt)}},[Me,h,m,g,H,ze]),at=I.useCallback(pe=>{if(!h)return;const Oe=j.indexOf(h.participantId);pe?x(`../../${s?"../":""}${j[Oe+1]}/ui/reviewer-${s||""}`,{relative:"path"}):x(`../../${s?"../":""}${j[Oe-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[j,x,h,s]);return _.jsx(Kn,{wrap:"nowrap",gap:25,children:_.jsxs(ri,{ref:l,style:{width:"100%"},gap:e?0:25,children:[e?null:_.jsx(Ja,{children:_.jsxs(Kn,{children:[_.jsx(Cl,{children:_.jsx(mae,{onClick:()=>at(!1)})}),_.jsx(ph,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:pe=>{g(P(pe)),x(`../../${s?"../":""}${pe}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...Ppe,...Ope]}),_.jsx(ph,{style:{width:"300px"},clearable:!0,value:s,data:h?[...Rc(h.sequence)]:[],onChange:pe=>x(`${s?"../":""}reviewer-${pe||""}`,{relative:"path"})}),_.jsx(Cl,{children:_.jsx(gae,{onClick:()=>at(!0)})})]})}),p==="success"&&h&&ze?e?null:_.jsx(rPe,{trialFilter:H,xScale:ze,setSelectedTask:te,participantData:h,width:c,height:200}):e?null:_.jsx(Ja,{style:{height:"275px"},children:_.jsx(Ku,{})}),ze&&h!==null?_.jsxs(_.Fragment,{children:[_.jsxs(Ee,{ref:E,ml:h&&ze?ze(h.answers.audioTest_2.startTime):0,mr:h&&ze?ze(h.answers["post-study-survey_13"].startTime):0,style:{overflow:"visible",width:`${h&&!s?ze(h.answers["post-study-survey_13"].startTime)-ze(h.answers.audioTest_2.startTime):ze.range()[1]-ze.range()[0]}px`},children:[_.jsx(vTe.Provider,{value:le,children:_.jsx(oX,{id:"waveform"})}),k?_.jsx(Ku,{}):null]}),e?null:_.jsx(KNt,{startTime:s?ze.domain()[0]:h.answers.audioTest_2.startTime,xScale:ze,transcriptLines:L,currentShownTranscription:a})]}):null,p==="success"&&h&&ze?_.jsx(YNt,{xScale:ze,setSelectedTask:te,playTime:b-h.answers.introduction_0.startTime,setPlayTime:Me,isPlaying:y,setIsPlaying:ce,currentNode:f,setCurrentNode:G,participantData:h,width:c,height:50}):null,_.jsxs(Kn,{align:"center",justify:"center",children:[_.jsx(Cl,{variant:"subtle",children:_.jsx(mae,{onClick:()=>{var pe;return Ve(((pe=M.current)==null?void 0:pe.current).parent)}})}),_.jsx(xn,{onClick:()=>ce(!0),children:"Play"}),_.jsx(xn,{onClick:()=>ce(!1),children:"Pause"}),_.jsx(Cl,{variant:"subtle",children:_.jsx(gae,{onClick:()=>{var pe;return Ve((pe=M.current)==null?void 0:pe.current.children[0])}})})]}),s?_.jsx(ri,{children:h&&z&&U&&!e?_.jsx(X4t,{transcriptList:U,setTranscriptList:O,setCurrentShownTranscription:u,currentShownTranscription:a,participant:h,playTime:b,setTranscriptLines:B}):null}):null]})})}const Dpe=Object.assign({"../public/ThinkAloud/AddPlot.tsx":dpt,"../public/ThinkAloud/AudioTest.tsx":Mpt,"../public/ThinkAloud/Bar.tsx":IEt,"../public/ThinkAloud/BrushPlot.tsx":LNt,"../public/ThinkAloud/Histogram.tsx":$Nt,"../public/ThinkAloud/Paintbrush.tsx":ONt,"../public/ThinkAloud/Scatter.tsx":DNt,"../public/ThinkAloud/Violin.tsx":MNt,"../public/ThinkAloud/XAxisBar.tsx":CEt,"../public/ThinkAloud/YAxis.tsx":PNt,"../public/ThinkAloud/YAxisBar.tsx":AEt,"../public/ThinkAloud/types.ts":FNt,"../public/ThinkAloud/useKdeCalc.tsx":BNt});function Z4t({currentConfig:e,provState:t}){const n=Ry(),r=Qh(),i=`../public/${e.path}`,s=i in Dpe?Dpe[i].default:null,o=jc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=zl(),l=I.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return _.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[s?_.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t}):_.jsx(ik,{path:e.path}),n.toString().startsWith("reviewer-")?_.jsx(Or.Footer,{p:"md",children:_.jsx(XDe,{mini:!0})}):null]})}function $pe({provState:e}){var A;const t=Ih(),n=Ci(),r=Ry(),i=Qh()||"Notfound",s=t.components[i],o=hK(),a=y6(s)&&t.baseComponents?fK({},(A=t.baseComponents)==null?void 0:A[s.baseComponent],s):s,u=a.instruction||"",{instructionLocation:l}=a,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=I.useState(null),h=jc(),{setIsRecording:p}=zl(),{analysisTrialName:m,analysisProvState:g,analysisParticipantName:y}=Fo(R=>R),{trrackId:v}=Zf(),b=tf(),[w,E]=I.useState(null);I.useEffect(()=>{i&&m&&v&&(i!==m||v!==y)&&b(`../../${y||v}/reviewer-${m}`,{relative:"path"})},[y,g,m,i,r,b,v]),I.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&w&&n.storageEngine.saveAudio(f,w),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(E(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(P=>{const $=new MediaRecorder(P);$.start(),d($),h(p(!0))}),E(i)))},[i]),cTe();const{storageEngine:S}=Ci(),x=jc(),{setAlertModal:C}=zl();return I.useEffect(()=>{(S==null?void 0:S.getEngine())!=="firebase"&&x(C({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[C,S,x]),i==="end"?_.jsx(dTe,{}):i==="Notfound"?_.jsx(ik,{email:t.uiConfig.contactEmail}):_.jsxs(_.Fragment,{children:[l==="aboveStimulus"&&_.jsx(Za,{text:u}),_.jsx(u3,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&_.jsx(Fut,{currentConfig:a}),a.type==="website"&&_.jsx($ut,{currentConfig:a}),a.type==="image"&&_.jsx(Lut,{currentConfig:a}),a.type==="react-component"&&_.jsx(Z4t,{currentConfig:a,provState:g})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&_.jsx(Za,{text:u}),_.jsx(u3,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function ZV(e){const[t]=IY();return _.jsx(AY,{...e,to:{pathname:e.to,search:t.toString()}})}function eFt(e,t=!1){return typeof e=="number"?Mpe(e,t):Mpe(e.length,t).map(r=>r.map(i=>e[i]))}function Mpe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function QDe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=QDe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function tFt(e,t){const n=bE(e);return QDe(n,t,"root")}function JDe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&JDe(s,t,i,o)})}function nFt(e){const t=[];return JDe(e,t,"",0),t}function Lpe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return eFt(i.sort(()=>.5-Math.random()),!0)}function rFt(e){const n=nFt(e.sequence).map(s=>({[s]:Lpe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=tFt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Lpe(e,o))})}),i}function ZDe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>ZDe(n,`${t}-${r}`))}}function iFt(){Fo(n=>n),zl();const e=Ih();jc();const t=zx();return CY(`/${t}`),Ci(),I.useMemo(()=>{let n=bE(e.sequence);return n=ZDe(n,"root"),n.components.push("end"),n},[e.sequence]),I.useState("participant"),null}function sFt(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function oFt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Fo(S=>S),i=cK(),s=jc(),{toggleShowHelpText:o,toggleStudyBrowser:a}=zl(),{storageEngine:u}=Ci(),l=Fo(S=>S.isRecording),c=Ry(),f=i.length-1,d=typeof c=="number"?c/f*100:0,[h,p]=I.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=zx(),v=CY(`/${y}`),b=I.useRef(null),[w,E]=I.useState(!1);return I.useEffect(()=>{const S=b.current;S&&E(S.scrollWidth>S.offsetWidth)},[n]),_.jsx(Or.Header,{p:"md",children:_.jsxs(xc,{mt:-7,align:"center",children:[_.jsx(xc.Col,{span:4,children:_.jsxs(tn,{align:"center",children:[_.jsx(Cy,{w:40,src:`${Kh}${m}`,alt:"Study Logo"}),_.jsx(kc,{w:"md"}),_.jsx(Oi,{order:4,children:n==null?void 0:n.studyMetadata.title}),l?_.jsxs(Kn,{gap:20,wrap:"nowrap",children:[_.jsx(nt,{color:"red",children:"Recording audio"}),_.jsx(TTe,{})]}):null]})}),_.jsx(xc.Col,{span:4,children:g&&_.jsx(Dx,{radius:"md",size:"lg",value:d})}),_.jsx(xc.Col,{span:4,children:_.jsxs(Kn,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(Di,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(l1,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(xn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Iu,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[_.jsx(Iu.Target,{children:_.jsx(Cl,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(MQe,{})})}),_.jsxs(Iu.Dropdown,{children:[e&&_.jsx(Iu.Item,{leftSection:_.jsx(HQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Iu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(UQe,{size:14}),children:"Contact"}),e&&_.jsx(Iu.Item,{leftSection:_.jsx(Jwe,{size:14}),onClick:()=>sFt(u,n,r,v),children:"Next Participant"})]})]})]})})]})})}function aFt(){var u;const e=(u=Ih())==null?void 0:u.uiConfig.sidebar,t=Ih(),n=Qh(),r=t.components[n],i=I.useMemo(()=>{var l;return r?y6(r)&&t.baseComponents?fK({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=hK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(Or.Section,{bg:"gray.3",p:"md",children:_.jsxs(nt,{c:"gray.9",children:[_.jsx(nt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Za,{text:o})]})}),_.jsx(Or.Section,{p:"md",children:_.jsx(u3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(u3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function uFt(){const{showHelpText:e,config:t}=Fo(u=>u),n=jc(),{toggleShowHelpText:r}=zl(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await dK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(xs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Za,{text:i}):_.jsx(ik,{path:t.uiConfig.helpTextPath})})}function lFt(){const{alertModal:e}=Fo(o=>o),{setAlertModal:t}=zl(),n=jc(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(xs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(VI,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(RQe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(nt,{my:"md",children:e.message}),_.jsx(Kn,{w:"100%",justify:"end",children:_.jsx(xn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function cFt(){const e=I.useRef([]),t=Ih(),n=t.uiConfig.windowEventDebounceTime??100,r=Fo(d=>d.showStudyBrowser);I.useEffect(()=>{const d=Od(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Od(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Od(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Od(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Od(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Od(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Od(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Od(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Od(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Ci(),o=zx(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(hTe.Provider,{value:e,children:_.jsxs(Or,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(aFt,{}),_.jsx(iFt,{}),_.jsx(oFt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(uFt,{}),_.jsx(lFt,{}),_.jsx(Or.Main,{children:_.jsx(uQe,{})})]})})}const U9={left:5,top:0,right:5,bottom:0};function fFt(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function dFt({participant:e,maxDuration:t}){const n=tf(),r=Ym(),i=I.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=zf(),a=I.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:aX(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=I.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=l3(l);return Rh([U9.left,o+U9.left+U9.right]).domain(c).clamp(!0)},[e,o]);return _.jsx(Ja,{children:_.jsxs(ri,{gap:25,ref:s,style:{width:"75%"},children:[_.jsxs(Kn,{justify:"space-between",children:[_.jsx(bb,{size:"25px",component:wQe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${Rc(e.sequence)[0]}`),children:e.participantId}),_.jsx(nt,{size:"xl",children:`${a}`}),_.jsx(nt,{size:"xl",children:`${fFt(i)}`})]}),u?_.jsx(rPe,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function hFt(e){return e?e.getAllParticipantsData():null}const pFt=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],mFt=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function gFt(){const{storageEngine:e}=Ci(),{value:t,status:n}=vA(hFt,[e]),r=I.useMemo(()=>{if(!(n!=="success"||!t))return Nc(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?_.jsx(ri,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>mFt.includes(i.participantId)||pFt.includes(i.participantId)).map(i=>_.jsx(dFt,{maxDuration:r,participant:i},i.participantId))}):_.jsx(Ku,{})}function yFt({setProvState:e}){return _.jsx("div",{children:_.jsx(Or.Main,{p:"sm",children:_.jsx(XDe,{mini:!1})})})}var vFt={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function bFt(e){const t=await(await fetch(`${Kh}${e}`)).text();return Aht(t)}async function z4(e,t){const n=t.configsList.find(r=>Zwe(r)===e);if(n){const r=t.configs[n];return await bFt(`${r.path}`)}return null}async function _Ft(e){const t={},n=e.configsList.filter(i=>vFt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>z4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function wFt({studyId:e,config:t}){const{sequence:n}=Fo(i=>i),r=I.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:_.jsx(ZV,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Oi,{order:2,mb:8,children:"Error loading config"}),_.jsx(_7,{issues:t.errors,type:"error"})]}):_.jsx($pe,{})}),i.push({path:"/analysis/:trrackId/:index/",element:_.jsx($pe,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:_.jsx(Or,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:_.jsx(yFt,{setProvState:()=>null})})}),i.push({path:"/analysis",element:_.jsx(gFt,{})}),i.push({path:"/end",element:_.jsx(dTe,{})}),[{element:_.jsx(cFt,{}),children:i}]}return[]},[t,n,e]);return Vwe(r)}function EFt({globalConfig:e}){const t=zx(),[n,r]=I.useState(null);e.configsList.includes(t),I.useEffect(()=>{z4(t,e).then(l=>{r(l)})},[e,t]);const[i,s]=I.useState(null),{storageEngine:o}=Ci(),[a]=IY();return I.useEffect(()=>{async function l(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await rFt(n));const f=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,d=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(v=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},g=await o.initializeParticipantSession(t,d,n,m,f),y=await Nut(t,n,g.sequence,m,g.answers);s(y)}l()},[o,n,t,a]),i?_.jsx(mSe.Provider,{value:i,children:_.jsx(not,{store:i.store,children:_.jsx(wFt,{studyId:t,config:n})})}):_.jsx(jl,{visible:!0})}function N2({studyIds:e}){const t=tf(),{studyId:n}=Zf(),r=Ym(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Ci(),{user:o,logout:a}=ng(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(FQe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(PQe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(Kwe,{}),href:"/settings",needAdmin:!0}];return _.jsx(Or.Header,{p:"md",children:_.jsxs(xc,{mt:-7,align:"center",children:[_.jsx(xc.Col,{span:6,children:_.jsxs(tn,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Cy,{w:40,src:`${Kh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(kc,{w:"md"}),_.jsx(Oi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(xc.Col,{span:6,children:_.jsxs(tn,{justify:"flex-end",direction:"row",children:[c&&_.jsx(ph,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(FG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Gh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(tn,{direction:"column",mt:20,children:[_.jsx(nt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(xn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(xn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(Ee,{ml:10,children:[_.jsx(xL,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function e3e({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=JC(!1),[s,{close:o,open:a}]=JC(!1),[u,{open:l,close:c}]=JC(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{children:[_.jsxs(Yn,{opened:n,children:[_.jsx(Yn.Target,{children:_.jsx(xn,{variant:"light",disabled:e.length===0,onClick:()=>{sX(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx($Qe,{})})}),_.jsx(Yn.Dropdown,{children:_.jsx(nt,{children:"Download all participants data as JSON"})})]}),_.jsxs(Yn,{opened:s,children:[_.jsx(Yn.Target,{children:_.jsx(xn,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(Xwe,{})})}),_.jsx(Yn.Dropdown,{children:_.jsx(nt,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(Pht,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function xFt({cellData:e}){return _.jsx(Cn.Td,{children:_.jsx(ri,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(Ee,{children:[_.jsxs(nt,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(nt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Fpe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(Cn.Td,{children:[t.toFixed(1)," ","s"]})}function SFt(e){const{metaData:t}=e;return _.jsx(Cn.Td,{children:_.jsx(pY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(ri,{gap:"xs",children:[_.jsxs(Ee,{children:["IP:"," ",t.ip]}),_.jsxs(Ee,{children:["Language:"," ",t.language]}),_.jsxs(Ee,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ee,{children:["User Agent:"," ",t.userAgent]})]})})})}function TFt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Ci(),{studyId:s}=Zf(),{user:o}=ng(),a=async y=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,y),await r()):console.warn("You are not authorized to perform this action."))},[u,l]=I.useState([]),[c,f]=I.useState(!1),d=()=>s7({title:"Confirm rejecting participants",children:_.jsxs(nt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(nt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{f(!0);const y=u.map(async v=>await a(v));await Promise.all(y),l([]),await r(),f(!1)}});function h(y){y==="all"?u.length===[...e,...t].length?l([]):l([...e,...t].map(v=>v.participantId)):u.includes(y)?l(u.filter(v=>v!==y)):l([...u,y])}const p=pSe(n.sequence),m=[_.jsx(Cn.Th,{children:_.jsx(tn,{justify:"center",children:_.jsx(wm,{mb:-4,checked:u.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),_.jsx(Cn.Th,{children:"ID"},"ID"),_.jsx(Cn.Th,{children:"Status"},"status"),_.jsx(Cn.Th,{children:"Meta"},"meta"),...p.flatMap(y=>[_.jsx(Cn.Th,{children:y.componentName},`header-${y.componentName}-${y.timesSeenInBlock}`),_.jsxs(Cn.Th,{children:[y.componentName," ","Duration"]},`header-${y.componentName}-${y.timesSeenInBlock}-duration`)]),_.jsx(Cn.Th,{children:"Total Duration"},"total-duration")],g=[...e,...t].map(y=>_.jsxs(Cn.Tr,{children:[_.jsx(Cn.Td,{children:_.jsx(tn,{justify:"center",children:_.jsx(wm,{mb:-4,checked:u.includes(y.participantId),onChange:()=>h(y.participantId)})})}),_.jsx(Cn.Td,{style:{whiteSpace:"nowrap"},children:y.participantId}),_.jsx(Cn.Td,{children:_.jsxs(tn,{direction:"row",align:"center",children:[y.rejected?_.jsx(Di,{label:"Rejected",children:_.jsx(RY,{size:16,color:"red",style:{marginBottom:-3}})}):y.completed?_.jsx(Di,{label:"Completed",children:_.jsx(Wwe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Di,{label:"In Progress",children:_.jsx(Ywe,{size:16,color:"orange",style:{marginBottom:-3}})}),!y.completed&&_.jsxs(nt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(y.answers).filter(([v,b])=>b.endTime!==void 0).length/(Rc(y.sequence).length-1)*100).toFixed(2),"%"]})]})}),y.metadata?_.jsx(SFt,{metaData:y.metadata}):_.jsx(Cn.Td,{children:"N/A"}),p.map(v=>{const b=dSe(y.sequence,v.orderPath),w=b&&Object.entries(y.answers).sort((E,S)=>{const x=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10),C=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10);return x-C}).filter(([E])=>{const S=E.slice(0,E.lastIndexOf("_")),x=parseInt(E.slice(E.lastIndexOf("_")+1),10);return S===v.componentName&&x<=b[0].lastIndex&&x>=b[0].firstIndex});return w!==null&&w.length>=v.timesSeenInBlock+1?_.jsxs(xi.Fragment,{children:[_.jsx(xFt,{cellData:w[v.timesSeenInBlock][1]}),_.jsx(Fpe,{cellData:w[v.timesSeenInBlock][1]})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`):_.jsxs(xi.Fragment,{children:[_.jsx(Cn.Td,{children:"N/A"}),_.jsx(Cn.Td,{children:"N/A"})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`)}),_.jsx(Fpe,{cellData:{startTime:Math.min(...Object.values(y.answers).map(v=>v.startTime)),endTime:Math.max(...Object.values(y.answers).map(v=>v.endTime)),answer:{},windowEvents:[]}},`cell-${y.participantId}-total-duration`)]},y.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(jl,{visible:c,overlayProps:{blur:2}}),_.jsxs(tn,{justify:"space-between",mb:8,p:8,children:[_.jsx(Kn,{children:_.jsx(ph,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(y=>({value:y.participantId,label:y.participantId})),searchable:!0,value:null,leftSection:_.jsx(qQe,{size:14}),onChange:y=>y&&h(y)})}),_.jsxs(Kn,{children:[_.jsx(e3e,{allParticipants:[...e,...t],studyId:s||""}),_.jsx(xn,{disabled:u.length===0||!o.isAdmin,onClick:d,color:"red",children:"Reject Participants"})]})]}),_.jsx(tn,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(Cn,{striped:!0,withTableBorder:!0,children:[_.jsx(Cn.Thead,{children:_.jsx(Cn.Tr,{children:m})}),_.jsx(Cn.Tbody,{children:g})]})})]}):_.jsx(tn,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(nt,{children:"No data available"})})}const v_=14;function t3e({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(tn,{ml:4,gap:4,children:[_.jsx(Di,{label:"Completed",children:_.jsx(l1,{variant:"light",color:"green",leftSection:_.jsx(Wwe,{width:v_,height:v_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(Di,{label:"In Progress",children:_.jsx(l1,{variant:"light",color:"orange",leftSection:_.jsx(Ywe,{width:v_,height:v_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(Di,{label:"Rejected",children:_.jsx(l1,{variant:"light",color:"red",leftSection:_.jsx(RY,{width:v_,height:v_,style:{paddingTop:1}}),pb:1,children:n})})]})}function CFt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(""),[c,f]=I.useState([]),[d,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:v}=Ci(),b=v,w=I.useCallback(async()=>{y(!0);const $=await b.getSnapshots(e);f($),y(!1)},[b,e]);I.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},x=async $=>{m(!0),await b.restoreSnapshot(e,$),w(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},R=()=>s7({title:"Create a Snapshot",children:_.jsx(nt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),P=$=>s7({title:"Restore Snapshot",children:_.jsx(nt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x($)});return _.jsxs(_.Fragment,{children:[_.jsx(jl,{visible:p}),_.jsxs(tn,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(Oi,{order:5,children:"Create a Snapshot"}),_.jsxs(nt,{children:["This will create a snapshot of the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(nt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Di,{label:"Create a snapshot",children:_.jsx(xn,{onClick:R,children:"Snapshot"})})]}),_.jsx(kc,{h:"lg"}),_.jsxs(tn,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(Oi,{order:5,children:"Archive Data"}),_.jsxs(nt,{children:["This will create a snapshot of the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Di,{label:"Snapshot and Delete Data",children:_.jsx(xn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(kc,{h:"lg"}),_.jsxs(tn,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(Oi,{order:5,children:"Delete Data"}),_.jsxs(nt,{children:["This will delete the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Di,{label:"Delete Data",children:_.jsx(xn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(kc,{h:"xl"}),_.jsxs(tn,{direction:"column",children:[_.jsx(tn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Oi,{order:5,children:"Snapshots"})}),_.jsxs(Ee,{style:{position:"relative"},children:[_.jsx(jl,{visible:g}),c.length>0?c.map($=>_.jsxs(tn,{justify:"space-between",mb:"xs",children:[_.jsx(nt,{children:$}),_.jsxs(tn,{direction:"row",gap:"xs",children:[_.jsx(Di,{label:"Restore Snapshot",children:_.jsx(Cl,{color:"blue",variant:"subtle",onClick:()=>{P($)},children:_.jsx(VQe,{})})}),_.jsx(Di,{label:"Delete Snapshot",children:_.jsx(Cl,{color:"red",variant:"subtle",onClick:()=>{s(!0),l($)},children:_.jsx(Qwe,{})})})]})]},$)):_.jsx(nt,{children:"No snapshots."})]})]}),_.jsxs(xs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(nt,{children:"Archive Data"}),children:[_.jsx(nt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(nm,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:$=>h($.target.value)}),_.jsxs(tn,{mt:"sm",justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(xn,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(xs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(nt,{children:"Delete Snapshot"}),children:[_.jsxs(nt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(nt,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(nm,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:$=>h($.target.value)}),_.jsxs(tn,{mt:"sm",justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(xn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(xs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(nt,{children:"Delete Live Data"}),children:[_.jsxs(nt,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(nt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(nm,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:$=>h($.target.value)}),_.jsxs(tn,{mt:"sm",justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(xn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function AFt({studyId:e}){const{storageEngine:t}=Ci(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(ri,{children:[_.jsx(Aw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Aw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Aw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function IFt({studyId:e,refresh:t}){const{storageEngine:n}=Ci();return _.jsx(Fc,{children:_.jsxs(Su,{multiple:!0,variant:"contained",children:[_.jsxs(Su.Item,{value:"ReVISit Modes",children:[_.jsx(Su.Control,{children:_.jsx(Oi,{order:5,children:"ReVISit Modes"})}),_.jsx(Su.Panel,{children:_.jsx(AFt,{studyId:e})})]},"modes"),_.jsxs(Su.Item,{value:"Data Management",children:[_.jsx(Su.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Oi,{order:5,children:"Data Management"})}),_.jsx(Su.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(CFt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function kFt(e){const{globalConfig:t}=e,{studyId:n}=Zf(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=Ci(),c=tf(),{tab:f}=Zf(),{user:d}=ng(),h=I.useCallback(async()=>{if(u(!0),n){const y=await z4(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);I.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=I.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),b=r.filter(w=>w.rejected);return[y,v,b]},[r]);return _.jsxs(Or,{children:[_.jsx(N2,{studyIds:e.globalConfig.configsList}),_.jsx(Or.Main,{children:_.jsxs(Fc,{fluid:!0,style:{height:"100%"},children:[_.jsx(jl,{visible:a}),_.jsxs(tn,{direction:"row",align:"center",children:[_.jsx(Oi,{order:5,children:n}),_.jsx(t3e,{completed:p.length,inProgress:m.length,rejected:g.length})]}),_.jsx(kc,{h:"xs"}),_.jsxs(La,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[_.jsxs(La.List,{children:[_.jsx(La.Tab,{value:"table",leftSection:_.jsx(GQe,{size:16}),children:"Table View"}),_.jsx(Di,{label:"Coming soon",position:"bottom",children:_.jsx(La.Tab,{value:"stats",leftSection:_.jsx(OQe,{size:16}),disabled:!0,children:"Trial Stats"})}),_.jsx(Di,{label:"Coming soon",position:"bottom",children:_.jsx(La.Tab,{value:"replay",leftSection:_.jsx(zQe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(La.Tab,{value:"manage",leftSection:_.jsx(Kwe,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),_.jsx(La.Panel,{value:"table",pt:"xs",children:s&&_.jsx(TFt,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),_.jsx(La.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(La.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(La.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?_.jsx(IFt,{studyId:n,refresh:h}):_.jsx(Fc,{mt:20,children:_.jsx(VI,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(jQe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function jpe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=ng(),{storageEngine:o}=Ci(),[a,u]=I.useState(!1),l=Zf();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(jl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(AY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function n3e(e,t,n){if(e instanceof gc){t(!0);const r=new Up,i=U$();try{await WDt(i,r,WPe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function RFt(){const{user:e}=ng(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=Ci();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(AY,{to:"/"}):_.jsx(Fc,{children:_.jsx(_b,{padding:"lg",children:_.jsxs(tn,{align:"center",direction:"column",justify:"center",children:[_.jsx(Cy,{maw:200,mt:50,mb:100,src:`${Kh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(nt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(xn,{onClick:()=>n3e(s,i,n),leftSection:_.jsx(YQe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(l1,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(jl,{visible:r})]})})})}var r3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var M=["th","st","nd","rd"],L=D%100;return"["+D+(M[(L-20)%10]||M[L]||M[0])+"]"}},b=function(D,M,L){var B=String(D);return!B||B.length>=M?D:""+Array(M+1-B.length).join(L)+D},w={s:b,z:function(D){var M=-D.utcOffset(),L=Math.abs(M),B=Math.floor(L/60),U=L%60;return(M<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function D(M,L){if(M.date()<L.date())return-D(L,M);var B=12*(L.year()-M.year())+(L.month()-M.month()),U=M.clone().add(B,f),V=L-U<0,O=M.clone().add(B+(V?-1:1),f);return+(-(B+(L-U)/(V?U-O:O-U))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},E="en",S={};S[E]=v;var x="$isDayjsObject",C=function(D){return D instanceof $||!(!D||!D[x])},A=function D(M,L,B){var U;if(!M)return E;if(typeof M=="string"){var V=M.toLowerCase();S[V]&&(U=V),L&&(S[V]=L,U=V);var O=M.split("-");if(!U&&O.length>1)return D(O[0])}else{var z=M.name;S[z]=M,U=z}return!B&&U&&(E=U),U||!B&&E},R=function(D,M){if(C(D))return D.clone();var L=typeof M=="object"?M:{};return L.date=D,L.args=arguments,new $(L)},P=w;P.l=A,P.i=C,P.w=function(D,M){return R(D,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var $=function(){function D(L){this.$L=A(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[x]=!0}var M=D.prototype;return M.parse=function(L){this.$d=function(B){var U=B.date,V=B.utc;if(U===null)return new Date(NaN);if(P.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var O=U.match(g);if(O){var z=O[2]-1||0,W=(O[7]||"0").substring(0,3);return V?new Date(Date.UTC(O[1],z,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)):new Date(O[1],z,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)}}return new Date(U)}(L),this.init()},M.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},M.$utils=function(){return P},M.isValid=function(){return this.$d.toString()!==m},M.isSame=function(L,B){var U=R(L);return this.startOf(B)<=U&&U<=this.endOf(B)},M.isAfter=function(L,B){return R(L)<this.startOf(B)},M.isBefore=function(L,B){return this.endOf(B)<R(L)},M.$g=function(L,B,U){return P.u(L)?this[B]:this.set(U,L)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(L,B){var U=this,V=!!P.u(B)||B,O=P.p(L),z=function(ge,le){var Me=P.w(U.$u?Date.UTC(U.$y,le,ge):new Date(U.$y,le,ge),U);return V?Me:Me.endOf(l)},W=function(ge,le){return P.w(U.toDate()[ge].apply(U.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(le)),U)},j=this.$W,H=this.$M,G=this.$D,te="set"+(this.$u?"UTC":"");switch(O){case h:return V?z(1,0):z(31,11);case f:return V?z(1,H):z(0,H+1);case c:var he=this.$locale().weekStart||0,fe=(j<he?j+7:j)-he;return z(V?G-fe:G+(6-fe),H);case l:case p:return W(te+"Hours",0);case u:return W(te+"Minutes",1);case a:return W(te+"Seconds",2);case o:return W(te+"Milliseconds",3);default:return this.clone()}},M.endOf=function(L){return this.startOf(L,!1)},M.$set=function(L,B){var U,V=P.p(L),O="set"+(this.$u?"UTC":""),z=(U={},U[l]=O+"Date",U[p]=O+"Date",U[f]=O+"Month",U[h]=O+"FullYear",U[u]=O+"Hours",U[a]=O+"Minutes",U[o]=O+"Seconds",U[s]=O+"Milliseconds",U)[V],W=V===l?this.$D+(B-this.$W):B;if(V===f||V===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},M.set=function(L,B){return this.clone().$set(L,B)},M.get=function(L){return this[P.p(L)]()},M.add=function(L,B){var U,V=this;L=Number(L);var O=P.p(B),z=function(H){var G=R(V);return P.w(G.date(G.date()+Math.round(H*L)),V)};if(O===f)return this.set(f,this.$M+L);if(O===h)return this.set(h,this.$y+L);if(O===l)return z(1);if(O===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[O]||1,j=this.$d.getTime()+L*W;return P.w(j,this)},M.subtract=function(L,B){return this.add(-1*L,B)},M.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var V=L||"YYYY-MM-DDTHH:mm:ssZ",O=P.z(this),z=this.$H,W=this.$m,j=this.$M,H=U.weekdays,G=U.months,te=U.meridiem,he=function(le,Me,ce,ze){return le&&(le[Me]||le(B,V))||ce[Me].slice(0,ze)},fe=function(le){return P.s(z%12||12,le,"0")},ge=te||function(le,Me,ce){var ze=le<12?"AM":"PM";return ce?ze.toLowerCase():ze};return V.replace(y,function(le,Me){return Me||function(ce){switch(ce){case"YY":return String(B.$y).slice(-2);case"YYYY":return P.s(B.$y,4,"0");case"M":return j+1;case"MM":return P.s(j+1,2,"0");case"MMM":return he(U.monthsShort,j,G,3);case"MMMM":return he(G,j);case"D":return B.$D;case"DD":return P.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return he(U.weekdaysMin,B.$W,H,2);case"ddd":return he(U.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(z);case"HH":return P.s(z,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return ge(z,W,!0);case"A":return ge(z,W,!1);case"m":return String(W);case"mm":return P.s(W,2,"0");case"s":return String(B.$s);case"ss":return P.s(B.$s,2,"0");case"SSS":return P.s(B.$ms,3,"0");case"Z":return O}return null}(le)||O.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(L,B,U){var V,O=this,z=P.p(B),W=R(L),j=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return P.m(O,W)};switch(z){case h:V=G()/12;break;case f:V=G();break;case d:V=G()/3;break;case c:V=(H-j)/6048e5;break;case l:V=(H-j)/864e5;break;case u:V=H/i;break;case a:V=H/r;break;case o:V=H/n;break;default:V=H}return U?V:P.a(V)},M.daysInMonth=function(){return this.endOf(f).$D},M.$locale=function(){return S[this.$L]},M.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),V=A(L,B,!0);return V&&(U.$L=V),U},M.clone=function(){return P.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},D}(),k=$.prototype;return R.prototype=k,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(D){k[D[1]]=function(M){return this.$g(M,D[0],D[1])}}),R.extend=function(D,M){return D.$i||(D(M,$,R),D.$i=!0),R},R.locale=A,R.isDayjs=C,R.unix=function(D){return R(1e3*D)},R.en=S[E],R.Ls=S,R.p={},R})})(r3e);var NFt=r3e.exports;const Ct=ol(NFt);function PFt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Ct(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function OFt({formatter:e,...t}){return(e||PFt)(t)}function DFt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function i3e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=DFt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?i3e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function $Ft(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function MFt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function jZ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=$Ft(i.key);if(s){i.preventDefault();const o=MFt(e);i3e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var s3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,x=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(x).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,x,C){var A=S-60*x*1e3,R=l(A,C);if(x===R)return[A,x];var P=l(A-=60*(R-x)*1e3,C);return R===P?[A,R]:[S-60*Math.min(R,P)*1e3,Math.max(R,P)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(s3e);var LFt=s3e.exports;const FFt=ol(LFt);var o3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var x=(""+S[0]).match(i)||["-",0,0],C=x[0],A=60*+x[1]+ +x[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(o3e);var jFt=o3e.exports;const BFt=ol(jFt);Ct.extend(BFt);Ct.extend(FFt);function UFt(e,t){return t?Ct(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Bpe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=UFt(e,t);return n==="remove"&&(r*=-1),Ct(e).add(r,"minutes").toDate()};function I0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Bpe(i,n,e)):Bpe(t,n,e)}function zFt({minDate:e,maxDate:t,timezone:n}){const r=I0("add",new Date,n);return!e&&!t?r:e&&Ct(r).isBefore(e)?e:t&&Ct(r).isAfter(t)?t:r}const VFt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},HFt=I.createContext(VFt);function ec(){const e=I.useContext(HFt),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function qFt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function a3e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:qFt(e,t),name:n,form:r})}a3e.displayName="@mantine/dates/HiddenDatesInput";var u3e={day:"m_396ce5cb"};const WFt={},GFt=(e,{size:t})=>({day:{"--day-size":Ht(t,"day-size")}}),BZ=Fe((e,t)=>{const n=Te("Day",WFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,highlightToday:E,...S}=n,x=vt({name:f||"Day",classes:u3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GFt,rootSelector:"day"}),C=ec();return _.jsx(Bs,{...x("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Ct(l).isSame(I0("add",new Date,C.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...S,children:(m==null?void 0:m(l))||l.getDate()})});BZ.classes=u3e;BZ.displayName="@mantine/dates/Day";function YFt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Ct().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Ct(r).add(s,"days").locale(e).format(t)):i.push(t(Ct(r).add(s,"days").toDate()));return i}var l3e={weekday:"m_18a3eca"};const KFt={},XFt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":lo(t),"--wr-spacing":Ll(t)}}),UZ=Fe((e,t)=>{const n=Te("WeekdaysRow",KFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:l3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XFt,rootSelector:"weekdaysRow"}),g=ec(),y=YFt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(Ee,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});UZ.classes=l3e;UZ.displayName="@mantine/dates/WeekdaysRow";function QFt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function JFt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function ZFt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=QFt(s,t),a=JFt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function c3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function f3e(e,t){return t instanceof Date?Ct(e).isAfter(Ct(t).subtract(1,"day"),"day"):!0}function d3e(e,t){return t instanceof Date?Ct(e).isBefore(Ct(t).add(1,"day"),"day"):!0}function e5t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return d3e(c,n)&&f3e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||c3e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Ct().isSame(c,"date"));return l||a[0]}var h3e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const t5t={withCellSpacing:!0},V4=Fe((e,t)=>{const n=Te("Month",t5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:x,__getDayRef:C,__onDayKeyDown:A,__onDayClick:R,__onDayMouseEnter:P,__preventFocus:$,__stopPropagation:k,withCellSpacing:D,size:M,highlightToday:L,...B}=n,U=vt({name:l||"Month",classes:h3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),V=ec(),O=ZFt({month:h,firstDayOfWeek:V.getFirstDayOfWeek(f),consistentWeeks:V.consistentWeeks}),z=e5t(O,y,v,m,g,w,h),{resolvedClassNames:W,resolvedStyles:j}=zm({classNames:r,styles:o,props:n}),H=O.map((G,te)=>{const he=G.map((fe,ge)=>{const le=!c3e(fe,h),Me=(S==null?void 0:S(fe))||Ct(fe).locale(c||V.locale).format("D MMMM YYYY"),ce=m==null?void 0:m(fe),ze=Ct(fe).isSame(z,"date");return _.jsx("td",{...U("monthCell"),"data-with-spacing":D||void 0,children:_.jsx(BZ,{__staticSelector:l||"Month",classNames:W,styles:j,unstyled:a,"data-mantine-stop-propagation":k||void 0,highlightToday:L,renderDay:b,date:fe,size:M,weekend:V.getWeekendDays(p).includes(fe.getDay()),outside:le,hidden:w?le:!1,"aria-label":Me,static:x,disabled:(g==null?void 0:g(fe))||!d3e(fe,v)||!f3e(fe,y),ref:Ve=>C==null?void 0:C(te,ge,Ve),...ce,onKeyDown:Ve=>{var at;(at=ce==null?void 0:ce.onKeyDown)==null||at.call(ce,Ve),A==null||A(Ve,{rowIndex:te,cellIndex:ge,date:fe})},onMouseEnter:Ve=>{var at;(at=ce==null?void 0:ce.onMouseEnter)==null||at.call(ce,Ve),P==null||P(Ve,fe)},onClick:Ve=>{var at;(at=ce==null?void 0:ce.onClick)==null||at.call(ce,Ve),R==null||R(Ve,fe)},onMouseDown:Ve=>{var at;(at=ce==null?void 0:ce.onMouseDown)==null||at.call(ce,Ve),$&&Ve.preventDefault()},tabIndex:$||!ze?-1:0})},fe.toString())});return _.jsx("tr",{...U("monthRow"),children:he},te)});return _.jsxs(Ee,{component:"table",...U("month"),size:M,ref:t,...B,children:[!E&&_.jsx("thead",{...U("monthThead"),children:_.jsx(UZ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:M,classNames:W,styles:j,unstyled:a})}),_.jsx("tbody",{...U("monthTbody"),children:H})]})});V4.classes=h3e;V4.displayName="@mantine/dates/Month";var p3e={pickerControl:"m_dc6a3c71"};const n5t={},r5t=(e,{size:t})=>({pickerControl:{"--dpc-fz":lo(t),"--dpc-size":Ht(t,"dpc-size")}}),H4=Fe((e,t)=>{const n=Te("PickerControl",n5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=vt({name:d||"PickerControl",classes:p3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:r5t,rootSelector:"pickerControl"});return _.jsx(Bs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});H4.classes=p3e;H4.displayName="@mantine/dates/PickerControl";function m3e(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"year")||n&&Ct(e).isAfter(n,"year"))}function i5t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!m3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"year"));return o||i[0]}function g3e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var y3e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const s5t={yearsListFormat:"YYYY",withCellSpacing:!0},q4=Fe((e,t)=>{const n=Te("YearsList",s5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:x,...C}=n,A=vt({name:m||"YearsList",classes:y3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),R=ec(),P=g3e(l),$=i5t(P,d,h,p),k=P.map((D,M)=>{const L=D.map((B,U)=>{const V=p==null?void 0:p(B),O=Ct(B).isSame($,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(H4,{...A("yearsListControl"),size:x,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:m3e(B,d,h),ref:z=>g==null?void 0:g(M,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:M,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!O?-1:0,children:Ct(B).locale(R.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...A("yearsListRow"),children:L},M)});return _.jsx(Ee,{component:"table",ref:t,size:x,...A("yearsList"),...C,children:_.jsx("tbody",{children:k})})});q4.classes=y3e;q4.displayName="@mantine/dates/YearsList";function v3e(e,t,n){return!t&&!n?!1:!!(t&&Ct(e).isBefore(t,"month")||n&&Ct(e).isAfter(n,"month"))}function o5t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!v3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Ct().isSame(a,"month"));return o||i[0]}function a5t(e){const t=Ct(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Ct(t).add(r,"months").toDate()),r+=1;return n}var b3e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const u5t={monthsListFormat:"MMM",withCellSpacing:!0},W4=Fe((e,t)=>{const n=Te("MonthsList",u5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:x,...C}=n,A=vt({name:l||"MonthsList",classes:b3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),R=ec(),P=a5t(c),$=o5t(P,h,p,m),k=P.map((D,M)=>{const L=D.map((B,U)=>{const V=m==null?void 0:m(B),O=Ct(B).isSame($,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(H4,{...A("monthsListControl"),size:x,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:v3e(B,h,p),ref:z=>g==null?void 0:g(M,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:M,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!O?-1:0,children:Ct(B).locale(R.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...A("monthsListRow"),children:L},M)});return _.jsx(Ee,{component:"table",ref:t,size:x,...A("monthsList"),...C,children:_.jsx("tbody",{children:k})})});W4.classes=b3e;W4.displayName="@mantine/dates/MonthsList";var _3e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const l5t={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},c5t=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Ht(t,"dch-control-size"),"--dch-fz":lo(t)}}),jy=Fe((e,t)=>{const n=Te("CalendarHeader",l5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:x,__preventFocus:C,__stopPropagation:A,...R}=n,P=vt({name:x||"CalendarHeader",classes:_3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:c5t,rootSelector:"calendarHeader"}),$=C?k=>k.preventDefault():void 0;return _.jsxs(Ee,{...P("calendarHeader"),ref:t,...R,children:[S&&_.jsx(Bs,{...P("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:$,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx(aA,{...P("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Bs,{component:b?"button":"div",...P("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?$:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&_.jsx(Bs,{...P("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:$,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx(aA,{...P("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});jy.classes=_3e;jy.displayName="@mantine/dates/CalendarHeader";function f5t(e){const t=g3e(e);return[t[0][0],t[3][0]]}const d5t={decadeLabelFormat:"YYYY"},G4=Fe((e,t)=>{const n=Te("DecadeLevel",d5t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:x,withNext:C,withPrevious:A,decadeLabelFormat:R,classNames:P,styles:$,unstyled:k,__staticSelector:D,__stopPropagation:M,size:L,...B}=n,U=ec(),[V,O]=f5t(r),z={__staticSelector:D||"DecadeLevel",classNames:P,styles:$,unstyled:k,size:L},W=typeof E=="boolean"?E:o?!Ct(O).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Ct(V).startOf("year").isAfter(s):!1,H=(G,te)=>Ct(G).locale(i||U.locale).format(te);return _.jsxs(Ee,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx(jy,{label:typeof R=="function"?R(V,O):`${H(V,R)}  ${H(O,R)}`,__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:x,withNext:C,withPrevious:A,...z}),_.jsx(q4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...z})]})});G4.classes={...q4.classes,...jy.classes};G4.displayName="@mantine/dates/DecadeLevel";const h5t={yearLabelFormat:"YYYY"},Y4=Fe((e,t)=>{const n=Te("YearLevel",h5t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:x,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:P,yearLabelFormat:$,__staticSelector:k,__stopPropagation:D,size:M,classNames:L,styles:B,unstyled:U,...V}=n,O=ec(),z={__staticSelector:k||"YearLevel",classNames:L,styles:B,unstyled:U,size:M},W=typeof S=="boolean"?S:o?!Ct(r).endOf("year").isBefore(o):!1,j=typeof x=="boolean"?x:s?!Ct(r).startOf("year").isAfter(s):!1;return _.jsxs(Ee,{"data-year-level":!0,size:M,ref:t,...V,children:[_.jsx(jy,{label:typeof $=="function"?$(r):Ct(r).locale(i||O.locale).format($),__preventFocus:p,__stopPropagation:D,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:P,...z}),_.jsx(W4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:D,withCellSpacing:h,...z})]})});Y4.classes={...jy.classes,...W4.classes};Y4.displayName="@mantine/dates/YearLevel";const p5t={monthLabelFormat:"MMMM YYYY"},K4=Fe((e,t)=>{const n=Te("MonthLevel",p5t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,highlightToday:E,__preventFocus:S,__stopPropagation:x,nextIcon:C,previousIcon:A,nextLabel:R,previousLabel:P,onNext:$,onPrevious:k,onLevelClick:D,nextDisabled:M,previousDisabled:L,hasNextLevel:B,levelControlAriaLabel:U,withNext:V,withPrevious:O,monthLabelFormat:z,classNames:W,styles:j,unstyled:H,__staticSelector:G,size:te,static:he,...fe}=n,ge=ec(),le={__staticSelector:G||"MonthLevel",classNames:W,styles:j,unstyled:H,size:te},Me=typeof M=="boolean"?M:f?!Ct(r).endOf("month").isBefore(f):!1,ce=typeof L=="boolean"?L:c?!Ct(r).startOf("month").isAfter(c):!1;return _.jsxs(Ee,{"data-month-level":!0,size:te,ref:t,...fe,children:[_.jsx(jy,{label:typeof z=="function"?z(r):Ct(r).locale(i||ge.locale).format(z),__preventFocus:S,__stopPropagation:x,nextIcon:C,previousIcon:A,nextLabel:R,previousLabel:P,onNext:$,onPrevious:k,onLevelClick:D,nextDisabled:Me,previousDisabled:ce,hasNextLevel:B,levelControlAriaLabel:U,withNext:V,withPrevious:O,...le}),_.jsx(V4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:S,__stopPropagation:x,static:he,withCellSpacing:w,highlightToday:E,...le})]})});K4.classes={...V4.classes,...jy.classes};K4.displayName="@mantine/dates/MonthLevel";var w3e={levelsGroup:"m_30b26e33"};const m5t={},By=Fe((e,t)=>{const n=Te("LevelsGroup",m5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=vt({name:l||"LevelsGroup",classes:w3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ee,{ref:t,...f("levelsGroup"),...c})});By.classes=w3e;By.displayName="@mantine/dates/LevelsGroup";const g5t={numberOfColumns:1},X4=Fe((e,t)=>{const n=Te("DecadeLevelGroup",g5t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:x,__staticSelector:C,__stopPropagation:A,numberOfColumns:R,levelControlAriaLabel:P,decadeLabelFormat:$,size:k,vars:D,...M}=n,L=I.useRef([]),B=Array(R).fill(0).map((U,V)=>{const O=Ct(r).add(V*10,"years").toDate();return _.jsx(G4,{size:k,yearsListFormat:a,decade:O,withNext:V===R-1,withPrevious:V===0,decadeLabelFormat:$,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>jZ({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:L}),__getControlRef:(z,W,j)=>{Array.isArray(L.current[V])||(L.current[V]=[]),Array.isArray(L.current[V][z])||(L.current[V][z]=[]),L.current[V][z][W]=j},levelControlAriaLabel:typeof P=="function"?P(O):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:S,unstyled:x,withCellSpacing:f},V)});return _.jsx(By,{classNames:E,styles:S,__staticSelector:C||"DecadeLevelGroup",ref:t,size:k,unstyled:x,...M,children:B})});X4.classes={...By.classes,...G4.classes};X4.displayName="@mantine/dates/DecadeLevelGroup";const y5t={numberOfColumns:1},Q4=Fe((e,t)=>{const n=Te("YearLevelGroup",y5t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:x,styles:C,unstyled:A,__staticSelector:R,__stopPropagation:P,numberOfColumns:$,levelControlAriaLabel:k,yearLabelFormat:D,size:M,vars:L,...B}=n,U=I.useRef([]),V=Array($).fill(0).map((O,z)=>{const W=Ct(r).add(z,"years").toDate();return _.jsx(Y4,{size:M,monthsListFormat:a,year:W,withNext:z===$-1,withPrevious:z===0,yearLabelFormat:D,__stopPropagation:P,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>jZ({levelIndex:z,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,H,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][H]=G},levelControlAriaLabel:typeof k=="function"?k(W):k,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:x,styles:C,unstyled:A,__staticSelector:R||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(By,{classNames:x,styles:C,__staticSelector:R||"YearLevelGroup",ref:t,size:M,unstyled:A,...B,children:V})});Q4.classes={...Y4.classes,...By.classes};Q4.displayName="@mantine/dates/YearLevelGroup";const v5t={numberOfColumns:1},J4=Fe((e,t)=>{const n=Te("MonthLevelGroup",v5t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,highlightToday:b,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:x,previousLabel:C,onNext:A,onPrevious:R,onLevelClick:P,nextDisabled:$,previousDisabled:k,hasNextLevel:D,classNames:M,styles:L,unstyled:B,numberOfColumns:U,levelControlAriaLabel:V,monthLabelFormat:O,__staticSelector:z,__stopPropagation:W,size:j,static:H,vars:G,...te}=n,he=I.useRef([]),fe=Array(U).fill(0).map((ge,le)=>{const Me=Ct(r).add(le,"months").toDate();return _.jsx(K4,{month:Me,withNext:le===U-1,withPrevious:le===0,monthLabelFormat:O,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(ce,ze)=>jZ({levelIndex:le,rowIndex:ze.rowIndex,cellIndex:ze.cellIndex,event:ce,controlsRef:he}),__getDayRef:(ce,ze,Ve)=>{Array.isArray(he.current[le])||(he.current[le]=[]),Array.isArray(he.current[le][ce])||(he.current[le][ce]=[]),he.current[le][ce][ze]=Ve},levelControlAriaLabel:typeof V=="function"?V(Me):V,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:x,previousLabel:C,onNext:A,onPrevious:R,onLevelClick:P,nextDisabled:$,previousDisabled:k,hasNextLevel:D,classNames:M,styles:L,unstyled:B,__staticSelector:z||"MonthLevelGroup",size:j,static:H,withCellSpacing:v,highlightToday:b},le)});return _.jsx(By,{classNames:M,styles:L,__staticSelector:z||"MonthLevelGroup",ref:t,size:j,...te,children:fe})});J4.classes={...By.classes,...K4.classes};J4.displayName="@mantine/dates/MonthLevelGroup";var E3e={input:"m_6fa5e2aa"};const b5t={},Z4=Fe((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:x,name:C,form:A,type:R,...P}=p_e("PickerInputBase",b5t,e),$=b||(g&&w&&!E&&!S?_.jsx(vb,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),k=()=>{R==="range"&&Array.isArray(x)&&x[0]&&!x[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(xs,{opened:p,onClose:k,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(si.Wrapper,{...r,children:_.jsxs(Yn,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var D;(D=u==null?void 0:u.onClose)==null||D.call(u),k()},children:[_.jsx(Yn.Target,{children:_.jsx(si,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:D=>{m==null||m(D),h.toggle()},rightSection:$,...n,ref:t,classNames:{...s,input:es(E3e.input,s==null?void 0:s.input)},...P,children:d||_.jsx(si.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Yn.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(a3e,{value:x,name:C,form:A,type:R})]})});Z4.classes=E3e;Z4.displayName="@mantine/dates/PickerInputBase";const Upe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function zZ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=ec(),[a,u,l]=ds({value:I0("add",t,o.getTimezone(),!i),defaultValue:I0("add",n,o.getTimezone(),!i),finalValue:Upe(e),onChange:f=>{r==null||r(I0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Upe(e),u(c))),[c,u,l]}function z9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function _5t(e){return e===0?"month":e===1?"year":"decade"}function ST(e,t,n){return _5t(wc(z9(e,0),z9(t,0),z9(n,2)))}const w5t={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},eF=Fe((e,t)=>{const n=Te("Calendar",w5t,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:x,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:P,hideWeekdays:$,getDayAriaLabel:k,monthLabelFormat:D,nextIcon:M,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:V,highlightToday:O,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:te,classNames:he,styles:fe,unstyled:ge,minDate:le,maxDate:Me,locale:ce,__staticSelector:ze,size:Ve,__preventFocus:at,__stopPropagation:tt,onNextDecade:be,onPreviousDecade:pe,onNextYear:Oe,onPreviousYear:He,onNextMonth:pt,onPreviousMonth:Ge,static:_e,__timezoneApplied:ct,...bt}=n,{resolvedClassNames:ye,resolvedStyles:Ne}=zm({classNames:he,styles:fe,props:n}),[We,Je]=ds({value:a?ST(a,s,i):void 0,defaultValue:o?ST(o,s,i):void 0,finalValue:ST(void 0,s,i),onChange:u}),[xt,wn]=zZ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ct}),yr={__staticSelector:ze||"Calendar",styles:Ne,classNames:ye,unstyled:ge,size:Ve},vr=ec(),kr=h||d||1,Kt=xt||I0("add",new Date,vr.getTimezone()),Tn=()=>{const Ln=Ct(Kt).add(kr,"month").toDate();pt==null||pt(Ln),wn(Ln)},rr=()=>{const Ln=Ct(Kt).subtract(kr,"month").toDate();Ge==null||Ge(Ln),wn(Ln)},ir=()=>{const Ln=Ct(Kt).add(kr,"year").toDate();Oe==null||Oe(Ln),wn(Ln)},Ho=()=>{const Ln=Ct(Kt).subtract(kr,"year").toDate();He==null||He(Ln),wn(Ln)},Bi=()=>{const Ln=Ct(Kt).add(10*kr,"year").toDate();be==null||be(Ln),wn(Ln)},is=()=>{const Ln=Ct(Kt).subtract(10*kr,"year").toDate();pe==null||pe(Ln),wn(Ln)};return _.jsxs(Ee,{ref:t,size:Ve,"data-calendar":!0,...bt,children:[We==="month"&&_.jsx(J4,{month:Kt,minDate:le,maxDate:Me,firstDayOfWeek:E,weekdayFormat:S,weekendDays:x,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:P,hideWeekdays:$,getDayAriaLabel:k,onNext:Tn,onPrevious:rr,hasNextLevel:i!=="month",onLevelClick:()=>Je("year"),numberOfColumns:d,locale:ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:M,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:D,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:at,__stopPropagation:tt,static:_e,withCellSpacing:V,highlightToday:O,...yr}),We==="year"&&_.jsx(Q4,{year:Kt,numberOfColumns:d,minDate:le,maxDate:Me,monthsListFormat:z,getMonthControlProps:W,locale:ce,onNext:ir,onPrevious:Ho,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Je("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:M,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:j,__onControlMouseEnter:v,__onControlClick:(Ln,Hn)=>{w&&wn(Hn),Je(ST("month",s,i)),g==null||g(Hn)},__preventFocus:at,__stopPropagation:tt,withCellSpacing:V,...yr}),We==="decade"&&_.jsx(X4,{decade:Kt,minDate:le,maxDate:Me,yearsListFormat:H,getYearControlProps:G,locale:ce,onNext:Bi,onPrevious:is,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:M,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:te,__onControlMouseEnter:y,__onControlClick:(Ln,Hn)=>{b&&wn(Hn),Je(ST("year",s,i)),m==null||m(Hn)},__preventFocus:at,__stopPropagation:tt,withCellSpacing:V,...yr})]})});eF.classes={...X4.classes,...Q4.classes,...J4.classes};eF.displayName="@mantine/dates/Calendar";function E5t(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:x,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:$,weekdayFormat:k,weekendDays:D,getDayProps:M,excludeDate:L,renderDay:B,hideOutsideDates:U,hideWeekdays:V,getDayAriaLabel:O,monthLabelFormat:z,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:te,decadeLabelFormat:he,allowSingleDateInRange:fe,allowDeselect:ge,minDate:le,maxDate:Me,locale:ce,...ze}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:x,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:$,weekdayFormat:k,weekendDays:D,getDayProps:M,excludeDate:L,renderDay:B,hideOutsideDates:U,hideWeekdays:V,getDayAriaLabel:O,monthLabelFormat:z,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:te,decadeLabelFormat:he,allowSingleDateInRange:fe,allowDeselect:ge,minDate:le,maxDate:Me,locale:ce},others:ze}}function zpe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Ct(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Ct(n[1]).endOf("day").add(1,"ms").isAfter(e)}function x5t({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=zZ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Ct(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const x=[S,f];x.sort((C,A)=>C.getTime()-A.getTime()),c(x),p(null),d(null);return}if(l[0]&&!l[1]&&Ct(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(x=>Ct(x).isSame(S,t))?c(l.filter(x=>!Ct(x).isSame(S,t))):c([...l,S]);return}l&&o&&Ct(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?zpe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?zpe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Ct(S).isSame(l[0],t)?!(h&&Ct(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Ct(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Ct(h).isBefore(l[0])&&Ct(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(C=>C&&Ct(C).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Ct(C).isSame(S,t)),"data-autofocus":!!l[0]&&Ct(l[0]).isSame(S,t)||void 0};const x=Ct(l).isSame(S,t);return{selected:x,"data-autofocus":x||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const S5t={type:"default",defaultLevel:"month",numberOfColumns:1},tF=Fe((e,t)=>{const n=Te("DatePicker",S5t,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:x,getControlProps:C}=x5t({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:R}=zm({classNames:r,styles:i,props:n}),P=ec();return _.jsx(eF,{ref:t,minLevel:"month",classNames:A,styles:R,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:($,k)=>{x(k),y==null||y($,k)},__onDayClick:($,k)=>{E(k),v==null||v($,k)},getDayProps:$=>({...C($),...f==null?void 0:f($)}),...w,date:I0("add",w.date,P.getTimezone(),b),__timezoneApplied:!0})});tF.classes=eF.classes;tF.displayName="@mantine/dates/DatePicker";function T5t({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ec(),[f,d]=JC(!1),[h,p]=zZ({type:e,value:t,defaultValue:n,onChange:r}),m=OFt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const C5t={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},VZ=Fe((e,t)=>{const n=Te("DatePickerInput",C5t,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...x}=n,{resolvedClassNames:C,resolvedStyles:A}=zm({classNames:c,styles:f,props:n}),{calendarProps:R,others:P}=E5t(x),{_value:$,setValue:k,formattedValue:D,dropdownHandlers:M,dropdownOpened:L,onClear:B,shouldClear:U}=T5t({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),V=Array.isArray($)?$[0]||E:$||E,O=ec();return _.jsx(Z4,{formattedValue:D,dropdownOpened:L,dropdownHandlers:M,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:$,size:p,variant:m,dropdownType:g,...P,type:r,__staticSelector:"DatePickerInput",children:_.jsx(tF,{...R,size:p,variant:m,type:r,value:$,defaultDate:V||zFt({maxDate:b,minDate:v,timezone:O.getTimezone()}),onChange:k,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:I0("add",R.date,O.getTimezone()),__timezoneApplied:!0})})});VZ.classes={...Z4.classes,...tF.classes};VZ.displayName="@mantine/dates/DatePickerInput";var x3e={exports:{}},A5t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I5t=A5t,k5t=I5t;function S3e(){}function T3e(){}T3e.resetWarningCache=S3e;var R5t=function(){function e(r,i,s,o,a,u){if(u!==k5t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:T3e,resetWarningCache:S3e};return n.PropTypes=n,n};x3e.exports=R5t();var N5t=x3e.exports;const Vpe=ol(N5t),Hpe={};function eH(e,t){e===void 0&&(e=Hpe),t===void 0&&(t=Hpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var P5t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),O5t=Object.prototype.hasOwnProperty;function tH(e,t){return O5t.call(e,t)}function nH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)tH(e,i)&&r.push(i);return r}function Rl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function rH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Rv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function C3e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function iH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(iH(e[t]))return!0}else if(typeof e=="object"){for(var r=nH(e),i=r.length,s=0;s<i;s++)if(iH(e[r[s]]))return!0}}return!1}function qpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var A3e=function(e){P5t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,qpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=qpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=A3e,D5t=Rl,hw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=K$(n,this.path);r&&(r=Rl(r));var i=g1(n,{op:"remove",path:this.from}).removed;return g1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=K$(n,this.from);return g1(n,{op:"add",path:this.path,value:Rl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:cI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},$5t={add:function(e,t,n){return rH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:hw.move,copy:hw.copy,test:hw.test,_get:hw._get};function K$(e,t){if(t=="")return e;var n={op:"_get",path:t};return g1(e,n),n.value}function g1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):X$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=K$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=cI(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Rl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=X$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=C3e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!rH(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);rH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=$5t[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=hw[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function nF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Rl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=g1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function M5t(e,t,n){var r=g1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function X$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(hw[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&iH(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=I3e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function I3e(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nF(Rl(t),Rl(e),n||!0);else{n=n||X$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function cI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!cI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!cI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const L5t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:cI,applyOperation:g1,applyPatch:nF,applyReducer:M5t,deepClone:D5t,getValueByPointer:K$,validate:I3e,validator:X$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var HZ=new WeakMap,F5t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),j5t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function B5t(e){return HZ.get(e)}function U5t(e,t){return e.observers.get(t)}function z5t(e,t){e.observers.delete(t.callback)}function V5t(e,t){t.unobserve()}function H5t(e,t){var n=[],r,i=B5t(e);if(!i)i=new F5t(e),HZ.set(e,i);else{var s=U5t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Rl(e),t){r.callback=t,r.next=null;var o=function(){sH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sH(r),clearTimeout(r.next),z5t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new j5t(t,r)),r}function sH(e,t){t===void 0&&(t=!1);var n=HZ.get(e.object);qZ(n.value,e.object,e.patches,"",t),e.patches.length&&nF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function qZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=nH(t),o=nH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(tH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?qZ(c,f,n,r+"/"+Rv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Rv(l),value:Rl(c)}),n.push({op:"replace",path:r+"/"+Rv(l),value:Rl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Rv(l),value:Rl(c)}),n.push({op:"remove",path:r+"/"+Rv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!tH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Rv(l),value:Rl(t[l])})}}}function q5t(e,t,n){n===void 0&&(n=!1);var r=[];return qZ(e,t,r,"",n),r}const W5t=Object.freeze(Object.defineProperty({__proto__:null,compare:q5t,generate:sH,observe:H5t,unobserve:V5t},Symbol.toStringTag,{value:"Module"}));Object.assign({},L5t,W5t,{JsonPatchError:A3e,deepClone:Rl,escapePathComponent:Rv,unescapePathComponent:C3e});var G5t=/("(?:[^\\"]|\\.)*")|[:,]/g,Y5t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(G5t,function(S,x){return x||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const V9=ol(Y5t);function ul(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function va(e){return e==null?null:e.fields}function k3e(e){return e.length===1?K5t(e[0]):X5t(e)}const K5t=e=>function(t){return t[e]},X5t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function ip(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Hc(e,t,n){const r=ip(e);return e=r.length===1?r[0]:e,ul((n&&n.get||k3e)(r),[e],t||e)}const Gk=Hc("id"),Ta=ul(e=>e,[],"identity"),Yg=ul(()=>0,[],"zero"),bS=ul(()=>1,[],"one"),qc=ul(()=>!0,[],"true"),Cg=ul(()=>!1,[],"false");function Q5t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const R3e=0,WZ=1,GZ=2,N3e=3,P3e=4;function YZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q5t,r=e||R3e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=WZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=GZ&&n(t||"warn","WARN",arguments),this},info(){return r>=N3e&&n(t||"log","INFO",arguments),this},debug(){return r>=P3e&&n(t||"log","DEBUG",arguments),this}}}var Be=Array.isArray;function mt(e){return e===Object(e)}const Wpe=e=>e!=="__proto__";function _S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=J5t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;wS(r,s,i[s],o)}return r},{})}function wS(e,t,n,r){if(!Wpe(t))return;let i,s;if(mt(n)&&!Be(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?wS(s,i,n[i]):Wpe(i)&&(s[i]=n[i])}else e[t]=n}function J5t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ma(e){return e==null||e===""?null:+e}const O3e=e=>t=>e*Math.exp(t),D3e=e=>t=>Math.log(e*t),$3e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),M3e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Q$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function rF(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function L3e(e,t){return rF(e,t,ma,Ta)}function F3e(e,t){var n=Math.sign(e[0]);return rF(e,t,D3e(n),O3e(n))}function j3e(e,t,n){return rF(e,t,Q$(n),Q$(1/n))}function B3e(e,t,n){return rF(e,t,$3e(n),M3e(n))}function iF(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function KZ(e,t,n){return iF(e,t,n,ma,Ta)}function XZ(e,t,n){const r=Math.sign(e[0]);return iF(e,t,n,D3e(r),O3e(r))}function J$(e,t,n,r){return iF(e,t,n,Q$(r),Q$(1/r))}function QZ(e,t,n,r){return iF(e,t,n,$3e(r),M3e(r))}function U3e(e){return 1+~~(new Date(e).getMonth()/3)}function z3e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function gt(e){return e!=null?Be(e)?e:[e]:[]}function V3e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const Z5t="descending";function JZ(e,t,n){n=n||{},t=gt(t)||[];const r=[],i=[],s={},o=n.comparator||e8t;return gt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Z5t?-1:1),i.push(a=_n(a)?a:Hc(a,null,n)),(va(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ul(o(i,r),Object.keys(s))}const sF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),e8t=(e,t)=>e.length===1?t8t(e[0],t[0]):n8t(e,t,e.length),t8t=(e,t)=>function(n,r){return sF(e(n),e(r))*t},n8t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=sF(s(r),s(i));return o*t[a]});function Ca(e){return _n(e)?e:()=>e}function ZZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function jh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function H3e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const r8t=Object.prototype.hasOwnProperty;function Ft(e,t){return r8t.call(e,t)}const cP={};function ES(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==cP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===cP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=cP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==cP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function q3e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function ft(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function pw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Uy(e){return typeof e=="boolean"}function k0(e){return Object.prototype.toString.call(e)==="[object Date]"}function W3e(e){return e&&_n(e[Symbol.iterator])}function cr(e){return typeof e=="number"}function G3e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function yt(e){return typeof e=="string"}function eee(e,t,n){e&&(e=t?gt(e).map(a=>a.replace(/\\(.)/g,"$1")):gt(e));const r=e&&e.length,i=n&&n.get||k3e,s=a=>i(t?[a]:ip(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ul(o,e,"key")}function Y3e(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const i8t=1e4;function K3e(e){e=+e||i8t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function X3e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function TC(e,t){let n="";for(;--t>=0;)n+=e;return n}function Q3e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?TC(i,o)+s:r==="center"?TC(i,~~(o/2))+s+TC(i,Math.ceil(o/2)):s+TC(i,o)}function Yk(e){return e&&Qn(e)-e[0]||0}function ot(e){return Be(e)?"["+e.map(ot)+"]":mt(e)||yt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function tee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const s8t=e=>cr(e)||k0(e)?e:Date.parse(e);function nee(e,t){return t=t||s8t,e==null||e===""?null:t(e)}function ree(e){return e==null||e===""?null:e+""}function id(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function J3e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Dg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function o8t(e){return e}function a8t(e){if(e==null)return o8t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function u8t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function l8t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Gpe(e,n)})}:Gpe(e,t)}function Gpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Z3e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Z3e(e,t){var n=a8t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&u8t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function c8t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function f8t(e){return Z3e(e,d8t.apply(this,arguments))}function d8t(e,t,n){var r,i,s;if(arguments.length>1)r=h8t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:c8t(e,r)}}function h8t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const $o="year",tl="quarter",ba="month",Fs="week",nl="date",pa="day",Bh="dayofyear",Gl="hours",Yl="minutes",Wc="seconds",sd="milliseconds",iee=[$o,tl,ba,Fs,nl,pa,Bh,Gl,Yl,Wc,sd],H9=iee.reduce((e,t,n)=>(e[t]=1+n,e),{});function see(e){const t=gt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{Ft(H9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[Fs]||n[pa]?1:0)+(n[tl]||n[ba]||n[nl]?1:0)+(n[Bh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>H9[i]-H9[s]),t}const p8t={[$o]:"%Y ",[tl]:"Q%q ",[ba]:"%b ",[nl]:"%d ",[Fs]:"W%U ",[pa]:"%a ",[Bh]:"%j ",[Gl]:"%H:00",[Yl]:"00:%M",[Wc]:":%S",[sd]:".%L",[`${$o}-${ba}`]:"%Y-%m ",[`${$o}-${ba}-${nl}`]:"%Y-%m-%d ",[`${Gl}-${Yl}`]:"%H:%M"};function e$e(e,t){const n=bn({},p8t,t),r=see(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Uv=new Date;function oee(e){return Uv.setFullYear(e),Uv.setMonth(0),Uv.setDate(1),Uv.setHours(0,0,0,0),Uv}function t$e(e){return r$e(new Date(e))}function n$e(e){return oH(new Date(e))}function r$e(e){return am.count(oee(e.getFullYear())-1,e)}function oH(e){return Qx.count(oee(e.getFullYear())-1,e)}function aH(e){return oee(e).getDay()}function m8t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function i$e(e){return o$e(new Date(e))}function s$e(e){return uH(new Date(e))}function o$e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return w0.count(t-1,e)}function uH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Jx.count(t-1,e)}function lH(e){return Uv.setTime(Date.UTC(e,0,1)),Uv.getUTCDay()}function g8t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function a$e(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,y8t(n[b],r[b],y===o&&s,v)),u=new Date,l=id(e),c=l[$o]?a($o):Ca(2012),f=l[ba]?a(ba):l[tl]?a(tl):Yg,d=l[Fs]&&l[pa]?a(pa,1,Fs+pa):l[Fs]?a(Fs,1):l[pa]?a(pa,1):l[nl]?a(nl,1):l[Bh]?a(Bh,1):bS,h=l[Gl]?a(Gl):Yg,p=l[Yl]?a(Yl):Yg,m=l[Wc]?a(Wc):Yg,g=l[sd]?a(sd):Yg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function y8t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function KE(e,t,n){return t+e*7-(n+6)%7}const v8t={[$o]:e=>e.getFullYear(),[tl]:e=>Math.floor(e.getMonth()/3),[ba]:e=>e.getMonth(),[nl]:e=>e.getDate(),[Gl]:e=>e.getHours(),[Yl]:e=>e.getMinutes(),[Wc]:e=>e.getSeconds(),[sd]:e=>e.getMilliseconds(),[Bh]:e=>r$e(e),[Fs]:e=>oH(e),[Fs+pa]:(e,t)=>KE(oH(e),e.getDay(),aH(t)),[pa]:(e,t)=>KE(1,e.getDay(),aH(t))},b8t={[tl]:e=>3*e,[Fs]:(e,t)=>KE(e,0,aH(t))};function u$e(e,t){return a$e(e,t||1,v8t,b8t,m8t)}const _8t={[$o]:e=>e.getUTCFullYear(),[tl]:e=>Math.floor(e.getUTCMonth()/3),[ba]:e=>e.getUTCMonth(),[nl]:e=>e.getUTCDate(),[Gl]:e=>e.getUTCHours(),[Yl]:e=>e.getUTCMinutes(),[Wc]:e=>e.getUTCSeconds(),[sd]:e=>e.getUTCMilliseconds(),[Bh]:e=>o$e(e),[Fs]:e=>uH(e),[pa]:(e,t)=>KE(1,e.getUTCDay(),lH(t)),[Fs+pa]:(e,t)=>KE(uH(e),e.getUTCDay(),lH(t))},w8t={[tl]:e=>3*e,[Fs]:(e,t)=>KE(e,0,lH(t))};function l$e(e,t){return a$e(e,t||1,_8t,w8t,g8t)}const E8t={[$o]:Nh,[tl]:kA.every(3),[ba]:kA,[Fs]:Qx,[nl]:am,[pa]:am,[Bh]:am,[Gl]:L6,[Yl]:$6,[Wc]:Yp,[sd]:AE},x8t={[$o]:Ph,[tl]:RA.every(3),[ba]:RA,[Fs]:Jx,[nl]:w0,[pa]:w0,[Bh]:w0,[Gl]:F6,[Yl]:M6,[Wc]:Yp,[sd]:AE};function xS(e){return E8t[e]}function SS(e){return x8t[e]}function c$e(e,t,n){return e?e.offset(t,n):void 0}function f$e(e,t,n){return c$e(xS(e),t,n)}function d$e(e,t,n){return c$e(SS(e),t,n)}function h$e(e,t,n,r){return e?e.range(t,n,r):void 0}function p$e(e,t,n,r){return h$e(xS(e),t,n,r)}function m$e(e,t,n,r){return h$e(SS(e),t,n,r)}const CC=1e3,AC=CC*60,IC=AC*60,oF=IC*24,S8t=oF*7,Ype=oF*30,cH=oF*365,g$e=[$o,ba,nl,Gl,Yl,Wc,sd],kC=g$e.slice(0,-1),RC=kC.slice(0,-1),NC=RC.slice(0,-1),T8t=NC.slice(0,-1),C8t=[$o,Fs],Kpe=[$o,ba],y$e=[$o],TT=[[kC,1,CC],[kC,5,5*CC],[kC,15,15*CC],[kC,30,30*CC],[RC,1,AC],[RC,5,5*AC],[RC,15,15*AC],[RC,30,30*AC],[NC,1,IC],[NC,3,3*IC],[NC,6,6*IC],[NC,12,12*IC],[T8t,1,oF],[C8t,1,S8t],[Kpe,1,Ype],[Kpe,3,3*Ype],[y$e,1,cH]];function v$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Yk(t))/n;let i=Wx(a=>a[2]).right(TT,r),s,o;return i===TT.length?(s=y$e,o=U0(t[0]/cH,t[1]/cH,n)):i?(i=TT[r/TT[i-1][2]<TT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=g$e,o=Math.max(U0(t[0],t[1],n),1)),{units:s,step:o}}function PC(e){const t={};return n=>t[n]||(t[n]=e(n))}function A8t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=I8t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function I8t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function b$e(e){const t=PC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=L1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return A8t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=L1(o??",f");const a=U0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=$Ce(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=MCe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=DCe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let fH;_$e();function _$e(){return fH=b$e({format:Yx,formatPrefix:CX})}function w$e(e){return b$e(OCe(e))}function Z$(e){return arguments.length?fH=w$e(e):fH}function Xpe(e,t,n){n=n||{},mt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(Wc),i=t(Yl),s=t(Gl),o=t(nl),a=t(Fs),u=t(ba),l=t(tl),c=t($o),f=e(n[sd]||".%L"),d=e(n[Wc]||":%S"),h=e(n[Yl]||"%I:%M"),p=e(n[Gl]||"%I %p"),m=e(n[nl]||n[pa]||"%a %d"),g=e(n[Fs]||"%b %d"),y=e(n[ba]||"%B"),v=e(n[tl]||"%B"),b=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function E$e(e){const t=PC(e.format),n=PC(e.utcFormat);return{timeFormat:r=>yt(r)?t(r):Xpe(t,xS,r),utcFormat:r=>yt(r)?n(r):Xpe(n,SS,r),timeParse:PC(e.parse),utcParse:PC(e.utcParse)}}let dH;x$e();function x$e(){return dH=E$e({format:BX,parse:Y2e,utcFormat:j6,utcParse:K2e})}function S$e(e){return E$e(V2e(e))}function fI(e){return arguments.length?dH=S$e(e):dH}const hH=(e,t)=>bn({},e,t);function T$e(e,t){const n=e?w$e(e):Z$(),r=t?S$e(t):fI();return hH(n,r)}function aee(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?hH(Z$(e),fI(t)):hH(Z$(),fI())}function k8t(){return _$e(),x$e(),aee()}const R8t=/^(data:|([A-Za-z]+:)?\/\/)/,N8t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,P8t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Qpe="file://";function O8t(e,t){return n=>({options:n||{},sanitize:$8t,load:D8t,fileAccess:!!t,file:M8t(t),http:F8t(e)})}async function D8t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function $8t(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=N8t.test(e.replace(P8t,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+ot(e));const u=R8t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Qpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Qpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function M8t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):L8t}async function L8t(){Le("No file system access.")}function F8t(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:j8t}async function j8t(){Le("No HTTP fetch method available.")}const B8t=e=>e!=null&&e===e,U8t=e=>e==="true"||e==="false"||e===!0||e===!1,z8t=e=>!Number.isNaN(Date.parse(e)),C$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),V8t=e=>C$e(e)&&Number.isInteger(+e),pH={boolean:tee,integer:ma,number:ma,date:nee,string:ree,unknown:Ta},fP=[U8t,V8t,C$e,z8t],H8t=["boolean","integer","number","date"];function A$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=fP.length,i=fP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&B8t(u)&&!fP[a](u)&&(i[a]=0,++o,o===fP.length))return"string";return H8t[i.reduce((s,o)=>s===0?o:s,0)-1]}function I$e(e,t){return t.reduce((n,r)=>(n[r]=A$e(e,r),n),{})}function Jpe(e){const t=function(n,r){const i={delimiter:e};return uee(n,r?bn(r,i):i)};return t.responseType="text",t}function uee(e,t){return t.header&&(e=t.header.map(ot).join(t.delimiter)+`
`+e),RCe(t.delimiter).parse(e+"")}uee.responseType="text";function q8t(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function lee(e,t){const n=t&&t.property?Hc(t.property):Ta;return mt(e)&&!q8t(e)?W8t(n(e),t):n(JSON.parse(e))}lee.responseType="json";function W8t(e,t){return!Be(e)&&W3e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const G8t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function k$e(e,t){let n,r,i,s;return e=lee(e,t),t&&t.feature?(n=l8t,i=t.feature):t&&t.mesh?(n=f8t,i=t.mesh,s=G8t[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}k$e.responseType="json";const jO={dsv:uee,csv:Jpe(","),tsv:Jpe("	"),json:lee,topojson:k$e};function cee(e,t){return arguments.length>1?(jO[e]=t,this):Ft(jO,e)?jO[e]:null}function R$e(e){const t=cee(e);return t&&t.responseType||"text"}function N$e(e,t,n,r){t=t||{};const i=cee(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Y8t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function Y8t(e,t,n,r){if(!e.length)return;const i=fI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=I$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!pH[p])throw Error("Illegal format pattern: "+h+":"+p);return pH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const aF=O8t(typeof fetch<"u"&&fetch,null);function uF(e){const t=e||Ta,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function BO(e,t){try{await t(e)}catch(n){e.error(n)}}const P$e=Symbol("vega_id");let K8t=1;function lF(e){return!!(e&&Mt(e))}function Mt(e){return e[P$e]}function O$e(e,t){return e[P$e]=t,e}function Er(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:O$e(t,K8t++)}function fee(e){return cF(e,Er({}))}function cF(e,t){for(const n in e)t[n]=e[n];return t}function D$e(e,t){return O$e(t,Mt(e))}function Db(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function $$e(e){return e&&e.constructor===$b}function $b(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:$b,insert(a){const u=gt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=gt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ca(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(Er(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const UO="_:mod:_";function fF(){Object.defineProperty(this,UO,{writable:!0,value:{}})}fF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[UO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Be(n)?1+n.length:-1),i},modified(e,t){const n=this[UO];if(arguments.length){if(Be(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[UO]={},this}};let X8t=0;const Q8t="pulse",J8t=new fF,Z8t=1,ejt=2;function Xr(e,t,n,r){this.id=++X8t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Zpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Xr.prototype={targets(){return this._targets||(this._targets=uF(Gk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Zpe(Z8t),modified:Zpe(ejt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new fF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Xr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Q8t)gt(a).forEach(f=>{f instanceof Xr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(Be(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||J8t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function tjt(e,t,n,r){let i=1,s;return e instanceof Xr?s=e:e&&e.prototype instanceof Xr?s=new e:_n(e)?s=new Xr(null,e):(i=0,s=new Xr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function njt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let rjt=0;function dF(e,t,n){this.id=++rjt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ag(e,t,n){return new dF(e,t,n)}dF.prototype={_filter:qc,_apply:Ta,targets(){return this._targets||(this._targets=uF(Gk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ag(e);return this.targets().add(t),t},apply(e){const t=Ag(null,e);return this.targets().add(t),t},merge(){const e=Ag();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ag();return this.targets().add(Ag(null,null,ZZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ag(null,null,()=>n=!0)),t.targets().add(Ag(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=qc,this._targets=null}};function ijt(e,t,n,r){const i=this,s=Ag(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=gt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function sjt(e,t){const n=this.locale();return N$e(e,t,n.timeParse,n.utcParse)}function ojt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ajt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:R$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function ujt(e,t,n){const r=this,i=r._pending||ljt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(qc).insert(s.data||[])),i.done(),s}function ljt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const cjt={skip:!0};function fjt(e,t,n,r,i){return(e instanceof Xr?hjt:djt)(this,e,t,n,r,i),this}function djt(e,t,n,r,i,s){const o=bn({},s,cjt);let a,u;_n(n)||(n=Ca(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Xr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;$$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function hjt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Xr(null,pjt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function pjt(e,t){return t=_n(t)?t:Ca(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function mjt(e){e.rank=++this._rank}function gjt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const eM={},Vd=1,$g=2,Np=4,yjt=Vd|$g,eme=Vd|Np,b_=Vd|$g|Np,tme=8,CT=16,nme=32,rme=64;function R0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function q9(e,t){const n=[];return Dg(e,t,r=>n.push(r)),n}function ime(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function dP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}R0.prototype={StopPropagation:eM,ADD:Vd,REM:$g,MOD:Np,ADD_REM:yjt,ADD_MOD:eme,ALL:b_,REFLOW:tme,SOURCE:CT,NO_SOURCE:nme,NO_FIELDS:rme,fork(e){return new R0(this.dataflow).init(this,e)},clone(){const e=this.fork(b_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(b_|CT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new R0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&rme)&&(n.fields=e.fields),t&Vd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&$g?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Np?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&nme?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||b_;return t&Vd&&this.add.length||t&$g&&this.rem.length||t&Np&&this.mod.length},reflow(e){if(e)return this.fork(b_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Np,ime(this,Vd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Be(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Be(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Vd&&(n.addF=dP(n.addF,t)),e&$g&&(n.remF=dP(n.remF,t)),e&Np&&(n.modF=dP(n.modF,t)),e&CT&&(n.srcF=dP(n.srcF,t)),n},materialize(e){e=e||b_;const t=this;return e&Vd&&t.addF&&(t.add=q9(t.add,t.addF),t.addF=null),e&$g&&t.remF&&(t.rem=q9(t.rem,t.remF),t.remF=null),e&Np&&t.modF&&(t.mod=q9(t.mod,t.modF),t.modF=null),e&CT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&CT)return Dg(n.source,n.srcF,r),n;e&Vd&&Dg(n.add,n.addF,r),e&$g&&Dg(n.rem,n.remF,r),e&Np&&Dg(n.mod,n.modF,r);const i=n.source;if(e&tme&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Dg(i,ime(n,eme),r):Dg(i,n.srcF,r))}return n}};function dee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ft(dee,R0,{fork(e){const t=new R0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Be(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function vjt(e,t,n){const r=this,i=[];if(r._pulse)return M$e(r);if(r._pending&&await r._pending,t&&await BO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new R0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=uF(Gk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=eM),u!==eM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await BO(r,c[f].callback)}return n&&await BO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function bjt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function _jt(e,t,n){return this._pulse?M$e(this):(this.evaluate(e,t,n),this)}function wjt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function M$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Ejt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function xjt(e,t){const n=e.source,r=this._clock;return n&&Be(n)?new dee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Sjt(this._pulse,n&&n.pulse)}function Sjt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==eM&&(e.source=t.source),e)}const hee={skip:!1,force:!1};function Tjt(e,t){const n=t||hee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Cjt(e,t,n){const r=n||hee;return(e.set(t)||r.force)&&this.touch(e,r),this}function Ajt(e,t,n){this.touch(e,n||hee);const r=new R0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Ijt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),L$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,kjt(t,0,e)):r=n,r}}}function L$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function kjt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,L$e(e,r,t,n)}function Yw(){this.logger(YZ()),this.logLevel(WZ),this._clock=0,this._rank=0,this._locale=aee();try{this._loader=aF()}catch{}this._touched=uF(Gk),this._input={},this._pulse=null,this._heap=Ijt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function AT(e){return function(){return this._log[e].apply(this,arguments)}}Yw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:AT("error"),warn:AT("warn"),info:AT("info"),debug:AT("debug"),logLevel:AT("level"),cleanThreshold:1e4,add:tjt,connect:njt,rank:mjt,rerank:gjt,pulse:Ajt,touch:Tjt,update:Cjt,changeset:$b,ingest:ojt,parse:sjt,preload:ujt,request:ajt,events:ijt,on:fjt,evaluate:vjt,run:_jt,runAsync:bjt,runAfter:wjt,_enqueue:Ejt,_getPulse:xjt};function Re(e,t){Xr.call(this,e,null,t)}ft(Re,Xr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const XE={};function F$e(e){const t=j$e(e);return t&&t.Definition||null}function j$e(e){return e=e&&e.toLowerCase(),Ft(XE,e)?XE[e]:null}function*B$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function pee(e,t,n){const r=Float64Array.from(B$e(e,n));return r.sort(sm),t.map(i=>OTe(r,i))}function mee(e,t){return pee(e,[.25,.5,.75],t)}function gee(e,t){const n=e.length,r=zpt(e,t),i=mee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function U$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Gc=Math.random;function Rjt(e){Gc=e}function z$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(B$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Gc()*s)];c[l]=a/s}return c.sort(sm),[K7(c,n/2),K7(c,1-n/2)]}function V$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Njt(s,t+t/4):s}function Njt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Pjt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Ojt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Gc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const H$e=Math.sqrt(2*Math.PI),Djt=Math.SQRT2;let IT=NaN;function hF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(IT===IT)n=IT,IT=NaN;else{do n=Gc()*2-1,r=Gc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,IT=r*s}return e+n*t}function yee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*H$e)}function pF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function mF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Djt*$jt(2*e-1)}function $jt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function vee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>hF(n,r),pdf:s=>yee(s,n,r),cdf:s=>pF(s,n,r),icdf:s=>mF(s,n,r)};return i.mean(e).stdev(t)}function bee(e,t){const n=vee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=gee(e)),i):t},sample(){return e[~~(Gc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function _ee(e,t){return e=e||0,t=t??1,Math.exp(e+hF()*t)}function wee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*H$e*e)}function Eee(e,t,n){return pF(Math.log(e),t,n)}function xee(e,t,n){return Math.exp(mF(e,t,n))}function q$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>_ee(n,r),pdf:s=>wee(s,n,r),cdf:s=>Eee(s,n,r),icdf:s=>xee(s,n,r)};return i.mean(e).stdev(t)}function W$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Gc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function See(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Gc()}function Tee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Cee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Aee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function G$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>See(n,r),pdf:s=>Tee(s,n,r),cdf:s=>Cee(s,n,r),icdf:s=>Aee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Iee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Kk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function gF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Xk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function TS(e,t,n,r,i){let s=0,o=0;return Xk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function kee(e,t,n){let r=0,i=0,s=0,o=0,a=0;Xk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Kk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:TS(e,t,n,i,l)}}function Y$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;Xk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Kk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:TS(e,t,n,i,l)}}function K$e(e,t,n){const[r,i,s,o]=gF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Xk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Kk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:TS(e,t,n,o,y)}}function X$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Xk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Kk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:TS(e,t,n,a,c)}}function Ree(e,t,n){const[r,i,s,o]=gF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=x=>(x=x-s,b*x*x+w*x+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:TS(e,t,n,o,S)}}function Q$e(e,t,n,r){if(r===0)return Iee(e,t,n);if(r===1)return kee(e,t,n);if(r===2)return Ree(e,t,n);const[i,s,o,a]=gF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Ljt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:Mjt(f,y,-o,a),predict:v,rSquared:TS(e,t,n,a,v)}}function Mjt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Ljt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const sme=2,ome=1e-12;function J$e(e,t,n,r){const[i,s,o,a]=gF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=sme;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,x=0,C=0,A=0;const R=1/Math.abs(i[w]-y||1);for(let k=v;k<=b;++k){const D=i[k],M=s[k],L=Fjt(Math.abs(y-D)*R)*d[k],B=D*L;E+=L,S+=B,x+=M*L,C+=M*B,A+=D*B}const[P,$]=Kk(S/E,x/E,C/E,A/E);c[g]=P+$*y,f[g]=Math.abs(s[g]-c[g]),jjt(i,g+1,p)}if(h===sme)break;const m=$Te(f);if(Math.abs(m)<ome)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?ome:(v=1-y*y)*v}return Bjt(i,c,o,a)}function Fjt(e){return(e=1-e*e*e)*e*e}function jjt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Bjt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const Ujt=.5*Math.PI/180;function yF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=zjt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Vjt(f,m,d,h,p)>Ujt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function zjt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Vjt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Hjt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function mH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Hjt(e)}function Z$e(e,t,n){return n||e+(t?"_"+t:"")}const W9=()=>{},qjt={init:W9,add:W9,rem:W9,idx:0},dI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Qk=Object.keys(dI).filter(e=>e!=="__count__");function Wjt(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},qjt,t)}[...Qk,"__count__"].forEach(e=>{dI[e]=Wjt(e,dI[e])});function eMe(e,t,n){return dI[e](n,t)}function tMe(e,t){return e.idx-t.idx}function Gjt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=dI[i]())})};return e.forEach(n),Object.values(t).sort(tMe)}function Yjt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Kjt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Xjt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Qjt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function nMe(e,t){const n=t||Ta,r=Gjt(e),i=e.slice().sort(tMe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Yjt,s.prototype.add=Kjt,s.prototype.rem=Xjt,s.prototype.set=Qjt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Nee(e){this._key=e?Hc(e):Mt,this.reset()}const Vo=Nee.prototype;Vo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Vo.add=function(e){this._add.push(e)};Vo.rem=function(e){this._rem.push(e)};Vo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Vo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Vo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=H3e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Vo.argmin=function(e){return this.extent(e)[0]||{}};Vo.argmax=function(e){return this.extent(e)[1]||{}};Vo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Vo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Vo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=mee(this.values(),e),this._get=e),this._q};Vo.q1=function(e){return this.quartile(e)[0]};Vo.q2=function(e){return this.quartile(e)[1]};Vo.q3=function(e){return this.quartile(e)[2]};Vo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=z$e(this.values(),1e3,.05,e),this._get=e),this._ci};Vo.ci0=function(e){return this.ci(e)[0]};Vo.ci1=function(e){return this.ci(e)[1]};function oy(e){Re.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}oy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Qk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ft(oy,Re,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=gt(va(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=gt(e.groupby),this._dnames=this._dims.map(v=>{const b=Zi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:mH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Zi(f),g=Z$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(eMe(d,h,g))}return this._measures=this._measures.map(v=>nMe(v,v.field)),Object.create(null)},cellkey:mH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Nee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?D$e(t.tuple,s):Er(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Jjt=1e-14;function Pee(e){Re.call(this,null,e)}Pee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ft(Pee,Re,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(va(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=U$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ma(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Jjt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ul(u,va(t),e.name||"bin_"+Zi(t))}});function rMe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?X3e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Oee(e){Re.call(this,[],e)}Oee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ft(Oee,Re,{transform(e,t){const n=t.fork(t.ALL),r=rMe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Db(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function iMe(e){Xr.call(this,null,Zjt,e)}ft(iMe,Xr);function Zjt(e){return this.value&&!e.modified()?this.value:JZ(e.fields,e.orders)}function Dee(e){Re.call(this,null,e)}Dee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function e9t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ft(Dee,Re,{transform(e,t){const n=f=>d=>{for(var h=e9t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Er({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function $ee(e){Re.call(this,null,e)}$ee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ft($ee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=t9t(a,i,s,e.filter||qc)):n.mod=a,n.source=this.value,n.modifies(r)}});function t9t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Er(s)),s={},s[t]=l);return i}const ame={kde:bee,mixture:W$e,normal:vee,lognormal:q$e,uniform:G$e},n9t="distributions",ume="function",r9t="field";function sMe(e,t){const n=e[ume];Ft(ame,n)||Le("Unknown distribution function: "+n);const r=ame[n]();for(const i in e)i===r9t?r.data((e.from||t()).map(e[i])):i===n9t?r[i](e[i].map(s=>sMe(s,t))):typeof r[i]===ume&&r[i](e[i]);return r}function Mee(e){Re.call(this,null,e)}const oMe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],i9t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:oMe},{name:"weights",type:"number",array:!0}]};Mee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:oMe.concat(i9t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(Mee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=sMe(e.distribution,s9t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||jh(r.data()),l=yF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Er(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function s9t(e){return()=>e.materialize(e.SOURCE).source}function aMe(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function Lee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const uMe="bin";function Fee(e){Re.call(this,null,e)}Fee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:uMe}]};const o9t=(e,t)=>Yk(jh(e,t))/30;ft(Fee,Re,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Lee(t.source,e.groupby,Ta),i=e.smooth||!1,s=e.field,o=e.step||o9t(n,s),a=Db((p,m)=>s(p)-s(m)),u=e.as||uMe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of V$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function lMe(e){Xr.call(this,null,a9t,e),this.modified(!0)}ft(lMe,Xr);function a9t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ul(n=>t(n,e),va(t),Zi(t))}function jee(e){Re.call(this,[void 0,void 0],e)}jee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ft(jee,Re,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ma(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Bee(e,t){Xr.call(this,e),this.parent=t,this.count=0}ft(Bee,Xr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function vF(e){Re.call(this,{},e),this._keys=ES();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ft(vF,Re,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Bee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function cMe(e){Xr.call(this,null,u9t,e)}ft(cMe,Xr);function u9t(e){return this.value&&!e.modified()?this.value:Be(e.name)?gt(e.name).map(t=>Hc(t)):Hc(e.name,e.as)}function Uee(e){Re.call(this,ES(),e)}Uee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ft(Uee,Re,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function zee(e){Re.call(this,[],e)}zee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ft(zee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=aMe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=fee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Vee(e){Re.call(this,[],e)}Vee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ft(Vee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=fee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Hee(e){Re.call(this,null,e)}Hee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ft(Hee,Re,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function fMe(e){Re.call(this,[],e)}ft(fMe,Re,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Er(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const hP={value:"value",median:$Te,mean:DTe,min:Y7,max:Nc},l9t=[];function qee(e){Re.call(this,[],e)}qee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function c9t(e){var t=e.method||hP.value,n;if(hP[t]==null)Le("Unrecognized imputation method: "+t);else return t===hP.value?(n=e.value!==void 0?e.value:0,()=>n):hP[t]}function f9t(e){const t=e.field;return n=>n?t(n):NaN}ft(qee,Re,{transform(e,t){var n=t.fork(t.ALL),r=c9t(e),i=f9t(e),s=Zi(e.field),o=Zi(e.key),a=(e.groupby||[]).map(Zi),u=d9t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Er(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function d9t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):l9t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Wee(e){oy.call(this,e)}Wee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Qk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ft(Wee,oy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Gee(e){Re.call(this,null,e)}Gee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(Gee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Lee(r,e.groupby,e.field),s=(e.groupby||[]).map(Zi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=jh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=bee(h,o)[a],m=e.counts?h.length:1,g=c||jh(h);yF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Er(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function dMe(e){Xr.call(this,null,h9t,e)}ft(dMe,Xr);function h9t(e){return this.value&&!e.modified()?this.value:eee(e.fields,e.flat)}function hMe(e){Re.call(this,[],e),this._pending=null}ft(hMe,Re,{transform(e,t){const n=t.dataflow;return this._pending?G9(this,t,this._pending):p9t(e)?t.StopPropagation:e.values?G9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=gt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>G9(this,t,gt(r.data)))}});function p9t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function G9(e,t,n){n.forEach(Er);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Yee(e){Re.call(this,{},e)}Yee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ft(Yee,Re,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function pMe(e){Xr.call(this,null,m9t,e)}ft(pMe,Xr);function m9t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function mMe(e){Xr.call(this,null,g9t,e)}ft(mMe,Xr);function g9t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function gMe(e){Re.call(this,null,e)}ft(gMe,Re,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Kee(e){oy.call(this,e)}Kee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Qk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ft(Kee,oy,{_transform:oy.prototype.transform,transform(e,t){return this._transform(y9t(e,t),t)}});function y9t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=va(n).concat(va(r)),o=b9t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>v9t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function v9t(e,t,n,r){return ul(i=>t(i)===e?n(i):NaN,r,e+"")}function b9t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(sF),t?i.slice(0,t):i}function yMe(e){vF.call(this,e)}ft(yMe,vF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(va(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Er(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Xee(e){Re.call(this,null,e)}Xee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ft(Xee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=aMe(e.fields,e.as||[]),s=r?(a,u)=>_9t(a,u,r,i):cF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Er({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function _9t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function vMe(e){Re.call(this,null,e)}ft(vMe,Re,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Qee(e){Re.call(this,null,e)}Qee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const w9t=1e-14;ft(Qee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Lee(i,e.groupby,e.field),o=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||Mu(u/2,1-w9t,u),c=l.length;return s.forEach(f=>{const d=pee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Er(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function bMe(e){Re.call(this,null,e)}ft(bMe,Re,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=fee(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Jee(e){Re.call(this,[],e),this.count=0}Jee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ft(Jee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Gc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function Zee(e){Re.call(this,null,e)}Zee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ft(Zee,Re,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Er(s)}),n.add=t.add.concat(this.value),n}});function _Me(e){Re.call(this,null,e),this.modified(!0)}ft(_Me,Re,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ete(e){Re.call(this,null,e)}const wMe=["unit0","unit1"];ete.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:iee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:wMe}]};ft(ete,Re,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?SS:xS)(s.unit).offset,a=e.as||wMe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(va(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:v$e({extent:e.extent||jh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=see(r),o=this.value||{},a=(n?l$e:u$e)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function EMe(e){Re.call(this,ES(),e)}ft(EMe,Re,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function xMe(e){Re.call(this,null,e)}ft(xMe,Re,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Db(e.sort)):t.source).map(e.field))}});function E9t(e,t,n,r){const i=hI[e](t,n);return{init:i.init||Yg,update:function(s,o){o[r]=i.next(s)}}}const hI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=hI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=hI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=x9t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function x9t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const S9t=Object.keys(hI);function SMe(e){const t=gt(e.ops),n=gt(e.fields),r=gt(e.params),i=gt(e.aggregate_params),s=gt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){gt(va(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Zi(g),w=Z$e(p,b,s[m]);if(h(g),o.push(w),Ft(hI,p))a.push(E9t(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(eMe(p,v,w))}}),(c.length||f.length)&&(this.cell=T9t(f,c,d)),this.inputs=Object.keys(u)}const TMe=SMe.prototype;TMe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};TMe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function T9t(e,t,n){e=e.map(u=>nMe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Nee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function tte(e){Re.call(this,{},e),this._mlen=0,this._mods=[]}tte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:S9t.concat(Qk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ft(tte,Re,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Db(e.sort),i=mH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new SMe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)C9t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=rMe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function C9t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Wx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ca(-1)};t.init();for(let f=0;f<u;++f)A9t(c,o,f,u),s&&I9t(c,l),t.update(c,a[f])}function A9t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function I9t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const k9t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:oy,bin:Pee,collect:Oee,compare:iMe,countpattern:Dee,cross:$ee,density:Mee,dotbin:Fee,expression:lMe,extent:jee,facet:vF,field:cMe,filter:Uee,flatten:zee,fold:Vee,formula:Hee,generate:fMe,impute:qee,joinaggregate:Wee,kde:Gee,key:dMe,load:hMe,lookup:Yee,multiextent:pMe,multivalues:mMe,params:gMe,pivot:Kee,prefacet:yMe,project:Xee,proxy:vMe,quantile:Qee,relay:bMe,sample:Jee,sequence:Zee,sieve:_Me,subflow:Bee,timeunit:ete,tupleindex:EMe,values:xMe,window:tte},Symbol.toStringTag,{value:"Module"}));function N0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const R9t=()=>typeof Image<"u"?Image:null;function nte(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const N9t="identity",QE="linear",jm="log",Jk="pow",Zk="sqrt",bF="symlog",Q1="time",J1="utc",Sh="sequential",CS="diverging",JE="quantile",_F="quantize",wF="threshold",rte="ordinal",gH="point",CMe="band",ite="bin-ordinal",Ys="continuous",eR="discrete",tR="discretizing",of="interpolating",ste="temporal";function P9t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function O9t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ote(){const e=Xx().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=nte(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Mu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,B0(h,m)-1),v=m===g?y:B0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return ote().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function AMe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return AMe(t())},e}function D9t(){return AMe(ote().paddingInner(1))}var $9t=Array.prototype.map;function M9t(e){return $9t.call(e,ma)}const L9t=Array.prototype.slice;function IMe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(B0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=M9t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=L9t.call(r),n):t.slice()},n.tickFormat=function(r,i){return O2e(e[0],Qn(e),r??10,i)},n.copy=function(){return IMe().domain(n.domain()).range(n.range())},n}const tM=new Map,kMe=Symbol("vega_scale");function RMe(e){return e[kMe]=!0,e}function F9t(e){return e&&e[kMe]===!0}function j9t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?P9t(s):s.invertExtent?O9t(s):void 0),s.type=e,RMe(s)};return r.metadata=id(gt(n)),r}function gr(e,t,n){return arguments.length>1?(tM.set(e,j9t(e,t,n)),this):NMe(e)?tM.get(e):void 0}gr(N9t,D2e);gr(QE,Rh,Ys);gr(jm,M2e,[Ys,jm]);gr(Jk,FX,Ys);gr(Zk,T_t,Ys);gr(bF,L2e,Ys);gr(Q1,X2e,[Ys,ste]);gr(J1,Bwt,[Ys,ste]);gr(Sh,zX,[Ys,of]);gr(`${Sh}-${QE}`,zX,[Ys,of]);gr(`${Sh}-${jm}`,Q2e,[Ys,of,jm]);gr(`${Sh}-${Jk}`,VX,[Ys,of]);gr(`${Sh}-${Zk}`,Uwt,[Ys,of]);gr(`${Sh}-${bF}`,J2e,[Ys,of]);gr(`${CS}-${QE}`,Z2e,[Ys,of]);gr(`${CS}-${jm}`,eAe,[Ys,of,jm]);gr(`${CS}-${Jk}`,HX,[Ys,of]);gr(`${CS}-${Zk}`,zwt,[Ys,of]);gr(`${CS}-${bF}`,tAe,[Ys,of]);gr(JE,F2e,[tR,JE]);gr(_F,j2e,tR);gr(wF,B2e,tR);gr(ite,IMe,[eR,tR]);gr(rte,Xx,eR);gr(CMe,ote,eR);gr(gH,D9t,eR);function NMe(e){return tM.has(e)}function Mb(e,t){const n=tM.get(e);return n&&n.metadata[t]}function ate(e){return Mb(e,Ys)}function ZE(e){return Mb(e,eR)}function yH(e){return Mb(e,tR)}function PMe(e){return Mb(e,jm)}function B9t(e){return Mb(e,ste)}function OMe(e){return Mb(e,of)}function DMe(e){return Mb(e,JE)}const U9t=["clamp","base","constant","exponent"];function $Me(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function EF(e,t,n){return gX(ute(t||"rgb",n),e)}function MMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function LMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ca(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),U9t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function ute(e,t){const n=v0t[z9t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function z9t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const V9t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},H9t={accent:Hwt,category10:Vwt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:qwt,observable10:Wwt,paired:Gwt,pastel1:Ywt,pastel2:Kwt,set1:Xwt,set2:Qwt,set3:Jwt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function FMe(e){if(Be(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function jMe(e,t){for(const n in e)lte(n,t(e[n]))}const lme={};jMe(H9t,FMe);jMe(V9t,e=>EF(FMe(e)));function lte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(lme[e]=t,this):lme[e]}const zO="symbol",q9t="discrete",W9t="gradient",G9t=e=>Be(e)?e.map(t=>String(t)):String(e),Y9t=(e,t)=>e[1]-t[1],K9t=(e,t)=>t[1]-e[1];function cte(e,t,n){let r;return cr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Yk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),yt(t)&&(t=e.type===Q1?xS(t):e.type==J1?SS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function BMe(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Y9t;if(i>s&&(r=s,s=i,i=r,o=K9t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function fte(e,t){return e.bins?BMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function UMe(e,t,n,r,i,s){const o=t.type;let a=G9t;if(o===Q1||i===Q1)a=e.timeFormat(r);else if(o===J1||i===J1)a=e.utcFormat(r);else if(PMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=zMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function zMe(e,t,n){const r=fte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const vH={[JE]:"quantiles",[_F]:"thresholds",[wF]:"domain"},VMe={[JE]:"quantiles",[_F]:"domain"};function HMe(e,t){return e.bins?J9t(e.bins):e.type===jm?zMe(e,t,!0):vH[e.type]?Q9t(e[vH[e.type]]()):fte(e,t)}function X9t(e,t,n){const r=t[VMe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Q9t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function J9t(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const Z9t=e=>vH[e.type]||e.bins;function qMe(e,t,n,r,i,s,o){const a=VMe[t.type]&&s!==Q1&&s!==J1?X9t(e,t,i):UMe(e,t,n,i,s,o);return r===zO&&Z9t(t)?eBt(a):r===q9t?tBt(a):nBt(a)}const eBt=e=>(t,n,r)=>{const i=cme(r[n+1],cme(r.max,1/0)),s=fme(t,e),o=fme(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},cme=(e,t)=>e??t,tBt=e=>(t,n)=>n?e(t):null,nBt=e=>t=>e(t),fme=(e,t)=>Number.isFinite(e)?t(e):null;function rBt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===wF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function iBt(e,t,n,r){const i=r||t.type;return yt(n)&&B9t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Q1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===J1?e.utcFormat("%A, %d %B %Y, %X UTC"):qMe(e,t,5,null,n,r,!0)}function WMe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=iBt(e,t,n.format,n.formatType);if(yH(t.type)){const s=HMe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(ZE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let GMe=0;function sBt(){GMe=0}const nM="p_";function dte(e){return e&&e.gradient}function YMe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?nM:"";return i||(i=e.id="gradient_"+GMe++,r==="radial"?(e.x1=Nd(e.x1,.5),e.y1=Nd(e.y1,.5),e.r1=Nd(e.r1,0),e.x2=Nd(e.x2,.5),e.y2=Nd(e.y2,.5),e.r2=Nd(e.r2,.5),s=nM):(e.x1=Nd(e.x1,0),e.y1=Nd(e.y1,0),e.x2=Nd(e.x2,1),e.y2=Nd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Nd(e,t){return e??t}function KMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const dme={basis:{curve:Dz},"basis-closed":{curve:cEt},"basis-open":{curve:fEt},bundle:{curve:dEt,tension:"beta",value:.85},cardinal:{curve:hEt,tension:"tension",value:0},"cardinal-open":{curve:mEt,tension:"tension",value:0},"cardinal-closed":{curve:pEt,tension:"tension",value:0},"catmull-rom":{curve:gEt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:yEt,tension:"alpha",value:.5},"catmull-rom-open":{curve:vEt,tension:"alpha",value:.5},linear:{curve:qX},"linear-closed":{curve:bEt},monotone:{horizontal:wEt,vertical:_Et},natural:{curve:EEt},step:{curve:xEt},"step-after":{curve:TEt},"step-before":{curve:SEt}};function hte(e,t,n){var r=Ft(dme,e)&&dme[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const oBt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},aBt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,uBt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lBt=/^((\s+,?\s*)|(,\s*))/,cBt=/^[01]/;function ex(e){const t=[];return(e.match(aBt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=oBt[s],a=fBt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function fBt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?cBt:uBt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(lBt);u!==null&&(i+=u[0].length)}return r}const ay=Math.PI/180,dBt=1e-14,zv=Math.PI/2,rh=Math.PI*2,__=Math.sqrt(3)/2;var Y9={},K9={},XMe=[].join;function hBt(e,t,n,r,i,s,o,a,u){const l=XMe.call(arguments);if(Y9[l])return Y9[l];const c=o*ay,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,x=v*e+b*t;let A=1/((S-w)*(S-w)+(x-E)*(x-E))-.25;A<0&&(A=0);let R=Math.sqrt(A);s==i&&(R=-R);const P=.5*(w+S)-R*(x-E),$=.5*(E+x)+R*(S-w),k=Math.atan2(E-$,w-P);let M=Math.atan2(x-$,S-P)-k;M<0&&s===1?M+=rh:M>0&&s===0&&(M-=rh);const L=Math.ceil(Math.abs(M/(zv+.001))),B=[];for(let U=0;U<L;++U){const V=k+U*M/L,O=k+(U+1)*M/L;B[U]=[P,$,V,O,n,r,f,d]}return Y9[l]=B}function pBt(e){const t=XMe.call(e);if(K9[t])return K9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,x=n+g,C=r+y,A=x+w*y,R=C-w*g;return K9[t]=[c*E+f*S,d*E+h*S,c*A+f*R,d*A+h*R,c*x+f*C,d*x+h*C]}const sc=["l",0,0,0,0,0,0,0];function mBt(e,t,n){const r=sc[0]=e[0];if(r==="a"||r==="A")sc[1]=t*e[1],sc[2]=n*e[2],sc[3]=e[3],sc[4]=e[4],sc[5]=e[5],sc[6]=t*e[6],sc[7]=n*e[7];else if(r==="h"||r==="H")sc[1]=t*e[1];else if(r==="v"||r==="V")sc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)sc[i]=(i%2==1?t:n)*e[i];return sc}function pI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=mBt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":hme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":hme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function hme(e,t,n,r){const i=hBt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=pBt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const pme=.5773502691896257,mme={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,rh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n,i=r-n*pme,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n,i=r-n*pme;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function QMe(e){return Ft(mme,e)?mme[e]:gBt(e)}var X9={};function gBt(e){if(!Ft(X9,e)){const t=ex(e);X9[e]={draw:function(n,r){pI(n,t,0,0,Math.sqrt(r)/2)}}}return X9[e]}const _g=.448084975506;function yBt(e){return e.x}function vBt(e){return e.y}function bBt(e){return e.width}function _Bt(e){return e.height}function Ep(e){return typeof e=="function"?e:()=>+e}function pP(e,t,n){return Math.max(t,Math.min(e,n))}function JMe(){var e=yBt,t=vBt,n=bBt,r=_Bt,i=Ep(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=pP(+i.call(this,c),0,v),w=pP(+s.call(this,c),0,v),E=pP(+o.call(this,c),0,v),S=pP(+a.call(this,c),0,v);if(u||(u=h=I6()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var x=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(x-w,m),u.bezierCurveTo(x-_g*w,m,x,m+_g*w,x,m+w),u.lineTo(x,C-S),u.bezierCurveTo(x,C-_g*S,x-_g*S,C,x-S,C),u.lineTo(p+E,C),u.bezierCurveTo(p+_g*E,C,p,C-_g*E,p,C-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+_g*b,p+_g*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ep(c),l):e},l.y=function(c){return arguments.length?(t=Ep(c),l):t},l.width=function(c){return arguments.length?(n=Ep(c),l):n},l.height=function(c){return arguments.length?(r=Ep(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ep(c),s=f!=null?Ep(f):i,a=d!=null?Ep(d):i,o=h!=null?Ep(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function ZMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,rh);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=I6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function nR(e,t){return e??t}const rR=e=>e.x||0,iR=e=>e.y||0,wBt=e=>e.width||0,EBt=e=>e.height||0,xBt=e=>(e.x||0)+(e.width||0),SBt=e=>(e.y||0)+(e.height||0),TBt=e=>e.startAngle||0,CBt=e=>e.endAngle||0,ABt=e=>e.padAngle||0,IBt=e=>e.innerRadius||0,kBt=e=>e.outerRadius||0,RBt=e=>e.cornerRadius||0,NBt=e=>nR(e.cornerRadiusTopLeft,e.cornerRadius)||0,PBt=e=>nR(e.cornerRadiusTopRight,e.cornerRadius)||0,OBt=e=>nR(e.cornerRadiusBottomRight,e.cornerRadius)||0,DBt=e=>nR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$Bt=e=>nR(e.size,64),MBt=e=>e.size||1,xF=e=>e.defined!==!1,LBt=e=>QMe(e.shape||"circle"),FBt=aEt().startAngle(TBt).endAngle(CBt).padAngle(ABt).innerRadius(IBt).outerRadius(kBt).cornerRadius(RBt),jBt=uAe().x(rR).y1(iR).y0(SBt).defined(xF),BBt=uAe().y(iR).x1(rR).x0(xBt).defined(xF),UBt=Y3().x(rR).y(iR).defined(xF),zBt=JMe().x(rR).y(iR).width(wBt).height(EBt).cornerRadius(NBt,PBt,OBt,DBt),VBt=lEt().type(LBt).size($Bt),HBt=ZMe().x(rR).y(iR).defined(xF).size(MBt);function pte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function qBt(e,t){return FBt.context(e)(t)}function WBt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?BBt:jBt).curve(hte(r,n.orient,n.tension)).context(e)(t)}function GBt(e,t){const n=t[0],r=n.interpolate||"linear";return UBt.curve(hte(r,n.orient,n.tension)).context(e)(t)}function AS(e,t,n,r){return zBt.context(e)(t,n,r)}function YBt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function KBt(e,t){return VBt.context(e)(t)}function XBt(e,t){return HBt.context(e)(t)}var eLe=1;function tLe(){eLe=1}function mte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+eLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):pte(n)?o.path=AS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ss(e){this.clear(),e&&this.union(e)}Ss.prototype={clone(){return new Ss(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function SF(e){this.mark=e,this.bounds=this.bounds||new Ss}function TF(e){SF.call(this,e),this.items=this.items||[]}ft(TF,SF);class nLe{constructor(t){this._pending=0,this._loader=t||aF()}pending(){return this._pending}sanitizeURL(t){const n=this;return gme(n),n._loader.sanitize(t,{context:"href"}).then(r=>(kT(n),r)).catch(()=>(kT(n),null))}loadImage(t){const n=this,r=R9t();return gme(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>kT(n),o.onerror=()=>kT(n),o.src=s,o}).catch(i=>(kT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function gme(e){e._pending+=1}function kT(e){e._pending-=1}function rg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?QBt(t,r):0))}return e}function QBt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const JBt=rh-1e-8;let CF,VO,HO,s1,bH,qO,_H,wH;const n0=(e,t)=>CF.add(e,t),WO=(e,t)=>n0(VO=e,HO=t),yme=e=>n0(e,CF.y1),vme=e=>n0(CF.x1,e),Vv=(e,t)=>bH*e+_H*t,Hv=(e,t)=>qO*e+wH*t,Q9=(e,t)=>n0(Vv(e,t),Hv(e,t)),J9=(e,t)=>WO(Vv(e,t),Hv(e,t));function sR(e,t){return CF=e,t?(s1=t*ay,bH=wH=Math.cos(s1),qO=Math.sin(s1),_H=-qO):(bH=wH=1,s1=qO=_H=0),ZBt}const ZBt={beginPath(){},closePath(){},moveTo:J9,lineTo:J9,rect(e,t,n,r){s1?(Q9(e+n,t),Q9(e+n,t+r),Q9(e,t+r),J9(e,t)):(n0(e+n,t+r),WO(e,t))},quadraticCurveTo(e,t,n,r){const i=Vv(e,t),s=Hv(e,t),o=Vv(n,r),a=Hv(n,r);bme(VO,i,o,yme),bme(HO,s,a,vme),WO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Vv(e,t),a=Hv(e,t),u=Vv(n,r),l=Hv(n,r),c=Vv(i,s),f=Hv(i,s);_me(VO,o,u,c,yme),_me(HO,a,l,f,vme),WO(c,f)},arc(e,t,n,r,i,s){if(r+=s1,i+=s1,VO=n*Math.cos(i)+e,HO=n*Math.sin(i)+t,Math.abs(i-r)>JBt)n0(e-n,t-n),n0(e+n,t+n);else{const o=l=>n0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%rh,r<0&&(r+=rh),i=i%rh,i<0&&(i+=rh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=rh,a=r-r%zv,u=0;u<4&&a>i;++u,a-=zv)o(a);else for(a=r-r%zv+zv,u=0;u<4&&a<i;++u,a=a+zv)o(a)}}};function bme(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function _me(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>dBt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(wme(u,e,t,n,r)),0<l&&l<1&&i(wme(l,e,t,n,r))}function wme(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var P0=(P0=N0(1,1))?P0.getContext("2d"):null;const EH=new Ss;function gte(e){return function(t,n){if(!P0)return!0;e(P0,t),EH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=EH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(P0.isPointInPath(u,a))return!0;return!1}}function yte(e,t){return t.contains(e.x||0,e.y||0)}function rLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(EH.set(n,r,n+i,r+s))}function iLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return mw(t,n,r,i,s)}function mw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function tx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function yf(e,t){return e??t}function Eme(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function eUt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+yf(t.x1,.5)*r,n.y1+yf(t.y1,.5)*i,Math.max(r,i)*yf(t.r1,0),n.x1+yf(t.x2,.5)*r,n.y1+yf(t.y2,.5)*i,Math.max(r,i)*yf(t.r2,.5));else{const o=yf(t.x1,0),a=yf(t.y1,0),u=yf(t.x2,1),l=yf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=N0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Eme(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Eme(s,t.stops)}function sLe(e,t,n){return dte(n)?eUt(e,n,t.bounds):n}function rM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=sLe(e,t,t.fill),!0):!1}var tUt=[];function nx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=sLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||tUt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function nUt(e,t){return e.zindex-t.zindex||e.index-t.index}function vte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(nUt)}function od(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=vte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function iM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=vte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function bte(e){return function(t,n,r){od(n,i=>{(!r||r.intersects(i.bounds))&&oLe(e,t,i,i)})}}function rUt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&oLe(e,t,n.items[0],n.items)}}function oLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(tx(t,n),n.fill&&rM(t,n,i)&&t.fill(),n.stroke&&nx(t,n,i)&&t.stroke()))}function AF(e){return e=e||qc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,iM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function oR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function _te(e){return AF(oR(e))}function y1(e,t){return"translate("+e+","+t+")"}function wte(e){return"rotate("+e+")"}function iUt(e,t){return"scale("+e+","+t+")"}function aLe(e){return y1(e.x||0,e.y||0)}function sUt(e){return y1(e.x||0,e.y||0)+(e.angle?" "+wte(e.angle):"")}function oUt(e){return y1(e.x||0,e.y||0)+(e.angle?" "+wte(e.angle):"")+(e.scaleX||e.scaleY?" "+iUt(e.scaleX||1,e.scaleY||1):"")}function Ete(e,t,n){function r(o,a){o("transform",sUt(a)),o("d",t(null,a))}function i(o,a){return t(sR(o,a.angle),a),rg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ay),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:bte(s),pick:_te(s),isect:n||gte(s)}}var aUt=Ete("arc",qBt);function uUt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function lUt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function cUt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function xte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(sR(u),c),rg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=oR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:rUt(s),pick:a,isect:yte,tip:n}}var fUt=xte("area",WBt,uUt);function dUt(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):uLe(e,t.group)}function uLe(e,t){e.beginPath(),pte(t)?AS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function lLe(e){const t=yf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function hUt(e,t){e("transform",aLe(t))}function cLe(e,t){const n=lLe(t);e("d",AS(null,t,n,n))}function pUt(e,t){e("class","background"),e("aria-hidden",!0),cLe(e,t)}function mUt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?cLe(e,t):e("d","")}function gUt(e,t,n){const r=t.clip?mte(n,t,t):null;e("clip-path",r)}function yUt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),rg(e,t),e.translate(t.x||0,t.y||0)}function mI(e,t,n,r){const i=lLe(t);e.beginPath(),AS(e,t,(n||0)+i,(r||0)+i)}const vUt=oR(mI),bUt=oR(mI,!1),_Ut=oR(mI,!0);function wUt(e,t,n,r){od(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(mI(e,i,s,o),tx(e,i),i.fill&&rM(e,i,u)&&e.fill(),i.stroke&&!a&&nx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&uLe(e,i),n&&n.translate(-s,-o),od(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(mI(e,i,s,o),tx(e,i),nx(e,i,u)&&e.stroke())})}function EUt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return iM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&pte(u)&&!_Ut(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&bUt(e,u,o,a)?(e.restore(),u):(l=iM(u,v=>xUt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&vUt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function xUt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var SUt={type:"group",tag:"g",nested:!1,attr:hUt,bound:yUt,draw:wUt,pick:EUt,isect:rLe,content:gUt,background:pUt,foreground:mUt},gI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ste(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Tte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Cte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function IF(e,t){return e==="center"?t/2:e==="right"?t:0}function kF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function TUt(e,t,n){const r=Ste(t,n),i=Tte(t,r),s=Cte(t,r),o=(t.x||0)-IF(t.align,i),a=(t.y||0)-kF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,gI["xmlns:xlink"],"xlink:href"),e("transform",y1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function CUt(e,t){const n=t.image,r=Tte(t,n),i=Cte(t,n),s=(t.x||0)-IF(t.align,r),o=(t.y||0)-kF(t.baseline,i);return e.set(s,o,s+r,o+i)}function AUt(e,t,n){od(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ste(r,this);let s=Tte(r,i),o=Cte(r,i);if(s===0||o===0)return;let a=(r.x||0)-IF(r.align,s),u=(r.y||0)-kF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(tx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var IUt={type:"image",tag:"image",nested:!1,attr:TUt,bound:CUt,draw:AUt,pick:AF(),isect:qc,get:Ste,xOffset:IF,yOffset:kF},kUt=xte("line",GBt,lUt);function RUt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",oUt(t)),e("d",t.path)}function GO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ay,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=ex(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),pI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):pI(e,u,r,i,s,o)}function NUt(e,t){return GO(sR(e,t.angle),t)?e.set(0,0,0,0):rg(e,t,!0)}var PUt={type:"path",tag:"path",nested:!1,attr:RUt,bound:NUt,draw:bte(GO),pick:_te(GO),isect:gte(GO)};function OUt(e,t){e("d",AS(null,t))}function DUt(e,t){var n,r;return rg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function xme(e,t){e.beginPath(),AS(e,t)}var $Ut={type:"rect",tag:"path",nested:!1,attr:OUt,bound:DUt,draw:bte(xme),pick:_te(xme),isect:rLe};function MUt(e,t){e("transform",aLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function LUt(e,t){var n,r;return rg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function fLe(e,t,n){var r,i,s,o;return t.stroke&&nx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function FUt(e,t,n){od(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&fLe(e,r,i)&&(tx(e,r),e.stroke())}})}function jUt(e,t,n,r){return e.isPointInStroke?fLe(e,t,1)&&e.isPointInStroke(n,r):!1}var BUt={type:"rule",tag:"line",nested:!1,attr:MUt,bound:LUt,draw:FUt,pick:AF(jUt),isect:iLe},UUt=Ete("shape",YBt),zUt=Ete("symbol",KBt,yte);const Sme=K3e();var Ol={height:sp,measureWidth:Ate,estimateWidth:sM,width:sM,canvas:dLe};dLe(!0);function dLe(e){Ol.width=e&&P0?Ate:sM}function sM(e,t){return hLe(ly(e,t),sp(e))}function hLe(e,t){return~~(.8*e.length*t)}function Ate(e,t){return sp(e)<=0||!(t=ly(e,t))?0:pLe(t,RF(e))}function pLe(e,t){const n=`(${t}) ${e}`;let r=Sme.get(n);return r===void 0&&(P0.font=t,r=P0.measureText(e).width,Sme.set(n,r)),r}function sp(e){return e.fontSize!=null?+e.fontSize||0:11}function uy(e){return e.lineHeight!=null?e.lineHeight:sp(e)+2}function VUt(e){return Be(e)?e.length>1?e:e[0]:e}function aR(e){return VUt(e.lineBreak&&e.text&&!Be(e.text)?e.text.split(e.lineBreak):e.text)}function Ite(e){const t=aR(e);return(Be(t)?t.length-1:0)*uy(e)}function ly(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?qUt(e,n):n}function HUt(e){if(Ol.width===Ate){const t=RF(e);return n=>pLe(n,t)}else if(Ol.width===sM){const t=sp(e);return n=>hLe(n,t)}else return t=>Ol.width(e,t)}function qUt(e,t){var n=+e.limit,r=HUt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function uR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function RF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+sp(e)+"px "+uR(e,t)}function kte(e){var t=e.baseline,n=sp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*uy(e):t==="line-bottom"?.29*n-.5*uy(e):0)}const WUt={left:"start",center:"middle",right:"end"},P2=new Ss;function NF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-zv,t+=r*Math.cos(i),n+=r*Math.sin(i)),P2.x1=t,P2.y1=n,P2}function GUt(e,t){var n=t.dx||0,r=(t.dy||0)+kte(t),i=NF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",WUt[t.align]||"start"),a?(u=y1(s,o)+" "+wte(a),(n||r)&&(u+=" "+y1(n,r))):u=y1(s+n,o+r),e("transform",u)}function Rte(e,t,n){var r=Ol.height(t),i=t.align,s=NF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+kte(t)-Math.round(.8*r),c=aR(t),f;if(Be(c)?(r+=uy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Ol.width(t,h)),0)):f=Ol.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ay,o,a);else if(n===2)return e.rotatedPoints(t.angle*ay,o,a);return e}function YUt(e,t,n){od(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=RF(r),e.textAlign=r.align||"left",s=NF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ay),o=a=0),o+=r.dx||0,a+=(r.dy||0)+kte(r),c=aR(r),tx(e,r),Be(c))for(l=uy(r),u=0;u<c.length;++u)f=ly(r,c[u]),r.fill&&rM(e,r,i)&&e.fillText(f,o,a),r.stroke&&nx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ly(r,c),r.fill&&rM(e,r,i)&&e.fillText(f,o,a),r.stroke&&nx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function KUt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=NF(t),a=o.x1,u=o.y1,l=Rte(P2,t,1),c=-t.angle*ay,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function XUt(e,t){const n=Rte(P2,e,2);return mw(t,n[0],n[1],n[2],n[3])||mw(t,n[0],n[1],n[4],n[5])||mw(t,n[4],n[5],n[6],n[7])||mw(t,n[2],n[3],n[6],n[7])}var QUt={type:"text",tag:"text",nested:!1,attr:GUt,bound:Rte,draw:YUt,pick:AF(KUt),isect:XUt},JUt=xte("trail",XBt,cUt),Kl={arc:aUt,area:fUt,group:SUt,image:IUt,line:kUt,path:PUt,rect:$Ut,rule:BUt,shape:UUt,symbol:zUt,text:QUt,trail:JUt};function xH(e,t,n){var r=Kl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ss),e,n)}var Tme={mark:null};function mLe(e,t,n){var r=Kl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Tme.mark=e,l=Tme),c=xH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ss,o)for(a=0,u=s.length;a<u;++a)t.union(xH(s[a],i,n));return e.bounds=t}const ZUt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function gLe(e,t){return JSON.stringify(e,ZUt,t)}function yLe(e){const t=typeof e=="string"?JSON.parse(e):e;return vLe(t)}function vLe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&vLe(n[i]);return t&&mLe(e),e}class bLe{constructor(t){arguments.length?this.root=yLe(t):(this.root=Cme({marktype:"group",name:"root",role:"frame"}),this.root.items=[new TF(this.root)])}toJSON(t){return gLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Cme(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Cme(e,t){const n={bounds:new Ss,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function r0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Nte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function $s(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=r0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function yc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function _Le(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function PF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function e7t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Kl[i.marktype]).tip){for(o=PF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Pte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||aF(),this._tooltip=n||t7t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=r0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=e7t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function t7t(e,t,n,r){e.element().setAttribute("title",r||"")}class lR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new nLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const n7t="keydown",r7t="keypress",i7t="keyup",wLe="dragenter",YO="dragleave",ELe="dragover",SH="pointerdown",s7t="pointerup",oM="pointermove",KO="pointerout",xLe="pointerover",TH="mousedown",o7t="mouseup",SLe="mousemove",aM="mouseout",TLe="mouseover",uM="click",a7t="dblclick",u7t="wheel",CLe="mousewheel",lM="touchstart",cM="touchmove",fM="touchend",l7t=[n7t,r7t,i7t,wLe,YO,ELe,SH,s7t,oM,KO,xLe,TH,o7t,SLe,aM,TLe,uM,a7t,u7t,CLe,lM,cM,fM],CH=oM,O2=aM,AH=uM;class cR extends Pte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=l7t,this.pointermove=Ime([oM,SLe],[xLe,TLe],[KO,aM]),this.dragover=Ime([ELe],[wLe],[YO]),this.pointerout=kme([KO,aM]),this.dragleave=kme([YO])}initialize(t,n,r){return this._canvas=t&&Nte(t,"canvas"),[uM,TH,SH,oM,KO,YO].forEach(i=>Ame(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(CLe,t)}pointerdown(t){this._down=this._active,this.fire(SH,t)}mousedown(t){this._down=this._active,this.fire(TH,t)}click(t){this._down===this._active&&(this.fire(uM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(lM,t,!0)}touchmove(t){this.fire(cM,t,!0)}touchend(t){this.fire(fM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===AH&&i&&i.href?this.handleHref(n,i,i.href):(t===CH||t===O2)&&this.handleTooltip(n,i,t!==O2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Ame(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=PF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Kl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const c7t=e=>e===lM||e===cM||e===fM?[lM,cM,fM]:[e];function Ame(e,t){c7t(t).forEach(n=>f7t(e,n))}function f7t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function OC(e,t,n){t.forEach(r=>e.fire(r,n))}function Ime(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?OC(this,e,r):((!i||!i.exit)&&OC(this,n,r),this._active=s,OC(this,t,r),OC(this,e,r))}}function kme(e){return function(t){OC(this,e,t),this._active=null}}function d7t(){return typeof window<"u"&&window.devicePixelRatio||1}function h7t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?d7t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class dM extends lR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ss,this._tempb=new Ss}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:N0(1,1,this._options.type),t&&this._canvas&&(yc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)h7t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=p7t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):m7t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Kl[n.marktype];n.clip&&dUt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const p7t=(e,t,n)=>new Ss().set(0,0,t,n).translate(-e[0],-e[1]);function m7t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class ALe extends Pte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Z9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=Z9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==O2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(AH,this._hrefHandler),i.removeEventListener(CH,this._tooltipHandler),i.removeEventListener(O2,this._tooltipHandler)),this._svg=i=t&&Nte(t,"svg"),i&&(i.addEventListener(AH,this._hrefHandler),i.addEventListener(CH,this._tooltipHandler),i.addEventListener(O2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:Z9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const Z9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},ILe="aria-hidden",Ote="aria-label",Dte="role",$te="aria-roledescription",kLe="graphics-object",Mte="graphics-symbol",RLe=(e,t,n)=>({[Dte]:e,[$te]:t,[Ote]:n||void 0}),g7t=id(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Rme={axis:{desc:"axis",caption:b7t},legend:{desc:"legend",caption:_7t},"title-text":{desc:"title",caption:e=>`Title text '${Pme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Pme(e)}'`}},Nme={ariaRole:Dte,ariaRoleDescription:$te,description:Ote};function NLe(e,t){const n=t.aria===!1;if(e(ILe,n||void 0),n||t.description==null)for(const r in Nme)e(Nme[r],void 0);else{const r=t.mark.marktype;e(Ote,t.description),e(Dte,t.ariaRole||(r==="group"?kLe:Mte)),e($te,t.ariaRoleDescription||`${r} mark`)}}function PLe(e){return e.aria===!1?{[ILe]:!0}:g7t[e.role]?null:Rme[e.role]?v7t(e,Rme[e.role]):y7t(e)}function y7t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return RLe(n?kLe:Mte,`${t} mark container`,e.description)}function v7t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return RLe(t.role||Mte,t.desc,n.description||r(n))}catch{return null}}function Pme(e){return gt(e.text).join(" ")}function b7t(e){const t=e.datum,n=e.orient,r=t.title?OLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${ZE(a)?"discrete":a} scale with ${WMe(o,s,e)}`}function _7t(e){const t=e.datum,n=t.title?OLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return E7t(r)+(n?` titled '${n}'`:"")+` for ${w7t(s)} with ${WMe(u,a,e)}`}function OLe(e){try{return gt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function w7t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function E7t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const DLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),x7t=e=>DLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Lte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${x7t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=DLe(u),a),toString:()=>e};return a}const $Le=e=>MLe(Lte(),e)+"";function MLe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):MLe(e,r)}return e.close()}const hM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},pM={blend:"mix-blend-mode"},LLe={fill:"none","stroke-miterlimit":10},RT=0,Ome="http://www.w3.org/2000/xmlns/",Ps=gI.xmlns;class Fte extends lR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=$s(t,0,"svg",Ps),this._svg.setAttributeNS(Ome,"xmlns",Ps),this._svg.setAttributeNS(Ome,"xmlns:xlink",gI["xmlns:xlink"]),this._svg.setAttribute("version",gI.version),this._svg.setAttribute("class","marks"),yc(t,1),this._root=$s(this._svg,RT,"g",Ps),i0(this._root,LLe),yc(this._svg,RT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(i0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=$s(t,RT,"rect",Ps),i0(r,{width:this._width,height:this._height,fill:n}));const i=$Le(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),yc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Kl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Dme(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Dme(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Kl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=$me(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return yc(c,0),n._svg;c.setAttribute("class",_Le(n));const f=PLe(n);for(const m in f)Fa(c,m,f[m]);l||Fa(c,"pointer-events",u),Fa(c,"clip-path",n.clip?mte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=$me(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&C7t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):od(n,p),yc(c,h),c}_update(t,n,r){Jp=n,aa=n.__values__,NLe(D2,r),t.attr(D2,r,this);const i=I7t[t.type];i&&i.call(this,t,n,r),Jp&&this.style(Jp,r)}style(t,n){if(n!=null){for(const r in hM){let i=r==="font"?uR(n):n[r];if(i===aa[r])continue;const s=hM[r];i==null?t.removeAttribute(s):(dte(i)&&(i=YMe(i,this._defs.gradient,FLe())),t.setAttribute(s,i+"")),aa[r]=i}for(const r in pM)XO(t,pM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=$s(t,RT+1,"defs",Ps)),i=S7t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=$s(t,RT+1,"defs",Ps)),i=T7t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):yc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Dme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function S7t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=$s(e,n++,"pattern",Ps);i0(o,{id:nM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=$s(o,0,"rect",Ps),i0(o,{width:1,height:1,fill:`url(${FLe()}#${t.id})`}),e=$s(e,n++,"radialGradient",Ps),i0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=$s(e,n++,"linearGradient",Ps),i0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=$s(e,r,"stop",Ps),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return yc(e,r),n}function T7t(e,t,n){let r;return e=$s(e,n,"clipPath",Ps),e.setAttribute("id",t.id),t.path?(r=$s(e,0,"path",Ps),r.setAttribute("d",t.path)):(r=$s(e,0,"rect",Ps),i0(r,{x:0,y:0,width:t.width,height:t.height})),yc(e,1),n+1}function C7t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;od(n,o=>{i=e.mark(t,o,i,r),++s}),yc(t,1+s)}function $me(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=r0(o,r,Ps),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=r0(o,"path",Ps);s.appendChild(a),a.__data__=e;const u=r0(o,"g",Ps);s.appendChild(u),u.__data__=e;const l=r0(o,"path",Ps);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||A7t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function A7t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Jp=null,aa=null;const I7t={group(e,t,n){const r=Jp=t.childNodes[2];aa=r.__values__,e.foreground(D2,n,this),aa=t.__values__,Jp=t.childNodes[1],e.content(D2,n,this);const i=Jp=t.childNodes[0];e.background(D2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==aa.events&&(Fa(r,"pointer-events",s),Fa(i,"pointer-events",s),aa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Fa(r,"display",null),this.style(i,n),Fa(i,"stroke",null),o&&(n.fill=null),aa=r.__values__,this.style(r,n),o&&(n.fill=o),Jp=null}else Fa(r,"display","none")},image(e,t,n){n.smooth===!1?(XO(t,"image-rendering","optimizeSpeed"),XO(t,"image-rendering","pixelated")):XO(t,"image-rendering",null)},text(e,t,n){const r=aR(n);let i,s,o,a;Be(r)?(s=r.map(u=>ly(n,u)),i=s.join(`
`),i!==aa.text&&(yc(t,0),o=t.ownerDocument,a=uy(n),s.forEach((u,l)=>{const c=r0(o,"tspan",Ps);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),aa.text=i)):(s=ly(n,r),s!==aa.text&&(t.textContent=s,aa.text=s)),Fa(t,"font-family",uR(n)),Fa(t,"font-size",sp(n)+"px"),Fa(t,"font-style",n.fontStyle),Fa(t,"font-variant",n.fontVariant),Fa(t,"font-weight",n.fontWeight)}};function D2(e,t,n){t!==aa[e]&&(n?k7t(Jp,e,t,n):Fa(Jp,e,t),aa[e]=t)}function XO(e,t,n){n!==aa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),aa[t]=n)}function i0(e,t){for(const n in t)Fa(e,n,t[n])}function Fa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function k7t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function FLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class jLe extends lR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Lte();n.open("svg",bn({},gI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",LLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Kl[n.marktype],i=r.tag,s=[NLe,r.attr];t.open("g",{class:_Le(n),"clip-path":n.clip?mte(this,n,n.group):null},PLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=aR(a);if(Be(l)){const c={x:0,dy:uy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ly(a,l[f])).close()}else t.text(ly(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),od(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):od(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&R7t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:nM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function R7t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=uR(t),e["font-size"]=sp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in hM){let a=t[o];const u=hM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(dte(a)&&(a=YMe(a,i.gradient,"")),e[u]=a)}for(const o in pM){const a=t[o];a!=null&&(s=s||[],s.push(`${pM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const xf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function N7t(e){xf.svgMarkTypes=e.svgMarkTypes??["text"],xf.svgOnTop=e.svgOnTop??!0,xf.debug=e.debug??!1}class IH extends lR{constructor(t){super(t),this._svgRenderer=new Fte(t),this._canvasRenderer=new dM(t)}initialize(t,n,r,i,s){this._root_el=$s(t,0,"div");const o=$s(this._root_el,0,"div"),a=$s(this._root_el,1,"div");return this._root_el.style.position="relative",xf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=xf.svgOnTop?a:o,this._canvasEl=xf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return xf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!xf.svgMarkTypes.includes(s));this._svgRenderer.render(t,xf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return xf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class BLe extends cR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=$s($s(t,0,"div"),xf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const ULe="canvas",zLe="hybrid",VLe="png",HLe="svg",qLe="none",s0={Canvas:ULe,PNG:VLe,SVG:HLe,Hybrid:zLe,None:qLe},Z1={};Z1[ULe]=Z1[VLe]={renderer:dM,headless:dM,handler:cR};Z1[HLe]={renderer:Fte,headless:jLe,handler:ALe};Z1[zLe]={renderer:IH,headless:IH,handler:BLe};Z1[qLe]={};function OF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Z1[e]=t,this):Z1[e]}function WLe(e,t,n){const r=[],i=new Ss().union(t),s=e.marktype;return s?GLe(e,i,n,r):s==="group"?YLe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function GLe(e,t,n,r){if(P7t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)YLe(i[a],t,n,r);else for(const u=Kl[s].isect;a<o;++a){const l=i[a];KLe(l,t,u)&&r.push(l)}}return r}function P7t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function YLe(e,t,n,r){n&&n(e.mark)&&KLe(e,t,Kl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)GLe(i[u],t,n,r);t.translate(o,a)}return r}function KLe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const eB=new Ss;function XLe(e){const t=e.clip;if(_n(t))t(sR(eB.clear()));else if(t)eB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(eB)}const O7t=1e-9;function jte(e,t,n){return e===t?!0:n==="path"?QLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:cr(e)&&cr(t)?Math.abs(e-t)<=O7t:!e||!t||!mt(e)&&!mt(t)?e==t:D7t(e,t)}function QLe(e,t){return jte(ex(e),ex(t))}function D7t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!jte(e[i],t[i],i))return!1;return typeof e==typeof t}function $7t(){tLe(),sBt()}const rx="top",Of="left",Lf="right",cy="bottom",M7t="top-left",L7t="top-right",F7t="bottom-left",j7t="bottom-right",Bte="start",kH="middle",Ua="end",B7t="x",U7t="y",DF="group",Ute="axis",zte="title",z7t="frame",V7t="scope",Vte="legend",JLe="row-header",ZLe="row-footer",e6e="row-title",t6e="column-header",n6e="column-footer",r6e="column-title",H7t="padding",q7t="symbol",i6e="fit",s6e="fit-x",o6e="fit-y",W7t="pad",Hte="none",mP="all",RH="each",qte="flush",o0="column",a0="row";function a6e(e){Re.call(this,null,e)}ft(a6e,Re,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Kl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=gP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===DF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(gP(l,o))),r.role){case Ute:case Vte:case zte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(gP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(gP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return XLe(r),t.modifies("bounds")}});function gP(e,t,n){return t(e.bounds.clear(),e,n)}const Mme=":vega_identifier:";function Wte(e){Re.call(this,0,e)}Wte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ft(Wte,Re,{transform(e,t){const n=G7t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function G7t(e){return e._signals[Mme]||(e._signals[Mme]=e.add(0))}function u6e(e){Re.call(this,null,e)}ft(u6e,Re,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Y7t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===DF?TF:SF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Y7t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function l6e(e){Re.call(this,null,e)}const Lme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!c6e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},c6e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Fme=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(c6e(i,s=e[n].bounds,t))return!0},K7t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},X7t=(e,t,n)=>{var r=e.range(),i=new Ss;return t===rx||t===cy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},jme=e=>(e.forEach(t=>t.opacity=1),e),Bme=(e,t)=>e.reflow(t.modified()).modifies("opacity");ft(l6e,Re,{transform(e,t){const n=Lme[e.method]||Lme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(jme(i),t=Bme(t,e)),t;if(i=i.filter(K7t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=jme(i),t=Bme(t,e),s.length>=3&&Fme(s,r)){do s=n(s,r);while(s.length>=3&&Fme(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=X7t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function f6e(e){Re.call(this,null,e)}ft(f6e,Re,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const sa=new Ss;function gw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Q7t(e){var t=e.items[0].orient;return t===Of||t===Lf}function J7t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Z7t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=J7t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Ite(p),v=0,b=0,w,E;switch(sa.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case rx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&yP(e,p,E,m,y,0,-1,g);break;case Of:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&yP(e,p,E,m,y,1,-1,g);break;case Lf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&yP(e,p,E,m,y,1,1,g);break;case cy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&yP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return rg(g.translate(v,b),i),gw(i,"x",v+o)|gw(i,"y",b+o)&&(i.bounds=sa,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function yP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ume=(e,t)=>Math.floor(Math.min(e,t)),zme=(e,t)=>Math.ceil(Math.max(e,t));function ezt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===DF)switch(i.role){case Ute:case Vte:case zte:break;case JLe:o.rowheaders.push(...s);break;case ZLe:o.rowfooters.push(...s);break;case t6e:o.colheaders.push(...s);break;case n6e:o.colfooters.push(...s);break;case e6e:o.rowtitle=s[0];break;case r6e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function tzt(e){return new Ss().set(0,0,e.width||0,e.height||0)}function nzt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function bi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Vme(e){return e<0?Math.ceil(-e):0}function d6e(e,t,n){var r=!n.nodirty,i=n.bounds===qte?tzt:nzt,s=sa.set(0,0,0,0),o=bi(n.align,o0),a=bi(n.align,a0),u=bi(n.padding,o0),l=bi(n.padding,a0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,x,C,A,R,P,$,k,D,M,L;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)P=t[x],R=E[x]=i(P),P.x=P.x||0,b[x]=0,P.y=P.y||0,w[x]=0,C=x%c,A=~~(x/c),m=Math.max(m,$=Math.ceil(R.x2)),v=Math.max(v,k=Math.ceil(R.y2)),p[C]=Math.max(p[C],$),y[A]=Math.max(y[A],k),h[x]=u+Vme(R.x1),g[x]=l+Vme(R.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===RH)for(C=1;C<c;++C){for(L=0,x=C;x<d;x+=c)L<h[x]&&(L=h[x]);for(x=C;x<d;x+=c)h[x]=L+p[C-1]}else if(o===mP){for(L=0,x=0;x<d;++x)x%c&&L<h[x]&&(L=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=L+m)}else for(o=!1,C=1;C<c;++C)for(x=C;x<d;x+=c)h[x]+=p[C-1];if(a===RH)for(A=1;A<f;++A){for(L=0,x=A*c,S=x+c;x<S;++x)L<g[x]&&(L=g[x]);for(x=A*c;x<S;++x)g[x]=L+y[A-1]}else if(a===mP){for(L=0,x=c;x<d;++x)L<g[x]&&(L=g[x]);for(x=c;x<d;++x)g[x]=L+v}else for(a=!1,A=1;A<f;++A)for(x=A*c,S=x+c;x<S;++x)g[x]+=y[A-1];for(D=0,x=0;x<d;++x)D=h[x]+(x%c?D:0),b[x]+=D-t[x].x;for(C=0;C<c;++C)for(M=0,x=C;x<d;x+=c)M+=g[x],w[x]+=M-t[x].y;if(o&&bi(n.center,o0)&&f>1)for(x=0;x<d;++x)R=o===mP?m:p[x%c],D=R-E[x].x2-t[x].x-b[x],D>0&&(b[x]+=D/2);if(a&&bi(n.center,a0)&&c!==1)for(x=0;x<d;++x)R=a===mP?v:y[~~(x/c)],M=R-E[x].y2-t[x].y-w[x],M>0&&(w[x]+=M/2);for(x=0;x<d;++x)s.union(E[x].translate(b[x],w[x]));switch(D=bi(n.anchor,B7t),M=bi(n.anchor,U7t),bi(n.anchor,o0)){case Ua:D-=s.width();break;case kH:D-=s.width()/2}switch(bi(n.anchor,a0)){case Ua:M-=s.height();break;case kH:M-=s.height()/2}for(D=Math.round(D),M=Math.round(M),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)P=t[x],P.x+=b[x]+=D,P.y+=w[x]+=M,s.union(P.mark.bounds.union(P.bounds.translate(b[x],w[x]))),r&&e.dirty(P);return s}function rzt(e,t,n){var r=ezt(t),i=r.marks,s=n.bounds===qte?izt:szt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=d6e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=bi(n.headerBand,a0,null),c=vP(e,r.rowheaders,i,a,u,-bi(o,"rowHeader"),Ume,0,s,"x1",0,a,1,m)),r.colheaders&&(m=bi(n.headerBand,o0,null),f=vP(e,r.colheaders,i,a,a,-bi(o,"columnHeader"),Ume,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=bi(n.footerBand,a0,null),d=vP(e,r.rowfooters,i,a,u,bi(o,"rowFooter"),zme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=bi(n.footerBand,o0,null),h=vP(e,r.colfooters,i,a,a,bi(o,"columnFooter"),zme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=bi(n.titleAnchor,a0),g=bi(o,"rowTitle"),g=p===Ua?d+g:c-g,m=bi(n.titleBand,a0,.5),Hme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=bi(n.titleAnchor,o0),g=bi(o,"columnTitle"),g=p===Ua?h+g:f-g,m=bi(n.titleBand,o0,.5),Hme(e,r.coltitle,g,1,y,m))}function izt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function szt(e,t){return e.bounds[t]}function vP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,x,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(x=n[b])==null;b-=d);a?(C=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),A=m):(C=m,A=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(S.bounds.translate(C-(S.x||0),A-(S.y||0))),S.x=C,S.y=A,e.dirty(S),g=o(g,E[l])}return g}function Hme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function ozt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function azt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function uzt(e,t,n,r,i,s,o){const a=ozt(n,t),u=azt(e,a("offset",0)),l=a("anchor",Bte),c=l===Ua?1:l===kH?.5:0,f={align:RH,bounds:a("bounds",qte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Of:f.anchor={x:Math.floor(r.x1)-u,column:Ua,y:c*(o||r.height()+2*r.y1),row:l};break;case Lf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case rx:f.anchor={y:Math.floor(i.y1)-u,row:Ua,x:c*(s||i.width()+2*i.x1),column:l};break;case cy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case M7t:f.anchor={x:u,y:u};break;case L7t:f.anchor={x:s-u,y:u,column:Ua};break;case F7t:f.anchor={x:u,y:o-u,row:Ua};break;case j7t:f.anchor={x:s-u,y:o-u,column:Ua,row:Ua};break}return f}function lzt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),fzt(e,n,n.items[0].items[0]),s=czt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===q7t&&dzt(n.items[0].items[0].items[0].items),i!==Hte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,rg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function czt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function fzt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&NT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Of:i+=Math.ceil(o.bounds.width())+u;break;case Lf:case cy:break;default:s+=o.bounds.height()+u}switch((i||s)&&NT(e,n,i,s),o.orient){case Of:c+=w_(t,n,o,a,1,1);break;case Lf:l+=w_(t,n,o,Ua,0,0)+u,c+=w_(t,n,o,a,1,1);break;case cy:l+=w_(t,n,o,a,0,0),c+=w_(t,n,o,Ua,-1,0,1)+u;break;default:l+=w_(t,n,o,a,0,0)}(l||c)&&NT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(NT(e,n,-l,0),NT(e,o,-l,0))}}function w_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ite(n);return Math.round(r===Bte?f:r===Ua?d-h:.5*(c-h))}function NT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function dzt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function hzt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Of||a===Lf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==DF?a===Of?(p=i.y2,h=i.y1):a===Lf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Of&&(p=r,h=0),b=u===Bte?p:u===Ua?h:(p+h)/2,d&&d.text){switch(a){case rx:case cy:v=f.bounds.height()+c;break;case Of:y=f.bounds.width()+c;break;case Lf:y=-f.bounds.width()-c;break}sa.clear().union(d.bounds),sa.translate(y-(d.x||0),v-(d.y||0)),gw(d,"x",y)|gw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(sa),d.mark.bounds.clear().union(sa),e.dirty(d)),sa.clear().union(d.bounds)}else sa.clear();switch(sa.union(f.bounds),a){case rx:m=b,g=i.y1-sa.height()-l;break;case Of:m=i.x1-sa.width()-l,g=b;break;case Lf:m=i.x2+sa.width()+l,g=b;break;case cy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return gw(s,"x",m)|gw(s,"y",g)&&(sa.translate(m,g),e.dirty(s),s.bounds.clear().union(sa),t.bounds.clear().union(sa),e.dirty(s)),s.bounds}function h6e(e){Re.call(this,null,e)}ft(h6e,Re,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&rzt(n,r,e.layout),mzt(n,r,e)}),pzt(e.mark.group)?t.reflow():t}});function pzt(e){return e&&e.mark.role!=="legend-entry"}function mzt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ss().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Ute:h=Q7t(f)?a:u,h.union(Z7t(e,f,i,s));break;case zte:c=f;break;case Vte:l.push(lzt(e,f));break;case z7t:case V7t:case JLe:case ZLe:case e6e:case t6e:case n6e:case r6e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Lf,d!==Hte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];d6e(e,v,uzt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===i6e||n.autosize.type===s6e||n.autosize.type===o6e))switch(y.orient){case Of:case Lf:o.add(v.x1,0).add(v.x2,0);break;case rx:case cy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(hzt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),gzt(e,t,o,n)}function gzt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===H7t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Hte?(l=0,f=0,u=o,c=a):s===i6e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===s6e?(u=Math.max(0,o-l-d),a=c+f+h):s===o6e?(o=u+l+d,c=Math.max(0,a-f-h)):s===W7t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const yzt=Object.freeze(Object.defineProperty({__proto__:null,bound:a6e,identifier:Wte,mark:u6e,overlap:l6e,render:f6e,viewlayout:h6e},Symbol.toStringTag,{value:"Module"}));function p6e(e){Re.call(this,null,e)}ft(p6e,Re,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=cte(s,o,e.minstep),u=e.format||UMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?BMe(s,e.values,a):fte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Er({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Er({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function m6e(e){Re.call(this,null,e)}function vzt(){return Er({})}function bzt(e){const t=ES().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ft(m6e,Re,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||vzt,s=e.key||Mt,o=this.value;return Be(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=bzt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function g6e(e){Re.call(this,null,e)}ft(g6e,Re,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Be(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Cg,u=i.enter||Cg,l=i.exit||Cg,c=(s&&!o?i[s]:a)||Cg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Cg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Cg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Cg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function y6e(e){Re.call(this,[],e)}ft(y6e,Re,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||zO,o=e.scale,a=+e.limit,u=cte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===zO,c=e.format||qMe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||HMe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===zO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ca(m=p||8),i=i.map((y,v)=>Er({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Er({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===W9t?(d=o.domain(),h=LMe(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=rBt(o),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const _zt=e=>e.source.x,wzt=e=>e.source.y,Ezt=e=>e.target.x,xzt=e=>e.target.y;function Gte(e){Re.call(this,{},e)}Gte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ft(Gte,Re,{transform(e,t){var n=e.sourceX||_zt,r=e.sourceY||wzt,i=e.targetX||Ezt,s=e.targetY||xzt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=qme.get(u+"-"+a)||qme.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const v6e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Szt=(e,t,n,r)=>v6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),b6e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Tzt=(e,t,n,r)=>b6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),_6e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Czt=(e,t,n,r)=>_6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Azt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Izt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,kzt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Rzt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Nzt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Pzt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},qme=ES({line:v6e,"line-radial":Szt,arc:b6e,"arc-radial":Tzt,curve:_6e,"curve-radial":Czt,"orthogonal-horizontal":Azt,"orthogonal-vertical":Izt,"orthogonal-radial":kzt,"diagonal-horizontal":Rzt,"diagonal-vertical":Nzt,"diagonal-radial":Pzt});function Yte(e){Re.call(this,null,e)}Yte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ft(Yte,Re,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||bS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/aX(l),h=Mu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Ozt=5;function Dzt(e){const t=e.type;return!e.bins&&(t===QE||t===Jk||t===Zk)}function w6e(e){return ate(e)&&e!==Sh}const $zt=id(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function E6e(e){Re.call(this,null,e),this.modified(!0)}ft(E6e,Re,{transform(e,t){var n=t.dataflow,r=this.value,i=Mzt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!$zt[i]){if(i==="padding"&&w6e(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return zzt(r,e,Uzt(r,e,Fzt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Mzt(e){var t=e.type,n="",r;return t===Sh?Sh+"-"+QE:(Lzt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Sh+"-":r===3?CS+"-":""),(n+t||QE).toLowerCase())}function Lzt(e){const t=e.type;return ate(t)&&t!==Q1&&t!==J1&&(e.scheme||e.range&&e.range.length&&e.range.every(yt))}function Fzt(e,t,n){const r=jzt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Dzt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return w6e(s)&&t.padding&&i[0]!==Qn(i)&&(i=Bzt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(x6e(s,i,n)),s===rte&&e.unknown(t.domainImplicit?Nz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&cte(e,t.nice)||null),i.length}function jzt(e,t,n){return t?(e.domain(x6e(e.type,t,n)),t.length):-1}function Bzt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===jm?XZ(t,null,a):e===Zk?J$(t,null,a,.5):e===Jk?J$(t,null,a,i||1):e===bF?QZ(t,null,a,s||1):KZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function x6e(e,t,n){if(PMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ot(t))}return t}function Uzt(e,t,n){let r=t.bins;if(r&&!Be(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Mu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ite&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function zzt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Vzt(r,t,n);else if(t.scheme&&(s=Hzt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&OMe(r))return e.interpolator(EF(NH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(ute(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?ck:Km),s&&e.range(NH(s,t.reverse))}function Vzt(e,t,n){e!==CMe&&e!==gH&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===gH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*nte(n,i,r)]}function Hzt(e,t,n){var r=t.schemeExtent,i,s;return Be(t.scheme)?s=EF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=lte(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===wF?n+1:e===ite?n-1:e===JE||e===_F?+t.schemeCount||Ozt:n,OMe(e)?Wme(s,r,t.reverse):_n(s)?MMe(Wme(s,r),n):e===rte?s:s.slice(0,n)}function Wme(e,t,n){return _n(e)&&(t||n)?$Me(e,NH(t||[0,1],n)):e}function NH(e,t){return t?e.slice().reverse():e}function S6e(e){Re.call(this,null,e)}ft(S6e,Re,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Db(e.sort)),this.modified(n),t}});const Gme="zero",T6e="center",C6e="normalize",A6e=["y0","y1"];function Kte(e){Re.call(this,null,e)}Kte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Gme,values:[Gme,T6e,C6e]},{name:"as",type:"string",array:!0,length:2,default:A6e}]};ft(Kte,Re,{transform(e,t){var n=e.as||A6e,r=n[0],i=n[1],s=Db(e.sort),o=e.field||bS,a=e.offset===T6e?qzt:e.offset===C6e?Wzt:Gzt,u,l,c,f;for(u=Yzt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function qzt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Wzt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Gzt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Yzt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Kzt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:p6e,datajoin:m6e,encode:g6e,legendentries:y6e,linkpath:Gte,pie:Yte,scale:E6e,sortitems:S6e,stack:Kte},Symbol.toStringTag,{value:"Module"}));var Xzt=Math.abs,PH=Math.cos,mM=Math.sin,Qzt=1e-6,I6e=Math.PI,OH=I6e/2,Yme=Jzt(2);function Kme(e){return e>1?OH:e<-1?-OH:Math.asin(e)}function Jzt(e){return e>0?Math.sqrt(e):0}function Zzt(e,t){var n=e*mM(t),r=30,i;do t-=i=(t+mM(t)-n)/(1+PH(t));while(Xzt(i)>Qzt&&--r>0);return t/2}function eVt(e,t,n){function r(i,s){return[e*i*PH(s=Zzt(n,s)),t*mM(s)]}return r.invert=function(i,s){return s=Kme(s/t),[i/(e*PH(s)),Kme((2*s+mM(2*s))/n)]},r}var tVt=eVt(Yme/OH,Yme,I6e);function nVt(){return ep(tVt).scale(169.529)}const rVt=f2e(),DH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function iVt(e,t){return function n(){const r=t();return r.type=e,r.path=f2e().projection(r),r.copy=r.copy||function(){const i=n();return DH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},RMe(r)}}function Xte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(gM[e]=iVt(e,t),this):gM[e]||null}function k6e(e){return e&&e.path||rVt}const gM={albers:h2e,albersusa:Q1t,azimuthalequalarea:J1t,azimuthalequidistant:Z1t,conicconformal:nbt,conicequalarea:z3,conicequidistant:sbt,equalEarth:abt,equirectangular:rbt,gnomonic:ubt,identity:lbt,mercator:ebt,mollweide:nVt,naturalEarth1:cbt,orthographic:fbt,stereographic:dbt,transversemercator:hbt};for(const e in gM)Xte(e,gM[e]);function sVt(){}const xp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function R6e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),oVt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(aVt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,xp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,xp[m|g<<1].forEach(b);for(xp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,xp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,xp[m|g<<1|y<<2|v<<3].forEach(b);xp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,xp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,xp[y<<2|v<<3].forEach(b);xp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],x=o(E),C=o(S),A,R;(A=d[x])?(R=f[C])?(delete d[A.end],delete f[R.start],A===R?(A.ring.push(S),c(A.ring)):f[A.start]=d[R.end]={start:A.start,end:R.end,ring:A.ring.concat(R.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=C]=A):(A=f[C])?(R=d[x])?(delete f[A.start],delete d[R.end],A===R?(A.ring.push(S),c(A.ring)):f[R.start]=d[A.end]={start:R.start,end:A.end,ring:R.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=x]=A):f[x]=d[C]={start:x,end:C,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:sVt,r):n===a},r}function oVt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function aVt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=uVt(e,t[n]))return i;return 0}function uVt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(lVt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function lVt(e,t,n){var r;return cVt(e,t,n)&&fVt(e[r=+(e[0]===t[0])],n[r],t[r])}function cVt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function fVt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function N6e(e,t,n){return function(r){var i=jh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?U0(s,o,e):a/(e+1);return Mu(s+u,o,u)}}function Qte(e){Re.call(this,null,e)}Qte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ft(Qte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ta,s=R6e().smooth(e.smooth!==!1),o=e.thresholds||dVt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Be(o)?o:o(c.values));hVt(f,c,l,e),f.forEach(d=>{u.push(cF(l,Er(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function dVt(e,t,n){const r=N6e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Nc(t(i).values)))}function hVt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(cr(i)?i:i[0])||1,a=(cr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(P6e(t,o,a,u,l))}function P6e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Xme(e,t,n){const r=e>=0?e:gee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function tB(e){return _n(e)?e:Ca(+e)}function O6e(){var e=u=>u[0],t=u=>u[1],n=bS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Xme(r[0],u,e)>>o,f=Xme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(E_(p,m,g,y,c),x_(p,m,y,g,f),E_(p,m,g,y,c),x_(p,m,y,g,f),E_(p,m,g,y,c),x_(p,m,y,g,f)):c>0?(E_(p,m,g,y,c),E_(p,m,y,g,c),E_(p,m,g,y,c),v=y):f>0&&(x_(p,m,g,y,f),x_(p,m,y,g,f),x_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/aX(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=tB(u),a):e},a.y=function(u){return arguments.length?(t=tB(u),a):t},a.weight=function(u){return arguments.length?(n=tB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=gt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function E_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function x_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Jte(e){Re.call(this,null,e)}Jte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const pVt=["x","y","weight","size","cellSize","bandwidth"];function D6e(e,t){return pVt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ft(Jte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=mVt(r,e.groupby),s=(e.groupby||[]).map(Zi),o=D6e(O6e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Er(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mVt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Zte(e){Re.call(this,null,e)}Zte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ft(Zte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=R6e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||N6e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=D6e(O6e(),e)(i,!0),u=P6e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Be(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Er),n}});const $H="Feature",ene="FeatureCollection",gVt="MultiPoint";function tne(e){Re.call(this,null,e)}tne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ft(tne,Re,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ta,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(va(a))||s&&t.modified(va(s))||o&&t.modified(va(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:$H,geometry:{type:gVt,coordinates:r}})),this.value={type:ene,features:n}}});function nne(e){Re.call(this,null,e)}nne.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ft(nne,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ta,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=k6e(e.projection),n.materialize().reflow()):o=i===Ta||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=yVt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function yVt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function rne(e){Re.call(this,null,e)}rne.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ft(rne,Re,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function ine(e){Re.call(this,null,e)}ine.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ft(ine,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=vVt(k6e(e.projection),e.field||Hc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function vVt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function sne(e){Re.call(this,[],e),this.generator=R1t()}sne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ft(sne,Re,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(D$e(n[0],i)):t.add.push(Er(i)),n[0]=i,t}});function one(e){Re.call(this,null,e)}one.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ft(one,Re,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ta,s=_Vt(e.opacity,e),o=bVt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Nc(n.map(l=>Nc(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=Nc(c.values||[])),l[a]=wVt(c,f,o.dep?o:Ca(o(f)),s.dep?s:Ca(s(f)))}),t.reflow(!0).modifies(a)}});function bVt(e,t){let n;return _n(e)?(n=r=>z0(e(r,t)),n.dep=$6e(e)):n=Ca(z0(e||"#888")),n}function _Vt(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=$6e(e)):e?n=Ca(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function $6e(e){if(!_n(e))return!1;const t=id(va(e));return t.$x||t.$y||t.$value||t.$max}function wVt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Yg,d=N0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function M6e(e){Re.call(this,null,e),this.modified(!0)}ft(M6e,Re,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=xVt(e.type),DH.forEach(r=>{e[r]!=null&&Qme(n,r,e[r])})):DH.forEach(r=>{e.modified(r)&&Qme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&EVt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function EVt(e,t){const n=SVt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function xVt(e){const t=Xte((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function Qme(e,t,n){_n(e[t])&&e[t](n)}function SVt(e){return e=gt(e),e.length===1?e[0]:{type:ene,features:e.reduce((t,n)=>t.concat(TVt(n)),[])}}function TVt(e){return e.type===ene?e.features:gt(e).filter(t=>t!=null).map(t=>t.type===$H?t:{type:$H,geometry:t})}const CVt=Object.freeze(Object.defineProperty({__proto__:null,contour:Zte,geojson:tne,geopath:nne,geopoint:rne,geoshape:ine,graticule:sne,heatmap:one,isocontour:Qte,kde2d:Jte,projection:M6e},Symbol.toStringTag,{value:"Module"})),Jme={center:_vt,collide:jvt,nbody:Xvt,link:Uvt,x:Qvt,y:Jvt},DC="forces",MH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],AVt=["static","iterations"],L6e=["x","y","vx","vy"];function ane(e){Re.call(this,null,e)}ane.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:L6e}]};ft(ane,Re,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(MH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&F6e(n,e,0,t)):(this.value=n=kVt(t.source,e),n.on("tick",IVt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(AVt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==DC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(L6e)}});function IVt(e,t){return()=>e.touch(t).run()}function kVt(e,t){const n=Kvt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),F6e(n,t,!0).on("end",()=>s=!0)}function F6e(e,t,n,r){var i=gt(t.forces),s,o,a,u;for(s=0,o=MH.length;s<o;++s)a=MH[s],a!==DC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=DC+s,a=n||t.modified(DC,s)?NVt(i[s]):r&&RVt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(DC+s,null);return e.numForces=i.length,e}function RVt(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(va(r)))return 1;return 0}function NVt(e){var t,n;Ft(Jme,e.force)||Le("Unrecognized force: "+e.force),t=Jme[e.force]();for(n in e)_n(t[n])&&PVt(t[n],e[n],e);return t}function PVt(e,t,n){e(_n(t)?r=>t(r,n):t)}const OVt=Object.freeze(Object.defineProperty({__proto__:null,force:ane},Symbol.toStringTag,{value:"Module"}));function LH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function une(e){Re.call(this,null,e)}une.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const DVt=e=>e.values;ft(une,Re,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&lF(o.data)&&i.rem.push(o.data)}),this.value=s=DX({values:gt(e.keys).reduce((o,a)=>(o.key(a),o),$Vt()).entries(i.source)},DVt),n&&s.each(o=>{o.children&&(o=Er(o.data),i.add.push(o),i.source.push(o))}),LH(s,Mt,Mt)),i.source.root=s,i}});function $Vt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ig(e){Re.call(this,null,e)}const MVt=(e,t)=>e.parent===t.parent?1:2;ft(ig,Re,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Db(e.sort,o=>o.data)),LVt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?MVt:bS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>FVt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function LVt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function FVt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const FH=["x","y","r","depth","children"];function lne(e){ig.call(this,e)}lne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FH.length,default:FH}]};ft(lne,ig,{layout:Jbt,params:["radius","size","padding"],fields:FH});const jH=["x0","y0","x1","y1","depth","children"];function cne(e){ig.call(this,e)}cne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jH.length,default:jH}]};ft(cne,ig,{layout:Zbt,params:["size","round","padding"],fields:jH});function fne(e){Re.call(this,null,e)}fne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ft(fne,Re,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?LH(Kce().id(e.key).parentId(e.parentKey)(i.source),e.key,qc):LH(Kce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Zme={tidy:l_t,cluster:wbt},BH=["x","y","depth","children"];function dne(e){ig.call(this,e)}dne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:BH.length,default:BH}]};ft(dne,ig,{layout(e){const t=e||"tidy";if(Ft(Zme,t))return Zme[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:BH});function hne(e){Re.call(this,[],e)}hne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ft(hne,Re,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(Er({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const ege={binary:f_t,dice:pk,slice:P6,slicedice:d_t,squarify:N2e,resquarify:h_t},UH=["x0","y0","x1","y1","depth","children"];function pne(e){ig.call(this,e)}pne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UH.length,default:UH}]};ft(pne,ig,{layout(){const e=c_t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(ege,t)?e.tile(ege[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:UH});const jVt=Object.freeze(Object.defineProperty({__proto__:null,nest:une,pack:lne,partition:cne,stratify:fne,tree:dne,treelinks:hne,treemap:pne},Symbol.toStringTag,{value:"Module"})),nB=4278190080;function BVt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function UVt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=N0(s,o).getContext("2d"),l=N0(s,o).getContext("2d"),c=a&&N0(s,o).getContext("2d");n.forEach(C=>QO(u,C,!1)),QO(l,t,!1),a&&QO(c,t,!0);const f=rB(u,s,o),d=rB(l,s,o),h=a&&rB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,x;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&nB,x=d[w]&nB,S=a&&h[w]&nB,(E||S||x)&&(v=e(g),b=e(y),!i&&(E||x)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function rB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function QO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>QO(e,s.items,n))}):Kl[r].draw(e,{items:n?t.map(zVt):t})}function zVt(e){const t=cF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Sp=5,Ma=31,yI=32,Mg=new Uint32Array(yI+1),Af=new Uint32Array(yI+1);Af[0]=0;Mg[0]=~Af[0];for(let e=1;e<=yI;++e)Af[e]=Af[e-1]<<1|1,Mg[e]=~Af[e];function VVt(e,t){const n=new Uint32Array(~~((e*t+yI)/yI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Sp]&1<<(a&Ma)},set:(s,o)=>{const a=o*e+s;r(a>>>Sp,1<<(a&Ma))},clear:(s,o)=>{const a=o*e+s;i(a>>>Sp,~(1<<(a&Ma)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Sp,h=f>>>Sp,d===h){if(n[d]&Mg[c&Ma]&Af[(f&Ma)+1])return!0}else{if(n[d]&Mg[c&Ma]||n[h]&Af[(f&Ma)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)r(f,Mg[l&Ma]&Af[(c&Ma)+1]);else for(r(f,Mg[l&Ma]),r(d,Af[(c&Ma)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)i(f,Af[l&Ma]|Mg[(c&Ma)+1]);else for(i(f,Af[l&Ma]),i(d,Mg[(c&Ma)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function HVt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>VVt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function qVt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Ol.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function yM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function u0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function WVt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!yM(p,m,d,h,i,s)&&!u0(e,p,m,h,d,g,o,a)&&!u0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,u0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ol.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,x,C,A,R,P,$,k,D,M,L,B,U;for(let V=0;V<f;++V){for(v=c[V].x,w=c[V].y,b=c[V].x2===void 0?v:c[V].x2,E=c[V].y2===void 0?w:c[V].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),R=e(v),$=e(b),P=~~((R+$)/2),k=e(w),M=e(E),D=~~((k+M)/2),C=P;C>=R;--C)for(A=D;A>=k;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=P;C<=$;++C)for(A=D;A<=M;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),S=(v+b)/2,x=(w+E)/2,L>=y&&!yM(S,x,h,d,i,s)&&!u0(e,S,x,d,h,d,o,null)&&(y=L,l.x=S,l.y=x,g=!0))}return m||g?(S=h/2,x=d/2,o.setRange(e(l.x-S),e(l.y-x),e(l.x+S),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const GVt=[-1,-1,1,1],YVt=[-1,1,-1,1];function KVt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ol.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,x,C,A,R,P,$,k,D;for(let M=0;M<f;++M){for(b=c[M].x,E=c[M].y,w=c[M].x2===void 0?b:c[M].x2,S=c[M].y2===void 0?E:c[M].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([A,R]=p.pop(),!(o.get(A,R)||a.get(A,R)||u.get(A,R))){u.set(A,R);for(let L=0;L<4;++L)x=A+GVt[L],C=R+YVt[L],u.outOfBounds(x,C,x,C)||p.push([x,C]);if(x=e.invert(A),C=e.invert(R),P=m,$=s,!yM(x,C,h,d,i,s)&&!u0(e,x,C,d,h,P,o,a)&&!u0(e,x,C,d,h,d,o,null)){for(;$-P>=1;)k=(P+$)/2,u0(e,x,C,d,h,k,o,a)?$=k:P=k;P>m&&(l.x=x,l.y=C,m=P,g=!0)}}!g&&!n&&(D=Math.abs(w-b+S-E),x=(b+w)/2,C=(E+S)/2,D>=v&&!yM(x,C,h,d,i,s)&&!u0(e,x,C,d,h,d,o,null)&&(v=D,l.x=x,l.y=C,y=!0))}return g||y?(x=h/2,C=d/2,o.setRange(e(l.x-x),e(l.y-C),e(l.x+x),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const XVt=["right","center","left"],QVt=["bottom","middle","top"];function JVt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,x,C,A,R,P;for(let $=0;$<u;++$){if(h=(n[$]&3)-1,p=(n[$]>>>2&3)-1,m=h===0&&p===0||r[$]<0,g=h&&p?Math.SQRT1_2:1,y=r[$]<0?-1:1,v=c[1+h]+r[$]*h*g,x=c[4+p]+y*f*p/2+r[$]*p*g,w=x-f/2,E=x+f/2,C=e(v),R=e(w),P=e(E),!d)if(tge(C,C,R,P,o,a,v,v,w,E,c,m))d=Ol.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,C=e(v),A=e(b),tge(C,A,R,P,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:x,l.align=XVt[h*y+1],l.baseline=QVt[p*y+1],o.setRange(C,R,A,P),!0}return!1}}function tge(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const iB=0,sB=4,oB=8,aB=0,uB=1,lB=2,ZVt={"top-left":iB+aB,top:iB+uB,"top-right":iB+lB,left:sB+aB,middle:sB+uB,right:sB+lB,"bottom-left":oB+aB,bottom:oB+uB,"bottom-right":oB+lB},eHt={naive:qVt,"reduced-search":WVt,floodfill:KVt};function tHt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=nHt(r,f),h=rHt(i,f),p=iHt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=sHt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(R=>{const P=v?Ol.width(R,R.text):void 0;return w=Math.max(w,P),E=Math.max(E,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(R),textWidth:P}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const x=HVt(t[0],t[1],l);let C;if(!b){n&&S.sort(($,k)=>n($.datum,k.datum));let R=!1;for(let $=0;$<h.length&&!R;++$)R=h[$]===5||d[$]<0;const P=(p&&o||g)&&e.map($=>$.datum);C=s.length||P?UVt(x,P||[],s,R,g):BVt(x,o&&S)}const A=g?eHt[c](x,C,o,u):JVt(x,C,h,d);return S.forEach(R=>R.opacity=+A(R)),S}function nHt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function rHt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ZVt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function iHt(e){return e&&e.mark&&e.mark.marktype}function sHt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const zH=["x","y","opacity","align","baseline"],j6e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mne(e){Re.call(this,null,e)}mne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:j6e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:zH.length,default:zH}]};ft(mne,Re,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||zH;return tHt(t.materialize(t.SOURCE).source||[],e.size,e.sort,gt(e.offset==null?1:e.offset),gt(e.anchor||j6e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const oHt=Object.freeze(Object.defineProperty({__proto__:null,label:mne},Symbol.toStringTag,{value:"Module"}));function B6e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function gne(e){Re.call(this,null,e)}gne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ft(gne,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=B6e(r,e.groupby),s=(e.groupby||[]).map(Zi),o=s.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{J$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Er(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const VH={constant:Iee,linear:kee,log:Y$e,exp:K$e,pow:X$e,quad:Ree,poly:Q$e},aHt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function yne(e){Re.call(this,null,e)}yne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(VH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ft(yne,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=B6e(r,e.groupby),s=(e.groupby||[]).map(Zi),o=e.method||"linear",a=e.order==null?3:e.order,u=aHt(o,a),l=e.as||[Zi(e.x),Zi(e.y)],c=VH[o],f=[];let d=e.extent;Ft(VH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Er({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||jh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Er(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):yF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const uHt=Object.freeze(Object.defineProperty({__proto__:null,loess:gne,regression:yne},Symbol.toStringTag,{value:"Module"}));function vne(e){Re.call(this,null,e)}vne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const lHt=[-1e5,-1e5,1e5,1e5];ft(vne,Re,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:lHt;const s=this.value=EX.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!fHt(u)?cHt(u):null}return t.reflow(e.modified()).modifies(n)}});function cHt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function fHt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const dHt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:vne},Symbol.toStringTag,{value:"Module"}));var cB=Math.PI/180,$C=64,JO=2048;function hHt(){var e=[256,256],t,n,r,i,s,o,a,u=U6e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(N0()),m=bHt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,x)=>x.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,pHt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?gHt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=($C<<5)/m,p.height=JO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.hypot(e[0],e[1]),w=u(e),E=c()<.5?1:-1,S=-E,x,C,A;(x=w(S+=E))&&(C=~~x[0],A=~~x[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!mHt(m,p,e[0]))&&(!g||yHt(m,g))){for(var R=m.sprite,P=m.width>>5,$=e[0]>>5,k=m.x-(P<<4),D=k&127,M=32-D,L=m.y1-m.y0,B=(m.y+m.y0)*$+(k>>5),U,V=0;V<L;V++){U=0;for(var O=0;O<=P;O++)p[B+O]|=U<<M|(O<P?(U=R[V*P+O])>>>D:0);B+=$}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=av(p),f):n},f.fontStyle=function(p){return arguments.length?(i=av(p),f):i},f.fontWeight=function(p){return arguments.length?(s=av(p),f):s},f.rotate=function(p){return arguments.length?(o=av(p),f):o},f.text=function(p){return arguments.length?(t=av(p),f):t},f.spiral=function(p){return arguments.length?(u=_Ht[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=av(p),f):r},f.padding=function(p){return arguments.length?(a=av(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function pHt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,($C<<5)/s,JO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*cB),g=Math.cos(t.rotate*cB),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=$C<<5&&(o=0,a+=u,u=0),a+d>=JO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*cB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,($C<<5)/s,JO/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),R=E[(a+p)*($C<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=R,x|=R}x?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function mHt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function gHt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function yHt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function U6e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function vHt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function bHt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function av(e){return typeof e=="function"?e:function(){return e}}var _Ht={archimedean:U6e,rectangular:vHt};const z6e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],wHt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function bne(e){Re.call(this,hHt(),e)}bne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:z6e}]};ft(bne,Re,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||wHt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||z6e;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Ca(a),u){const p=a,m=gr("sqrt")().domain(jh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Gc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const EHt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:bne},Symbol.toStringTag,{value:"Module"})),xHt=e=>new Uint8Array(e),SHt=e=>new Uint16Array(e),$2=e=>new Uint32Array(e);function THt(){let e=8,t=[],n=$2(0),r=bP(0,e),i=bP(0,e);return{data:()=>t,seen:()=>n=CHt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=bP(s,e,r),i=bP(s,e))}}}function CHt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function bP(e,t,n){const r=(t<257?xHt:t<65537?SHt:$2)(e);return n&&r.set(n),r}function nge(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function rge(){let e=$2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=$2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=AHt(h,d),c)p=t,m=e,t=Array(c+f),e=$2(c+f),IHt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Bpt(u,a[0],0,l),B0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function AHt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Vpt(e,t)}function IHt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function _ne(e){Re.call(this,THt(),e),this._indices=null,this._dims=null}_ne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ft(_ne,Re,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=rge()),s.push(nge(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,x;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=rge(),p[y]=m=g.insert(x,t.source,0)),o[E]=nge(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function wne(e){Re.call(this,null,e)}wne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ft(wne,Re,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const kHt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:_ne,resolvefilter:wne},Symbol.toStringTag,{value:"Module"})),RHt="RawCode",eb="Literal",NHt="Property",PHt="Identifier",OHt="ArrayExpression",DHt="BinaryExpression",V6e="CallExpression",$Ht="ConditionalExpression",MHt="LogicalExpression",LHt="MemberExpression",FHt="ObjectExpression",jHt="UnaryExpression";function gd(e){this.type=e}gd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=BHt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function BHt(e){switch(e.type){case OHt:return e.elements;case DHt:case MHt:return[e.left,e.right];case V6e:return[e.callee].concat(e.arguments);case $Ht:return[e.test,e.consequent,e.alternate];case LHt:return[e.object,e.property];case FHt:return e.properties;case NHt:return[e.key,e.value];case jHt:return[e.argument];case PHt:case eb:case RHt:default:return[]}}var op,Rt,$e,_a,Dr,$F=1,fR=2,tb=3,zy=4,MF=5,Lb=6,Cu=7,dR=8,UHt=9;op={};op[$F]="Boolean";op[fR]="<end>";op[tb]="Identifier";op[zy]="Keyword";op[MF]="Null";op[Lb]="Numeric";op[Cu]="Punctuator";op[dR]="String";op[UHt]="RegularExpression";var zHt="ArrayExpression",VHt="BinaryExpression",HHt="CallExpression",qHt="ConditionalExpression",H6e="Identifier",WHt="Literal",GHt="LogicalExpression",YHt="MemberExpression",KHt="ObjectExpression",XHt="Property",QHt="UnaryExpression",so="Unexpected token %0",JHt="Unexpected number",ZHt="Unexpected string",eqt="Unexpected identifier",tqt="Unexpected reserved word",nqt="Unexpected end of input",HH="Invalid regular expression",fB="Invalid regular expression: missing /",q6e="Octal literals are not allowed in strict mode.",rqt="Duplicate data property in object literal not allowed in strict mode",Po="ILLEGAL",vI="Disabled.",iqt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),sqt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function LF(e,t){if(!e)throw new Error("ASSERT: "+t)}function $p(e){return e>=48&&e<=57}function Ene(e){return"0123456789abcdefABCDEF".includes(e)}function M2(e){return"01234567".includes(e)}function oqt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function bI(e){return e===10||e===13||e===8232||e===8233}function hR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&iqt.test(String.fromCharCode(e))}function vM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&sqt.test(String.fromCharCode(e))}const aqt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function W6e(){for(;$e<_a;){const e=Rt.charCodeAt($e);if(oqt(e)||bI(e))++$e;else break}}function qH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<_a&&Ene(Rt[$e])?(r=Rt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},so,Po);return String.fromCharCode(i)}function uqt(){var e,t,n,r;for(e=Rt[$e],t=0,e==="}"&&pr({},so,Po);$e<_a&&(e=Rt[$e++],!!Ene(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},so,Po),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function G6e(){var e,t;for(e=Rt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt($e)!==117&&pr({},so,Po),++$e,e=qH("u"),(!e||e==="\\"||!hR(e.charCodeAt(0)))&&pr({},so,Po),t=e);$e<_a&&(e=Rt.charCodeAt($e),!!vM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt($e)!==117&&pr({},so,Po),++$e,e=qH("u"),(!e||e==="\\"||!vM(e.charCodeAt(0)))&&pr({},so,Po),t+=e);return t}function lqt(){var e,t;for(e=$e++;$e<_a;){if(t=Rt.charCodeAt($e),t===92)return $e=e,G6e();if(vM(t))++$e;else break}return Rt.slice(e,$e)}function cqt(){var e,t,n;return e=$e,t=Rt.charCodeAt($e)===92?G6e():lqt(),t.length===1?n=tb:aqt.hasOwnProperty(t)?n=zy:t==="null"?n=MF:t==="true"||t==="false"?n=$F:n=tb,{type:n,value:t,start:e,end:$e}}function dB(){var e=$e,t=Rt.charCodeAt($e),n,r=Rt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Cu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=Rt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Cu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,Rt.charCodeAt($e)===61&&++$e,{type:Cu,value:Rt.slice(e,$e),start:e,end:$e}}}if(o=Rt.substr($e,4),o===">>>=")return $e+=4,{type:Cu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Cu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return $e+=2,{type:Cu,value:i,start:e,end:$e};if(i==="//"&&pr({},so,Po),"<>=!+-*%&|^/".includes(r))return++$e,{type:Cu,value:r,start:e,end:$e};pr({},so,Po)}function fqt(e){let t="";for(;$e<_a&&Ene(Rt[$e]);)t+=Rt[$e++];return t.length===0&&pr({},so,Po),hR(Rt.charCodeAt($e))&&pr({},so,Po),{type:Lb,value:parseInt("0x"+t,16),start:e,end:$e}}function dqt(e){let t="0"+Rt[$e++];for(;$e<_a&&M2(Rt[$e]);)t+=Rt[$e++];return(hR(Rt.charCodeAt($e))||$p(Rt.charCodeAt($e)))&&pr({},so,Po),{type:Lb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function ige(){var e,t,n;if(n=Rt[$e],LF($p(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=Rt[$e++],n=Rt[$e],e==="0"){if(n==="x"||n==="X")return++$e,fqt(t);if(M2(n))return dqt(t);n&&$p(n.charCodeAt(0))&&pr({},so,Po)}for(;$p(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="."){for(e+=Rt[$e++];$p(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="e"||n==="E")if(e+=Rt[$e++],n=Rt[$e],(n==="+"||n==="-")&&(e+=Rt[$e++]),$p(Rt.charCodeAt($e)))for(;$p(Rt.charCodeAt($e));)e+=Rt[$e++];else pr({},so,Po);return hR(Rt.charCodeAt($e))&&pr({},so,Po),{type:Lb,value:parseFloat(e),start:t,end:$e}}function hqt(){var e="",t,n,r,i,s=!1;for(t=Rt[$e],LF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<_a;)if(r=Rt[$e++],r===t){t="";break}else if(r==="\\")if(r=Rt[$e++],!r||!bI(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[$e]==="{"?(++$e,e+=uqt()):e+=qH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:M2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<_a&&M2(Rt[$e])&&(s=!0,i=i*8+"01234567".indexOf(Rt[$e++]),"0123".includes(r)&&$e<_a&&M2(Rt[$e])&&(i=i*8+"01234567".indexOf(Rt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[$e]===`
`&&++$e;else{if(bI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},so,Po),{type:dR,value:e,octal:s,start:n,end:$e}}function pqt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},HH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},HH)}try{return new RegExp(e,t)}catch{return null}}function mqt(){var e,t,n,r,i;for(e=Rt[$e],LF(e==="/","Regular expression literal must start with a slash"),t=Rt[$e++],n=!1,r=!1;$e<_a;)if(e=Rt[$e++],t+=e,e==="\\")e=Rt[$e++],bI(e.charCodeAt(0))&&pr({},fB),t+=e;else if(bI(e.charCodeAt(0)))pr({},fB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},fB),i=t.substr(1,t.length-2),{value:i,literal:t}}function gqt(){var e,t,n;for(t="",n="";$e<_a&&(e=Rt[$e],!!vM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<_a?pr({},so,Po):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},HH,n),{value:n,literal:t}}function yqt(){var e,t,n,r;return Dr=null,W6e(),e=$e,t=mqt(),n=gqt(),r=pqt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function vqt(e){return e.type===tb||e.type===zy||e.type===$F||e.type===MF}function Y6e(){if(W6e(),$e>=_a)return{type:fR,start:$e,end:$e};const e=Rt.charCodeAt($e);return hR(e)?cqt():e===40||e===41||e===59?dB():e===39||e===34?hqt():e===46?$p(Rt.charCodeAt($e+1))?ige():dB():$p(e)?ige():dB()}function Ou(){const e=Dr;return $e=e.end,Dr=Y6e(),$e=e.end,e}function K6e(){const e=$e;Dr=Y6e(),$e=e}function bqt(e){const t=new gd(zHt);return t.elements=e,t}function sge(e,t,n){const r=new gd(e==="||"||e==="&&"?GHt:VHt);return r.operator=e,r.left=t,r.right=n,r}function _qt(e,t){const n=new gd(HHt);return n.callee=e,n.arguments=t,n}function wqt(e,t,n){const r=new gd(qHt);return r.test=e,r.consequent=t,r.alternate=n,r}function xne(e){const t=new gd(H6e);return t.name=e,t}function MC(e){const t=new gd(WHt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function oge(e,t,n){const r=new gd(YHt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Eqt(e){const t=new gd(KHt);return t.properties=e,t}function age(e,t,n){const r=new gd(XHt);return r.key=t,r.value=n,r.kind=e,r}function xqt(e,t){const n=new gd(QHt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(LF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function FF(e){e.type===fR&&pr(e,nqt),e.type===Lb&&pr(e,JHt),e.type===dR&&pr(e,ZHt),e.type===tb&&pr(e,eqt),e.type===zy&&pr(e,tqt),pr(e,so,e.value)}function wa(e){const t=Ou();(t.type!==Cu||t.value!==e)&&FF(t)}function pi(e){return Dr.type===Cu&&Dr.value===e}function hB(e){return Dr.type===zy&&Dr.value===e}function Sqt(){const e=[];for($e=Dr.start,wa("[");!pi("]");)pi(",")?(Ou(),e.push(null)):(e.push(nb()),pi("]")||wa(","));return Ou(),bqt(e)}function uge(){$e=Dr.start;const e=Ou();return e.type===dR||e.type===Lb?(e.octal&&pr(e,q6e),MC(e)):xne(e.value)}function Tqt(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===tb)return n=uge(),wa(":"),r=nb(),age("init",n,r);if(e.type===fR||e.type===Cu)FF(e);else return t=uge(),wa(":"),r=nb(),age("init",t,r)}function Cqt(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,wa("{");!pi("}");)t=Tqt(),t.key.type===H6e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},rqt):i[r]=!0,e.push(t),pi("}")||wa(",");return wa("}"),Eqt(e)}function Aqt(){wa("(");const e=Sne();return wa(")"),e}const Iqt={if:1};function kqt(){var e,t,n;if(pi("("))return Aqt();if(pi("["))return Sqt();if(pi("{"))return Cqt();if(e=Dr.type,$e=Dr.start,e===tb||Iqt[Dr.value])n=xne(Ou().value);else if(e===dR||e===Lb)Dr.octal&&pr(Dr,q6e),n=MC(Ou());else{if(e===zy)throw new Error(vI);e===$F?(t=Ou(),t.value=t.value==="true",n=MC(t)):e===MF?(t=Ou(),t.value=null,n=MC(t)):pi("/")||pi("/=")?(n=MC(yqt()),K6e()):FF(Ou())}return n}function Rqt(){const e=[];if(wa("("),!pi(")"))for(;$e<_a&&(e.push(nb()),!pi(")"));)wa(",");return wa(")"),e}function Nqt(){$e=Dr.start;const e=Ou();return vqt(e)||FF(e),xne(e.value)}function Pqt(){return wa("."),Nqt()}function Oqt(){wa("[");const e=Sne();return wa("]"),e}function Dqt(){var e,t,n;for(e=kqt();;)if(pi("."))n=Pqt(),e=oge(".",e,n);else if(pi("("))t=Rqt(),e=_qt(e,t);else if(pi("["))n=Oqt(),e=oge("[",e,n);else break;return e}function lge(){const e=Dqt();if(Dr.type===Cu&&(pi("++")||pi("--")))throw new Error(vI);return e}function ZO(){var e,t;if(Dr.type!==Cu&&Dr.type!==zy)t=lge();else{if(pi("++")||pi("--"))throw new Error(vI);if(pi("+")||pi("-")||pi("~")||pi("!"))e=Ou(),t=ZO(),t=xqt(e.value,t);else{if(hB("delete")||hB("void")||hB("typeof"))throw new Error(vI);t=lge()}}return t}function cge(e){let t=0;if(e.type!==Cu&&e.type!==zy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function $qt(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=ZO(),r=Dr,i=cge(r),i===0)return u;for(r.prec=i,Ou(),t=[e,Dr],o=ZO(),s=[u,r,o];(i=cge(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=sge(a,u,o),s.push(n);r=Ou(),r.prec=i,s.push(r),t.push(Dr),n=ZO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=sge(s[l-1].value,s[l-2],n),l-=2;return n}function nb(){var e,t,n;return e=$qt(),pi("?")&&(Ou(),t=nb(),wa(":"),n=nb(),e=wqt(e,t,n)),e}function Sne(){const e=nb();if(pi(","))throw new Error(vI);return e}function Tne(e){Rt=e,$e=0,_a=Rt.length,Dr=null,K6e();const t=Sne();if(Dr.type!==fR)throw new Error("Unexpect token after expression.");return t}var X6e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Q6e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Mqt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function J6e(e){e=e||{};const t=e.allowed?id(e.allowed):{},n=e.forbidden?id(e.forbidden):{},r=e.constants||X6e,i=(e.functions||Q6e)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(yt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Le("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[Mqt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const fge=Symbol("vega_selection_getter");function Z6e(e){return(!e.getter||!e.getter[fge])&&(e.getter=Hc(e.field),e.getter[fge]=!0),e.getter}const Cne="intersect",dge="union",Lqt="vlMulti",Fqt="vlPoint",hge="or",jqt="and",qd="_vgsid_",_I=Hc(qd),Bqt="E",Uqt="R",zqt="R-E",Vqt="R-LE",Hqt="R-RE",bM="index:unit";function pge(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Z6e(a)(e),k0(o)&&(o=ma(o)),k0(r[s])&&(r[s]=ma(r[s])),Be(r[s])&&k0(r[s][0])&&(r[s]=r[s].map(ma)),a.type===Bqt){if(Be(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Uqt){if(!pw(o,r[s]))return!1}else if(a.type===Hqt){if(!pw(o,r[s],!0,!1))return!1}else if(a.type===zqt){if(!pw(o,r[s],!1,!1))return!1}else if(a.type===Vqt&&!pw(o,r[s],!1,!0))return!1;return!0}function qqt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[bM]&&r[bM].value:void 0,o=n===Cne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=pge(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=pge(t,l),o^h)return h;return a&&o}const e4e=Wx(_I),Wqt=e4e.left,Gqt=e4e.right;function Yqt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[bM]&&r[bM].value:void 0,o=n===Cne,a=_I(t),u=Wqt(i,a);if(u===i.length||_I(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Gqt(i,a)-u<s.size)return!1}return!0}function Kqt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>Z6e(r)(n.datum))}:{[qd]:_I(n.datum)},t))}function Xqt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=pB[`${y}_union`],m[d]=v(g,gt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(gt(f).reduce((x,C,A)=>(x[c[A].field]=C,x),{})))}else h=qd,p=_I(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[qd]:p}));if(t=t||dge,o[qd]?o[qd]=pB[`${qd}_${t}`](...Object.values(o[qd])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(C=>o[x][C]).reduce((C,A)=>C===void 0?A:pB[`${u[x]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const x=r?Fqt:Lqt;o[x]=t===dge?{[hge]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[jqt]:s.map(C=>({[hge]:a[C]}))}}return o}var pB={[`${qd}_union`]:Qpt,[`${qd}_intersect`]:Kpt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Qqt=":",Jqt="@";function Ane(e,t,n,r){t[0].type!==eb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=Jqt+o,u=Qqt+i;s===Cne&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function t4e(e){const t=this.context.data[e];return t?t.values.value:[]}function Zqt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function eWt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(qc).insert(t)),1}function tWt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const pR=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},nWt=pR("format"),n4e=pR("timeFormat"),rWt=pR("utcFormat"),iWt=pR("timeParse"),sWt=pR("utcParse"),_P=new Date(2e3,0,1);function jF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(_P.setYear(2e3),_P.setMonth(e),_P.setDate(t),n4e.call(this,_P,n))}function oWt(e){return jF.call(this,e,1,"%B")}function aWt(e){return jF.call(this,e,1,"%b")}function uWt(e){return jF.call(this,0,2+e,"%A")}function lWt(e){return jF.call(this,0,2+e,"%a")}const cWt=":",fWt="@",WH="%",r4e="$";function Ine(e,t,n,r){t[0].type!==eb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=cWt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function dWt(e,t,n,r){t[0].type!==eb&&Le("First argument to indata must be a string literal."),t[1].type!==eb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=fWt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Qa(e,t,n,r){if(t[0].type===eb)mge(n,r,t[0].value);else for(e in n.scales)mge(n,r,e)}function mge(e,t,n){const r=WH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ap(e,t){if(_n(e))return e;if(yt(e)){const n=t.scales[e];return n&&F9t(n.value)?n.value:void 0}}function hWt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Qa,n._range=Qa,n._scale=Qa;const r=i=>"_["+(i.type===eb?ot(WH+i.value):ot(WH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function kne(e,t){return function(n,r,i){if(n){const s=ap(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const pWt=kne("area",l1t),mWt=kne("bounds",h1t),gWt=kne("centroid",b1t);function yWt(e,t){const n=ap(e,(t||this).context);return n&&n.scale()}function vWt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Rne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function bWt(){return Rne(this.context.dataflow,"warn",arguments)}function _Wt(){return Rne(this.context.dataflow,"info",arguments)}function wWt(){return Rne(this.context.dataflow,"debug",arguments)}function mB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function GH(e){const t=z0(e),n=mB(t.r),r=mB(t.g),i=mB(t.b);return .2126*n+.7152*r+.0722*i}function EWt(e,t){const n=GH(e),r=GH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function xWt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function i4e(e,t){return e===t||e!==e&&t!==t?!0:Be(e)?Be(t)&&e.length===t.length?SWt(e,t):!1:mt(e)&&mt(t)?s4e(e,t):!1}function SWt(e,t){for(let n=0,r=e.length;n<r;++n)if(!i4e(e[n],t[n]))return!1;return!0}function s4e(e,t){for(const n in e)if(!i4e(e[n],t[n]))return!1;return!0}function gge(e){return t=>s4e(e,t)}function TWt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?qc:Be(n)||lF(n)?n:gge(n),c.remove(f)),t&&c.insert(t),r&&(f=gge(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function CWt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function AWt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const yge={};function IWt(e,t){const n=yge[t]||(yge[t]=Hc(t));return Be(e)?e.map(n):n(e)}function Nne(e){return Be(e)||ArrayBuffer.isView(e)?e:null}function Pne(e){return Nne(e)||(yt(e)?e:null)}function kWt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Nne(e).join(...n)}function RWt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pne(e).indexOf(...n)}function NWt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pne(e).lastIndexOf(...n)}function PWt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pne(e).slice(...n)}function OWt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function DWt(e){return Nne(e).slice().reverse()}function $Wt(e,t,n){return nte(e||0,t||0,n||0)}function MWt(e,t){const n=ap(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function LWt(e,t){const n=ap(e,(t||this).context);return n?n.copy():void 0}function FWt(e,t){const n=ap(e,(t||this).context);return n?n.domain():[]}function jWt(e,t,n){const r=ap(e,(n||this).context);return r?Be(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function BWt(e,t){const n=ap(e,(t||this).context);return n&&n.range?n.range():[]}function UWt(e,t,n){const r=ap(e,(n||this).context);return r?r(t):void 0}function zWt(e,t,n,r,i){e=ap(e,(i||this).context);const s=KMe(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=Ta;return u-a?l=LMe(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function VWt(e,t,n){const r=ap(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function HWt(e){let t=null;return function(n){return n?pI(n,t=t||ex(e)):e}}const o4e=e=>e.data;function a4e(e,t){const n=t4e.call(t,e);return n.root&&n.root.lookup||{}}function qWt(e,t,n){const r=a4e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(o4e):void 0}function WWt(e,t){const n=a4e(e,this)[t];return n?n.ancestors().map(o4e):void 0}const u4e=()=>typeof window<"u"&&window||null;function GWt(){const e=u4e();return e?e.screen:{}}function YWt(){const e=u4e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function KWt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function l4e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ss().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return WLe(o,s,XWt(t))}function XWt(e){let t=null;if(e){const n=gt(e.marktype),r=gt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function QWt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=gt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function JWt(e){return gt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function ZWt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ss().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),l4e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>eGt(u.x,u.y,t))}function eGt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const wI={random(){return Gc()},cumulativeNormal:pF,cumulativeLogNormal:Eee,cumulativeUniform:Cee,densityNormal:yee,densityLogNormal:wee,densityUniform:Tee,quantileNormal:mF,quantileLogNormal:xee,quantileUniform:Aee,sampleNormal:hF,sampleLogNormal:_ee,sampleUniform:See,isArray:Be,isBoolean:Uy,isDate:k0,isDefined(e){return e!==void 0},isNumber:cr,isObject:mt,isRegExp:G3e,isString:yt,isTuple:lF,isValid(e){return e!=null&&e===e},toBoolean:tee,toDate(e){return nee(e)},toNumber:ma,toString:ree,indexof:RWt,join:kWt,lastindexof:NWt,replace:OWt,reverse:DWt,slice:PWt,flush:q3e,lerp:Y3e,merge:xWt,pad:Q3e,peek:Qn,pluck:IWt,span:Yk,inrange:pw,truncate:J3e,rgb:z0,lab:m3,hcl:g3,hsl:_A,luminance:GH,contrast:EWt,sequence:Mu,format:nWt,utcFormat:rWt,utcParse:sWt,utcOffset:d$e,utcSequence:m$e,timeFormat:n4e,timeParse:iWt,timeOffset:f$e,timeSequence:p$e,timeUnitSpecifier:e$e,monthFormat:oWt,monthAbbrevFormat:aWt,dayFormat:uWt,dayAbbrevFormat:lWt,quarter:U3e,utcquarter:z3e,week:n$e,utcweek:s$e,dayofyear:t$e,utcdayofyear:i$e,warn:bWt,info:_Wt,debug:wWt,extent(e){return jh(e)},inScope:vWt,intersect:l4e,clampRange:V3e,pinchDistance:CWt,pinchAngle:AWt,screen:GWt,containerSize:KWt,windowSize:YWt,bandspace:$Wt,setdata:eWt,pathShape:HWt,panLinear:L3e,panLog:F3e,panPow:j3e,panSymlog:B3e,zoomLinear:KZ,zoomLog:XZ,zoomPow:J$,zoomSymlog:QZ,encode:tWt,modify:TWt,lassoAppend:QWt,lassoPath:JWt,intersectLasso:ZWt},tGt=["view","item","group","xy","x","y"],nGt="event.vega.",c4e="this.",One={},f4e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ot(r4e+e)}]`,functions:rGt,constants:X6e,visitors:One},YH=J6e(f4e);function rGt(e){const t=Q6e(e);tGt.forEach(n=>t[n]=nGt+n);for(const n in wI)t[n]=c4e+n;return bn(t,hWt(e,wI,One)),t}function ms(e,t,n){return arguments.length===1?wI[e]:(wI[e]=t,n&&(One[e]=n),YH&&(YH.functions[e]=c4e+e),this)}ms("bandwidth",MWt,Qa);ms("copy",LWt,Qa);ms("domain",FWt,Qa);ms("range",BWt,Qa);ms("invert",jWt,Qa);ms("scale",UWt,Qa);ms("gradient",zWt,Qa);ms("geoArea",pWt,Qa);ms("geoBounds",mWt,Qa);ms("geoCentroid",gWt,Qa);ms("geoShape",VWt,Qa);ms("geoScale",yWt,Qa);ms("indata",Zqt,dWt);ms("data",t4e,Ine);ms("treePath",qWt,Ine);ms("treeAncestors",WWt,Ine);ms("vlSelectionTest",qqt,Ane);ms("vlSelectionIdTest",Yqt,Ane);ms("vlSelectionResolve",Xqt,Ane);ms("vlSelectionTuples",Kqt);function Uh(e,t){const n={};let r;try{e=yt(e)?e:ot(e)+"",r=Tne(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==V6e)return;const o=s.callee.name,a=f4e.visitors[o];a&&a(o,s.arguments,t,n)});const i=YH(r);return i.globals.forEach(s=>{const o=r4e+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function iGt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const sGt=id(["rule"]),vge=id(["group","image","rect"]);function oGt(e,t){let n="";return sGt[t]||(e.x2&&(e.x?(vge[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(vge[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Dne(e){return(e+"").toLowerCase()}function aGt(e){return Dne(e)==="operator"}function uGt(e){return Dne(e)==="collect"}function PT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function lGt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var cGt={operator:(e,t)=>PT(e,["_"],t.code),parameter:(e,t)=>PT(e,["datum","_"],t.code),event:(e,t)=>PT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return PT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+ot(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=oGt(r,n),i+="return m;",PT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ot).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),lGt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function fGt(e){const t=this;aGt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function dGt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function hGt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Be(i)?i.map(s=>bge(s,n,t)):bge(i,n,t)}return t}function bge(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=_ge.length,s;r<i;++r)if(s=_ge[r],Ft(e,s.key))return s.parse(e,t,n);return e}var _ge=[{key:"$ref",parse:pGt},{key:"$key",parse:gGt},{key:"$expr",parse:mGt},{key:"$field",parse:yGt},{key:"$encode",parse:bGt},{key:"$compare",parse:vGt},{key:"$context",parse:_Gt},{key:"$subflow",parse:wGt},{key:"$tupleid",parse:EGt}];function pGt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function mGt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ul(t.parameterExpression(e.$expr),e.$fields))}function gGt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=eee(e.$key,e.$flat,t.expr.codegen))}function yGt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Hc(e.$field,e.$name,t.expr.codegen))}function vGt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=gt(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=JZ(r,e.$order,t.expr.codegen))}function bGt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ul(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function _Gt(e,t){return t}function wGt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function EGt(){return Mt}function xGt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function SGt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const TGt={skip:!0};function CGt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function AGt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],TGt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(qc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function d4e(e,t,n,r){return new h4e(e,t,n,r)}function h4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||cGt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function wge(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}h4e.prototype=wge.prototype={fork(){const e=new wge(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),uGt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Dne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:iGt,parseOperator:fGt,parseOperatorParameters:dGt,parseParameters:hGt,parseStream:xGt,parseUpdate:SGt,getState:CGt,setState:AGt};function IGt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),p4e(t,e.description()))}function p4e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function kGt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const gB="default";function RGt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:gB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?yt(i)?i:i.user:gB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return yt(r)||(i=r.item,r=r.user),KH(e,r&&r!==gB?r:i||r),i},{cursor:t})}function KH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function _M(e,t){var n=e._runtime.data;return Ft(n,t)||Le("Unrecognized data set: "+t),n[t]}function NGt(e,t){return arguments.length<2?_M(this,e).values.value:BF.call(this,e,$b().remove(qc).insert(t))}function BF(e,t){$$e(t)||Le("Second argument to changes must be a changeset.");const n=_M(this,e);return n.modified=!0,this.pulse(n.input,t)}function PGt(e,t){return BF.call(this,e,$b().insert(t))}function OGt(e,t){return BF.call(this,e,$b().remove(t))}function m4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function g4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function UF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function DGt(e){var t=UF(e),n=m4e(e),r=g4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function $Gt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=UF(e),o=t.changedTouches?t.changedTouches[0]:t,s=PF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=MGt(e,n,s),t}function MGt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;yt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ca(e),item:Ca(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Ege="view",LGt="timer",FGt="window",jGt={trap:!1};function BGt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Be(r[s])&&(r[s]=id(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function y4e(e,t,n,r){e._eventListeners.push({type:n,sources:gt(t),handler:r})}function UGt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function wP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function zGt(e,t,n){var r=this,i=new dF(n),s=function(l,c){r.runAsync(null,()=>{e===Ege&&UGt(r,t)&&l.preventDefault(),i.receive($Gt(r,l,c))})},o;if(e===LGt)wP(r,"timer",t)&&r.timer(s,t);else if(e===Ege)wP(r,"view",t)&&r.addEventListener(t,s,jGt);else if(e===FGt?wP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&wP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);y4e(r,o,t,s)}return i}function xge(e){return e.item}function Sge(e){return e.item.mark.source}function Tge(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function VGt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",xge),Sge,Tge(e)),this.on(this.events("view","pointerout",xge),Sge,Tge(t)),this}function HGt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Dl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const qGt="vega-bind",WGt="vega-bind-name",GGt="vega-bind-radio";function YGt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=ZZ(r.debounce,i.update))),(r.input==null&&r.element?KGt:QGt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function KGt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),y4e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(XGt(i))}}function XGt(e){return typeof Event<"u"?new Event(e):{type:e}}function QGt(e,t,n,r){const i=r.signal(n.signal),s=Dl("div",{class:qGt}),o=n.input==="radio"?s:s.appendChild(Dl("label"));o.appendChild(Dl("span",{class:WGt},n.name||n.signal)),t.appendChild(s);let a=JGt;switch(n.input){case"checkbox":a=ZGt;break;case"select":a=eYt;break;case"radio":a=tYt;break;case"range":a=nYt;break}a(e,o,n,i)}function JGt(e,t,n,r){const i=Dl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function ZGt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Dl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function eYt(e,t,n,r){const i=Dl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};wM(o,r)&&(u.selected=!0),i.appendChild(Dl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(wM(n.options[a],o)){i.selectedIndex=a;return}}}function tYt(e,t,n,r){const i=Dl("span",{class:GGt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};wM(o,r)&&(u.checked=!0);const l=Dl("input",u);l.addEventListener("change",()=>e.update(o));const c=Dl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)wM(a[l].value,o)&&(a[l].checked=!0)}}function nYt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||U0(s,i,100),a=Dl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Dl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function wM(e,t){return e===t||e+""==t+""}function v4e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,m4e(e),g4e(e),UF(e),i,s).background(e.background())}function $ne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function rYt(e,t,n,r){const i=new r(e.loader(),$ne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,UF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function iYt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=OF(r);e=n._el=e?yB(n,e,!0):null,IGt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||cR,a=e?s.renderer:s.headless;return n._renderer=a?v4e(n,n._renderer,e,a):null,n._handler=rYt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=yB(n,t,!0):e.appendChild(Dl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=yB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{YGt(n,u.element||t,u)})),n}function yB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const OT=e=>+e||0,sYt=e=>({top:e,bottom:e,left:e,right:e});function Cge(e){return mt(e)?{top:OT(e.top),bottom:OT(e.bottom),left:OT(e.left),right:OT(e.right)}:sYt(OT(e))}async function Mne(e,t,n,r){const i=OF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),v4e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function oYt(e,t){e!==s0.Canvas&&e!==s0.SVG&&e!==s0.PNG&&Le("Unrecognized image type: "+e);const n=await Mne(this,e,t);return e===s0.SVG?aYt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function aYt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function uYt(e,t){return(await Mne(this,s0.Canvas,e,t)).canvas()}async function lYt(e){return(await Mne(this,s0.SVG,e)).svg()}function cYt(e,t,n){return d4e(e,XE,wI,n).parse(t)}function fYt(e){var t=this._runtime.scales;return Ft(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var b4e="width",_4e="height",Lne="padding",Age={skip:!0};function w4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Lne?r.left+r.right:0)}function E4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Lne?r.top+r.bottom:0)}function dYt(e){var t=e._signals,n=t[b4e],r=t[_4e],i=t[Lne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=w4e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=E4e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function hYt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(b4e,n,Age),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(_4e,r,Age),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function pYt(e){return this._runtime.getState(e||{data:mYt,signals:gYt,recurse:!0})}function mYt(e,t){return t.modified&&Be(t.input.value)&&!e.startsWith("_:vega:_")}function gYt(e,t){return!(e==="parent"||t instanceof XE.proxy)}function yYt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function vYt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(x0t(n,t))}function bYt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",_Yt(r))}function _Yt(e){return e==null?"":Be(e)?x4e(e):mt(e)&&!k0(e)?wYt(e):e+""}function wYt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Be(n)?x4e(n):S4e(n))}).join(`
`)}function x4e(e){return"["+e.map(S4e).join(", ")+"]"}function S4e(e){return Be(e)?"[]":mt(e)&&!k0(e)?"{}":e}function EYt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function T4e(e,t){const n=this;if(t=t||{},Yw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(T$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||s0.Canvas,n._scenegraph=new bLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||bYt,n._redraw=!0,n._handler=new cR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=BGt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=cYt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=w4e(n,n._width),n._viewHeight=E4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,dYt(n),kGt(n),RGt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function EP(e,t){return Ft(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+ot(t))}function C4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Ige(e,t,n,r){let i=C4e(n,r);return i||(i=$ne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function kge(e,t,n){const r=C4e(t,n);return r&&t._targets.remove(r),e}ft(T4e,Yw,{async evaluate(e,t,n){if(await Yw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,DGt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&BO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&p4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=EP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Cge(e)):Cge(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(OF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Yw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(EP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:hYt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=$ne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Ige(this,e,EP(this,e),t)},removeSignalListener(e,t){return kge(this,EP(this,e),t)},addDataListener(e,t){return Ige(this,e,_M(this,e).values,t)},removeDataListener(e,t){return kge(this,_M(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=KH(this,null);this._globalCursor=!!e,t&&KH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:vYt,events:zGt,finalize:HGt,hover:VGt,data:NGt,change:BF,insert:PGt,remove:OGt,scale:fYt,initialize:iYt,toImageURL:oYt,toCanvas:uYt,toSVG:lYt,getState:pYt,setState:yYt,_watchPixelRatio:EYt});const xYt="view",EM="[",xM="]",A4e="{",I4e="}",SYt=":",k4e=",",TYt="@",CYt=">",AYt=/[[\]{}]/,IYt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let R4e,N4e;function Vy(e,t,n){return R4e=t||xYt,N4e=n||IYt,P4e(e.trim()).map(XH)}function kYt(e){return N4e[e]}function L2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function P4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=L2(e,i,k4e,EM+A4e,xM+I4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function XH(e){return e[0]==="["?RYt(e):NYt(e)}function RYt(e){const t=e.length;let n=1,r;if(n=L2(e,n,xM,EM,xM),n===t)throw"Empty between selector: "+e;if(r=P4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==CYt)throw"Expected '>' after between selector: "+e;r=r.map(XH);const i=XH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function NYt(e){const t={source:R4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===I4e){if(a=e.lastIndexOf(A4e),a>=0){try{r=PYt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===TYt&&(i=++a),u=L2(e,a,SYt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=L2(e,a,EM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=L2(e,a,xM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==EM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||AYt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):kYt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function PYt(e){const t=e.split(k4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function OYt(e){return mt(e)?e:{type:e||"pad"}}const DT=e=>+e||0,DYt=e=>({top:e,bottom:e,left:e,right:e});function $Yt(e){return mt(e)?e.signal?e:{top:DT(e.top),bottom:DT(e.bottom),left:DT(e.left),right:DT(e.right)}:DYt(DT(e))}const oo=e=>mt(e)&&!Be(e)?bn({},e):{value:e};function Rge(e,t,n,r){return n!=null?(mt(n)&&!Be(n)||Be(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Uo(e,t,n){for(const r in t)Rge(e,r,t[r]);for(const r in n)Rge(e,r,n[r],"update")}function IS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function q_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Fne="mark",jne="frame",Bne="scope",MYt="axis",LYt="axis-domain",FYt="axis-grid",jYt="axis-label",BYt="axis-tick",UYt="axis-title",zYt="legend",VYt="legend-band",HYt="legend-entry",qYt="legend-gradient",O4e="legend-label",WYt="legend-symbol",GYt="legend-title",YYt="title",KYt="title-text",XYt="title-subtitle";function QYt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!q_(u,e)&&vB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===jne?i.group:n===Fne?bn({},i.mark,i[t]):null;for(u in c)l=q_(u,e)||(u==="fill"||u==="stroke")&&(q_("fill",e)||q_("stroke",e)),l||vB(s,u,c[u]);gt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)q_(h,e)||vB(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function vB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const D4e=e=>yt(e)?ot(e):e.signal?`(${e.signal})`:$4e(e);function zF(e){if(e.gradient!=null)return ZYt(e);let t=e.signal?`(${e.signal})`:e.color?JYt(e.color):e.field!=null?$4e(e.field):e.value!==void 0?ot(e.value):void 0;return e.scale!=null&&(t=eKt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${eD(e.exponent)})`),e.mult!=null&&(t+=`*${eD(e.mult)}`),e.offset!=null&&(t+=`+${eD(e.offset)}`),e.round&&(t=`round(${t})`),t}const xP=(e,t,n,r)=>`(${e}(${[t,n,r].map(zF).join(",")})+'')`;function JYt(e){return e.c?xP("hcl",e.h,e.c,e.l):e.h||e.s?xP("hsl",e.h,e.s,e.l):e.l||e.a?xP("lab",e.l,e.a,e.b):e.r||e.g||e.b?xP("rgb",e.r,e.g,e.b):null}function ZYt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ot(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(D4e(e.gradient)),`gradient(${t.join(",")})`}function eD(e){return mt(e)?"("+zF(e)+")":e}function $4e(e){return M4e(mt(e)?e:{datum:e})}function M4e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+ot(e));return e.signal||(r=yt(r)?ip(r).map(ot).join("]["):M4e(r)),t+"["+r+"]"}function eKt(e,t){const n=D4e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+eD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function tKt(e){let t="";return e.forEach(n=>{const r=zF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function L4e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=QYt(e,t,n,r,i.config);for(const a in e)o[a]=nKt(e[a],t,s,i);return s}function nKt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=iKt(rKt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function rKt(e){return Be(e)?tKt(e):zF(e)}function iKt(e,t,n,r){const i=Uh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const sKt="outer",oKt=["value","update","init","react","bind"];function Nge(e,t){Le(e+' for "outer" push: '+ot(t))}function F4e(e,t){const n=e.name;if(e.push===sKt)t.signals[n]||Nge("No prior signal definition",n),oKt.forEach(r=>{e[r]!==void 0&&Nge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function QH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function VF(e,t,n,r){return new QH(e,t,n,r)}function SM(e,t){return VF("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function EI(e,t){return t?{$field:e,$name:t}:{$field:e}}const JH=EI("key");function Pge(e,t){return{$compare:e,$order:t}}function aKt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const uKt="ascending",lKt="descending";function cKt(e){return mt(e)?(e.order===lKt?"-":"+")+HF(e.op,e.field):""}function HF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Une="scope",ZH="view";function Hs(e){return e&&e.signal}function fKt(e){return e&&e.expr}function tD(e){if(Hs(e))return!0;if(mt(e)){for(const t in e)if(tD(e[t]))return!0}return!1}function Sf(e,t){return e??t}function v1(e){return e&&e.signal||e}const Oge="timer";function xI(e,t){return(e.merge?hKt:e.stream?pKt:e.type?mKt:Le("Invalid stream specification: "+ot(e)))(e,t)}function dKt(e){return e===Une?ZH:e||ZH}function hKt(e,t){const n=e.merge.map(i=>xI(i,t)),r=zne({merge:n},e,t);return t.addStream(r).id}function pKt(e,t){const n=xI(e.stream,t),r=zne({stream:n},e,t);return t.addStream(r).id}function mKt(e,t){let n;e.type===Oge?(n=t.event(Oge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(dKt(e.source),e.type);const r=zne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function zne(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+ot(t)),e.between=[xI(r[0],n),xI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(gKt(t.marktype,t.markname,t.markrole)),t.source===Une&&r.push("inScope(event.item)"),r.length&&(e.filter=Uh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function gKt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const yKt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function vKt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),yt(s)&&(s=Vy(s,t.isSubscope()?Une:ZH)),s=gt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[_Kt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+ot(r)+")"),i.update=yt(o)?Uh(o,t):o.expr!=null?Uh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:yKt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(bKt(u,t),i)))}function bKt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):xI(e,t)}}function _Kt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function wKt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Uh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>vKt(i,t,n.id))}const Vr=e=>(t,n,r)=>VF(e,n,t||void 0,r),j4e=Vr("aggregate"),EKt=Vr("axisticks"),B4e=Vr("bound"),yd=Vr("collect"),Dge=Vr("compare"),xKt=Vr("datajoin"),U4e=Vr("encode"),SKt=Vr("expression"),TKt=Vr("facet"),CKt=Vr("field"),AKt=Vr("key"),IKt=Vr("legendentries"),kKt=Vr("load"),RKt=Vr("mark"),NKt=Vr("multiextent"),PKt=Vr("multivalues"),OKt=Vr("overlap"),DKt=Vr("params"),z4e=Vr("prefacet"),$Kt=Vr("projection"),MKt=Vr("proxy"),LKt=Vr("relay"),V4e=Vr("render"),FKt=Vr("scale"),Fb=Vr("sieve"),jKt=Vr("sortitems"),H4e=Vr("viewlayout"),BKt=Vr("values");let UKt=0;const q4e={min:"min",max:"max",count:"sum"};function zKt(e,t){const n=e.type||"linear";NMe(n)||Le("Unrecognized scale type: "+ot(n)),t.addScale(e.name,{type:n,domain:void 0})}function VKt(e,t){const n=t.getScale(e.name).params;let r;n.domain=W4e(e.domain,e,t),e.range!=null&&(n.range=Y4e(e,t,n)),e.interpolate!=null&&ZKt(e.interpolate,n),e.nice!=null&&(n.nice=JKt(e.nice,t)),e.bins!=null&&(n.bins=QKt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=Cc(e[r],t))}function Cc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+ot(e)):e}function nD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cc(n,t))}function qF(e){Le("Can not find data set: "+ot(e))}function W4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Be(e)?HKt:e.fields?WKt:qKt)(e,t,n)}function HKt(e,t,n){return e.map(r=>Cc(r,n))}function qKt(e,t,n){const r=n.getData(e.data);return r||qF(e.data),ZE(t.type)?r.valuesRef(n,e.field,G4e(e.sort,!1)):DMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function WKt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=yt(o)?{data:r,field:o}:Be(o)||o.signal?GKt(o,n):o,s.push(o),s),[]);return(ZE(t.type)?YKt:DMe(t.type)?KKt:XKt)(e,n,i)}function GKt(e,t){const n="_:vega:_"+UKt++,r=yd({});if(Be(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ot(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Fb({})]),{data:n,field:"data"}}function YKt(e,t,n){const r=G4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||qF(l.data),c.countsRef(t,l.field,r)}),a={groupby:JH,pulse:o};r&&(i=r.op||"count",s=r.field?HF(i,r.field):"count",a.ops=[q4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(j4e(a));const u=t.add(yd({pulse:$t(i)}));return s=t.add(BKt({field:JH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function G4e(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!q4e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function KKt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||qF(i.data),s.domainRef(t,i.field)});return $t(t.add(PKt({values:r})))}function XKt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||qF(i.data),s.extentRef(t,i.field)});return $t(t.add(NKt({extents:r})))}function QKt(e,t){return e.signal||Be(e)?nD(e,t):t.objectProperty(e)}function JKt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:Cc(e.interval),step:Cc(e.step)}:Cc(e)}function ZKt(e,t){t.interpolate=Cc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cc(e.gamma))}function Y4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(yt(i)){if(r&&Ft(r,i))return e=bn({},e,{range:r[i]}),Y4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=ZE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+ot(i))}else if(i.scheme){n.scheme=Be(i.scheme)?nD(i.scheme,t):Cc(i.scheme,t),i.extent&&(n.schemeExtent=nD(i.extent,t)),i.count&&(n.schemeCount=Cc(i.count,t));return}else if(i.step){n.rangeStep=Cc(i.step,t);return}else{if(ZE(e.type)&&!Be(i))return W4e(i,e,t);Be(i)||Le("Unsupported range type: "+ot(i))}return i.map(s=>(Be(s)?nD:Cc)(s,t))}function eXt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=eq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=eq(n[i],i,t));t.addProjection(e.name,r)}function eq(e,t,n){return Be(e)?e.map(r=>eq(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+ot(e)):e}const vd="top",kS="left",RS="right",fy="bottom",K4e="center",tXt="vertical",nXt="start",rXt="middle",iXt="end",tq="index",Vne="label",sXt="offset",ix="perc",oXt="perc2",Pc="value",mR="guide-label",Hne="guide-title",aXt="group-title",uXt="group-subtitle",$ge="symbol",rD="gradient",nq="discrete",rq="size",lXt="shape",cXt="fill",fXt="stroke",dXt="strokeWidth",hXt="strokeDash",pXt="opacity",qne=[rq,lXt,cXt,fXt,dXt,hXt,pXt],gR={name:1,style:1,interactive:1},nr={value:0},Oc={value:1},WF="group",X4e="rect",Wne="rule",mXt="symbol",jb="text";function SI(e){return e.type=WF,e.interactive=e.interactive||!1,e}function ll(e,t){const n=(r,i)=>Sf(e[r],Sf(t[r],i));return n.isVertical=r=>tXt===Sf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Sf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Sf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Sf(e.columns,Sf(t.columns,+n.isVertical(!0))),n}function Q4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function gXt(e,t,n){const r=t.config.style[n];return r&&r[e]}function GF(e,t,n){return`item.anchor === '${nXt}' ? ${e} : item.anchor === '${iXt}' ? ${t} : ${n}`}const Gne=GF(ot(kS),ot(RS),ot(K4e));function yXt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function J4e(e,t){return t?e?mt(e)?Object.assign({},e,{offset:J4e(e.offset,t)}):{value:e,offset:t}:t:e}function Xl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=IS(e.encode,t,gR)):e.interactive=!1,e}function vXt(e,t,n,r){const i=ll(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:nr,x:nr,y:nr,width:oo(f),height:oo(d)},update:bn({},u,{opacity:Oc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:nr}};return Uo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Xl({type:X4e,role:qYt,encode:h},r)}function bXt(e,t,n,r,i){const s=ll(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:nr,fill:{scale:t,field:Pc}};p[l]={signal:h+"datum."+ix,mult:u},p[c]=nr,p[f]={signal:h+"datum."+oXt,mult:u},p[d]=oo(a);const m={enter:p,update:bn({},p,{opacity:Oc}),exit:{opacity:nr}};return Uo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Xl({type:X4e,role:VYt,key:Pc,from:i,encode:m},r)}const _Xt=`datum.${ix}<=0?"${kS}":datum.${ix}>=1?"${RS}":"${K4e}"`,wXt=`datum.${ix}<=0?"${fy}":datum.${ix}>=1?"${vd}":"${rXt}"`;function Mge(e,t,n,r){const i=ll(e,t),s=i.isVertical(),o=oo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:nr},update:c={opacity:Oc,text:{field:Vne}},exit:{opacity:nr}};return Uo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Sf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:wXt},f="y",d="x",h="1-"):(l.align=c.align={signal:_Xt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ix,mult:a},l[d]=c[d]=o,o.offset=Sf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+tq}:void 0,Xl({type:jb,role:O4e,style:mR,key:Pc,from:r,encode:p,overlap:u},n)}function EXt(e,t,n,r,i){const s=ll(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${sXt} : datum.${rq}`,h=l?oo(l):{field:rq},p=`datum.${tq}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:nr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Oc,x:y.x,y:y.y},exit:{opacity:nr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Uo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),qne.forEach(R=>{e[R]&&(v[R]=y[R]={scale:e[R],field:Pc})});const x=Xl({type:mXt,role:WYt,key:Pc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=oo(c);C.offset=s("labelOffset"),g={enter:y={opacity:nr,x:{signal:d,offset:C},y:h},update:v={opacity:Oc,text:{field:Vne},x:y.x,y:y.y},exit:{opacity:nr}},Uo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Xl({type:jb,role:O4e,style:mR,key:Pc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:nr,height:l?oo(l):nr,opacity:nr},exit:{opacity:nr},update:v={opacity:Oc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:tq}},SI({role:Bne,from:r,encode:IS(g,o,gR),marks:[x,A],name:u,interactive:a,sort:w})}function xXt(e,t){const n=ll(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Yne='item.orient === "left"',Kne='item.orient === "right"',YF=`(${Yne} || ${Kne})`,SXt=`datum.vgrad && ${YF}`,TXt=GF('"top"','"bottom"','"middle"'),CXt=GF('"right"','"left"','"center"'),AXt=`datum.vgrad && ${Kne} ? (${CXt}) : (${YF} && !(datum.vgrad && ${Yne})) ? "left" : ${Gne}`,IXt=`item._anchor || (${YF} ? "middle" : "start")`,kXt=`${SXt} ? (${Yne} ? -90 : 90) : 0`,RXt=`${YF} ? (datum.vgrad ? (${Kne} ? "bottom" : "top") : ${TXt}) : "top"`;function NXt(e,t,n,r){const i=ll(e,t),s={enter:{opacity:nr},update:{opacity:Oc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:nr}};return Uo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:IXt},angle:{signal:kXt},align:{signal:AXt},baseline:{signal:RXt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Xl({type:jb,role:GYt,style:Hne,from:r,encode:s},n)}function PXt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Lge(e.path)+")":e.sphere&&(n="geoShape("+Lge(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Lge(e){return mt(e)&&e.signal?e.signal:ot(e)}function Z4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===WF?Bne:t||Fne}function OXt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Z4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function DXt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Xne(e,t){const n=F$e(e.type);n||Le("Unrecognized transform type: "+ot(e.type));const r=VF(n.type.toLowerCase(),null,eFe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function eFe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=$Xt(o,t,n)}return r}function $Xt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return MXt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+ot(t.type)+" parameter: "+ot(e.name));return}else{if(r==="param")return LXt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Hs(i)?i.map(s=>Fge(e,s,n)):Fge(e,i,n)}function Fge(e,t,n){const r=e.type;if(Hs(t))return Bge(r)?Le("Expression references can not be signals."):bB(r)?n.fieldRef(t):Uge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||bB(r);return i&&FXt(t)?n.exprRef(t.expr,t.as):i&&jXt(t)?EI(t.field,t.as):Bge(r)?Uh(t,n):BXt(r)?$t(n.getData(t).values):bB(r)?EI(t):Uge(r)?n.compareRef(t):t}}function MXt(e,t,n){return yt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function LXt(e,t,n){const r=t[e.name];return e.array?(Be(r)||Le("Expected an array of sub-parameters. Instead: "+ot(r)),r.map(i=>jge(e,i,n))):jge(e,r,n)}function jge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+ot(t));const s=bn(eFe(i,t,n),i.key);return $t(n.add(DKt(s)))}const FXt=e=>e&&e.expr,jXt=e=>e&&e.field,BXt=e=>e==="data",Bge=e=>e==="expr",bB=e=>e==="field",Uge=e=>e==="compare";function UXt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=iD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=Xne(bn({type:"aggregate",groupby:gt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=iD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(yd(null,[{}]))),o||(o=iD(e,n)),{key:i,pulse:o,parent:a}}function iD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function rb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}rb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new rb(e,s,i,r,o)};function tFe(e){return yt(e)?e:null}function zge(e,t,n){const r=HF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function $T(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=cKt(s);let l=tFe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:JH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(VF(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}rb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=tFe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&zge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&zge(e,u,n),a=e.add(j4e(u)),o=e.add(yd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return $T(e,this,"extent","extent",t,!1)},domainRef(e,t){return $T(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return $T(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return $T(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return $T(e,this,"indata","tupleindex",t,!0,!0)}};function zXt(e,t,n){const r=e.from.facet,i=r.name,s=iD(r,t);let o;r.name||Le("Facet must have a name: "+ot(r)),r.data||Le("Facet must reference a data set: "+ot(r)),r.field?o=t.add(z4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(TKt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+ot(r));const a=t.fork(),u=a.add(yd()),l=a.add(Fb({pulse:$t(u)}));a.addData(i,new rb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function VXt(e,t,n){const r=t.add(z4e({pulse:n.pulse})),i=t.fork();i.add(Fb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function nFe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(SM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Uh(l,t);u.update=c.$expr,u.params=c.$params}function KF(e,t){const n=Z4e(e),r=e.type===WF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Bne||n===jne,a,u,l,c,f,d,h;const p=n===Fne||o||i,m=UXt(e.from,r,t);u=t.add(xKt({key:m.key||(e.key?EI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(yd({pulse:g})),u=t.add(RKt({markdef:OXt(e),interactive:DXt(e.interactive,t),clip:PXt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(U4e(L4e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const x=Xne(S,t),C=x.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),x.params.pulse=$t(u),t.add(u=x)}),e.sort&&(u=t.add(jKt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(H4e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(B4e({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?zXt(e,t,m):p?VXt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=HXt(s,h,t));const w=t.add(V4e({pulse:h})),E=t.add(Fb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new rb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Le("Marks only support modify triggers."),nFe(S,t,f)}))}function HXt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Hs(s)?n.signalRef(s.signal):s,method:Hs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Hs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(OKt(o)))}function qXt(e,t){const n=t.config.legend,r=e.encode||{},i=ll(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;qne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=WXt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(yd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(IKt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===rD?(h=[vXt(e,c,n,r.gradient),Mge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${v1(i.gradientLength())})/100))`)):p===nq?h=[bXt(e,c,n,r.gradient,v),Mge(e,n,r.labels,v)]:(f=xXt(e,n),h=[EXt(e,n,r,v,v1(f.columns))],d.size=KXt(e,t,h[0].marks)),h=[SI({role:HYt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(NXt(e,n,r.title,g)),KF(SI({role:zYt,from:g,encode:IS(YXt(i,e,n),s,gR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function WXt(e,t){let n=e.type||$ge;return!e.type&&GXt(e)===1&&(e.fill||e.stroke)&&(n=ate(t)?rD:yH(t)?nq:$ge),n!==rD?n:yH(t)?nq:rD}function GXt(e){return qne.reduce((t,n)=>t+(e[n]?1:0),0)}function YXt(e,t,n){const r={enter:{},update:{}};return Uo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function KXt(e,t,n){const r=v1(Vge("size",e,n)),i=v1(Vge("strokeWidth",e,n)),s=v1(XXt(n[1].encode,t,mR));return Uh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Vge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Q4e(e,n[0].encode)}function XXt(e,t,n){return Q4e("fontSize",e)||gXt("fontSize",t,n)}const QXt=`item.orient==="${kS}"?-90:item.orient==="${RS}"?90:0`;function JXt(e,t){e=yt(e)?{text:e}:e;const n=ll(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(yd(null,[l])));return u.push(tQt(e,n,ZXt(e),c)),e.subtitle&&u.push(nQt(e,n,r.subtitle,c)),KF(SI({role:YYt,from:c,encode:eQt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function ZXt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function eQt(e,t){const n={enter:{},update:{}};return Uo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Gne},angle:{signal:QXt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),IS(n,t,gR)}function tQt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Uo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xl({type:jb,role:KYt,style:aXt,from:r,encode:o},n)}function nQt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Uo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xl({type:jb,role:XYt,style:uXt,from:r,encode:o},n)}function rQt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Xne(r,t))}),e.on&&e.on.forEach(r=>{nFe(r,t,e.name)}),t.addDataPipeline(e.name,iQt(e,t,n))}function iQt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Hs(e.values)||tD(e.format)?(r.push(Hge(t,e)),r.push(i=uv())):r.push(i=uv({$ingest:e.values,$format:e.format})):e.url?tD(e.url)||tD(e.format)?(r.push(Hge(t,e)),r.push(i=uv())):r.push(i=uv({$request:e.url,$format:e.format})):e.source&&(i=a=gt(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=uv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=LKt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,uv())),i||r.push(uv()),r.push(Fb({})),r}function uv(e){const t=yd({},e);return t.metadata={source:!0},t}function Hge(e,t){return kKt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const rFe=e=>e===fy||e===vd,XF=(e,t,n)=>Hs(e)?uQt(e.signal,t,n):e===kS||e===vd?t:n,ao=(e,t,n)=>Hs(e)?oQt(e.signal,t,n):rFe(e)?t:n,Kf=(e,t,n)=>Hs(e)?aQt(e.signal,t,n):rFe(e)?n:t,iFe=(e,t,n)=>Hs(e)?lQt(e.signal,t,n):e===vd?{value:t}:{value:n},sQt=(e,t,n)=>Hs(e)?cQt(e.signal,t,n):e===RS?{value:t}:{value:n},oQt=(e,t,n)=>sFe(`${e} === '${vd}' || ${e} === '${fy}'`,t,n),aQt=(e,t,n)=>sFe(`${e} !== '${vd}' && ${e} !== '${fy}'`,t,n),uQt=(e,t,n)=>Qne(`${e} === '${kS}' || ${e} === '${vd}'`,t,n),lQt=(e,t,n)=>Qne(`${e} === '${vd}'`,t,n),cQt=(e,t,n)=>Qne(`${e} === '${RS}'`,t,n),sFe=(e,t,n)=>(t=t!=null?oo(t):t,n=n!=null?oo(n):n,qge(t)&&qge(n)?(t=t?t.signal||ot(t.value):null,n=n?n.signal||ot(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),qge=e=>e==null||Object.keys(e).length===1,Qne=(e,t,n)=>({signal:`${e} ? (${yw(t)}) : (${yw(n)})`}),fQt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${kS}' ? (${yw(r)}) : `:"")+(n!=null?`${e} === '${fy}' ? (${yw(n)}) : `:"")+(i!=null?`${e} === '${RS}' ? (${yw(i)}) : `:"")+(t!=null?`${e} === '${vd}' ? (${yw(t)}) : `:"")+"(null)"}),yw=e=>Hs(e)?e.signal:e==null?null:ot(e),dQt=(e,t)=>t===0?0:Hs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Kw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function S_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Hne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[mR][i]}return null}function Wge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function hQt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Hs(o)){const f=Wge([n.axisX,n.axisY]),d=Wge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ao(o,S_(l,n.axisX,i,r),S_(l,n.axisY,i,r));u={};for(l of d)u[l]=fQt(o.signal,S_(l,n.axisTop,i,r),S_(l,n.axisBottom,i,r),S_(l,n.axisLeft,i,r),S_(l,n.axisRight,i,r))}else a=o===vd||o===fy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function pQt(e,t,n,r){const i=ll(e,t),s=e.orient;let o,a;const u={enter:o={opacity:nr},update:a={opacity:Oc},exit:{opacity:nr}};Uo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Gge(e,0),c=Gge(e,1);return o.x=a.x=ao(s,l,nr),o.x2=a.x2=ao(s,c),o.y=a.y=Kf(s,l,nr),o.y2=a.y2=Kf(s,c),Xl({type:Wne,role:LYt,from:r,encode:u},n)}function Gge(e,t){return{scale:e.scale,range:t}}function mQt(e,t,n,r,i){const s=ll(e,t),o=e.orient,a=e.gridScale,u=XF(o,1,-1),l=gQt(e.offset,u);let c,f,d;const h={enter:c={opacity:nr},update:d={opacity:Oc},exit:f={opacity:nr}};Uo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Pc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ao(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=ao(o,p,g),c.y=d.y=Kf(o,p,g),c.x2=d.x2=Kf(o,y),c.y2=d.y2=ao(o,y),f.x=ao(o,p),f.y=Kf(o,p),Xl({type:Wne,role:FYt,key:Pc,from:r,encode:h},n)}function gQt(e,t){if(t!==1)if(!mt(e))e=Hs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=Hs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function yQt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=XF(a,-1,1);let l,c,f;const d={enter:l={opacity:nr},update:f={opacity:Oc},exit:c={opacity:nr}};Uo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=oo(i);h.mult=u;const p={scale:e.scale,field:Pc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ao(a,nr,p),f.y2=l.y2=ao(a,h),c.x=ao(a,p),f.x=l.x=Kf(a,nr,p),f.x2=l.x2=Kf(a,h),c.y=Kf(a,p),Xl({type:Wne,role:BYt,key:Pc,from:r,encode:d},n)}function _B(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function vQt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=e.scale,l=XF(a,-1,1),c=v1(o("labelFlush")),f=v1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=oo(i);g.mult=l,g.offset=oo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Pc,band:.5,offset:J4e(s.offset,o("labelOffset"))},v=ao(a,p?_B(u,c,'"left"','"right"','"center"'):{value:"center"},sQt(a,"left","right")),b=ao(a,iFe(a,"bottom","top"),p?_B(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=_B(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:nr,x:ao(a,y,g),y:Kf(a,y,g)},S={enter:E,update:m={opacity:Oc,text:{field:Vne},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:nr,x:E.x,y:E.y}};Uo(S,{dx:!d&&p?ao(a,w):null,dy:!h&&p?Kf(a,w):null}),Uo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let C=o("labelOverlap");return C=C||x?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=Kw(m.align,v)),m.baseline!==b&&(m.baseline=Kw(m.baseline,b)),Xl({type:jb,role:jYt,style:mR,key:Pc,from:r,encode:S,overlap:C},n)}function bQt(e,t,n,r){const i=ll(e,t),s=e.orient,o=XF(s,-1,1);let a,u;const l={enter:a={opacity:nr,anchor:oo(i("titleAnchor",null)),align:{signal:Gne}},update:u=bn({},a,{opacity:Oc,text:oo(e.title)}),exit:{opacity:nr}},c={signal:`lerp(range("${e.scale}"), ${GF(0,1,.5)})`};return u.x=ao(s,c),u.y=Kf(s,c),a.angle=ao(s,nr,dQt(o,90)),a.baseline=ao(s,iFe(s,fy,vd),{value:fy}),u.angle=a.angle,u.baseline=a.baseline,Uo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),_Qt(i,s,l,n),l.update.align=Kw(l.update.align,a.align),l.update.angle=Kw(l.update.angle,a.angle),l.update.baseline=Kw(l.update.baseline,a.baseline),Xl({type:jb,role:UYt,style:Hne,from:r,encode:l},n)}function _Qt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Kw(oo(a),n.update[u]),!1):!q_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?oo(o):ao(t,oo(o),oo(s))}function wQt(e,t){const n=hQt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ll(e,n),l=yXt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(yd({},[c]))),d=$t(t.add(EKt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(mQt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(yQt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(vQt(e,n,r.labels,d,p,l))),c.domain&&h.push(pQt(e,n,r.domain,f)),c.title&&h.push(bQt(e,n,r.title,f)),KF(SI({role:MYt,from:f,encode:IS(EQt(u,e),i,gR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function EQt(e,t){const n={enter:{},update:{}};return Uo(n,{orient:e("orient"),offset:e("offset")||0,position:Sf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function oFe(e,t,n){const r=gt(e.signals),i=gt(e.scales);return n||r.forEach(s=>F4e(s,t)),gt(e.projections).forEach(s=>eXt(s,t)),i.forEach(s=>zKt(s,t)),gt(e.data).forEach(s=>rQt(s,t)),i.forEach(s=>VKt(s,t)),(n||r).forEach(s=>wKt(s,t)),gt(e.axes).forEach(s=>wQt(s,t)),gt(e.marks).forEach(s=>KF(s,t)),gt(e.legends).forEach(s=>qXt(s,t)),e.title&&JXt(e.title,t),t.parseLambdas(),t}const xQt=e=>IS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function SQt(e,t){const n=t.config,r=$t(t.root=t.add(SM())),i=TQt(e,n);i.forEach(l=>F4e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(yd()),o=t.add(U4e(L4e(xQt(e.encode),WF,jne,e.style,t,{pulse:$t(s)}))),a=t.add(H4e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),oFe(e,t,i),t.operators.push(a);let u=t.add(B4e({mark:r,pulse:$t(a)}));return u=t.add(V4e({pulse:$t(u)})),u=t.add(Fb({pulse:$t(u)})),t.addData("root",new rb(t,s,s,u)),t}function MT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function TQt(e,t){const n=o=>Sf(e[o],t[o]),r=[MT("background",n("background")),MT("autosize",OYt(n("autosize"))),MT("padding",$Yt(n("padding"))),MT("width",n("width")||0),MT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return gt(e.signals).forEach(o=>{Ft(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),gt(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function aFe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Yge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}aFe.prototype=Yge.prototype={parse(e){return oFe(e,this)},fork(){return new Yge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof QH?$t(e):e;return this.add(MKt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Fb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(yt(e))return EI(e,t);e.signal||Le("Unsupported field reference: "+ot(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(CKt(i)))}return r},compareRef(e){let t=!1;const n=s=>Hs(s)?(t=!0,this.signalRef(s.signal)):fKt(s)?(t=!0,this.exprRef(s.expr)):s,r=gt(e.field).map(n),i=gt(e.order).map(n);return t?$t(this.add(Dge({fields:r,orders:i}))):Pge(r,i)},keyRef(e,t){let n=!1;const r=s=>Hs(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=gt(e).map(r),n?$t(this.add(AKt({fields:e,flat:t}))):aKt(e,t)},sortRef(e){if(!e)return e;const t=HF(e.op,e.field),n=e.order||uKt;return n.signal?$t(this.add(Dge({fields:t,orders:this.signalRef(n.signal)}))):Pge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+ot(e));const n=t instanceof QH?t:this.add(SM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+ot(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(SM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Uh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||Jne(e))},exprRef(e,t){const n={expr:Uh(e,this)};return t&&(n.expr.$name=t),$t(this.add(SKt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+ot(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Le("Duplicate scale or projection name: "+ot(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,FKt(t))},addProjection(e,t){this.addScaleProj(e,$Kt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+ot(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Le("Duplicate data set name: "+ot(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+ot(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Le("Duplicate data set name: "+ot(e)),this.addData(e,rb.fromEntries(this,t))}};function Jne(e){return(Be(e)?CQt:AQt)(e)}function CQt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||Jne(i):ot(i))}return n+"]"}function AQt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ot(r)+":"+(mt(i)?i.signal||Jne(i):ot(i));return t+"}"}function IQt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function kQt(e,t,n){return mt(e)||Le("Input Vega specification must be an object."),t=_S(IQt(),t,e.config),SQt(e,new aFe(t,n)).toRuntime()}var RQt="5.30.0";bn(XE,k9t,yzt,Kzt,CVt,OVt,oHt,jVt,uHt,dHt,EHt,kHt);const NQt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ss,CanvasHandler:cR,CanvasRenderer:dM,DATE:nl,DAY:pa,DAYOFYEAR:Bh,Dataflow:Yw,Debug:P3e,Error:WZ,EventStream:dF,Gradient:KMe,GroupItem:TF,HOURS:Gl,Handler:Pte,HybridHandler:BLe,HybridRenderer:IH,Info:N3e,Item:SF,MILLISECONDS:sd,MINUTES:Yl,MONTH:ba,Marks:Kl,MultiPulse:dee,None:R3e,Operator:Xr,Parameters:fF,Pulse:R0,QUARTER:tl,RenderType:s0,Renderer:lR,ResourceLoader:nLe,SECONDS:Wc,SVGHandler:ALe,SVGRenderer:Fte,SVGStringRenderer:jLe,Scenegraph:bLe,TIME_UNITS:iee,Transform:Re,View:T4e,WEEK:Fs,Warn:GZ,YEAR:$o,accessor:ul,accessorFields:va,accessorName:Zi,array:gt,ascending:sF,bandwidthNRD:gee,bin:U$e,bootstrapCI:z$e,boundClip:XLe,boundContext:sR,boundItem:xH,boundMark:mLe,boundStroke:rg,changeset:$b,clampRange:V3e,codegenExpression:J6e,compare:JZ,constant:Ca,cumulativeLogNormal:Eee,cumulativeNormal:pF,cumulativeUniform:Cee,dayofyear:t$e,debounce:ZZ,defaultLocale:aee,definition:F$e,densityLogNormal:wee,densityNormal:yee,densityUniform:Tee,domChild:$s,domClear:yc,domCreate:r0,domFind:Nte,dotbin:V$e,error:Le,expressionFunction:ms,extend:bn,extent:jh,extentIndex:H3e,falsy:Cg,fastmap:ES,field:Hc,flush:q3e,font:RF,fontFamily:uR,fontSize:sp,format:jO,formatLocale:Z$,formats:cee,hasOwnProperty:Ft,id:Gk,identity:Ta,inferType:A$e,inferTypes:I$e,ingest:Er,inherits:ft,inrange:pw,interpolate:ute,interpolateColors:EF,interpolateRange:$Me,intersect:WLe,intersectBoxLine:mw,intersectPath:gte,intersectPoint:yte,intersectRule:iLe,isArray:Be,isBoolean:Uy,isDate:k0,isFunction:_n,isIterable:W3e,isNumber:cr,isObject:mt,isRegExp:G3e,isString:yt,isTuple:lF,key:eee,lerp:Y3e,lineHeight:uy,loader:aF,locale:T$e,logger:YZ,lruCache:K3e,markup:Lte,merge:X3e,mergeConfig:_S,multiLineOffset:Ite,one:bS,pad:Q3e,panLinear:L3e,panLog:F3e,panPow:j3e,panSymlog:B3e,parse:kQt,parseExpression:Tne,parseSelector:Vy,path:I6,pathCurves:hte,pathEqual:QLe,pathParse:ex,pathRectangle:JMe,pathRender:pI,pathSymbols:QMe,pathTrail:ZMe,peek:Qn,point:PF,projection:Xte,quantileLogNormal:xee,quantileNormal:mF,quantileUniform:Aee,quantiles:pee,quantizeInterpolator:MMe,quarter:U3e,quartiles:mee,get random(){return Gc},randomInteger:Ojt,randomKDE:bee,randomLCG:Pjt,randomLogNormal:q$e,randomMixture:W$e,randomNormal:vee,randomUniform:G$e,read:N$e,regressionConstant:Iee,regressionExp:K$e,regressionLinear:kee,regressionLoess:J$e,regressionLog:Y$e,regressionPoly:Q$e,regressionPow:X$e,regressionQuad:Ree,renderModule:OF,repeat:TC,resetDefaultLocale:k8t,resetSVGClipId:tLe,resetSVGDefIds:$7t,responseType:R$e,runtimeContext:d4e,sampleCurve:yF,sampleLogNormal:_ee,sampleNormal:hF,sampleUniform:See,scale:gr,sceneEqual:jte,sceneFromJSON:yLe,scenePickVisit:iM,sceneToJSON:gLe,sceneVisit:od,sceneZOrder:vte,scheme:lte,serializeXML:$Le,setHybridRendererOptions:N7t,setRandom:Rjt,span:Yk,splitAccessPath:ip,stringValue:ot,textMetrics:Ol,timeBin:v$e,timeFloor:u$e,timeFormatLocale:fI,timeInterval:xS,timeOffset:f$e,timeSequence:p$e,timeUnitSpecifier:e$e,timeUnits:see,toBoolean:tee,toDate:nee,toNumber:ma,toSet:id,toString:ree,transform:j$e,transforms:XE,truncate:J3e,truthy:qc,tupleid:Mt,typeParsers:pH,utcFloor:l$e,utcInterval:SS,utcOffset:d$e,utcSequence:m$e,utcdayofyear:i$e,utcquarter:z3e,utcweek:s$e,version:RQt,visitArray:Dg,week:n$e,writeConfig:wS,zero:Yg,zoomLinear:KZ,zoomLog:XZ,zoomPow:J$,zoomSymlog:QZ},Symbol.toStringTag,{value:"Module"}));function PQt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var OQt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},DQt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},$Qt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const MQt=Array.prototype.slice,lv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,MQt.call(t,1))},LQt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var FQt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:LQt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return lv("join",arguments)},indexof:function(){return lv("indexOf",arguments)},lastindexof:function(){return lv("lastIndexOf",arguments)},slice:function(){return lv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return lv("substring",arguments,String)},split:function(){return lv("split",arguments,String)},replace:function(){return lv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const jQt=["view","item","group","xy","x","y"],iq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&iq.add(setImmediate);const BQt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:OQt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),iq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||FQt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>DQt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>$Qt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,iq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function LT(e,t,n,r,i,s){const o=a=>BQt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,jQt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var UQt={operator(e,t){const n=t.ast,r=e.functions;return i=>LT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>LT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>LT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return LT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=LT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&PQt(o,r,s),l}}};const zQt="vega-lite",VQt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',HQt="5.19.0",qQt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],WQt="https://vega.github.io/vega-lite/",GQt="Vega-Lite is a concise high-level language for interactive visualization.",YQt=["vega","chart","visualization"],KQt="build/vega-lite.js",XQt="build/vega-lite.min.js",QQt="build/vega-lite.min.js",JQt="build/src/index",ZQt="build/src/index.d.ts",eJt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},tJt=["bin","build","src","vega-lite*","tsconfig.json"],nJt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},rJt={type:"git",url:"https://github.com/vega/vega-lite.git"},iJt="BSD-3-Clause",sJt={url:"https://github.com/vega/vega-lite/issues"},oJt={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},aJt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},uJt={vega:"^5.24.0"},lJt={node:">=18"},cJt="yarn@1.22.19",fJt={name:zQt,author:VQt,version:HQt,collaborators:qQt,homepage:WQt,description:GQt,keywords:YQt,main:KQt,unpkg:XQt,jsdelivr:QQt,module:JQt,types:ZQt,bin:eJt,files:tJt,scripts:nJt,repository:rJt,license:iJt,bugs:sJt,devDependencies:oJt,dependencies:aJt,peerDependencies:uJt,engines:lJt,packageManager:cJt};function Zne(e){return!!e.or}function ere(e){return!!e.and}function tre(e){return!!e.not}function sD(e,t){if(tre(e))sD(e.not,t);else if(ere(e))for(const n of e.and)sD(n,t);else if(Zne(e))for(const n of e.or)sD(n,t);else t(e)}function Xw(e,t){return tre(e)?{not:Xw(e.not,t)}:ere(e)?{and:e.and.map(n=>Xw(n,t))}:Zne(e)?{or:e.or.map(n=>Xw(n,t))}:t(e)}const rn=structuredClone;function uFe(e){throw new Error(e)}function sx(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function Gu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ur(e)).join(",")})`};function zn(e){if(cr(e))return e;const t=yt(e)?e:Ur(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function sq(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function ox(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function nre(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function lFe(e,...t){for(const n of t)dJt(e,n??{});return e}function dJt(e,t){for(const n of Xe(t))wS(e,n,t[n],!0)}function lh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function hJt(e,t){const n=Xe(e),r=Xe(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function cFe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function oq(e){const t=new Set;for(const n of e){const i=ip(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ire(e,t){return e===void 0||t===void 0?!0:rre(oq(e),oq(t))}function Br(e){return Xe(e).length===0}const Xe=Object.keys,Mo=Object.values,dy=Object.entries;function TI(e){return e===!0||e===!1}function Ti(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function F2(e,t){return tre(e)?`!(${F2(e.not,t)})`:ere(e)?`(${e.and.map(n=>F2(n,t)).join(") && (")})`:Zne(e)?`(${e.or.map(n=>F2(n,t)).join(") || (")})`:t(e)}function TM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&TM(e[n],t)&&delete e[n],Br(e)}function yR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function sre(e,t="datum"){const n=ip(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(ot).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function fFe(e,t="datum"){return`${t}[${ot(ip(e).join("."))}]`}function pJt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Yc(e){return`${ip(e).map(pJt).join("\\.")}`}function ib(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function NS(e){return`${ip(e).join(".")}`}function ax(e){return e?ip(e).length:0}function hs(...e){for(const t of e)if(t!==void 0)return t}let dFe=42;function hFe(e){const t=++dFe;return e?String(e)+t:t}function mJt(){dFe=42}function pFe(e){return mFe(e)?e:`__${e}`}function mFe(e){return e.startsWith("__")}function CI(e){if(e!==void 0)return(e%360+360)%360}function QF(e){return cr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Kge=Object.getPrototypeOf(structuredClone({}));function Nl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Nl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Nl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Kge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Kge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Nl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ur(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const lm="row",cm="column",JF="facet",Ai="x",mo="y",bd="x2",up="y2",Hy="xOffset",PS="yOffset",_d="radius",sg="radius2",af="theta",og="theta2",wd="latitude",Ed="longitude",xd="latitude2",Kc="longitude2",rl="color",lp="fill",cp="stroke",il="shape",ag="size",Bb="angle",ug="opacity",qy="fillOpacity",Wy="strokeOpacity",Gy="strokeWidth",Yy="strokeDash",vR="text",ux="order",bR="detail",ZF="key",sb="tooltip",e5="href",t5="url",n5="description",gJt={x:1,y:1,x2:1,y2:1},gFe={theta:1,theta2:1,radius:1,radius2:1};function yFe(e){return e in gFe}const ore={longitude:1,longitude2:1,latitude:1,latitude2:1};function vFe(e){switch(e){case wd:return"y";case xd:return"y2";case Ed:return"x";case Kc:return"x2"}}function bFe(e){return e in ore}const yJt=Xe(ore),are={...gJt,...gFe,...ore,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Qw(e){return e===rl||e===lp||e===cp}const _Fe={row:1,column:1,facet:1},Ac=Xe(_Fe),ure={...are,..._Fe},vJt=Xe(ure),{order:jln,detail:Bln,tooltip:Uln,...bJt}=ure,{row:zln,column:Vln,facet:Hln,..._Jt}=bJt;function wJt(e){return!!_Jt[e]}function wFe(e){return!!ure[e]}const EJt=[bd,up,xd,Kc,og,sg];function EFe(e){return Ub(e)!==e}function Ub(e){switch(e){case bd:return Ai;case up:return mo;case xd:return wd;case Kc:return Ed;case og:return af;case sg:return _d}return e}function hy(e){if(yFe(e))switch(e){case af:return"startAngle";case og:return"endAngle";case _d:return"outerRadius";case sg:return"innerRadius"}return e}function fp(e){switch(e){case Ai:return bd;case mo:return up;case wd:return xd;case Ed:return Kc;case af:return og;case _d:return sg}}function sl(e){switch(e){case Ai:case bd:return"width";case mo:case up:return"height"}}function xFe(e){switch(e){case Ai:return"xOffset";case mo:return"yOffset";case bd:return"x2Offset";case up:return"y2Offset";case af:return"thetaOffset";case _d:return"radiusOffset";case og:return"theta2Offset";case sg:return"radius2Offset"}}function lre(e){switch(e){case Ai:return"xOffset";case mo:return"yOffset"}}function xJt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const SJt=Xe(are),{x:qln,y:Wln,x2:Gln,y2:Yln,xOffset:Kln,yOffset:Xln,latitude:Qln,longitude:Jln,latitude2:Zln,longitude2:ecn,theta:tcn,theta2:ncn,radius:rcn,radius2:icn,...cre}=are,TJt=Xe(cre),fre={x:1,y:1},lg=Xe(fre);function ps(e){return e in fre}const dre={theta:1,radius:1},CJt=Xe(dre);function r5(e){return e==="width"?Ai:mo}const SFe={xOffset:1,yOffset:1};function _R(e){return e in SFe}const{text:scn,tooltip:ocn,href:acn,url:ucn,description:lcn,detail:ccn,key:fcn,order:dcn,...TFe}=cre,AJt=Xe(TFe);function IJt(e){return!!cre[e]}function kJt(e){switch(e){case rl:case lp:case cp:case ag:case il:case ug:case Gy:case Yy:return!0;case qy:case Wy:case Bb:return!1}}const CFe={...fre,...dre,...SFe,...TFe},hre=Xe(CFe);function dp(e){return!!CFe[e]}function RJt(e,t){return PJt(e)[t]}const AFe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:hcn,...NJt}=AFe;function PJt(e){switch(e){case rl:case lp:case cp:case n5:case bR:case ZF:case sb:case e5:case ux:case ug:case qy:case Wy:case Gy:case JF:case lm:case cm:return AFe;case Ai:case mo:case Hy:case PS:case wd:case Ed:return NJt;case bd:case up:case xd:case Kc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ag:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Yy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case il:return{point:"always",geoshape:"always"};case vR:return{text:"always"};case Bb:return{point:"always",square:"always",text:"always"};case t5:return{image:"always"};case af:return{text:"always",arc:"always"};case _d:return{text:"always",arc:"always"};case og:case sg:return{arc:"always"}}}function wB(e){switch(e){case Ai:case mo:case af:case _d:case Hy:case PS:case ag:case Bb:case Gy:case ug:case qy:case Wy:case bd:case up:case og:case sg:return;case JF:case lm:case cm:case il:case Yy:case vR:case sb:case e5:case t5:case n5:return"discrete";case rl:case lp:case cp:return"flexible";case wd:case Ed:case xd:case Kc:case bR:case ZF:case ux:return}}const OJt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},DJt={count:1,min:1,max:1};function Bm(e){return!!e&&!!e.argmin}function Ky(e){return!!e&&!!e.argmax}function pre(e){return yt(e)&&!!OJt[e]}const $Jt=new Set(["count","valid","missing","distinct"]);function i5(e){return yt(e)&&$Jt.has(e)}function MJt(e){return yt(e)&&$n(["min","max"],e)}const LJt=new Set(["count","sum","distinct","valid","missing"]),FJt=new Set(["mean","average","median","q1","q3","min","max"]);function IFe(e){return Uy(e)&&(e=y5(e,void 0)),"bin"+Xe(e).map(t=>s5(e[t])?Ti(`_${t}_${dy(e[t])}`):Ti(`_${t}_${e[t]}`)).join("")}function ui(e){return e===!0||zb(e)&&!e.binned}function Ao(e){return e==="binned"||zb(e)&&e.binned===!0}function zb(e){return mt(e)}function s5(e){return e==null?void 0:e.param}function Xge(e){switch(e){case lm:case cm:case ag:case rl:case lp:case cp:case Gy:case ug:case qy:case Wy:case il:return 6;case Yy:return 4;default:return 10}}function wR(e){return!!(e!=null&&e.expr)}function la(e,{level:t}={level:0}){const n=Xe(e||{}),r={};for(const i of n)r[i]=t===0?xl(e[i]):la(e[i],{level:t-1});return r}function kFe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=sx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Lg(e){return yt(e)||Be(e)&&yt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function Xy(e){return!!e.step}function jJt(e){return Be(e)?!1:"fields"in e&&!("data"in e)}function BJt(e){return Be(e)?!1:"fields"in e&&"data"in e}function Zp(e){return Be(e)?!1:"field"in e&&"data"in e}const UJt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},zJt=Xe(UJt),VJt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},aq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function RFe(e){const t=Be(e.condition)?e.condition.map(Qge):Qge(e.condition);return{...xl(e),condition:t}}function xl(e){if(wR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Qge(e){if(wR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mi(e){if(wR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function HJt(e){return Nt(e)?e.signal:ot(e)}function Jge(e){return Nt(e)?e.signal:ot(e.value)}function Ff(e){return Nt(e)?e.signal:e==null?null:ot(e)}function qJt(e,t,n){for(const r of n){const i=zh(r,t.markDef,t.config);i!==void 0&&(e[r]=mi(i))}return e}function NFe(e){return[].concat(e.type,e.style??[])}function $r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:zh(e,t,n,r)}function zh(e,t,n,{vgChannel:r}={}){return hs(r?CM(e,t,n.style):void 0,CM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function CM(e,t,n){return PFe(e,NFe(t),n)}function PFe(e,t,n){t=gt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function OFe(e,t){return gt(e).reduce((n,r)=>(n.field.push(dt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function DFe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Nl(i,r))return;n.push(r)}),n}function $Fe(e,t){return Nl(e,t)||!t?e:e?[...gt(e),...gt(t)].join(", "):t}function MFe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Lg(n)||Nt(n))&&(Lg(r)||Nt(r)))return{explicit:e.explicit,value:$Fe(n,r)};if(Lg(n)||Nt(n))return{explicit:e.explicit,value:n};if(Lg(r)||Nt(r))return{explicit:e.explicit,value:r};if(!Lg(n)&&!Nt(n)&&!Lg(r)&&!Nt(r))return{explicit:e.explicit,value:DFe(n,r)};throw new Error("It should never reach here")}function mre(e){return`Invalid specification ${Ur(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const WJt='Autosize "fit" only works for single views and layered views.';function Zge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function e0e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function t0e(e){return e?`Dropping "fit-${e}" because spec has discrete ${sl(e)}.`:'Dropping "fit" because spec has discrete size.'}function gre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function n0e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function GJt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function YJt(e){return`The "nearest" transform is not supported for ${e} marks.`}function LFe(e){return`Selection not supported for ${e} yet.`}function KJt(e){return`Cannot find a selection named "${e}".`}const XJt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",QJt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",JJt="Legend bindings are only supported for selections over an individual field or encoding channel.";function ZJt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function eZt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const tZt="The same selection must be used to override scale domains in a layered view.",nZt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function rZt(e){return`Unknown repeated value "${e}".`}function r0e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const iZt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function sZt(e){return`Unrecognized parse "${e}".`}function i0e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const oZt="Attempt to add the same child twice.";function aZt(e){return`Ignoring an invalid transform: ${Ur(e)}.`}const uZt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function s0e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function lZt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ur(t)} is overridden by a child projection ${Ur(n)}.`}const cZt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function fZt(e){return`${e}Offset dropped because ${e} is continuous`}function dZt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ur(n)}}.`}function FFe(e){return`Invalid field type "${e}".`}function hZt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function pZt(e){return`Invalid aggregation operator "${e}".`}function jFe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function mZt(e){return`Position range does not support relative band size for ${e}.`}function uq(e,t){return`Dropping ${Ur(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const gZt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function o5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function yZt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function vZt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function bZt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function _Zt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function EB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function wZt(e){return`The ${e} for range marks cannot be an expression`}function EZt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function xZt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function SZt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function TZt(e){return`Cannot use the relative band size with ${e} scale.`}function CZt(e){return`Using unaggregated domain with raw field has no effect (${Ur(e)}).`}function AZt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function IZt(e){return`Unaggregated domain is currently unsupported for log scale (${Ur(e)}).`}function kZt(e){return`Cannot apply size to non-oriented mark "${e}".`}function RZt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function NZt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function BFe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function UFe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function PZt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using ${Ur(n)}.`}function OZt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using the union of the two domains.`}function DZt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function $Zt(e){return`Dropping sort property ${Ur(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const o0e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",MZt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",LZt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",FZt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function jZt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function BZt(e){return`Stack is applied to a non-linear scale (${e}).`}function UZt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function AM(e,t){return`Invalid ${e}: ${Ur(t)}.`}function zZt(e){return`Dropping day from datetime ${Ur(e)} as day cannot be combined with other units.`}function VZt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function HZt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function qZt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function a0e(e){return`1D error band does not support ${e}.`}function zFe(e){return`Channel ${e} is required for "binned" bin.`}function WZt(e){return`Channel ${e} should not be used with "binned" bin.`}function GZt(e){return`Domain for ${e} is required for threshold scale.`}const VFe=YZ(GZ);let lx=VFe;function YZt(e){return lx=e,lx}function KZt(){return lx=VFe,lx}function et(...e){lx.warn(...e)}function XZt(...e){lx.debug(...e)}function Vb(e){if(e&&mt(e)){for(const t of vre)if(t in e)return!0}return!1}const HFe=["january","february","march","april","may","june","july","august","september","october","november","december"],QZt=HFe.map(e=>e.substr(0,3)),qFe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],JZt=qFe.map(e=>e.substr(0,3));function ZZt(e){if(QF(e)&&(e=+e),cr(e))return e>4&&et(AM("quarter",e)),e-1;throw new Error(AM("quarter",e))}function een(e){if(QF(e)&&(e=+e),cr(e))return e-1;{const t=e.toLowerCase(),n=HFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=QZt.indexOf(r);if(i!==-1)return i;throw new Error(AM("month",e))}}function ten(e){if(QF(e)&&(e=+e),cr(e))return e%7;{const t=e.toLowerCase(),n=qFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=JZt.indexOf(r);if(i!==-1)return i;throw new Error(AM("day",e))}}function yre(e,t){const n=[];if(t&&e.day!==void 0&&Xe(e).length>1&&(et(zZt(e)),e=rn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?een(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?ZZt(e.quarter):e.quarter;n.push(cr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?ten(e.day):e.day;n.push(cr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ob(e){const n=yre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function nen(e){const n=yre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ren(e){const t=yre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const WFe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},vre=Xe(WFe);function ien(e){return!!WFe[e]}function Hb(e){return mt(e)?e.binned:GFe(e)}function GFe(e){return e&&e.startsWith("binned")}function bre(e){return e.startsWith("utc")}function sen(e){return e.substring(3)}const oen={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function a5(e){return vre.filter(t=>KFe(e,t))}function YFe(e){const t=a5(e);return t[t.length-1]}function KFe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function aen(e,t,{end:n}={end:!1}){const r=sre(t),i=bre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of vre)KFe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),nen(a)}function XFe(e){if(!e)return;const t=a5(e);return`timeUnitSpecifier(${Ur(t)}, ${Ur(oen)})`}function uen(e,t,n){if(!e)return;const r=XFe(e);return`${n||bre(e)?"utc":"time"}Format(${t}, ${r})`}function co(e){if(!e)return;let t;return yt(e)?GFe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),bre(t.unit)&&(t.utc=!0,t.unit=sen(t.unit)),t}function len(e){const{utc:t,...n}=co(e);return n.unit?(t?"utc":"")+Xe(n).map(r=>Ti(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Xe(n).map(r=>Ti(`_${r}_${n[r]}`)).join("")}function QFe(e,t=n=>n){const n=co(e),r=YFe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=JFe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ob(a))} - ${t(ob(i))}`}}const cen={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function fen(e){return!!cen[e]}function JFe(e,t=1){if(fen(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function den(e){return e==null?void 0:e.param}function _re(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ere(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function xre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Sre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Tre(e){if(e!=null&&e.field){if(Be(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function Cre(e){return!!(e!=null&&e.field)&&(Be(e.oneOf)||Be(e.in))}function hen(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function ZFe(e){return Cre(e)||_re(e)||Tre(e)||wre(e)||xre(e)||Ere(e)||Sre(e)}function Dd(e,t){return v5(e,{timeUnit:t,wrapTime:!0})}function pen(e,t){return e.map(n=>Dd(n,t))}function e5e(e,t=!0){const{field:n}=e,r=co(e.timeUnit),{unit:i,binned:s}=r||{},o=dt(e,{expr:"datum"}),a=i?`time(${s?o:aen(i,n)})`:o;if(_re(e))return`${a}===${Dd(e.equal,i)}`;if(wre(e)){const u=e.lt;return`${a}<${Dd(u,i)}`}else if(xre(e)){const u=e.gt;return`${a}>${Dd(u,i)}`}else if(Ere(e)){const u=e.lte;return`${a}<=${Dd(u,i)}`}else if(Sre(e)){const u=e.gte;return`${a}>=${Dd(u,i)}`}else{if(Cre(e))return`indexof([${pen(e.oneOf,i).join(",")}], ${a}) !== -1`;if(hen(e))return u5(a,e.valid);if(Tre(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Dd(l,i)+", "+Dd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Dd(l,i)}`),c!==null&&f.push(`${a} <= ${Dd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ur(e)}`)}function u5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function men(e){return ZFe(e)&&e.timeUnit?{...e,timeUnit:co(e.timeUnit)}:e}const ER={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function gen(e){return e==="quantitative"||e==="temporal"}function t5e(e){return e==="ordinal"||e==="nominal"}const ab=ER.quantitative,Are=ER.ordinal,cx=ER.temporal,Ire=ER.nominal,OS=ER.geojson;function yen(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ab:return"quantitative";case"t":case cx:return"temporal";case"o":case Are:return"ordinal";case"n":case Ire:return"nominal";case OS:return"geojson"}}const ko={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},lq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ven(e,t){const n=lq[e],r=lq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const ben={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function u0e(e){return ben[e]}const n5e=new Set(["linear","log","pow","sqrt","symlog"]),r5e=new Set([...n5e,"time","utc"]);function i5e(e){return n5e.has(e)}const s5e=new Set(["quantile","quantize","threshold"]),_en=new Set([...r5e,...s5e,"sequential","identity"]),wen=new Set(["ordinal","bin-ordinal","point","band"]);function fo(e){return wen.has(e)}function ad(e){return _en.has(e)}function ch(e){return r5e.has(e)}function fx(e){return s5e.has(e)}const Een={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function xen(e){return!yt(e)&&!!e.name}function o5e(e){return e==null?void 0:e.param}function Sen(e){return e==null?void 0:e.unionWith}function Ten(e){return mt(e)&&"field"in e}const Cen={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:pcn,domain:mcn,range:gcn,rangeMax:ycn,rangeMin:vcn,scheme:bcn,...Aen}=Cen,Ien=Xe(Aen);function cq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ch(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ch(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ch(e);case"nice":return ch(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ad(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function a5e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Qw(e)?void 0:SZt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function ken(e,t){return $n([Are,Ire],t)?e===void 0||fo(e):t===cx?$n([ko.TIME,ko.UTC,void 0],e):t===ab?i5e(e)||fx(e)||e===void 0:!0}function Ren(e,t,n=!1){if(!dp(e))return!1;switch(e){case Ai:case mo:case Hy:case PS:case af:case _d:return ch(t)||t==="band"?!0:t==="point"?!n:!1;case ag:case Gy:case ug:case qy:case Wy:case Bb:return ch(t)||fx(t)||$n(["band","point","ordinal"],t);case rl:case lp:case cp:return t!=="band";case Yy:case il:return t==="ordinal"||fx(t)}}function Nen(e){return mt(e)&&"value"in e}const du={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},u5e=du.arc,l5=du.area,c5=du.bar,Pen=du.image,f5=du.line,d5=du.point,Oen=du.rect,IM=du.rule,l5e=du.text,kre=du.tick,Den=du.trail,Rre=du.circle,Nre=du.square,c5e=du.geoshape;function Qy(e){return["line","area","trail"].includes(e)}function AI(e){return["rect","bar","image","arc"].includes(e)}const $en=new Set(Xe(du));function Vh(e){return e.type}const Men=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Len=["fill","fillOpacity"],Fen=[...Men,...Len],jen={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},l0e=Xe(jen),Ben={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Uen={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},zen={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},f5e=Xe(zen);function ub(e){return e&&e.band!=null}const Ven={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},d5e=5,Hen={binSpacing:1,continuousBandSize:d5e,minBandSize:.25,timeUnitBandPosition:.5},qen={binSpacing:0,continuousBandSize:d5e,minBandSize:.25,timeUnitBandPosition:.5},Wen={thickness:1};function Gen(e){return Vh(e)?e.type:e}function h5e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Pre({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!ad(r)||i)return"always-valid";const s=h5e($r("invalid",e,t),{isPath:Qy(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function Yen(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function p5e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function m5e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=ld(t),u=i5(a==null?void 0:a.aggregate),l=Pre({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:u5(dt(a,{expr:"datum"}),!1),...Ken(f,n,r)}}}function Ken(e,t,n){if(Nen(e)){const{value:r}=e;return Nt(r)?{signal:r.signal}:{value:r}}return p5e({scale:t,scaleName:n,mode:"zeroOrMin"})}function Ore(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Ub(t),u=Dre(e),l=m5e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function Xen(e){const{datum:t}=e;return Vb(t)?ob(t):`${Ur(t)}`}function b1(e,t,n,r){const i={};if(t&&(i.scale=t),hp(e)){const{datum:s}=e;Vb(s)?i.signal=ob(s):Nt(s)?i.signal=s.signal:wR(s)?i.signal=s.expr:i.value=s}else i.field=dt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function kM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=dt(t,{expr:a,suffix:i}),l=n!==void 0?dt(n,{expr:a}):dt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Qen({scaleName:e,fieldDef:t}){const n=dt(t,{expr:"datum"}),r=dt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Dre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(ou(t)){c??(c=py({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ui(d)||c&&h&&p===cx)return a!=null&&a.impute?b1(t,s,{binSuffix:"mid"},{offset:u}):c&&!fo(f)?kM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):b1(t,s,CR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ao(d)){if(rt(n))return kM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});et(zFe(e===Ai?bd:up))}}return b1(t,s,fo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(ud(t)){const f=t.value,d=u?{offset:u}:{};return{...j2(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function j2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:mi(t)}function lb(e){return e&&e!=="number"&&e!=="time"}function g5e(e,t,n){return`${e}(${t}${n?`, ${Ur(n)}`:""})`}const Jen="  ";function $re({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(lb(n))return jf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=y5e(e,r,i),a=dx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return jf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return jf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&rt(e)&&e.timeUnit===void 0)return jf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(px(e)){const c=etn({field:o,timeUnit:rt(e)?(u=co(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:qb(e)&&((l=e.scale)==null?void 0:l.type)===ko.UTC});return c?{signal:c}:void 0}if(t=fq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),rt(e)&&ui(e.bin)){const c=dt(e,{expr:r,binSuffix:"end"});return{signal:xR(o,c,t,n,s)}}else return t||dx(e)==="quantitative"?{signal:`${_5e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function y5e(e,t,n){return rt(e)?n?`${dt(e,{expr:t,suffix:"end"})}-${dt(e,{expr:t,suffix:"start"})}`:dt(e,{expr:t}):Xen(e)}function jf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=y5e(e,r,i)),o!=="datum.value"&&rt(e)&&ui(e.bin)){const a=dt(e,{expr:r,binSuffix:"end"});return{signal:xR(o,a,t,n,s)}}return{signal:g5e(n,o,t)}}function v5e(e,t,n,r,i,s){var o;if(!(yt(r)&&lb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&dx(e)==="quantitative"&&(i.normalizedNumberFormatType&&hx(e)&&e.stack==="normalize"||i.numberFormatType))){if(hx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return fq({type:"quantitative",config:i,normalizeStack:!0});if(px(e)){const a=rt(e)?(o=co(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Zen({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return fq({type:t,specifiedFormat:n,config:i})}}function b5e(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(px(t)&&n!=="time"&&n!=="utc")return rt(t)&&((r=co(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function fq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(yt(t))return t;if(e===ab)return r?n.normalizedNumberFormat:n.numberFormat}function Zen({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:XFe(t)}:r?void 0:n.timeFormat)}function _5e(e,t){return`format(${e}, "${t||""}")`}function c0e(e,t,n,r){return lb(n)?g5e(n,e,t):_5e(e,(yt(t)?t:void 0)??r.numberFormat)}function xR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return xR(e,t,i.numberFormat,i.numberFormatType,i);const s=c0e(e,n,r,i),o=c0e(t,n,r,i);return`${u5(e,!1)} ? "null" : ${s} + "${Jen}" + ${o}`}function etn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=yt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):uen(t,e,s)}const h5="min",ttn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function f0e(e){return e in ttn}function ntn(e){return!!(e!=null&&e.encoding)}function fm(e){return e&&(e.op==="count"||!!e.field)}function w5e(e){return e&&Be(e)}function SR(e){return"row"in e||"column"in e}function Mre(e){return!!e&&"header"in e}function p5(e){return"facet"in e}function rtn(e){return e.param}function itn(e){return e&&!yt(e)&&"repeat"in e}function d0e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Lre(e){return"sort"in e}function py({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(rt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return zh("timeUnitBandPosition",n,r);if(ui(s))return .5}}function E5e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=sl(e),u=$r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(rt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:zh("timeUnitBandSize",r,i)};if(ui(h)&&!fo(s))return{band:1}}if(AI(r.type))return s?fo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function x5e(e,t,n,r){return ui(e.bin)||e.timeUnit&&ou(e)&&e.type==="temporal"?py({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function S5e(e){return e&&!!e.sort&&!e.field}function m5(e){return e&&"condition"in e}function g5(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&rt(t)}function TR(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&cn(t)}function stn(e){const t=e==null?void 0:e.condition;return!!t&&(Be(t)||ud(t))}function rt(e){return e&&(!!e.field||e.aggregate==="count")}function dx(e){return e==null?void 0:e.type}function hp(e){return e&&"datum"in e}function l0(e){return ou(e)&&!NM(e)||RM(e)}function h0e(e){return ou(e)&&e.type==="quantitative"&&!e.bin||RM(e)}function RM(e){return hp(e)&&cr(e.datum)}function cn(e){return rt(e)||hp(e)}function ou(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function ud(e){return e&&"value"in e&&"value"in e}function qb(e){return e&&("scale"in e||"sort"in e)}function hx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function T5e(e){return e&&"legend"in e}function C5e(e){return e&&("format"in e||"formatType"in e)}function otn(e){return Gu(e,["legend","axis","header","scale"])}function atn(e){return"op"in e}function dt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(ltn(e))n=pFe("count");else{let o;if(!t.nofn)if(atn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ui(a)?(o=IFe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ky(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Bm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Hb(l)&&(o=len(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?NS(n):t.expr?fFe(n,t.expr)+s:Yc(n)+s}function NM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return rt(e)&&!!e.bin;case"temporal":return!1}throw new Error(FFe(e.type))}function utn(e){var t;return qb(e)&&fx((t=e.scale)==null?void 0:t.type)}function ltn(e){return e.aggregate==="count"}function ctn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ui(r))return`${n} (binned)`;if(i&&!Hb(i)){const a=(o=co(i))==null?void 0:o.unit;if(a)return`${n} (${a5(a).join("-")})`}else if(s)return Ky(s)?`${n} for max ${s.argmax}`:Bm(s)?`${n} for min ${s.argmin}`:`${yR(s)} of ${n}`;return n}function ftn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ky(t))return`${i} for argmax(${t.argmax})`;if(Bm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Hb(r)?co(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ui(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const A5e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ftn(e);default:return ctn(e,t)}};let I5e=A5e;function k5e(e){I5e=e}function dtn(){k5e(A5e)}function Jw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Fre(e))==null?void 0:a.title;if(!rt(e))return i??e.title;const s=e,o=r?jre(s,t):void 0;return n?hs(i,s.title,o):i??s.title??o}function Fre(e){if(hx(e)&&e.axis)return e.axis;if(T5e(e)&&e.legend)return e.legend;if(Mre(e)&&e.header)return e.header}function jre(e,t){return I5e(e,t)}function PM(e){if(C5e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Fre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function htn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Lre(e)&&Be(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ky(n)&&!Bm(n))return"quantitative";if(qb(e)&&((s=e.scale)!=null&&s.type))switch(lq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ld(e){if(rt(e))return e;if(g5(e))return e.condition}function js(e){if(cn(e))return e;if(TR(e))return e.condition}function R5e(e,t,n,r={}){if(yt(e)||cr(e)||Uy(e)){const i=yt(e)?"string":cr(e)?"number":"boolean";return et(dZt(t,i,e)),{value:e}}return cn(e)?OM(e,t,n,r):TR(e)?{...e,condition:OM(e.condition,t,n,r)}:e}function OM(e,t,n,r){if(C5e(e)){const{format:i,formatType:s,...o}=e;if(lb(s)&&!n.customFormatTypes)return et(s0e(t)),OM(o,t,n,r)}else{const i=hx(e)?"axis":T5e(e)?"legend":Mre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(lb(o)&&!n.customFormatTypes)return et(s0e(t)),OM({...e,[i]:a},t,n,r)}}return rt(e)?Bre(e,t,r):ptn(e)}function ptn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=cr(n)?"quantitative":yt(n)?"nominal":Vb(n)?"temporal":void 0,{...e,type:t}}function Bre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!pre(r)&&!Ky(r)&&!Bm(r)&&(et(pZt(r)),delete a.aggregate),i&&(a.timeUnit=co(i)),o&&(a.field=`${o}`),ui(s)&&(a.bin=y5(s,t)),Ao(s)&&!ps(t)&&et(WZt(t)),ou(a)){const{type:u}=a,l=yen(u);u!==l&&(a.type=l),u!=="quantitative"&&i5(r)&&(et(hZt(u,r)),a.type="quantitative")}else if(!EFe(t)){const u=htn(a,t);a.type=u}if(ou(a)){const{compatible:u,warning:l}=mtn(a,t)||{};u===!1&&et(l)}if(Lre(a)&&yt(a.sort)){const{sort:u}=a;if(f0e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&f0e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Mre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function y5(e,t){return Uy(e)?{maxbins:Xge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Xge(t)}:e}const T_={compatible:!0};function mtn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case lm:case cm:case JF:return NM(e)?T_:{compatible:!1,warning:vZt(t)};case Ai:case mo:case Hy:case PS:case rl:case lp:case cp:case vR:case bR:case ZF:case sb:case e5:case t5:case Bb:case af:case _d:case n5:return T_;case Ed:case Kc:case wd:case xd:return n!==ab?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:T_;case ug:case qy:case Wy:case Gy:case ag:case og:case sg:case bd:case up:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:T_;case il:case Yy:return!NM(e)&&!utn(e)?{compatible:!1,warning:bZt(t)}:T_;case ux:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:T_}}function px(e){const{formatType:t}=PM(e);return t==="time"||!t&&gtn(e)}function gtn(e){return e&&(e.type==="temporal"||rt(e)&&!!e.timeUnit)}function v5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=co(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return wR(e)?a=e.expr:Nt(e)?a=e.signal:Vb(e)?(o=!0,a=ob(e)):(yt(e)||cr(e))&&o&&(a=`datetime(${Ur(e)})`,ien(s)&&(cr(e)&&e<1e4||yt(e)&&isNaN(Date.parse(e)))&&(a=ob({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ur(e)}function N5e(e,t){const{type:n}=e;return t.map(r=>{const i=rt(e)&&!Hb(e.timeUnit)?e.timeUnit:void 0,s=v5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function CR(e,t){return ui(e.bin)?dp(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const p0e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function AR(e){return e==null?void 0:e.condition}const P5e=["domain","grid","labels","ticks","title"],ytn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},O5e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},vtn={...O5e,style:1,labelExpr:1,encoding:1};function m0e(e){return!!vtn[e]}const btn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},D5e=Xe(btn);function cg(e){return"mark"in e}class b5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return cg(t)?Gen(t.mark)===this.name:!1}}function _1(e,t){const n=e&&e[t];return n?Be(n)?ox(n,r=>!!r.field):rt(n)||g5(n):!1}function $5e(e,t){const n=e&&e[t];return n?Be(n)?ox(n,r=>!!r.field):rt(n)||hp(n)||TR(n):!1}function M5e(e,t){if(ps(t)){const n=e[t];if((rt(n)||hp(n))&&(t5e(n.type)||rt(n)&&n.timeUnit)){const r=lre(t);return $5e(e,r)}}return!1}function L5e(e){return ox(vJt,t=>{if(_1(e,t)){const n=e[t];if(Be(n))return ox(n,r=>!!r.aggregate);{const r=ld(n);return r&&!!r.aggregate}}return!1})}function F5e(e,t){const n=[],r=[],i=[],s=[],o={};return Ure(e,(a,u)=>{if(rt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Fre(a),m=p==null?void 0:p.title;let g=dt(a,{forAs:!0});const y={...m?[]:{title:Jw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Ky(c)?(v="argmax",g=dt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Bm(c)?(v="argmin",g=dt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ou(a)&&ui(f)){if(r.push({bin:f,field:l,as:g}),n.push(dt(a,{binSuffix:"end"})),CR(a,u)&&n.push(dt(a,{binSuffix:"range"})),ps(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",EFe(u)||(y.type=ab)}else if(d&&!Hb(d)){i.push({timeUnit:d,field:l,as:g});const v=ou(a)&&a.type!==cx&&"time";v&&(u===vR||u===sb?y.formatType=v:IJt(u)?y.legend={formatType:v,...y.legend}:ps(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function _tn(e,t,n){const r=RJt(t,n);if(r){if(r==="binned"){const i=e[t===bd?Ai:mo];return!!(rt(i)&&rt(e[t])&&Ao(i.bin))}}else return!1;return!0}function wtn(e,t,n,r){const i={};for(const s of Xe(e))wFe(s)||et(yZt(s));for(let s of SJt){if(!e[s])continue;const o=e[s];if(_R(s)){const a=xJt(s),u=i[a];if(rt(u)&&gen(u.type)&&rt(o)&&!u.timeUnit){et(fZt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(et(cZt),s=af),!_tn(e,s,t)){et(o5(s,t));continue}if(s===ag&&t==="line"){const a=ld(e[s]);if(a!=null&&a.aggregate){et(gZt);continue}}if(s===rl&&(n?"fill"in e:"stroke"in e)){et(jFe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===bR||s===ux&&!Be(o)&&!ud(o)||s===sb&&Be(o)){if(o){if(s===ux){const a=e[s];if(S5e(a)){i[s]=a;continue}}i[s]=gt(o).reduce((a,u)=>(rt(u)?a.push(Bre(u,s)):et(uq(u,s)),a),[])}}else{if(s===sb&&o===null)i[s]=null;else if(!rt(o)&&!hp(o)&&!ud(o)&&!m5(o)&&!Nt(o)){et(uq(o,s));continue}i[s]=R5e(o,s,r)}}return i}function _5(e,t){const n={};for(const r of Xe(e)){const i=R5e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Etn(e){const t=[];for(const n of Xe(e))if(_1(e,n)){const r=e[n],i=gt(r);for(const s of i)rt(s)?t.push(s):g5(s)&&t.push(s.condition)}return t}function Ure(e,t,n){if(e)for(const r of Xe(e)){const i=e[r];if(Be(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function xtn(e,t,n,r){return e?Xe(e).reduce((i,s)=>{const o=e[s];return Be(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function j5e(e,t){return Xe(t).reduce((n,r)=>{switch(r){case Ai:case mo:case e5:case n5:case t5:case bd:case up:case Hy:case PS:case af:case og:case _d:case sg:case wd:case Ed:case xd:case Kc:case vR:case il:case Bb:case sb:return n;case ux:if(e==="line"||e==="trail")return n;case bR:case ZF:{const i=t[r];if(Be(i)||rt(i))for(const s of gt(i))s.aggregate||n.push(dt(s,{}));return n}case ag:if(e==="trail")return n;case rl:case lp:case cp:case ug:case qy:case Wy:case Yy:case Gy:{const i=ld(t[r]);return i&&!i.aggregate&&n.push(dt(i,{})),n}}},[])}function Stn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Be(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Be(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function dq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${zre(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Etn(n).map(otn);return{tooltip:[...i,...lh(s,zn)]}}function zre(e){const{title:t,field:n}=e;return hs(t,n)}function Vre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=zre(n);return B5e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...yt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function B5e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Vh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Uy(e[t])?{}:e[t]}}]:[]}function U5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:SP(s,n),continuousAxisChannelDef2:SP(o,n),continuousAxisChannelDefError:SP(a,n),continuousAxisChannelDefError2:SP(u,n),continuousAxis:i}}function SP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&et(qZt(n,t)),r}else return e}function z5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Vh(n)&&n.orient)return n.orient;if(l0(i)){if(l0(s)){const o=rt(i)&&i.aggregate,a=rt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return px(s)&&!px(i)?"horizontal":"vertical"}return"horizontal"}else{if(l0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const DM="boxplot",Ttn=["box","median","outliers","rule","ticks"],Ctn=new b5(DM,H5e);function V5e(e){return cr(e)?"tukey":e}function H5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Vh(n)?n:{type:n};i&&et(LFe("boxplot"));const u=a.extent??t.boxplot.extent,l=$r("size",a,t),c=a.invalid,f=V5e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=Atn(e,u,t),x=NS(m.field),{color:C,size:A,...R}=b,P=pe=>Vre(a,g,m,pe,t.boxplot),$=P(R),k=P(b),D=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",M=P({...R,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:D}}}}),L=dq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:dq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...$({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...$({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],O=[...f!=="tukey"?V:[],...k({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...M({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:O};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,H=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,te=`datum["${m.field}"]`,he={joinaggregate:q5e(m.field),groupby:y},fe={transform:[{filter:`(${H} <= ${te}) && (${te} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${x}`},{op:"max",field:m.field,as:`upper_whisker_${x}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${x}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${x}`},...v],groupby:y}],layer:V},{tooltip:ge,...le}=R,{scale:Me,axis:ce}=m,ze=zre(m),Ve=Gu(ce,["title"]),at=B5e(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${H}) || (${te} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ze!==void 0?{title:ze}:{},...Me!==void 0?{scale:Me}:{},...Br(Ve)?{}:{axis:Ve}},...le,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let tt;const be=[...d,...h,he];return at?tt={transform:be,layer:[at,fe]}:(tt=fe,tt.transform.unshift(...be)),{...o,layer:[tt,{transform:p,layer:O}]}}function q5e(e){const t=NS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Atn(e,t,n){const r=z5e(e,DM),{continuousAxisChannelDef:i,continuousAxis:s}=U5e(e,r,DM),o=i.field,a=NS(o),u=V5e(t),l=[...q5e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Stn(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=F5e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Hre="errorbar",Itn=["ticks","rule"],ktn=new b5(Hre,W5e);function W5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=G5e(e,Hre,t);delete s.size;const c=Vre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Rtn(e,t){const{encoding:n}=e;if(Ntn(n))return{orient:z5e(e,t),inputType:"raw"};const r=Ptn(n),i=Otn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(l0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(l0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(l0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(l0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Ntn(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function Ptn(e){return cn(e.x2)||cn(e.y2)}function Otn(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function G5e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Vh(r)?r:{type:r};s&&et(LFe(t));const{orient:l,inputType:c}=Rtn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=U5e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=Dtn(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:x,...C}=i,{bins:A,timeUnits:R,aggregate:P,groupby:$,encoding:k}=F5e(C,n),D=[...P,...g],M=c!=="raw"?[]:$,L=dq(v,f,k,b);return{transform:[...a.transform??[],...A,...R,...D.length===0?[]:[{aggregate:D,groupby:M}],...y],groupby:M,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:k,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function Dtn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&et(HZt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:yR(h)},{fieldPrefix:"upper_",titlePrefix:g0e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:g0e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Jw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Jw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Jw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&et(VZt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:ib(ib(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function g0e(e,t,n){return`${yR(e)} ${n} ${t}`}const qre="errorband",$tn=["band","borders"],Mtn=new b5(qre,Y5e);function Y5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=G5e(e,qre,t),l=o,c=Vre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?et(a0e("interpolate")):l.tension&&et(a0e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const K5e={};function Wre(e,t,n){const r=new b5(e,t);K5e[e]={normalizer:r,parts:n}}function Ltn(){return Xe(K5e)}Wre(DM,H5e,Ttn);Wre(Hre,W5e,Itn);Wre(qre,Y5e,$tn);const Ftn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],X5e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Q5e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},jtn=Xe(X5e),Btn=Xe(Q5e),Utn={header:1,headerRow:1,headerColumn:1,headerFacet:1},J5e=Xe(Utn),Z5e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ztn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Vtn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},cd="_vgsid_",Htn={point:{on:"click",fields:[cd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Gre(e){return e==="legend"||!!(e!=null&&e.legend)}function xB(e){return Gre(e)&&mt(e)}function Yre(e){return!!(e!=null&&e.select)}function e8e(e){const t=[];for(const n of e||[]){if(Yre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function qtn(e){return w5(e)||Xre(e)||Kre(e)}function Kre(e){return"concat"in e}function w5(e){return"vconcat"in e}function Xre(e){return"hconcat"in e}function t8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Hh(e){return mt(e)&&e.step!==void 0}function y0e(e){return e.view||e.width||e.height}const v0e=20,Wtn={align:1,bounds:1,center:1,columns:1,spacing:1},Gtn=Xe(Wtn);function Ytn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(p5(e)&&!SR(e.facet)||Kre(e))&&(i.columns=o),w5(e)&&(i.columns=1);for(const a of Gtn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=cr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function hq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $M(e,t){const n=MM(e,t);return Hh(n)?n.step:n8e}function MM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return hs(n,{step:e.step})}const n8e=20,Ktn={continuousWidth:200,continuousHeight:200,step:n8e},Xtn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Ktn,mark:Uen,arc:{},area:{},bar:Hen,circle:{},geoshape:{},image:{},line:{},point:{},rect:qen,rule:{color:"black"},square:{},text:{color:"black"},tick:Wen,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Een,projection:{},legend:ztn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Htn,style:{},title:{},facet:{spacing:v0e},concat:{spacing:v0e},normalizedNumberFormat:".0%"},Tp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],b0e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},_0e={blue:Tp[0],orange:Tp[1],red:Tp[2],teal:Tp[3],green:Tp[4],yellow:Tp[5],purple:Tp[6],pink:Tp[7],brown:Tp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Qtn(e={}){return{signals:[{name:"color",value:mt(e)?{..._0e,...e}:_0e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Jtn(e){return{signals:[{name:"fontSize",value:mt(e)?{...b0e,...e}:b0e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Ztn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function r8e(e){const t=Xe(e||{}),n={};for(const r of t){const i=e[r];n[r]=AR(i)?RFe(i):xl(i)}return n}function enn(e){const t=Xe(e),n={};for(const r of t)n[r]=r8e(e[r]);return n}const tnn=[...f5e,...D5e,...J5e,"background","padding","legend","lineBreak","scale","style","title","view"];function i8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=_S({},rn(Xtn),n?Ztn(n):{},t?Qtn(t):{},r?Jtn(r):{},s||{});i&&wS(o,"selection",i,!0);const a=Gu(o,tnn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=xl(o[u]));for(const u of f5e)o[u]&&(a[u]=la(o[u]));for(const u of D5e)o[u]&&(a[u]=r8e(o[u]));for(const u of J5e)o[u]&&(a[u]=la(o[u]));if(o.legend&&(a.legend=la(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=la(u,{level:1});a.scale={...la(l),...Xe(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=enn(o.style)),o.title&&(a.title=la(o.title)),o.view&&(a.view=la(o.view)),a}const nnn=new Set(["view",...$en]),rnn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],inn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Ben};function snn(e){e=rn(e);for(const t of rnn)delete e[t];if(e.axis)for(const t in e.axis)AR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ftn)delete e.legend[t];if(e.mark){for(const t of l0e)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(e8e(e.params)),delete e.params);for(const t of nnn){for(const r of l0e)delete e[t][r];const n=inn[t];if(n)for(const r of n)delete e[t][r];ann(e,t)}for(const t of Ltn())delete e[t];onn(e);for(const t in e)mt(e[t])&&Br(e[t])&&delete e[t];return Br(e)?void 0:e}function onn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=kFe(e.title);Br(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Br(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Br(r)?delete e.title:e.title=r}function ann(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Br(s)||(e.style[n??t]=s),delete e[t]}function E5(e){return"layer"in e}function unn(e){return"repeat"in e}function lnn(e){return!Be(e.repeat)&&e.repeat.layer}class Qre{map(t,n){return p5(t)?this.mapFacet(t,n):unn(t)?this.mapRepeat(t,n):Xre(t)?this.mapHConcat(t,n):w5(t)?this.mapVConcat(t,n):Kre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(E5(t))return this.mapLayer(t,n);if(cg(t))return this.mapUnit(t,n);throw new Error(mre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const cnn={zero:1,center:1,normalize:1};function fnn(e){return e in cnn}const dnn=new Set([u5e,c5,l5,IM,d5,Rre,Nre,f5,l5e,kre]),hnn=new Set([c5,l5,u5e]);function C_(e){return rt(e)&&dx(e)==="quantitative"&&!e.bin}function w0e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(rt(o)&&rt(a))if(C_(o)&&C_(a)){if(o.stack)return t;if(a.stack)return i;const u=rt(o)&&!!o.aggregate,l=rt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(C_(o))return t;if(C_(a))return i}else{if(C_(o))return s&&n==="vertical"?void 0:t;if(C_(a))return s&&n==="horizontal"?void 0:i}}function pnn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function s8e(e,t){var m,g;const n=Vh(e)?e:{type:e},r=n.type;if(!dnn.has(r))return null;const i=w0e(t,"x",n)||w0e(t,"theta",n);if(!i)return null;const s=t[i],o=rt(s)?dt(s,{}):void 0,a=pnn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=rt(y)?dt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=rt(f)?dt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=TJt.reduce((y,v)=>{if(v!=="tooltip"&&_1(t,v)){const b=t[v];for(const w of gt(b)){const E=ld(w);if(E.aggregate)continue;const S=dt(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Uy(s.stack)?p=s.stack?"zero":null:p=s.stack:hnn.has(r)&&(p="zero"),!p||!fnn(p)||L5e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ko.LINEAR&&s!=null&&s.stack&&et(BZt(s.scale.type)),cn(t[fp(i)])?(s.stack!==void 0&&et(jZt(i)),null):(rt(s)&&s.aggregate&&!LJt.has(s.aggregate)&&et(UZt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Qy(r),stackBy:h,offset:p}))}function o8e(e,t,n){const r=la(e),i=$r("orient",r,n);if(r.orient=vnn(r.type,t,i),i!==void 0&&i!==r.orient&&et(xZt(r.orient,i)),r.type==="bar"&&r.orient){const u=$r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Ven[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=$r("opacity",r,n),o=$r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=gnn(r.type,t)),$r("cursor",r,n)===void 0&&(r.cursor=mnn(r,t,n)),r}function mnn(e,t,n){return t.href||e.href||$r("href",e,n)?"pointer":e.cursor}function gnn(e,t){if($n([d5,kre,Rre,Nre],e)&&!L5e(t))return .7}function ynn(e,t,{graticule:n}){if(n)return!1;const r=zh("filled",e,t),i=e.type;return hs(r,i!==d5&&i!==f5&&i!==IM)}function vnn(e,t,n){switch(e){case d5:case Rre:case Nre:case l5e:case Oen:case Pen:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case c5:if(rt(r)&&(Ao(r.bin)||rt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(rt(i)&&(Ao(i.bin)||rt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(rt(r)&&r.type===ab&&!ui(r.bin)||RM(r))&&rt(i)&&Ao(i.bin)?"horizontal":"vertical";if(!o)return(rt(i)&&i.type===ab&&!ui(i.bin)||RM(i))&&rt(r)&&Ao(r.bin)?"vertical":"horizontal"}case IM:if(s&&!(rt(r)&&Ao(r.bin))&&o&&!(rt(i)&&Ao(i.bin)))return;case l5:if(o)return rt(i)&&Ao(i.bin)?"horizontal":"vertical";if(s)return rt(r)&&Ao(r.bin)?"vertical":"horizontal";if(e===IM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case f5:case kre:{const a=h0e(r),u=h0e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ou(r)&&r.type===cx,c=ou(i)&&i.type===cx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function bnn(e){const{point:t,line:n,...r}=e;return Xe(r).length>1?r:r.type}function _nn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Gu(e[t],["point","line"])});return e}function SB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function E0e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class wnn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(cg(t)){const{mark:r,encoding:i}=t,s=Vh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!SB(s,n[s.type],i);case"area":return!!SB(s,n[s.type],i)||!!E0e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=_5(l,i),d=Vh(a)?a:{type:a},h=SB(d,i[d.type],f),p=d.type==="area"&&E0e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:bnn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Gu(f,["shape"])}],g=s8e(o8e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Gu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...sx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...sx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:_nn(i)})}}function Enn(e,t){return t?SR(e)?u8e(e,t):a8e(e,t):e}function TB(e,t){return t?u8e(e,t):e}function pq(e,t,n){const r=t[e];if(itn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};et(rZt(r.repeat));return}return t}function a8e(e,t){if(e=pq("field",e,t),e!==void 0){if(e===null)return null;if(Lre(e)&&fm(e.sort)){const n=pq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function x0e(e,t){if(rt(e))return a8e(e,t);{const n=pq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function S0e(e,t){if(cn(e)){const n=x0e(e,t);if(n)return n;if(m5(e))return{condition:e.condition}}else{if(TR(e)){const n=x0e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function u8e(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Be(i))n[r]=i.map(s=>S0e(s,t)).filter(s=>s);else{const s=S0e(i,t);s!==void 0&&(n[r]=s)}}return n}class xnn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(cg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Vh(r)&&r.type==="line")for(const i of EJt){const s=Ub(i),o=n[s];if(n[i]&&(rt(o)&&!Ao(o.bin)||hp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return et(EZt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class Snn extends Qre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Ctn,ktn,Mtn,new wnn,new xnn]}map(t,n){if(cg(t)){const r=_1(t.encoding,lm),i=_1(t.encoding,cm),s=_1(t.encoding,JF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=TB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return lnn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ti(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Be(r)&&t.columns&&(t=Gu(t,["columns"]),et(r0e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Be(r)&&r.row||[u?u.row:null],f=!Be(r)&&r.column||[u?u.column:null],d=Be(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Be(r)?`${Ti(p)}`:(r.row?`row_${Ti(m)}`:"")+(r.column?`column_${Ti(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Gu(b,["data"]))}const h=Be(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return SR(r)&&t.columns&&(t=Gu(t,["columns"]),et(r0e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=C0e({parentProjection:o,projection:i}),l=T0e({parentEncoding:s,encoding:TB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=TB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&et(_Zt([...r?[lm]:[],...i?[cm]:[]]));const o={},a={};for(const u of[lm,cm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Enn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:T0e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:C0e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function T0e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Xe(e),...Xe(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else TR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||ud(a)||Nt(a)||cn(a)||Be(a))&&(r[s]=a)}}else r=t;return!r||Br(r)?void 0:r}function C0e(e){const{parentProjection:t,projection:n}=e;return t&&n&&et(lZt({parentProjection:t,projection:n})),n??t}function Jre(e){return"filter"in e}function Tnn(e){return(e==null?void 0:e.stop)!==void 0}function l8e(e){return"lookup"in e}function Cnn(e){return"data"in e}function Ann(e){return"param"in e}function Inn(e){return"pivot"in e}function knn(e){return"density"in e}function Rnn(e){return"quantile"in e}function Nnn(e){return"regression"in e}function Pnn(e){return"loess"in e}function Onn(e){return"sample"in e}function Dnn(e){return"window"in e}function $nn(e){return"joinaggregate"in e}function Mnn(e){return"flatten"in e}function Lnn(e){return"calculate"in e}function c8e(e){return"bin"in e}function Fnn(e){return"impute"in e}function jnn(e){return"timeUnit"in e}function Bnn(e){return"aggregate"in e}function Unn(e){return"stack"in e}function znn(e){return"fold"in e}function Vnn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Hnn(e){return e.map(t=>Jre(t)?{filter:Xw(t.filter,men)}:t)}class qnn extends Qre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=A0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=A0e(t,n),t.encoding){const r={};for(const[i,s]of dy(t.encoding))r[i]=f8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:dy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function A0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Jre(s))return{filter:mq(s,t)};if(c8e(s)&&zb(s.bin))return{...s,bin:d8e(s.bin)};if(l8e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function f8e(e,t){var r,i;const n=rn(e);if(rt(n)&&zb(n.bin)&&(n.bin=d8e(n.bin)),qb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(m5(n))if(Be(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:mq(s,t)}});else{const{selection:s,param:o,test:a,...u}=f8e(n.condition,t);n.condition=o?n.condition:{...u,test:mq(n.condition,t)}}return n}function d8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function mq(e,t){const n=r=>Xw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Xw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class gq extends Qre{map(t,n){const r=n.selections??[];if(t.params&&!cg(t)){const i=[];for(const s of t.params)Yre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(yt(a)&&(a===t.name||i.includes(a))||Be(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=gq.prototype[e];gq.prototype[e]=function(n,r){return t.call(this,n,Wnn(n,r))}}function Wnn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function h8e(e,t){t===void 0&&(t=i8e(e.config));const n=Xnn(e,t),{width:r,height:i}=e,s=Qnn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Gnn=new Snn,Ynn=new qnn,Knn=new gq;function Xnn(e,t={}){const n={config:t};return Knn.map(Gnn.map(Ynn.map(e,n),n),n)}function I0e(e){return yt(e)?{type:e}:e??{}}function Qnn(e,t,n){let{width:r,height:i}=t;const s=cg(e)||E5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(et(Zge("width")),r=void 0),i=="container"&&(et(Zge("height")),i=void 0));const a={type:"pad",...o,...n?I0e(n.autosize):{},...I0e(e.autosize)};if(a.type==="fit"&&!s&&(et(WJt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&et(e0e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&et(e0e("height")),!Nl(a,{type:"pad"}))return a}function Jnn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Znn(e){return e?`fit-${r5(e)}`:"fit"}const ern=["background","padding"];function k0e(e,t){const n={};for(const r of ern)e&&e[r]!==void 0&&(n[r]=xl(e[r]));return t&&(n.params=e.params),n}class fg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new fg(rn(this.explicit),rn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return hs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Xe(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Hd(e){return{explicit:!0,value:e}}function ml(e){return{explicit:!1,value:e}}function p8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:x5(t,n,r,i)}}function x5(e,t,n,r){return e.explicit&&t.explicit&&et(PZt(n,r,e.value,t.value)),e}function my(e,t,n,r,i=x5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Nl(e.value,t.value)?e:i(e,t,n,r)}class trn extends fg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function mx(e){return"url"in e}function II(e){return"values"in e}function m8e(e){return"name"in e&&!mx(e)&&!II(e)&&!O0(e)}function O0(e){return e&&(g8e(e)||y8e(e)||Zre(e))}function g8e(e){return"sequence"in e}function y8e(e){return"sphere"in e}function Zre(e){return"graticule"in e}var Ji;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ji||(Ji={}));function v8e({invalid:e,isPath:t}){switch(h5e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function nrn(e){const{marks:t,scales:n}=v8e(e);return t===n?Ji.Main:n==="include-invalid-values"?Ji.PreFilterInvalid:Ji.PostFilterInvalid}function b8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Yc(i.field),i}function cb(e,t=!0,n=Ta){if(Be(e)){const r=e.map(i=>cb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Vb(e))return n(t?ob(e):ren(e));return t?n(Ur(e)):e}function rrn(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${yy}, ${n.resolve==="global"?"true":`{unit: ${w1(e)}}`}`;for(const s of A5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Orn,on:[{events:{signal:n.name+yy},update:`modify(${ot(n.name+fb)}, ${i})`}]})}return eie(t)}function irn(e,t){if(e.component.selection&&Xe(e.component.selection).length){const n=ot(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Vy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return eie(t)}function srn(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=ot(i+fb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${L8e}(${s}, ${ot(a)}${u}`})}n=!0;for(const a of A5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),eie(t)}function orn(e,t){const n=[...t],r=w1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+fb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:cd}}]),i.init){const a=i.project.items.map(b8e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[cd]:cb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:cb(u,!1)}))}n.filter(a=>a.name===i.name+fb).length||n.push(s)}return n}function _8e(e,t){for(const n of Mo(e.component.selection??{}))for(const r of A5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function arn(e,t){for(const n of e.children)Pi(n)&&(t=_8e(n,t));return t}function urn(e,t,n,r){const i=z8e(e,t.param,t);return{signal:ad(n.get("type"))&&Be(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function eie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Lr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){et(oZt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Yu extends Lr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${hFe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function CB(e){return e.as!==void 0}function R0e(e){return`${e}_end`}class Th extends Lr{clone(){return new Th(null,rn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Hb(u)){if(Pi(n)){const{mark:c,markDef:f,config:d}=n,h=py({fieldDef:s,markDef:f,config:d});(AI(c)||h)&&(l={timeUnit:co(u),field:a})}}else l={as:dt(s,{forAs:!0}),field:a,timeUnit:u};if(Pi(n)){const{mark:c,markDef:f,config:d}=n,h=py({fieldDef:s,markDef:f,config:d});AI(c)&&ps(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Br(r)?null:new Th(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=co(r),o={...i,timeUnit:s};return new Th(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of dy(this.timeUnits)){const s=CB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>CB(t)?t.as:R0e(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=co(n.timeUnit);if(CB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Yc(s),type:"timeunit",...a?{units:a5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...N0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=w8e({timeUnit:i,field:o}),u=R0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...N0e([o,u],r,i))}}return t}}const S5="offsetted_rect_start",T5="offsetted_rect_end";function w8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=YFe(r),{part:o,step:a}=JFe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function N0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:P0e([w8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${S5}`},{type:"formula",expr:P0e([i,s],n+.5),as:`${e}_${T5}`}]}return[]}function P0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const IR="_tuple_fields";class lrn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const crn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new lrn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ti(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ti(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?gt(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Xe(p))wJt(m)?(h||(h=[])).push(m):l==="interval"?(et(nZt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){et(GJt(p,m.aggregate));continue}else if(!g){et(n0e(p));continue}if(m.timeUnit&&!Hb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[zn(y)]=y}if(!s[g]){const y=l==="interval"&&dp(p)&&ad(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===cd,bFe(p)?(v.geoChannel=p,v.channel=vFe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else et(n0e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===cd}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Br(o)||(i.timeUnit=new Th(null,o))},signals:(e,t,n)=>{const r=t.name+IR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(b8e)})}},dm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!dp(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&et(QJt),!s||!ad(o)){et(XJt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||O0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(L8e)>=0)i.update=`{${r.map(o=>`${ot(Yc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${ot(Yc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!O0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function yq(e,t){return`domain(${ot(e.scaleName(t))})`}function O0e(e){return e.parent&&FS(e.parent)&&!e.parent.parent}const Zw="_brush",E8e="_scale_trigger",FT="geo_interval_init_tick",x8e="_init",frn="_center",drn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[cd],i.encodings||(i.encodings=n.value?Xe(n.value):[Ed,wd]),n.select={type:"interval",...i}}if(t.translate&&!dm.defined(t)){const i=`!event.item || event.item.mark.name !== ${ot(t.name+Zw)}`;for(const s of t.events){if(!s.between){et(`${s} is not an ordered event stream for interval selections.`);continue}const o=gt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+yy,s=Mo(t.project.hasChannel).filter(a=>a.channel===Ai||a.channel===mo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(hrn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=ot(e.projectionName()),u=e.projectionName()+frn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+x8e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${ot(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${w1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:FT}]:[]],update:b}]})}else{if(!dm.defined(t)){const l=r+E8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=ot(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=ad(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${w1(e)}, fields: ${r+IR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${cb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Pi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===FT).length||n.unshift({name:FT,value:null,on:[{events:"timer{1}",update:`${FT} === null ? {} : ${FT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${ot(t.name+fb)})`;if(dm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Xe(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${w1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Xe(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Zw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Zw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function hrn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=ot(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ai?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=dm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:cb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+E8e},update:ad(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:cb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ai?0:1,h=t.name+x8e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const prn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+IR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Zw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${w1(e)}, `;if(t.project.hasSelectionId)l+=`${cd}: ${o}[${ot(cd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${ot(e.vgField(d.channel,{}))}], ${o}[${ot(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${ot(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+yy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function DS({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=m5(t)&&t.condition;let o=[];s&&(o=gt(s).map(l=>{const c=i(l);if(rtn(l)){const{param:f,empty:d}=l;return{test:U8e(e,{param:f,empty:d}),...c}}else return{test:jM(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function tie(e,t="text"){const n=e.encoding[t];return DS({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>C5(r,e.config),invalidValueRef:void 0})}function C5(e,t,n="datum"){if(e){if(ud(e))return mi(e.value);if(cn(e)){const{format:r,formatType:i}=PM(e);return $re({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function S8e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Be(o))return{tooltip:D0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return DS({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=C5(l,i,a);if(c)return c;if(l===null)return;let f=$r("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),yt(f))return{value:f};if(mt(f))return Nt(f)?f:f.content==="encoding"?D0e(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function T8e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Ub(f),h=ou(c)?c:{...c,type:e[d].type},p=h.title||jre(h,i),m=gt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ps(f)){const y=f==="x"?"x2":"y2",v=ld(e[y]);if(Ao(h.bin)&&v){const b=dt(h,{expr:o}),w=dt(v,{expr:o}),{format:E,formatType:S}=PM(h);g=xR(b,w,E,S,i),s[y]=!0}}if((ps(f)||f===af||f===_d)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=PM(h);g=$re({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=C5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Ure(e,(c,f)=>{rt(c)?u(c,f):g5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function D0e(e,t,n,{reactiveGeom:r}={}){const i=T8e(e,t,n,{reactiveGeom:r}),s=dy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function mrn(e){const{markDef:t,config:n}=e,r=$r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...grn(e),...yrn(e)}}function grn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=$r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in VJt?{}:{ariaRoleDescription:{value:t}}}function yrn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return DS({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>C5(u,e.config),invalidValueRef:void 0});const o=$r("description",n,r);if(o!=null)return{description:mi(o)};if(r.aria===!1)return{};const a=T8e(t,i,r);if(!Br(a))return{description:{signal:dy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function no(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=$r(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=mi(u)));const l=i[e],c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=m5e({...c,scaleChannel:e,channelDef:l});return DS({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>Dre({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function C8e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??$r("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=$r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=$r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:mi(u)}:{},...l?{stroke:mi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&et(jFe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...no("color",e,{vgChannel:c,defaultValue:o?u:l}),...no("fill",e,{defaultValue:r.fill?u:void 0}),...no("stroke",e,{defaultValue:r.stroke?l:void 0})}}function vrn(e){const{encoding:t,mark:n}=e,r=t.order;return!Qy(n)&&ud(r)?DS({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>mi(i.value),invalidValueRef:void 0}):{}}function gx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Dre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:mi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ga(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[fp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=gx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=nie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ps(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:brn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function brn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(rt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return kM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return b1(n,r,{suffix:"end"},{offset:s})}return Ore(e)}function nie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Ub(n),u=hy(n),l=$r(n,s,o,{vgChannel:u});if(l!==void 0)return j2(n,l);switch(t){case"zeroOrMin":return $0e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return $0e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[sl(n)],mult:.5}}}}function $0e({mainChannel:e,config:t,...n}){const r=p5e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const _rn={left:"x",center:"xc",right:"x2"},wrn={top:"y",middle:"yc",bottom:"y2"};function A8e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return hy(e);const i=e==="x"?"align":"baseline",s=$r(i,t,n);let o;return Nt(s)?(et(wZt(i)),o=void 0):o=s,e==="x"?_rn[o||(r==="top"?"left":"center")]:wrn[o||r]}function LM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?I8e(e,t,{defaultPos:n,defaultPos2:r}):ga(e,t,{defaultPos:n})}function I8e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=fp(e),a=sl(e),u=Ern(t,r,o),l=u[a]?A8e(e,i,s):hy(e);return{...ga(e,t,{defaultPos:n,vgChannel:l}),...u}}function Ern(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Ub(n),l=sl(n),c=hy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?gx({channel:n,markDef:s,encoding:r,model:e}):gx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=sl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=xrn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:TP(n,s)||TP(n,{[n]:CM(n,s,a.style),[l]:CM(l,s,a.style)})||TP(n,a[i])||TP(n,a.mark)||{[c]:nie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xrn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?b1(t,s,{suffix:"start"},{offset:u}):Ore({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function TP(e,t){const n=sl(e),r=hy(e);if(t[r]!==void 0)return{[r]:j2(e,t[r])};if(t[e]!==void 0)return{[r]:j2(e,t[e])};if(t[n]){const i=t[n];if(ub(i))et(mZt(n));else return{[n]:j2(e,i)}}}function gy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=fp(t),a=sl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??$r("size",i,n,{vgChannel:a}),p=xFe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return rt(u)&&(ui(u.bin)||Ao(u.bin)||u.timeUnit&&!l)&&!(h&&!ub(h))&&!r[p]&&!fo(f)?Crn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&fo(f)||m)&&!l?Trn(u,t,e):I8e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Srn(e,t,n,r,i,s,o){if(ub(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=zh("minBandSize",{type:o},r);return{signal:c?`max(${Ff(c)}, ${l})`:l}}else i.band!==1&&(et(TZt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Xy(u)&&cr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=hs(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(cr(f))return{signal:`${1-f} * ${e}`}}return{value:$M(r.view,e)-2}}function Trn(e,t,n){var A,R;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=sl(t),f=fp(t),d=xFe(t),h=n.scaleName(d),p=n.getScaleComponent(lre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=no("size",n,{vgChannel:c,defaultRef:mi(r.size)}):et(kZt(r.type)));const y=!!g,v=E5e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Srn(c,h||u,p||l,s,v,!!e,r.type)};const b=((R=l||p)==null?void 0:R.get("type"))==="band"&&ub(v)&&!y?"top":"middle",w=A8e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:x}=gx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=Ore({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:nie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:ub(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const P=hy(f),$=g[c],k=S?{...$,offset:S}:$;return{[w]:C,[P]:Be(C)?[C[0],{...C[1],offset:k}]:{...C,offset:k}}}}function M0e(e,t,n,r,i,s,o){if(yFe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=Ff(n),c=Ff(i),f=Ff(r),d=Ff(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Crn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=E5e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(R=r.component.axes[n])==null?void 0:R[0],h=(d==null?void 0:d.get("translate"))??.5,p=ps(n)?$r("binSpacing",s,i)??0:0,m=fp(n),g=hy(n),y=hy(m),v=zh("minBandSize",s,i),{offset:b}=gx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=gx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Qen({fieldDef:e,scaleName:u}),S=M0e(n,p,c,h,b,v,E),x=M0e(m,p,c,h,w??b,v,E),C=Nt(f)?{signal:`(1-${f.signal})/2`}:ub(f)?(1-f.band)/2:.5,A=py({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ui(e.bin)||e.timeUnit){const P=e.timeUnit&&A!==.5;return{[y]:L0e({fieldDef:e,scaleName:u,bandPosition:C,offset:x,useRectOffsetField:P}),[g]:L0e({fieldDef:e,scaleName:u,bandPosition:Nt(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:P})}}else if(Ao(e.bin)){const P=b1(e,u,{},{offset:x});if(rt(t))return{[y]:P,[g]:b1(t,u,{},{offset:S})};if(zb(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${u}", ${dt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}et(zFe(m))}function L0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return kM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:S5,endSuffix:T5}:{}})}const Arn=new Set(["aria","width","height"]);function uf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?C8e(e):{};return{...Irn(e.markDef,t),...F0e("fill",n),...F0e("stroke",r),...no("opacity",e),...no("fillOpacity",e),...no("strokeOpacity",e),...no("strokeWidth",e),...no("strokeDash",e),...vrn(e),...S8e(e),...tie(e,"href"),...mrn(e)}}function F0e(e,t){return t?{[e]:t}:{}}function Irn(e,t){return zJt.reduce((n,r)=>(!Arn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=mi(e[r])),n),{})}function rie(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!dp(s)||!(o=e.getScaleType(s)))return;const a=i5(i.aggregate),u=Pre({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(Yen(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>u5(s,!0)).join(" && ")}}}function j0e(e,t){if(t!==void 0)return{[e]:mi(t)}}const AB="voronoi",k8e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(AB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Qy(s))return et(YJt(s)),n;const o={name:e.getName(AB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...S8e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(AB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},R8e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Gre(e.bind),parse:(e,t,n)=>F8e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=k8e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ti(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:cb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ot(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+yy)[0],o=r+IR,a=i.items.map(l=>Ti(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},FM="_toggle",N8e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+FM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+yy,r=t.name+FM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${w1(e)}}, `)+`${r} ? ${n} : null`}},krn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=yt(t.clear)?Vy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(R8e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ti(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+yy);r(i,"null"),N8e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+FM),r(i,"false"))}return n}},P8e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Gre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==cd;return t&&!n&&et(JJt),t&&n},parse:(e,t,n)=>{const r=rn(n);if(r.select=yt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},F8e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=gt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=xB(t.bind)?t.bind.legend:"click",s=yt(i)?Vy(i,"view"):gt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=xB(t.bind)&&t.bind.legend,s=o=>a=>{const u=rn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ti(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+yy),o=r+IR,a=i.items.filter(d=>d.hasLegend).map(d=>Ti(`${r}_${Ti(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+FM),f=xB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Rrn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&P8e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const O8e="_translate_anchor",D8e="_translate_delta",Nrn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=dm.defined(t),s=r+O8e,{x:o,y:a}=t.project.hasChannel;let u=Vy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Zw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?yq(e,Ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?yq(e,mo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+D8e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&B0e(e,t,o,"width",n),a!==void 0&&B0e(e,t,a,"height",n),n}};function B0e(e,t,n,r,i){const s=t.name,o=s+O8e,a=s+D8e,u=n.channel,l=dm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const $8e="_zoom_anchor",M8e="_zoom_delta",Prn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=dm.defined(t),s=r+M8e,{x:o,y:a}=t.project.hasChannel,u=ot(e.scaleName(Ai)),l=ot(e.scaleName(mo));let c=Vy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Zw,f))),n.push({name:r+$8e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&U0e(e,t,o,"width",n),a!==void 0&&U0e(e,t,a,"height",n),n}};function U0e(e,t,n,r,i){const s=t.name,o=n.channel,a=dm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?yq(e,o):u.name,h=s+M8e,p=`${s}${$8e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const fb="_store",yy="_tuple",Orn="_modify",L8e="vlSelectionResolve",A5=[prn,drn,crn,N8e,R8e,dm,P8e,krn,Nrn,Prn,k8e];function Drn(e){let t=e.parent;for(;t&&!$l(t);)t=t.parent;return t}function w1(e,{escape:t}={escape:!0}){let n=t?ot(e.name):e.name;const r=Drn(e);if(r){const{facet:i}=r;for(const s of Ac)i[s]&&(n+=` + '__facet_${s}_' + (facet[${ot(r.vgField(s))}])`)}return n}function iie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function F8e(e,t){(yt(t.select)||!t.select.on)&&delete e.events,(yt(t.select)||!t.select.clear)&&delete e.clear,(yt(t.select)||!t.select.toggle)&&delete e.toggle}function vq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...vq(e.object)),t.push(...vq(e.property))),t)}function j8e(e){return e.object.type==="MemberExpression"?j8e(e.object):e.object.name==="datum"}function B8e(e){const t=Tne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&j8e(r)&&n.add(vq(r).slice(1).join("."))}),n}class $S extends Lr{clone(){return new $S(null,this.model,rn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=jM(this.model,this.filter,this),this._dependentFields=B8e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function $rn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ti(i.name),o=i.select,a=yt(o)?o:o.type,u=mt(o)?rn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=rn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:yt(u.on)?Vy(u.on,"scope"):gt(rn(u.on))},f=rn(i);for(const d of A5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function U8e(e,t,n,r="datum"){const i=yt(t)?t:t.param,s=Ti(i),o=ot(s+fb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${ot(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function z8e(e,t,n){const r=Ti(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&et(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ot(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,et((a.length?"Multiple ":"No ")+`matching ${ot(i)} encoding found for selection ${ot(n.param)}. Using "field": ${ot(s)}.`)):s=a[0].field}return`${o.name}[${ot(Yc(s))}]`}function Mrn(e,t){for(const[n,r]of dy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Yu(new $S(t,e,{param:n}),i,Ji.Lookup,e.component.data.outputNodeRefCounts)}}function jM(e,t,n){return F2(t,r=>yt(r)?r:den(r)?U8e(e,r,n):e5e(r))}function Lrn(e,t){if(e)return Be(e)&&!Lg(e)?e.map(n=>jre(n,t)).join(", "):e}function IB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function LC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=ytn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(AR(m)){const{condition:g,...y}=m,v=gt(g),b=p0e[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(x=>{const{test:C,...A}=x;return{test:jM(null,C),...A}}),y];IB(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...x}=E;return`${jM(null,S)} ? ${Jge(x)} : `}).join("")+Jge(y)};c[h]=w}}else if(Nt(m)){const g=p0e[h];if(g){const{vgProp:y,part:v}=g;IB(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Br(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:hs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=ib(a,"datum.label",c.encode.labels.update.text.signal)),IB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of P5e)e.hasAxisPart(p)||delete c.encode[p];Br(c.encode)&&delete c.encode}const h=Lrn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:hs(l,0)}}}}function V8e(e){const{axes:t}=e.component,n=[];for(const r of lg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Frn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>LC(i,"grid",t)),...r.map(i=>LC(i,"grid",t)),...n.map(i=>LC(i,"main",t)),...r.map(i=>LC(i,"main",t))].filter(i=>i)}function z0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Xe(o),...Xe(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Ff(o[c])} : ${Ff(a[c])}`};return l}return t[i]})])}function jrn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:i5e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${yR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:z0e(a,r,e,n),vgAxisConfig:z0e(u,r,e,n),axisConfigStyle:Brn([...u,...a],r)}}function Brn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=gt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function bq(e,t,n,r={}){var s;const i=PFe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const V0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Urn(n,e),gridScale:({model:e,channel:t})=>zrn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||q8e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||H8e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Hrn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??qrn(t.type,n,rt(t)&&!!t.timeUnit,rt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Grn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Yrn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=W8e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return DFe(i?[d0e(i)]:[],rt(o)?[d0e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Krn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Xrn(n,t)};function Urn(e,t){return!fo(e)&&rt(t)&&!ui(t==null?void 0:t.bin)&&!Ao(t==null?void 0:t.bin)}function zrn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Vrn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:CI(s);{const{configValue:o}=bq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?CI(o):n===Ai&&$n([Ire,Are],e.type)&&!(rt(e)&&e.timeUnit)?270:void 0}}function _q(e){return`(((${e.signal} % 360) + 360) % 360)`}function H8e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=_q(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=_q(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function q8e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=_q(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Hrn(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function qrn(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Wrn(e){return e==="x"?"bottom":"left"}function Grn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!fo(t)&&t!=="log"){if(rt(e)){if(ui(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=co(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Yrn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(rt(t)){const{timeUnit:n}=t;if(n){const r=QFe(n);if(r)return{signal:r}}}}function W8e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return $Fe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Krn(e,t){const n=e.values;if(Be(n))return N5e(t,n);if(Nt(n))return n}function Xrn(e,t){return e==="rect"&&NM(t)?1:0}class yx extends Lr{clone(){return new yx(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=B8e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(qb(r)&&w5e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${e5e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new yx(t,{calculate:u,as:vx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function vx(e,t,n){return dt(e,{prefix:t,suffix:"sort_index",...n})}function I5(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function bx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return hs((t||{})[e],i[e],n.header[e])}function k5(e,t,n,r){const i={};for(const s of e){const o=bx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const sie=["row","column"],oie=["header","footer"];function Qrn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=k5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=I5(t,a),l=CI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Y8e(l,u),...G8e(u,l,s),...K8e(r,i,t,jtn,X5e)}}}function G8e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=q8e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Y8e(e,t){const n=H8e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Jrn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of oie)if(n[i])for(const s of n[i]){const o=ein(e,t,i,n,s);o!=null&&r.push(o)}return r}function Zrn(e,t){const{sort:n}=e;return fm(n)?{field:dt(n,{expr:"datum"}),order:n.order??"ascending"}:Be(n)?{field:vx(e,t,{expr:"datum"}),order:"ascending"}:{field:dt(e,{expr:"datum"}),order:n??"ascending"}}function wq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=k5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=$re({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=I5(t,a);return{text:{signal:u?ib(ib(u,"datum.label",l),"datum.value",dt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Y8e(s,c),...G8e(c,s,o),...K8e(n,e,t,Btn,Q5e)}}function ein(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=k5(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=wq(o,t,a))}const u=$l(e)&&!SR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Zrn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const tin={column:{start:0,end:1},row:{start:1,end:0}};function nin(e,t){return tin[t][e]}function rin(e,t){const n={};for(const r of Ac){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=k5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=I5(r,o),u=nin(s,a);u!==void 0&&(n[a]=u)}}return Br(n)?void 0:n}function K8e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=bx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function aie(e){return[...CP(e,"width"),...CP(e,"height"),...CP(e,"childWidth"),...CP(e,"childHeight")]}function CP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(fo(o)&&Xy(a)){const u=e.scaleName(n);return $l(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[H0e(u,a)]:[H0e(u,a),{name:i,update:X8e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=hq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function H0e(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function X8e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=hs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Ff(o)}, ${Ff(s)}) * ${e}_step`}function Q8e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function J8e(e,t){return Xe(e).reduce((n,r)=>({...n,...DS({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>mi(i.value),invalidValueRef:void 0})}),{})}function Z8e(e,t){if($l(t))return e==="theta"?"independent":"shared";if(FS(t))return"shared";if(pie(t))return ps(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function uie(e,t){const n=e.scale[t],r=ps(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&et(DZt(t)),"independent"):e[r][t]||"shared"}const iin={...Vtn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},eje=Xe(iin);class sin extends fg{}const q0e={symbols:oin,gradient:ain,labels:uin,entries:lin};function oin(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...qJt({},n,Fen),...C8e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?tje(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===rl)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=mi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=mi(m??1));else if(Be(f.fill)){const g=Eq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=mi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===rl)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Be(f.stroke)){const g=hs(Eq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ug){const g=rt(t)&&rje(n,i,t);g?f.opacity=[{test:g,...mi(m??1)},mi(u.legend.unselectedOpacity)]:m&&(f.opacity=mi(m))}return f={...f,...e},Br(f)?void 0:f}function ain(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?tje(o.opacity)||s.opacity:void 0;return l&&(a.opacity=mi(l)),a={...a,...e},Br(a)?void 0:a}function uin(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=rt(t)?rje(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;lb(c)?f=jf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=jf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&rt(t)&&t.timeUnit===void 0&&(f=jf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Br(d)?void 0:d}function lin(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function tje(e){return nje(e,(t,n)=>Math.max(t,n.value))}function Eq(e){return nje(e,(t,n)=>hs(t,n.value))}function nje(e,t){if(stn(e))return gt(e.condition).reduce(t,e.value);if(ud(e))return e.value}function rje(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ot(n.field);return r.map(s=>`(!length(data(${ot(Ti(s)+fb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const W0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return v5e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return b5e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??gin(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??yin(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??fin(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Jw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Qw(n)&&ch(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>cin(t,e)};function cin(e,t){const n=e.values;if(Be(n))return N5e(t,n);if(Nt(n))return n}function fin(e,t,n,r){if(t!=="shape"){const i=Eq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function din(e){const{legend:t}=e;return hs(t.type,hin(e))}function hin({channel:e,timeUnit:t,scaleType:n}){if(Qw(e)){if($n(["quarter","month","day"],t))return"symbol";if(ch(n))return"gradient"}return"symbol"}function pin({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??min(n,t)}function min(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function gin({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(ch(i))return n==="horizontal"?r==="top"||r==="bottom"?G0e(t,"width",o,s):o:G0e(t,"height",u,a)}function G0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function yin(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function ije(e){const t=Pi(e)?vin(e):Ein(e);return e.component.legends=t,t}function vin(e){const{encoding:t}=e,n={};for(const r of[rl,...Z5e]){const i=js(t[r]);!i||!e.getScaleComponent(r)||r===il&&rt(i)&&i.type===OS||(n[r]=win(e,r))}return n}function bin(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function _in(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function win(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new sin({},bin(e,t));Rrn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=js(i[t]),f=rt(c)?(w=co(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=din({legend:n,channel:t,timeUnit:f,scaleType:l}),p=pin({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of eje){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in W0e?W0e[E](m):n[E];if(S!==void 0){const x=_in(S,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,S,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=J8e(g[E]??{},e),x=E in q0e?q0e[E](S,b):S;x!==void 0&&!Br(x)&&(v[E]={...y!=null&&y.length&&rt(c)?{name:`${Ti(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Br(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Ein(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){ije(r);for(const i of Xe(r.component.legends))n.legend[i]=uie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=sje(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Xe(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function sje(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of eje){const c=my(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return xin(f,d);case"title":return MFe(f,d);case"type":return i=!0,ml("symbol")}return x5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&TM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&TM(e.explicit,["encode","gradient"])),e}function xin(e,t){return t.value==="circle"?t:e}function Sin(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function oje(e){const t=e.component.legends,n={};for(const i of Xe(t)){const s=e.getScaleComponent(i),o=Ur(s.get("domains"));if(n[o])for(const a of n[o])sje(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>Tin(i,e.config)).filter(i=>i!==void 0)}function Tin(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of Z5e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=ib(r,"datum.label",s.encode.labels.update.text.signal)),Sin(s,"labels","text",{signal:l})}return s}}function Cin(e){return FS(e)||pie(e)?Ain(e):aje(e)}function Ain(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),aje(e))}function aje(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Iin=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class uje extends fg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function lje(e){e.component.projection=Pi(e)?kin(e):Pin(e)}function kin(e){if(e.hasProjection){const t=la(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Rin(e):void 0,s=new uje(e.projectionName(!0),{...la(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Rin(e){const t=[],{encoding:n}=e;for(const r of[[Ed,wd],[Kc,xd]])(js(n[r[0]])||js(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(il)&&e.typedFieldDef(il).type===OS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ji.Main)),t}function Nin(e,t){const n=nre(Iin,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Nl(e.get(i),t.get(i))));if(Nl(e.size,t.size)){if(n)return e;if(Nl(e.explicit,{}))return t;if(Nl(t.explicit,{}))return e}return null}function Pin(e){if(e.children.length===0)return;let t;for(const r of e.children)lje(r);const n=nre(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Nin(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new uje(r,t.specifiedProjection,t.size,rn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Oin(e,t,n,r){if(CR(t,n)){const i=Pi(e)?e.axis(n)??e.legend(n)??{}:{},s=dt(t,{expr:"datum"}),o=dt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:dt(t,{binSuffix:"range",forAs:!0}),formula:xR(s,o,i.format,i.formatType,r)}}return{}}function cje(e,t){return`${IFe(e)}_${t}`}function Din(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function lie(e,t,n){const r=y5(n,void 0)??{},i=cje(r,t);return e.getName(`${i}_bins`)}function $in(e){return"as"in e}function Y0e(e,t,n){let r,i;$in(e)?r=yt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[dt(e,{forAs:!0}),dt(e,{binSuffix:"end",forAs:!0})];const s={...y5(t,void 0)},o=cje(s,e.field),{signal:a,extentSignal:u}=Din(n,o);if(s5(s.extent)){const c=s.extent;i=z8e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Ch extends Lr{clone(){return new Ch(null,rn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ou(s)&&ui(s.bin)){const{key:a,binComponent:u}=Y0e(s,s.bin,n);i[a]={...u,...i[a],...Oin(n,s,o,n.config)}}return i},{});return Br(r)?null:new Ch(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Y0e(n,n.bin,r);return new Ch(t,{[i]:s})}merge(t,n){for(const r of Xe(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=lh([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Yc(t.field),as:r,signal:t.signal,...s5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Yc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:dt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Min(e,t,n,r){var s;const i=Pi(r)?r.encoding[fp(t)]:void 0;if(ou(n)&&Pi(r)&&x5e(n,i,r.markDef,r.config)){e.add(dt(n,{})),e.add(dt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=py({fieldDef:n,markDef:a,config:u});AI(o)&&l!==.5&&ps(t)&&(e.add(dt(n,{suffix:S5})),e.add(dt(n,{suffix:T5}))),n.bin&&CR(n,t)&&e.add(dt(n,{binSuffix:"range"}))}else if(bFe(t)){const o=vFe(t);e.add(r.getName(o))}else e.add(dt(n));return qb(n)&&Ten((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Lin(e,t){for(const n of Xe(t)){const r=t[n];for(const i of Xe(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Xf extends Lr{clone(){return new Xf(null,new Set(this.dimensions),rn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([dt(o,{forAs:!0})]);else{if(Bm(u)||Ky(u)){const c=Bm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([dt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([dt(o,{forAs:!0})]);dp(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([dt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([dt({field:l,aggregate:"max"},{forAs:!0})]))}else Min(s,a,o,n)}),s.size+Xe(i).length===0)?null:new Xf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||dt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||dt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Xe(i).length===0?null:new Xf(t,r,i)}merge(t){return cFe(this.dimensions,t.dimensions)?(Lin(this.measures,t.measures),!0):(XZt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Xe(this.measures)])}producedFields(){const t=new Set;for(const n of Xe(this.measures))for(const r of Xe(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Xe(this.measures))for(const o of Xe(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Yc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Yc),ops:t,fields:n,as:r}}}class MS extends Lr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ac){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[dt(o),...ui(a)?[dt(o,{binSuffix:"end"})]:[]],...fm(u)?{sortField:u}:Be(u)?{sortIndexField:vx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ac)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ac)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ac)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of lg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(fo(i)&&Xy(s)){const o=R5(this.childModel,n),a=hie(o);a?t[n]=a:et(gre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=h5,field:f}=u;s.push(f),o.push(c),a.push(dt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of sie){for(const c of oie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[cm,lm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function K0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Fin(e,t){const n=sre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=K0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=K0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return et(sZt(t)),null}function jin(e){const t={};return sD(e.filter,n=>{if(ZFe(n)){let r=null;_re(n)?r=xl(n.equal):Ere(n)?r=xl(n.lte):wre(n)?r=xl(n.lt):xre(n)?r=xl(n.gt):Sre(n)?r=xl(n.gte):Tre(n)?r=n.range[0]:Cre(n)&&(r=(n.oneOf??n.in)[0]),r&&(Vb(r)?t[n.field]="date":cr(r)?t[n.field]="number":yt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Bin(e){const t={};function n(r){px(r)?t[r.field]="date":r.type==="quantitative"&&MJt(r.aggregate)?t[r.field]="number":ax(r.field)>1?r.field in t||(t[r.field]="flatten"):qb(r)&&fm(r.sort)&&ax(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Pi(e)||$l(e))&&e.forEachFieldDef((r,i)=>{if(ou(r))n(r);else{const s=Ub(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Pi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Qy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];rt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Uin(e){const t={};if(Pi(e)&&e.component.selection)for(const n of Xe(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ax(i.field)>1&&(t[i.field]="flatten")}return t}class ya extends Lr{clone(){return new ya(null,rn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!O0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Xe(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:et(i0e(a,r[a],u.value)))}for(const a of Xe(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:et(i0e(a,n[a],u)))}const s=new fg(n,r);i.copyAll(s);const o={};for(const a of Xe(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Xe(o).length===0||i.parseNothing?null:new ya(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Xe(this._parse)){const r=this._parse[n];ax(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Xe(this._parse))}dependentFields(){return new Set(Xe(this._parse))}assembleTransforms(t=!1){return Xe(this._parse).filter(n=>t?ax(n)>1:!0).map(n=>{const r=Fin(n,this._parse[n]);return r?{type:"formula",expr:r,as:NS(n)}:null}).filter(n=>n!==null)}}class vy extends Lr{clone(){return new vy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([cd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:cd}}}class kR extends Lr{clone(){return new kR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class RR extends Lr{clone(){return new RR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class db extends Lr{constructor(t){super(null),t??(t={name:"source"});let n;if(O0(t)||(n=t.format?{...Gu(t.format,["parse"])}:{}),II(t))this._data={values:t.values};else if(mx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else y8e(t)?this._data={values:[{type:"Sphere"}]}:(m8e(t)||O0(t))&&(this._data={});this._generator=O0(t),t.name&&(this._name=t.name),n&&!Br(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var X0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},zin=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},FC;function cie(e){return e instanceof db||e instanceof kR||e instanceof RR}class fie{constructor(){FC.set(this,void 0),X0e(this,FC,!1,"f")}setModified(){X0e(this,FC,!0,"f")}get modifiedFlag(){return zin(this,FC,"f")}}FC=new WeakMap;class Wb extends fie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class die extends fie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Vin extends die{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Xe(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Hin extends die{constructor(t){super(),this.requiresSelectionId=t&&iie(t)}run(t){t instanceof vy&&(this.requiresSelectionId&&(cie(t.parent)||t.parent instanceof Xf||t.parent instanceof ya)||(this.setModified(),t.remove()))}}class qin extends fie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Th&&(r=t.producedFields(),rre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Win extends die{constructor(){super()}run(t){t instanceof Yu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Gin extends Wb{run(t){if(!cie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ya)if(t instanceof ya)this.setModified(),t.merge(n);else{if(ire(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Yin extends Wb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ya);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Xe(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Br(i)){this.setModified();const o=new ya(t,i);for(const a of n){if(a instanceof ya)for(const u of Xe(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ya&&Xe(a.parse).length===0&&a.remove()}}}}}class Kin extends Wb{run(t){t instanceof Yu||t.numChildren()>0||t instanceof MS||t instanceof db||(this.setModified(),t.remove())}}class Xin extends Wb{run(t){const n=t.children.filter(i=>i instanceof Th),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Qin extends Wb{run(t){const n=t.children.filter(i=>i instanceof Xf),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Xe(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Jin extends Wb{constructor(t){super(),this.model=t}run(t){const n=!(cie(t)||t instanceof $S||t instanceof ya||t instanceof vy),r=[],i=[];for(const s of t.children)s instanceof Ch&&(n&&!ire(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ch?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Zin extends Wb{run(t){const n=[...t.children];if(!ox(n,o=>o instanceof Yu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Yu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Yu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Gb extends Lr{clone(){return new Gb(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??dt(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class _x extends Lr{clone(){return new _x(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=dp(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=Pre({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:i5(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return Xe(u).length?new _x(t,u):null}dependentFields(){return new Set(Xe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=Xe(this.filter).reduce((n,r)=>{const i=this.filter[r],s=dt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${xq(s)}))`):i.type==="quantitative"&&n.push(xq(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function xq(e){return`isValid(${e}) && isFinite(+${e})`}function esn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=dt(r);return i&&t.push(i),t},[])}function tsn(e){return Be(e)&&e.every(t=>yt(t))&&e.length>1}class hm extends Lr{clone(){return new hm(null,rn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(hs(f.order,"ascending"));const l={field:a,order:u};let c;return tsn(s)?c=s:yt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new hm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return ld(p)}).filter(h=>!!h),c=esn(n),f=n.encoding.order;let d;if(Be(f)||rt(f))d=OFe(f);else{const h=S5e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new hm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[dt(i,{binSuffix:"mid"})]:[dt(i,{}),dt(i,{binSuffix:"end"})]:[dt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=dt(c,{expr:"datum"}),p=dt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${xq(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:dt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:dt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class LS extends Lr{clone(){return new LS(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??dt(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>pre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function nsn(e){function t(n){if(!(n instanceof MS)){const r=n.clone();if(r instanceof Yu){const i=Tq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Xf||r instanceof hm||r instanceof LS||r instanceof Gb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Sq(e){if(e instanceof MS)if(e.numChildren()===1&&!(e.children[0]instanceof Yu)){const t=e.children[0];(t instanceof Xf||t instanceof hm||t instanceof LS||t instanceof Gb)&&t.addDimensions(e.fields),t.swapWithParent(),Sq(e)}else{const t=e.model.component.data.main;fje(t);const n=nsn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Sq)}function fje(e){if(e instanceof Yu&&e.type===Ji.Main&&e.numChildren()===1){const t=e.children[0];t instanceof MS||(t.swapWithParent(),fje(e))}}const Tq="scale_",AP=5;function Cq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Cq(t.children))return!1}return!0}function hf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Q0e(e,t,n){let r=e.sources,i=!1;return i=hf(new Win,r)||i,i=hf(new Hin(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=hf(new Kin,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=hf(new Gin,r)||i,i=hf(new Jin(t),r)||i,i=hf(new qin,r)||i,i=hf(new Yin,r)||i,i=hf(new Qin,r)||i,i=hf(new Xin,r)||i,i=hf(new Vin,r)||i,i=hf(new Zin,r)||i),e.sources=r,i}function rsn(e,t){Cq(e.sources);let n=0,r=0;for(let i=0;i<AP&&Q0e(e,t,!0);i++)n++;e.sources.map(Sq);for(let i=0;i<AP&&Q0e(e,t,!1);i++)r++;Cq(e.sources),Math.max(n,r)===AP&&et(`Maximum optimization runs(${AP}) reached.`)}class eo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new eo(()=>t(n))}}function dje(e){Pi(e)?isn(e):ssn(e)}function isn(e){const t=e.component.scales;for(const n of Xe(t)){const r=asn(e,n);if(t[n].setWithExplicit("domains",r),lsn(e,n),e.component.data.isFaceted){let s=e;for(;!$l(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Zp(a)&&(a.data=Tq+a.data.replace(Tq,""))}}}function ssn(e){for(const n of e.children)dje(n);const t=e.component.scales;for(const n of Xe(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=my(r,o.getWithExplicit("domains"),"domains","scale",Aq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&et(tZt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function osn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=J0e(t,n);if(!i){et(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=J0e(t,n);if(i)return"unaggregated"}return e}function asn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=osn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&js(r.x2)?js(r.x)?my(Ig(n,i,e,"x"),Ig(n,i,e,"x2"),"domain","scale",Aq):Ig(n,i,e,"x2"):t==="y"&&js(r.y2)?js(r.y)?my(Ig(n,i,e,"y"),Ig(n,i,e,"y2"),"domain","scale",Aq):Ig(n,i,e,"y2"):Ig(n,i,e,t)}function usn(e,t,n){return e.map(r=>({signal:`{data: ${v5(r,{timeUnit:n,type:t})}}`}))}function kB(e,t,n){var i;const r=(i=co(n))==null?void 0:i.unit;return t==="temporal"||r?usn(e,t,r):[e]}function Ig(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=js(i[r]),{type:c}=l,f=l.timeUnit,d=nrn({invalid:zh("invalid",s,a),isPath:Qy(o)});if(Sen(t)){const m=Ig(e,void 0,n,r),g=kB(t.unionWith,c,f);return Hd([...g,...m.value])}else{if(Nt(t))return Hd([t]);if(t&&t!=="unaggregated"&&!o5e(t))return Hd(kB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return ml([[0,1]]);const m=n.requestDataName(d);return ml([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=dp(r)&&rt(l)?csn(n,r,e):void 0;if(hp(l)){const m=kB([l.datum],c,f);return ml(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return ml([{data:n.requestDataName(d),field:dt({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:dt({field:m,aggregate:"max"})}])}else if(ui(p.bin)){if(fo(e))return ml(e==="bin-ordinal"?[]:[{data:TI(h)?n.requestDataName(d):n.requestDataName(Ji.Raw),field:n.vgField(r,CR(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!mt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(ui(m)){const g=lie(n,p.field,m);return ml([new eo(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return ml([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&$n(["time","utc"],e)){const m=i[fp(r)];if(x5e(p,m,s,a)){const g=n.requestDataName(d),y=py({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=AI(o)&&y!==.5&&ps(r);return ml([{data:g,field:n.vgField(r,v?{suffix:S5}:{})},{data:g,field:n.vgField(r,{suffix:v?T5:"end"})}])}}return ml(h?[{data:TI(h)?n.requestDataName(d):n.requestDataName(Ji.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function RB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":h5),...r?{field:Yc(r)}:{},...i?{order:i}:{}}}function lsn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=o5e(r)&&r,o=zb(i)&&s5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function csn(e,t,n){if(!fo(n))return;const r=e.fieldDef(t),i=r.sort;if(w5e(i))return{op:"min",field:vx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(fm(i)){const a=s&&!o.has(i.field);return RB(i,a)}else if(ntn(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Bm(c)||Ky(c))return RB({field:dt(l),order:u},d);if(pre(c)||!c)return RB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function J0e(e,t){const{aggregate:n,type:r}=e;return n?yt(n)&&!FJt.has(n)?{valid:!1,reason:AZt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:IZt(e)}:{valid:!0}:{valid:!1,reason:CZt(e)}}function Aq(e,t,n,r){return e.explicit&&t.explicit&&et(OZt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function fsn(e){const t=lh(e.map(o=>{if(Zp(o)){const{sort:a,...u}=o;return u}return o}),zn),n=lh(e.map(o=>{if(Zp(o)){const a=o.sort;return a!==void 0&&!TI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Zp(o)&&n.length>0){let a=n[0];if(n.length>1){et(o0e);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=lh(n.map(o=>TI(o)||!("op"in o)||yt(o.op)&&o.op in DJt?o:(et($Zt(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(et(o0e),i=!0);const s=lh(e.map(o=>Zp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function hie(e){if(Zp(e)&&yt(e.field))return e.field;if(jJt(e)){let t;for(const n of e.fields)if(Zp(n)&&yt(n.field)){if(!t)t=n.field;else if(t!==n.field)return et(MZt),t}return et(LZt),t}else if(BJt(e)){et(FZt);const t=e.fields[0];return yt(t)?t:void 0}}function R5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Zp(i)&&(i.data=e.lookupDataSource(i.data)),i));return fsn(r)}function hje(e){return FS(e)||pie(e)?e.children.reduce((t,n)=>t.concat(hje(n)),Z0e(e)):Z0e(e)}function Z0e(e){return Xe(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=dsn(i.range,s,n,e),h=R5(e,n),p=a?urn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function dsn(e,t,n,r){if(ps(n)){if(Xy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&Zp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class pje extends fg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if($n([ko.LOG,ko.TIME,ko.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&$n([ko.LINEAR,ko.SQRT,ko.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Be(a)){const u=a[0],l=a[a.length-1];if(cr(u)&&cr(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const hsn=["range","scheme"];function psn(e){const t=e.component.scales;for(const n of hre){const r=t[n];if(!r)continue;const i=msn(n,e);r.setWithExplicit("range",i)}}function eye(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=sl(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new eo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ui(r)){const a=lie(e,i,r);return new eo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function msn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of hsn)if(n[f]!==void 0){const d=cq(s,f),h=a5e(e,f);if(!d)et(BFe(s,f,e));else if(h)et(h);else switch(f){case"range":{const p=n.range;if(Be(p)){if(ps(e))return Hd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return eo.fromName(y,g)}return m}))}else if(mt(p))return Hd({data:t.requestDataName(Ji.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Hd(p)}case"scheme":return Hd(gsn(n[f]))}}const o=e===Ai||e==="xOffset"?"width":"height",a=r[o];if(Hh(a)){if(ps(e))if(fo(s)){const f=gje(a,t,e);if(f)return Hd({step:f})}else et(UFe(o));else if(_R(e)){const f=e===Hy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=yje(a,s);if(p)return Hd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=ysn(e,t);return(u!==void 0||l!==void 0)&&cq(s,"rangeMin")&&Be(c)&&c.length===2?Hd([u??c[0],l??c[1]]):ml(c)}function gsn(e){return xen(e)?{scheme:e.name,...Gu(e,["name"])}:{scheme:e}}function mje(e,t,n,{center:r}={}){const i=sl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===mo&&ad(n)?r?[eo.fromName(a=>`${o(a)}/2`,s),eo.fromName(a=>`-${o(a)}/2`,s)]:[eo.fromName(o,s),0]:r?[eo.fromName(a=>`-${o(a)}/2`,s),eo.fromName(a=>`${o(a)}/2`,s)]:[0,eo.fromName(o,s)]}function ysn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=js(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ai:case mo:{if($n(["point","band"],u)){const f=vje(e,n,r.view);if(Hh(f))return{step:gje(f,t,e)}}return mje(e,t,u)}case Hy:case PS:return vsn(e,t,u);case ag:{const f=wsn(i,r),d=Esn(i,n,t,r);return fx(u)?_sn(f,d,bsn(u,r,l,e)):[f,d]}case af:return[0,Math.PI*2];case Bb:return[0,360];case _d:return[0,new eo(()=>{const f=t.getSignalName($l(t.parent)?"child_width":"width"),d=t.getSignalName($l(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Gy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Yy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case il:return"symbol";case rl:case lp:case cp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ug:case qy:case Wy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function gje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=lre(n),o=r[s];if(t8e({step:e,offsetIsDiscrete:cn(o)&&t5e(o.type)})==="offset"&&$5e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${HJt(f)})`}}else return e.step}function yje(e,t){if(t8e({step:e,offsetIsDiscrete:fo(t)})==="offset")return{step:e.step}}function vsn(e,t,n){const r=e===Hy?"x":"y",i=t.getScaleComponent(r);if(!i)return mje(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=vje(r,t.size,t.config.view);if(Hh(l)){const c=yje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(rt(l)&&l.timeUnit){const c=QFe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=py({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return uFe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function vje(e,t,n){const r=e===Ai?"width":"height",i=t[r];return i||MM(n,r)}function bsn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Be(n)?n.length+1:(et(GZt(r)),3)}}function _sn(e,t,n){const r=()=>{const i=Ff(t),s=Ff(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new eo(r):{signal:r()}}function wsn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(o5("size",e))}const tye=.95;function Esn(e,t,n,r){const i={x:eye(n,"x"),y:eye(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=nye(t,i,r.view);return cr(s)?s-1:new eo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=nye(t,i,r.view);return cr(s)?Math.pow(tye*s,2):new eo(()=>`pow(${tye} * ${s.signal}, 2)`)}}throw new Error(o5("size",e))}function nye(e,t,n){const r=Hh(e.width)?e.width.step:$M(n,"width"),i=Hh(e.height)?e.height.step:$M(n,"height");return t.x||t.y?new eo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function bje(e,t){Pi(e)?xsn(e,t):wje(e,t)}function xsn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Xe(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=js(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=cq(h,t),y=a5e(a,t);if(d!==void 0&&(g?y&&et(y):et(BFe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Vb(u[t])||b==="temporal"||v?l.set(t,{signal:v5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in rye?rye[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:M5e(i,a),hasSecondaryRangeChannel:!!i[fp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const rye={bins:({model:e,fieldOrDatumDef:t})=>rt(t)?Ssn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Tsn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Csn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Asn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Isn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ksn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=rt(e)?e.sort:void 0;return Rsn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Nsn(e,t,n,r,i,s.scale,o)};function _je(e){Pi(e)?psn(e):wje(e,"range")}function wje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?_je(r):bje(r,t);for(const r of Xe(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=my(i,a,t,"scale",p8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Ssn(e,t){const n=t.bin;if(ui(n)){const r=lie(e,t.field,n);return new eo(()=>e.getSignalName(r))}else if(Ao(n)&&zb(n)&&n.step!==void 0)return{step:n.step}}function Tsn(e,t){if($n([rl,lp,cp],e)&&t!=="nominal")return"hcl"}function Csn(e,t,n,r,i,s){var o;if(!((o=ld(s))!=null&&o.bin||Be(n)||i!=null||r!=null||$n([ko.TIME,ko.UTC],e)))return ps(t)?!0:void 0}function Asn(e,t,n,r,i,s){if(ps(e)){if(ch(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(rt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ko.POINT)return n.pointPadding}}function Isn(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:hs(o,n==="bar"?a:u)}else if(_R(t)&&r===ko.BAND)return i.offsetBandPaddingInner}}function ksn(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ko.BAND)return hs(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(_R(t)){if(n===ko.POINT)return .5;if(n===ko.BAND)return i.offsetBandPaddingOuter}}}function Rsn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ad(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ad(e)&&t==="descending")return!0}function Nsn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ad(i)){if(Be(n)){const u=n[0],l=n[n.length-1];if(cr(u)&&u<=0&&cr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!fx(i))return!0;if(!(rt(t)&&t.bin)&&$n([...lg,...CJt],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Psn(e,t,n,r,i=!1){const s=Osn(t,n,r,i),{type:o}=e;return dp(t)?o!==void 0?Ren(t,o)?rt(n)&&!ken(o,n.type)?(et(NZt(o,s)),s):o:(et(RZt(t,o,s)),s):s:null}function Osn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Qw(e)||wB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&et(EB(e,"ordinal")),"ordinal";if(ps(e)||_R(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in dre)return"band";const s=n[sl(e)];return ub(s)||hx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Qw(e)?"time":wB(e)==="discrete"?(et(EB(e,"temporal")),"ordinal"):rt(t)&&t.timeUnit&&co(t.timeUnit).utc?"utc":"time";case"quantitative":return Qw(e)?rt(t)&&ui(t.bin)?"bin-ordinal":"linear":wB(e)==="discrete"?(et(EB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(FFe(t.type))}function Dsn(e,{ignoreRange:t}={}){Eje(e),dje(e);for(const n of Ien)bje(e,n);t||_je(e)}function Eje(e){Pi(e)?e.component.scales=$sn(e):e.component.scales=Lsn(e)}function $sn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of hre){const o=js(t[s]);if(o&&n===c5e&&s===il&&o.type===OS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=M5e(t,s),l=Psn(a,s,o,r,u);i[s]=new pje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Msn=p8e((e,t)=>u0e(e)-u0e(t));function Lsn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Eje(s);for(const o of Xe(s.component.scales))if((t=i.scale)[o]??(t[o]=Z8e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?ven(a.value,u.value)?r[o]=my(a,u,"type","scale",Msn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Xe(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new pje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class NB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Pi(e){return(e==null?void 0:e.type)==="unit"}function $l(e){return(e==null?void 0:e.type)==="facet"}function pie(e){return(e==null?void 0:e.type)==="concat"}function FS(e){return(e==null?void 0:e.type)==="layer"}class mie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=la(a),this.name=t.name??i,this.title=Lg(t.title)?{text:t.title}:t.title?la(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new NB,this.projectionNameMap=r?r.projectionNameMap:new NB,this.signalNameMap=r?r.signalNameMap:new NB,this.data=t.data,this.description=t.description,this.transforms=Hnn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Ytn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:p5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new fg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?rn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Dsn(this)}parseProjection(){lje(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ije(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Xe(r)){const o=r[s];o!==void 0&&(i[s]=mi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=mi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Br(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=rin(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ac)t[r].title&&n.push(Qrn(this,r));for(const r of sie)n=n.concat(Jrn(this,r));return n}assembleAxes(){return Frn(this.component.axes,this.config)}assembleLegends(){return oje(this)}assembleProjections(){return Cin(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...kFe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Br(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||$l(this.parent)?hje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ti((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ji[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if($l(this.parent)){const n=Q8e(t),r=r5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(fo(s)&&Xy(o)){const a=i.get("name"),u=R5(this,r),l=hie(u);if(l){const c=dt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:X8e(a,i,c)}}else return et(gre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(wFe(t)&&dp(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(KJt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class xje extends mie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return dt(r,n)}reduceFieldDef(t,n){return xtn(this.getMapping(),(r,i,s)=>{const o=ld(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Ure(this.getMapping(),(r,i)=>{const s=ld(r);s&&t(s,i)},n)}}class N5 extends Lr{clone(){return new N5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class P5 extends Lr{clone(){return new P5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class O5 extends Lr{clone(){return new O5(this.parent,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class D5 extends Lr{clone(){return new D5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class eE extends Lr{clone(){return new eE(null,rn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Ed,wd],[Kc,xd]]){const s=i.map(o=>{const a=js(n.encoding[o]);return rt(a)?a.field:hp(a)?{expr:`${a.datum}`}:ud(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new eE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(il)){const i=n.typedFieldDef(il);i.type===OS&&(t=new eE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(yt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class kI extends Lr{clone(){return new kI(null,this.projection,rn(this.fields),rn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Ed,wd],[Kc,xd]]){const i=r.map(o=>{const a=js(n.encoding[o]);return rt(a)?a.field:hp(a)?{expr:`${a.datum}`}:ud(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Kc?"2":"";(i[0]||i[1])&&(t=new kI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(yt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class E1 extends Lr{clone(){return new E1(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new E1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(rt(i)&&rt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=j5e(n.mark,r);return new E1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Tnn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class $5 extends Lr{clone(){return new $5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class RI extends Lr{clone(){return new RI(null,rn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Cnn(o)){let u=Cje(o.data,s);u||(u=new db(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Yu(u,l,Ji.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Ann(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ti(u),u)}catch{throw new Error(ZJt(u))}if(a=l.materialized,!a)throw new Error(eZt(u))}return new RI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?gt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:gt(this.transform.as)}:{}};else{let n=this.transform.as;yt(n)||(et(uZt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class M5 extends Lr{clone(){return new M5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class L5 extends Lr{clone(){return new L5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class F5 extends Lr{clone(){return new F5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class j5 extends Lr{clone(){return new j5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Sje(e){let t=0;function n(r,i){if(r instanceof db&&!r.isGenerator&&!mx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ya&&(r.parent instanceof db&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof MS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof kR||r instanceof RR||r instanceof _x||r instanceof $S||r instanceof yx||r instanceof kI||r instanceof Xf||r instanceof RI||r instanceof LS||r instanceof Gb||r instanceof D5||r instanceof O5||r instanceof N5||r instanceof $5||r instanceof M5||r instanceof L5||r instanceof vy||r instanceof j5||r instanceof F5||r instanceof P5)&&i.transform.push(r.assemble()),(r instanceof Ch||r instanceof Th||r instanceof E1||r instanceof hm||r instanceof eE)&&i.transform.push(...r.assemble()),r instanceof Yu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Yu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Yu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Fsn(e){const t=[],n=Sje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function jsn(e,t){const n=[],r=Sje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Bsn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function Usn(e){for(const t of Ac)zsn(e,t);iye(e,"x"),iye(e,"y")}function zsn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=bx("title",null,r,t);let l=Jw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Be(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=bx("labelOrient",a.header,r,t),f=a.header!==null?hs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Tje(e,t,f)]}}}function Tje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function iye(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=uie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Bsn(a.get("orient"));o[u]??(o[u]=[Tje(e,s,!1)]);const l=LC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Vsn(e){gie(e),BM(e,"width"),BM(e,"height")}function Hsn(e){gie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";BM(e,t),BM(e,n)}function gie(e){for(const t of e.children)t.parseLayoutSize()}function BM(e,t){const n=Q8e(t),r=r5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Z8e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=my(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function qsn(e){const{size:t,component:n}=e;for(const r of lg){const i=sl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Hh(s)?"step":s,!0)}else{const s=Wsn(e,i);n.layoutSize.set(i,s,!1)}}}function Wsn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(fo(s)){const a=MM(r.view,t);return Xy(o)||Hh(a)?"step":a}else return hq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return hq(r.view,t);{const s=MM(r.view,t);return Hh(s)?s.step:s}}}function Iq(e,t,n){return dt(t,{suffix:`by_${dt(e)}`,...n})}class B2 extends xje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=wie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!SR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Xe(t),r={};for(const i of n){if(![lm,cm].includes(i)){et(o5(i,"facet"));break}const s=t[i];if(s.field===void 0){et(uq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Bre(t,n);return r.header?r.header=la(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=B5(this),this.child.parseData()}parseLayoutSize(){gie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Usn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ac)for(const r of oie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=bx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=I5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof B2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof B2?{...this.channelHasField("column")?{encode:{update:{columns:{field:dt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof B2){if(this.child.channelHasField("column")){const i=dt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of lg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(fo(o)&&Xy(a)){const u=R5(this.child,i),l=hie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):et(gre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Ac){const f=this.facet[c];if(f){u.push(dt(f));const{bin:d,sort:h}=f;if(ui(d)&&u.push(dt(f,{binSuffix:"end"})),fm(h)){const{field:p,op:m=h5}=h,g=Iq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Be(h)){const p=vx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?fm(r.sort)?[Iq(r,r.sort,{expr:"datum"})]:Be(r.sort)?[vx(r,t,{expr:"datum"})]:[dt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(fm(i)?i.order:!Be(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return wq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of sie)if(t[s]){const o=bx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return wq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Fsn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ac.map(u=>this.facetSortFields(u)).flat(),order:Ac.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(irn(this,[]))}]}getMapping(){return this.facet}}function Gsn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(fm(s.sort)){const{field:o,op:a=h5}=s.sort;e=i=new Gb(e,{joinaggregate:[{op:a,field:o,as:Iq(s,s.sort,{forAs:!0})}],groupby:[dt(s)]})}return i}return null}function Cje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(II(e)&&II(a)){if(Nl(e.values,a.values))return o}else if(mx(e)&&mx(a)){if(e.url===a.url)return o}else if(m8e(e)&&e.name===o.dataName)return o}}return null}function Ysn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new db({values:[]});return t.push(r),r}const n=Cje(e.data,t);if(n)return O0(e.data)||(n.data.format=lFe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new db(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Ksn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Lnn(i))o=e=new yx(e,i),s="derived";else if(Jre(i)){const a=jin(i);o=e=ya.makeWithAncestors(e,{},a,n)??e,e=new $S(e,t,i.filter)}else if(c8e(i))o=e=Ch.makeFromTransform(e,i,t),s="number";else if(jnn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ya(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Th.makeFromTransform(e,i);else if(Bnn(i))o=e=Xf.makeFromTransform(e,i),s="number",iie(t)&&(e=new vy(e));else if(l8e(i))o=e=RI.make(e,t,i,r++),s="derived";else if(Dnn(i))o=e=new LS(e,i),s="number";else if($nn(i))o=e=new Gb(e,i),s="number";else if(Unn(i))o=e=hm.makeFromTransform(e,i),s="derived";else if(znn(i))o=e=new D5(e,i),s="derived";else if(Vnn(i))o=e=new P5(e,i),s="derived";else if(Mnn(i))o=e=new O5(e,i),s="derived";else if(Inn(i))o=e=new F5(e,i),s="derived";else if(Onn(i))e=new j5(e,i);else if(Fnn(i))o=e=E1.makeFromTransform(e,i),s="derived";else if(knn(i))o=e=new N5(e,i),s="derived";else if(Rnn(i))o=e=new M5(e,i),s="derived";else if(Nnn(i))o=e=new L5(e,i),s="derived";else if(Pnn(i))o=e=new $5(e,i),s="derived";else{et(aZt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function B5(e){var g;let t=Ysn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(O0(i)||mx(i)||II(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new trn;O0(i)?(g8e(i)?t=new RR(t,i.sequence):Zre(i)&&(t=new kR(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=ya.makeExplicit(t,e,o)??t,t=new vy(t);const a=e.parent&&FS(e.parent);(Pi(e)||$l(e))&&a&&(t=Ch.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Ksn(t,e,o));const u=Uin(e),l=Bin(e);t=ya.makeWithAncestors(t,{},{...u,...l},o)??t,Pi(e)&&(t=eE.parseAll(t,e),t=kI.parseAll(t,e)),(Pi(e)||$l(e))&&(a||(t=Ch.makeFromEncoding(t,e)??t),t=Th.makeFromEncoding(t,e)??t,t=yx.parseAllForSortIndex(t,e));const c=t=IP(Ji.Raw,e,t);if(Pi(e)){const y=Xf.makeFromEncoding(t,e);y&&(t=y,iie(e)&&(t=new vy(t))),t=E1.makeFromEncoding(t,e)??t,t=hm.makeFromEncoding(t,e)??t}let f,d;if(Pi(e)){const{markDef:y,mark:v,config:b}=e,w=$r("invalid",y,b),{marks:E,scales:S}=d=v8e({invalid:w,isPath:Qy(v)});E!==S&&S==="include-invalid-values"&&(f=t=IP(Ji.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=_x.make(t,e,d)??t)}const h=t=IP(Ji.Main,e,t);let p;if(Pi(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=_x.make(t,e,d)??t,p=t=IP(Ji.PostFilterInvalid,e,t))}Pi(e)&&Mrn(e,h);let m=null;if($l(e)){const y=e.getName("facet");t=Gsn(t,e.facet)??t,m=new MS(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function IP(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Yu(n,s,e,i);return r[s]=o,o}class Xsn extends mie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&et(iZt),this.children=this.getChildren(t).map((l,c)=>wie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=B5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return w5(t)?t.vconcat:Xre(t)?t.hconcat:t.concat}parseLayoutSize(){Hsn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=aie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Qsn(e){return e===!1||e===null}const Jsn={disable:1,gridScale:1,scale:1,...O5e,labelExpr:1,encode:1},Aje=Xe(Jsn);class yie extends fg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new yie(rn(this.explicit),rn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Qsn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function Zsn(e,t,n){const{encoding:r,config:i}=e,s=js(r[t])??js(r[fp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(lb(u))return{text:jf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(dx(s)==="quantitative"){if(hx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:jf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:jf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(dx(s)==="temporal"&&i.timeFormatType&&rt(s)&&!s.timeUnit)return{text:jf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function eon(e){return lg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[aon(n,e)]),t),{})}const ton={bottom:"top",top:"bottom",left:"right",right:"left"};function non(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Xe(i.component.axes))n.axis[s]=uie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=ron(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of lg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=ton[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function ron(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=ion(i,s)}}}else return t.map(n=>n.clone());return e}function ion(e,t){for(const n of Aje){const r=my(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return MFe(i,s);case"gridScale":return{explicit:i.explicit,value:hs(i.value,s.value)}}return x5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function son(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:CI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===W8e(r,i))return!0}return e===n[t]}const oon=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function aon(e,t){var y,v;let n=t.axis(e);const r=new yie,i=js(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Wrn(e),u=t.getScaleComponent(e).get("type"),l=jrn(e,u,a,t.config),c=n!==void 0?!n:bq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Vrn(i,n,e,o.style,l),d=b5e(n.formatType,i,u),h=v5e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of Aje){const w=b in V0e?V0e[b](p):m0e(b)?n[b]:void 0,E=w!==void 0,S=son(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:x=void 0,configFrom:C=void 0}=m0e(b)&&b!=="values"?bq(b,o.style,n.style,l):{},A=x!==void 0;E&&!A?r.set(b,w,S):(C!=="vgAxisConfig"||oon.has(b)&&A||AR(x)||Nt(x))&&r.set(b,x,!1)}}const m=n.encoding??{},g=P5e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=J8e(m[w]??{},t),S=w==="labels"?Zsn(t,e,E):E;return S!==void 0&&!Br(S)&&(b[w]={update:S}),b},{});return Br(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function uon({encoding:e,size:t}){for(const n of lg){const r=sl(n);Hh(t[r])&&l0(e[n])&&(delete t[r],et(UFe(r)))}return t}const lon={vgMark:"arc",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...gy(e,"radius"),...gy(e,"theta")})},con={vgMark:"area",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...LM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...LM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...rie(e)})},fon={vgMark:"rect",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gy(e,"x"),...gy(e,"y")})},don={vgMark:"shape",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&rt(n)&&n.type===OS?{field:dt(n,{expr:"datum"})}:{}}]}},hon={vgMark:"image",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...gy(e,"x"),...gy(e,"y"),...tie(e,"url")})},pon={vgMark:"line",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...no("size",e,{vgChannel:"strokeWidth"}),...rie(e)})},mon={vgMark:"trail",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...no("size",e),...rie(e)})};function vie(e,t){const{config:n}=e;return{...uf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...no("size",e),...no("angle",e),...gon(e,n,t)}}function gon(e,t,n){return n?{shape:{value:n}}:no("shape",e)}const yon={vgMark:"symbol",encodeEntry:e=>vie(e)},von={vgMark:"symbol",encodeEntry:e=>vie(e,"circle")},bon={vgMark:"symbol",encodeEntry:e=>vie(e,"square")},_on={vgMark:"rect",encodeEntry:e=>({...uf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gy(e,"x"),...gy(e,"y")})},won={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...uf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...LM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...LM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...no("size",e,{vgChannel:"strokeWidth"})}}},Eon={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...uf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...tie(e),...no("size",e,{vgChannel:"fontSize"}),...no("angle",e),...j0e("align",xon(e.markDef,n,t)),...j0e("baseline",Son(e.markDef,n,t)),...ga("radius",e,{defaultPos:null}),...ga("theta",e,{defaultPos:null})}}};function xon(e,t,n){if($r("align",e,n)===void 0)return"center"}function Son(e,t,n){if($r("baseline",e,n)===void 0)return"middle"}const Ton={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...uf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ga("y",e,{defaultPos:"mid",vgChannel:"yc"}),...no("size",e,{defaultValue:Con(e),vgChannel:i}),[s]:mi($r("thickness",n,t))}}};function Con(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=$r("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Xy(a)&&cr(a.step)?a.step*3/4:$M(t.view,i)*3/4}}const kP={arc:lon,area:con,bar:fon,circle:von,geoshape:don,image:hon,line:pon,point:yon,rect:_on,rule:won,square:bon,text:Eon,tick:Ton,trail:mon};function Aon(e){if($n([f5,l5,Den],e.mark)){const t=j5e(e.mark,e.encoding);if(t.length>0)return Ion(e,t)}else if(e.mark===c5){const t=aq.some(n=>$r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return kon(e)}return bie(e)}const sye="faceted_path_";function Ion(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:sye+e.requestDataName(Ji.Main),data:e.requestDataName(Ji.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:bie(e,{fromPrefix:sye})}]}const oye="stack_group_";function kon(e){var l;const[t]=bie(e,{fromPrefix:oye}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...sx(t.encode.update,["y","yc","y2","height",...aq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Gu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...sx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Gu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of aq){const f=zh(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=mi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=dt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(dt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=zh(f,e.markDef,e.config);return d!==void 0?{...c,[f]:mi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ji.Main),name:oye+e.requestDataName(Ji.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Ron(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Be(o)&&ud(o)&&sq(o.value)||!o&&sq($r("order",i,s)))){if((Be(o)||rt(o))&&!n)return OFe(o,{expr:"datum"});if(Qy(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(rt(u))return{field:a}}}}function bie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=hs(r.clip,Non(e),Pon(e)),a=NFe(r),u=i.key,l=Ron(e),c=Oon(e),f=$r("aria",r,s),d=kP[n].postEncodingTransform?kP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:kP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ji.Main)},encode:{update:kP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Non(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Pon(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Oon(e){if(!e.component.selection)return null;const t=Xe(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Xe(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Ije extends xje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,y0e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Vh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=ynn(o,s,{graticule:t.data&&Zre(t.data)}));const u=this.encoding=wtn(t.encoding||{},a,o.filled,s);this.markDef=o8e(o,u,s),this.size=uon({encoding:u,size:y0e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=s8e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Yre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===c5e,r=t&&yJt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return hre.reduce((r,i)=>{const s=js(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=la(t);return Be(n)&&(i.domain=n.map(xl)),Be(r)&&(i.range=r.map(xl)),i}initAxes(t){return lg.reduce((n,r)=>{const i=t[r];if(cn(i)||r===Ai&&cn(t.x2)||r===mo&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Xe(t),r={};for(const i of n){const s=t[i];r[i]=AR(s)?RFe(s):xl(s)}return r}initLegends(t){return AJt.reduce((n,r)=>{const i=js(t[r]);if(i&&kJt(r)){const s=i.legend;n[r]=s&&la(s)}return n},{})}parseData(){this.component.data=B5(this)}parseLayoutSize(){qsn(this)}parseSelections(){this.component.selection=$rn(this,this.selection)}parseMarkGroup(){this.component.mark=Aon(this)}parseAxesAndHeaders(){this.component.axes=eon(this)}assembleSelectionTopLevelSignals(t){return srn(this,t)}assembleSignals(){return[...V8e(this),...rrn(this,[])]}assembleSelectionData(t){return orn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return aie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!FS(this.parent))&&(t=_8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return _1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ld(n)}typedFieldDef(t){const n=this.fieldDef(t);return ou(n)?n:null}}class _ie extends mie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(E5(a))return new _ie(a,this,this.getName(`layer_${u}`),o,s);if(cg(a))return new Ije(a,this,this.getName(`layer_${u}`),o,s);throw new Error(mre(a))})}parseData(){this.component.data=B5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Vsn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){non(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),V8e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),aie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of gt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return arn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),oje(this))}}function wie(e,t,n,r,i){if(p5(e))return new B2(e,t,n,i);if(E5(e))return new _ie(e,t,n,r,i);if(cg(e))return new Ije(e,t,n,r,i);if(qtn(e))return new Xsn(e,t,n,i);throw new Error(mre(e))}function Don(e,t={}){t.logger&&YZt(t.logger),t.fieldTitle&&k5e(t.fieldTitle);try{const n=i8e(_S(t.config,e.config)),r=h8e(e,n),i=wie(r,null,"",void 0,n);return i.parse(),rsn(i.component.data,i),{spec:Mon(i,$on(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&KZt(),t.fieldTitle&&dtn()}}function $on(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):yt(t)&&(t={type:t}),i&&s&&Jnn(t.type)){if(i==="step"&&s==="step")et(t0e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";et(t0e(r5(o)));const a=o==="width"?"height":"width";t.type=Znn(a)}}return{...Xe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...k0e(n,!1),...k0e(e,!0)}}function Mon(e,t,n={},r){const i=e.config?snn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),jsn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...e8e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Lon=fJt.version,Fon=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ax,accessPathWithDatum:sre,compile:Don,contains:$n,deepEqual:Nl,deleteNestedProperty:TM,duplicate:rn,entries:dy,every:nre,fieldIntersection:ire,flatAccessWithDatum:fFe,getFirstDefined:hs,hasIntersection:rre,hash:zn,internalField:pFe,isBoolean:TI,isEmpty:Br,isEqual:hJt,isInternalField:mFe,isNullOrFalse:sq,isNumeric:QF,keys:Xe,logicalExpr:F2,mergeDeep:lFe,never:uFe,normalize:h8e,normalizeAngle:CI,omit:Gu,pick:sx,prefixGenerator:oq,removePathFromField:NS,replaceAll:ib,replacePathInField:Yc,resetIdCounter:mJt,setEqual:cFe,some:ox,stringify:Ur,titleCase:yR,unique:lh,uniqueId:hFe,vals:Mo,varName:Ti,version:Lon},Symbol.toStringTag,{value:"Module"}));function kje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var jon="vega-themes",Bon="2.15.0",Uon="Themes for stylized Vega and Vega-Lite visualizations.",zon=["vega","vega-lite","themes","style"],Von="BSD-3-Clause",Hon={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},qon=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Won="build/vega-themes.js",Eie="build/vega-themes.module.js",Gon="build/vega-themes.min.js",Yon="build/vega-themes.min.js",Kon="build/vega-themes.module.d.ts",Xon={type:"git",url:"https://github.com/vega/vega-themes.git"},Qon=["src","build"],Jon={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Zon={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},ean={vega:"*","vega-lite":"*"},tan={},nan={name:jon,version:Bon,description:Uon,keywords:zon,license:Von,author:Hon,contributors:qon,main:Won,module:Eie,unpkg:Gon,jsdelivr:Yon,types:Kon,repository:Xon,files:Qon,scripts:Jon,devDependencies:Zon,peerDependencies:ean,dependencies:tan};const A_="#fff",aye="#888",ran={background:"#333",view:{stroke:aye},title:{color:A_,subtitleColor:A_},style:{"guide-label":{fill:A_},"guide-title":{fill:A_}},axis:{domainColor:A_,gridColor:aye,tickColor:A_}},cv="#4572a7",ian={background:"#fff",arc:{fill:cv},area:{fill:cv},line:{stroke:cv,strokeWidth:2},path:{stroke:cv},rect:{fill:cv},shape:{stroke:cv},symbol:{fill:cv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},fv="#30a2da",PB="#cbcbcb",san="#999",oan="#333",uye="#f0f0f0",lye="#333",aan={arc:{fill:fv},area:{fill:fv},axis:{domainColor:PB,grid:!0,gridColor:PB,gridWidth:1,labelColor:san,labelFontSize:10,titleColor:oan,tickColor:PB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:uye,group:{fill:uye},legend:{labelColor:lye,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:lye,titleFontSize:14,titlePadding:10},line:{stroke:fv,strokeWidth:2},path:{stroke:fv,strokeWidth:.5},rect:{fill:fv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:fv},bar:{binSpacing:2,fill:fv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},dv="#000",uan={group:{fill:"#e5e5e5"},arc:{fill:dv},area:{fill:dv},line:{stroke:dv},path:{stroke:dv},rect:{fill:dv},shape:{stroke:dv},symbol:{fill:dv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lan=22,can="normal",cye="Benton Gothic, sans-serif",fye=11.5,fan="normal",hv="#82c6df",OB="Benton Gothic Bold, sans-serif",dye="normal",hye=13,jT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},dan={background:"#ffffff",title:{anchor:"start",color:"#000000",font:OB,fontSize:lan,fontWeight:can},arc:{fill:hv},area:{fill:hv},line:{stroke:hv,strokeWidth:2},path:{stroke:hv},rect:{fill:hv},shape:{stroke:hv},symbol:{fill:hv,size:30},axis:{labelFont:cye,labelFontSize:fye,labelFontWeight:fan,titleFont:OB,titleFontSize:hye,titleFontWeight:dye},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:cye,labelFontSize:fye,symbolType:"square",titleFont:OB,titleFontSize:hye,titleFontWeight:dye},range:{category:jT["category-6"],diverging:jT["fireandice-6"],heatmap:jT["fire-7"],ordinal:jT["fire-7"],ramp:jT["fire-7"]}},pv="#ab5787",RP="#979797",han={background:"#f9f9f9",arc:{fill:pv},area:{fill:pv},line:{stroke:pv},path:{stroke:pv},rect:{fill:pv},shape:{stroke:pv},symbol:{fill:pv,size:30},axis:{domainColor:RP,domainWidth:.5,gridWidth:.2,labelColor:RP,tickColor:RP,tickWidth:.2,titleColor:RP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},mv="#3e5c69",pan={background:"#fff",arc:{fill:mv},area:{fill:mv},line:{stroke:mv},path:{stroke:mv},rect:{fill:mv},shape:{stroke:mv},symbol:{fill:mv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},oc="#1696d2",pye="#000000",man="#FFFFFF",NP="Lato",DB="Lato",gan="Lato",yan="#DEDDDD",van=18,BT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},ban={background:man,title:{anchor:"start",fontSize:van,font:NP},axisX:{domain:!0,domainColor:pye,domainWidth:1,grid:!1,labelFontSize:12,labelFont:DB,labelAngle:0,tickColor:pye,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:yan,gridWidth:1,labelFontSize:12,labelFont:DB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:DB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:BT["six-groups-cat-1"],diverging:BT["diverging-colors"],heatmap:BT["diverging-colors"],ordinal:BT["six-groups-seq"],ramp:BT["shades-blue"]},area:{fill:oc},rect:{fill:oc},line:{color:oc,stroke:oc,strokeWidth:5},trail:{color:oc,stroke:oc,strokeWidth:0,size:1},path:{stroke:oc,strokeWidth:.5},point:{filled:!0},text:{font:gan,color:oc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:oc,stroke:null}},arc:{fill:oc},shape:{stroke:oc},symbol:{fill:oc,size:30}},gv="#3366CC",mye="#ccc",PP="Arial, sans-serif",_an={arc:{fill:gv},area:{fill:gv},path:{stroke:gv},rect:{fill:gv},shape:{stroke:gv},symbol:{stroke:gv},circle:{fill:gv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:PP,fontSize:12},"guide-title":{font:PP,fontSize:12},"group-title":{font:PP,fontSize:12}},title:{font:PP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:mye,tickColor:mye,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},xie=e=>e*(1/3+1),gye=xie(9),yye=xie(10),vye=xie(12),UT="Segoe UI",bye="wf_standard-font, helvetica, arial, sans-serif",_ye="#252423",zT="#605E5C",wye="transparent",wan="#C8C6C4",vf="#118DFF",Ean="#12239E",xan="#E66C37",San="#6B007B",Tan="#E044A7",Can="#744EC2",Aan="#D9B300",Ian="#D64550",Rje=vf,Nje="#DEEFFF",Eye=[Nje,Rje],kan=[Nje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Rje],Ran={view:{stroke:wye},background:wye,font:UT,header:{titleFont:bye,titleFontSize:vye,titleColor:_ye,labelFont:UT,labelFontSize:yye,labelColor:zT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:zT,labelFontSize:gye,titleFont:bye,titleColor:_ye,titleFontSize:vye,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:wan,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:vf},line:{stroke:vf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:UT,fontSize:gye,fill:zT},arc:{fill:vf},area:{fill:vf,line:!0,opacity:.6},path:{stroke:vf},rect:{fill:vf},point:{fill:vf,filled:!0,size:75},shape:{stroke:vf},symbol:{fill:vf,strokeWidth:1.5,size:50},legend:{titleFont:UT,titleFontWeight:"bold",titleColor:zT,labelFont:UT,labelFontSize:yye,labelColor:zT,symbolType:"circle",symbolSize:75},range:{category:[vf,Ean,xan,San,Tan,Can,Aan,Ian],diverging:Eye,heatmap:Eye,ordinal:kan}},$B='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Nan='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',MB=400,OP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Pan=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Oan=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function U5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=OP.gridBg[e],i=OP.textPrimary[e],s=OP.textSecondary[e],o=n==="dark"?Pan:Oan,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:$B,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Nan,labelFontWeight:MB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:OP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:$B,fill:s,fontWeight:MB},"guide-title":{font:$B,fill:s,fontWeight:MB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Dan=U5({theme:"white",background:"#ffffff"}),$an=U5({theme:"g10",background:"#f4f4f4"}),Man=U5({theme:"g90",background:"#262626"}),Lan=U5({theme:"g100",background:"#161616"}),Fan=nan.version,jan=Object.freeze(Object.defineProperty({__proto__:null,carbong10:$an,carbong100:Lan,carbong90:Man,carbonwhite:Dan,dark:ran,excel:ian,fivethirtyeight:aan,ggplot2:uan,googlecharts:_an,latimes:dan,powerbi:Ran,quartz:han,urbaninstitute:ban,version:Fan,vox:pan},Symbol.toStringTag,{value:"Module"}));function Ban(e,t,n,r){if(Be(e))return`[${e.map(i=>t(yt(i)?i:xye(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=xye(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Uan(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function xye(e,t){return JSON.stringify(e,Uan(t))}var zan=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Pje="vg-tooltip-element",Van={offsetX:10,offsetY:10,id:Pje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Han,maxDepth:2,formatTooltip:Ban,baseURL:""};function Han(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function qan(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return zan.toString().replace(Pje,e)}function Wan(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Gan{constructor(t){this.options={...Van,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=qan(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Wan(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var LB={};function Yan(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class Kan{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Xan=Kan;const Qan=Object.freeze({loose:!0}),Jan=Object.freeze({}),Zan=e=>e?typeof e!="object"?Qan:e:Jan;var Sie=Zan,kq={exports:{}};const eun="2.0.0",Oje=256,tun=Number.MAX_SAFE_INTEGER||9007199254740991,nun=16,run=Oje-6,iun=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Tie={MAX_LENGTH:Oje,MAX_SAFE_COMPONENT_LENGTH:nun,MAX_SAFE_BUILD_LENGTH:run,MAX_SAFE_INTEGER:tun,RELEASE_TYPES:iun,SEMVER_SPEC_VERSION:eun,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const sun=typeof process=="object"&&LB&&LB.NODE_DEBUG&&/\bsemver\b/i.test(LB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var z5=sun;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Tie,s=z5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(kq,kq.exports);var Cie=kq.exports;const Sye=/^[0-9]+$/,Dje=(e,t)=>{const n=Sye.test(e),r=Sye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},oun=(e,t)=>Dje(t,e);var aun={compareIdentifiers:Dje,rcompareIdentifiers:oun};const DP=z5,{MAX_LENGTH:Tye,MAX_SAFE_INTEGER:$P}=Tie,{safeRe:Cye,t:Aye}=Cie,uun=Sie,{compareIdentifiers:I_}=aun;let lun=class $d{constructor(t,n){if(n=uun(n),t instanceof $d){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Tye)throw new TypeError(`version is longer than ${Tye} characters`);DP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Cye[Aye.LOOSE]:Cye[Aye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>$P||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$P||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$P||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<$P)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(DP("SemVer.compare",this.version,this.options,t),!(t instanceof $d)){if(typeof t=="string"&&t===this.version)return 0;t=new $d(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof $d||(t=new $d(t,this.options)),I_(this.major,t.major)||I_(this.minor,t.minor)||I_(this.patch,t.patch)}comparePre(t){if(t instanceof $d||(t=new $d(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(DP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return I_(r,i)}while(++n)}compareBuild(t){t instanceof $d||(t=new $d(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(DP("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return I_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),I_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Aie=lun;const Iye=Aie,cun=(e,t,n)=>new Iye(e,n).compare(new Iye(t,n));var jS=cun;const fun=jS,dun=(e,t,n)=>fun(e,t,n)===0;var hun=dun;const pun=jS,mun=(e,t,n)=>pun(e,t,n)!==0;var gun=mun;const yun=jS,vun=(e,t,n)=>yun(e,t,n)>0;var bun=vun;const _un=jS,wun=(e,t,n)=>_un(e,t,n)>=0;var Eun=wun;const xun=jS,Sun=(e,t,n)=>xun(e,t,n)<0;var Tun=Sun;const Cun=jS,Aun=(e,t,n)=>Cun(e,t,n)<=0;var Iun=Aun;const kun=hun,Run=gun,Nun=bun,Pun=Eun,Oun=Tun,Dun=Iun,$un=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kun(e,n,r);case"!=":return Run(e,n,r);case">":return Nun(e,n,r);case">=":return Pun(e,n,r);case"<":return Oun(e,n,r);case"<=":return Dun(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Mun=$un,FB,kye;function Lun(){if(kye)return FB;kye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}FB=t;const n=Sie,{safeRe:r,t:i}=Cie,s=Mun,o=z5,a=Aie,u=$je();return FB}var jB,Rye;function $je(){if(Rye)return jB;Rye=1;class e{constructor(D,M){if(M=r(M),D instanceof e)return D.loose===!!M.loose&&D.includePrerelease===!!M.includePrerelease?D:new e(D.raw,M);if(D instanceof i)return this.raw=D.value,this.set=[[D]],this.format(),this;if(this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease,this.raw=D.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(D=>D.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(D){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+D,B=n.get(L);if(B)return B;const U=this.options.loose,V=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];D=D.replace(V,P(this.options.includePrerelease)),s("hyphen replace",D),D=D.replace(a[u.COMPARATORTRIM],l),s("comparator trim",D),D=D.replace(a[u.TILDETRIM],c),s("tilde trim",D),D=D.replace(a[u.CARETTRIM],f),s("caret trim",D);let O=D.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>R(H,this.options));U&&(O=O.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",O);const z=new Map,W=O.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];z.set(H.value,H)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(L,j),j}intersects(D,M){if(!(D instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,M)&&D.set.some(B=>g(B,M)&&L.every(U=>B.every(V=>U.intersects(V,M)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new o(D,this.options)}catch{return!1}for(let M=0;M<this.set.length;M++)if($(this.set[M],D,this.options))return!0;return!1}}jB=e;const t=Xan,n=new t,r=Sie,i=Lun(),s=z5,o=Aie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Cie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Tie,p=k=>k.value==="<0.0.0-0",m=k=>k.value==="",g=(k,D)=>{let M=!0;const L=k.slice();let B=L.pop();for(;M&&L.length;)M=L.every(U=>B.intersects(U,D)),B=L.pop();return M},y=(k,D)=>(s("comp",k,D),k=E(k,D),s("caret",k),k=b(k,D),s("tildes",k),k=x(k,D),s("xrange",k),k=A(k,D),s("stars",k),k),v=k=>!k||k.toLowerCase()==="x"||k==="*",b=(k,D)=>k.trim().split(/\s+/).map(M=>w(M,D)).join(" "),w=(k,D)=>{const M=D.loose?a[u.TILDELOOSE]:a[u.TILDE];return k.replace(M,(L,B,U,V,O)=>{s("tilde",k,L,B,U,V,O);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(V)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:O?(s("replaceTilde pr",O),z=`>=${B}.${U}.${V}-${O} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${V} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(k,D)=>k.trim().split(/\s+/).map(M=>S(M,D)).join(" "),S=(k,D)=>{s("caret",k,D);const M=D.loose?a[u.CARETLOOSE]:a[u.CARET],L=D.includePrerelease?"-0":"";return k.replace(M,(B,U,V,O,z)=>{s("caret",k,B,U,V,O,z);let W;return v(U)?W="":v(V)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(O)?U==="0"?W=`>=${U}.${V}.0${L} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.0${L} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?V==="0"?W=`>=${U}.${V}.${O}-${z} <${U}.${V}.${+O+1}-0`:W=`>=${U}.${V}.${O}-${z} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${O}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?V==="0"?W=`>=${U}.${V}.${O}${L} <${U}.${V}.${+O+1}-0`:W=`>=${U}.${V}.${O}${L} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${O} <${+U+1}.0.0-0`),s("caret return",W),W})},x=(k,D)=>(s("replaceXRanges",k,D),k.split(/\s+/).map(M=>C(M,D)).join(" ")),C=(k,D)=>{k=k.trim();const M=D.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return k.replace(M,(L,B,U,V,O,z)=>{s("xRange",k,L,B,U,V,O,z);const W=v(U),j=W||v(V),H=j||v(O),G=H;return B==="="&&G&&(B=""),z=D.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(V=0),O=0,B===">"?(B=">=",j?(U=+U+1,V=0,O=0):(V=+V+1,O=0)):B==="<="&&(B="<",j?U=+U+1:V=+V+1),B==="<"&&(z="-0"),L=`${B+U}.${V}.${O}${z}`):j?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:H&&(L=`>=${U}.${V}.0${z} <${U}.${+V+1}.0-0`),s("xRange return",L),L})},A=(k,D)=>(s("replaceStars",k,D),k.trim().replace(a[u.STAR],"")),R=(k,D)=>(s("replaceGTE0",k,D),k.trim().replace(a[D.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=k=>(D,M,L,B,U,V,O,z,W,j,H,G)=>(v(L)?M="":v(B)?M=`>=${L}.0.0${k?"-0":""}`:v(U)?M=`>=${L}.${B}.0${k?"-0":""}`:V?M=`>=${M}`:M=`>=${M}${k?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(H)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${H}-${G}`:k?z=`<${W}.${j}.${+H+1}-0`:z=`<=${z}`,`${M} ${z}`.trim()),$=(k,D,M)=>{for(let L=0;L<k.length;L++)if(!k[L].test(D))return!1;if(D.prerelease.length&&!M.includePrerelease){for(let L=0;L<k.length;L++)if(s(k[L].semver),k[L].semver!==i.ANY&&k[L].semver.prerelease.length>0){const B=k[L].semver;if(B.major===D.major&&B.minor===D.minor&&B.patch===D.patch)return!0}return!1}return!0};return jB}const Fun=$je(),jun=(e,t,n)=>{try{t=new Fun(t,n)}catch{return!1}return t.test(e)};var Bun=jun,Mje=Yan(Bun);function Uun(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var zun=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Lje(e,...t){for(const n of t)Vun(e,n);return e}function Vun(e,t){for(const n of Object.keys(t))wS(e,n,t[n],!0)}const _f=NQt;let NI=Fon;const MP=typeof window<"u"?window:void 0;var $ye;NI===void 0&&(($ye=MP==null?void 0:MP.vl)!=null&&$ye.compile)&&(NI=MP.vl);const Hun={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},qun={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},jC={vega:"Vega","vega-lite":"Vega-Lite"},UM={vega:_f.version,"vega-lite":NI?NI.version:"not available"},Wun={vega:e=>e,"vega-lite":(e,t)=>NI.compile(e,{config:t}).spec},Gun=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Yun="chart-wrapper";function Kun(e){return typeof e=="function"}function Nye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${jC[r]} JSON Source`}function Xun(e,t){if(e.$schema){const n=kje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${jC[n.library]}, but mode argument sets ${jC[t]??t}.`);const r=n.library;return Mje(UM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${jC[r]} ${n.version}, but the current version of ${jC[r]} is v${UM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Fje(e){return!!(e&&"load"in e)}function Pye(e){return Fje(e)?e:_f.loader(e)}function Qun(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return yt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Jun(e,t,n={}){let r,i;yt(t)?(i=Pye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Qun(r),o=s.loader;(!i||o)&&(i=Pye(n.loader??o));const a=await Oye(s,i),u=await Oye(n,i),l={...Lje(u,a),config:_S(u.config??{},a.config??{})};return await eln(e,r,l,i)}async function Oye(e,t){const n=yt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=yt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Zun(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function eln(e,t,n={},r){const i=n.theme?_S(jan[n.theme],n.config??{}):n.config,s=Uy(n.actions)?n.actions:Lje({},Hun,n.actions??{}),o={...qun,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??_f.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:x}=Zun(c);if(!S.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?zun.toString():n.defaultStyle,x.appendChild(C)}}const f=Xun(t,n.mode);let d=Wun[f](t,i);if(f==="vega-lite"&&d.$schema){const E=kje(d.$schema);Mje(UM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${UM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Yun),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):nF(d,p,!0,!1).newDocument),n.formatLocale&&_f.formatLocale(n.formatLocale),n.timeFormatLocale&&_f.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?_f.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&_f.expressionFunction(E,S)}const{ast:m}=n,g=_f.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||_f.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:_f.expressionInterpreter??n.expr??UQt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:x}=S;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,x=E&&!Fje(E)?E==null?void 0:E.baseURL:void 0,C=Kun(S)?S:new Gan({baseURL:x,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const C=document.createElement("summary");C.innerHTML=Gun,x.append(C),b=A=>{x.contains(A.target)||x.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const C=o[`${x.toUpperCase()}_ACTION`],A=document.createElement("a"),R=mt(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${x}`,A.addEventListener("mousedown",async function(P){P.preventDefault();const $=await y.toImageURL(x,R);this.href=$}),S.append(A)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(C){Nye(V9(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(C){Nye(V9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Uun(window,x,{config:i,mode:p?"vega":f,renderer:a,spec:V9(p?d:t)}),A.preventDefault()}),S.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function tln(e){return!!e&&{}.toString.call(e)==="[object Function]"}function nln(e,t,n){n&&(tln(n)?n(e.data(t)):e.change(t,_f.changeset().remove(()=>!0).insert(n)))}function rln(e,t){Object.keys(t).forEach(n=>{nln(e,n,t[n])})}function jje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Bje=()=>{};function BB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function iln(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=jje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!sO(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Dye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function UB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function BC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Uje extends xi.PureComponent{constructor(){super(...arguments),BC(this,"containerRef",xi.createRef()),BC(this,"resultPromise",void 0),BC(this,"handleError",t=>{const{onError:n=Bje}=this.props;n(t,this.containerRef.current),console.warn(t)}),BC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=jje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=iln(UB(this.props),UB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!eH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Dye(a,s),i&&BB(a,i)),a.run()})}else eH(i,s)||this.modifyView(o=>{s&&Dye(o,s),i&&BB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=UB(this.props);this.resultPromise=Jun(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;BB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return xi.createElement("div",{ref:this.containerRef,className:t,style:n})}}BC(Uje,"propTypes",{className:Vpe.string,onError:Vpe.func});function Rq(){return Rq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rq.apply(this,arguments)}function Nq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sln={};class zje extends xi.PureComponent{constructor(){super(...arguments),Nq(this,"vegaEmbed",xi.createRef()),Nq(this,"handleNewView",t=>{this.update();const{onNewView:n=Bje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){eH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{rln(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return xi.createElement(Uje,Rq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Nq(zje,"defaultProps",{data:sln});function Pq(){return Pq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pq.apply(this,arguments)}function oln(e){return xi.createElement(zje,Pq({},e,{mode:"vega-lite"}))}function aln(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function uln(e){const{studyId:t,allParticipants:n,config:r}=e,i=tf(),[s,o]=zf(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=I.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=I.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),E=n.filter(S=>S.rejected);return[b,w,E,b.filter(S=>aln(S.answers,u))]},[n,u]),p=I.useMemo(()=>{var b,w;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(S=>S.endTime).flat())).sort((E,S)=>E-S).map((E,S)=>({Date:E,Participants:S})),{Date:(w=u[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,u]),m=I.useMemo(()=>{var b,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(w=u[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=JC(!1);return _.jsx(Fc,{children:_.jsxs(_b,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(tn,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(tn,{direction:"row",align:"center",children:[_.jsx(Oi,{order:5,children:t}),_.jsx(t3e,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),_.jsxs(Kn,{children:[_.jsx(e3e,{allParticipants:n,studyId:t}),_.jsxs(Yn,{opened:g,children:[_.jsx(Yn.Target,{children:_.jsx(xn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:_.jsx(DQe,{})})}),_.jsx(Yn.Dropdown,{children:_.jsx(nt,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(VZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(nt,{mt:16,children:"Finished Participants"}),_.jsx(oln,{spec:m,actions:!1})]}):_.jsx(Ee,{h:293.4,children:_.jsx(Ja,{style:{height:"100%"},children:_.jsx(nt,{children:"Not enough participants for chart"})})})]})})}function lln(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),[u,l]=I.useState({}),{storageEngine:c}=Ci(),{user:f}=ng();I.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const w=await z4(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),w===null)return;if(m[b]=w,c instanceof gc){const E=await c.getModes(b);g[b]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(w=>y(w));try{await Promise.all(b),s(p),a(m),l(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?_.jsx(xc.Col,{span:{md:12,xl:6},children:_.jsx(uln,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return _.jsxs(Ee,{children:[_.jsx(Oi,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(xc,{children:[d.length>0?d:_.jsx(Fc,{mt:100,children:_.jsx(nt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(jl,{visible:n})]})]})}function cln({globalConfig:e}){return _.jsxs(Or,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(Or.Main,{children:_.jsx(Fc,{fluid:!0,children:_.jsx(lln,{globalConfig:e})})})]})}function fln(){const{user:e,triggerAuth:t}=ng(),{storageEngine:n}=Ci(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),b=gTe({initialValues:{email:""},validate:{email:Qht("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof gc){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(k=>k.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof gc){const R=await n3e(n,u);R&&R.email&&v({email:R.email,uid:R.uid}),p(!0)}u(!1)},E=async R=>{u(!0),n instanceof gc&&R&&(await n.changeAuth(!0),await n.addAdminUser(R),o([R.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof gc){await n.addAdminUser({email:b.values.email,uid:null});const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(P=>P.email))}u(!1),c(!1),b.setValues({email:""})},x=R=>{d(!0),g(R)},C=async()=>{if(u(!0),n instanceof gc){await n.removeAdminUser(m);const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(P=>P.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof gc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Fc,{children:_.jsxs(_b,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Oi,{mb:20,order:3,children:"Authentication"}),r?_.jsx(tn,{children:_.jsx(nt,{children:"Authentication is enabled."})}):_.jsxs(tn,{justify:"space-between",children:[_.jsx(Ee,{children:_.jsx(nt,{children:"Authentication is currently disabled."})}),_.jsx(Di,{label:"You can only enable auth when using Firebase",disabled:A,children:_.jsx(xn,{onClick:R=>A?w():R.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(tn,{mt:40,direction:"column",children:[_.jsxs(tn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Oi,{order:6,children:"Enabled Users"}),_.jsx(Jwe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(R=>{var P;return _.jsxs(tn,{justify:"space-between",mb:10,children:[_.jsx(nt,{children:R}),R===((P=e.user)==null?void 0:P.email)?_.jsx(nt,{color:"blue",size:"xs",children:"You"}):_.jsx(Cl,{variant:"subtle",onClick:()=>x(R),children:_.jsx(Qwe,{color:"red"})})]},R)}):null]}):null]})}),_.jsx(xs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ee,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(nm,{leftSection:_.jsx(NQe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(tn,{mt:30,justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(xn,{type:"submit",children:"Save"})]})]})}),_.jsxs(xs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(nt,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(nt,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(tn,{mt:40,justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(xn,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),_.jsxs(xs,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(nt,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(nt,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(tn,{mt:40,justify:"right",children:[_.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(xn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(jl,{visible:a})]})}class dln extends YDe{constructor(){super("localStorage");gu(this,"studyDatabase");gu(this,"studyId")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await H_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Y$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await Y$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await H_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=YA();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=H_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=YA();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await H_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await H_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function hln(){let e,t=!1;{const n=new gc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new dln;await n.connect(),e=n}return e}async function pln(){const t=await(await fetch(`${Kh}global.json`)).text();return Tht(t)}function mln(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await _Ft(e))}a()},[e]),I.useEffect(()=>{e||pln().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Ci();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await hln();s(u)}a()},[s,i]);const o=async a=>i instanceof gc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(vQe,{basename:Kh,children:_.jsx(Y4t,{children:_.jsx(IQe,{children:_.jsx(Or,{padding:"md",header:{height:70},children:_.jsxs(cQe,{children:[_.jsx(Cp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(Dst,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Cp,{path:"/:studyId/*",element:_.jsx(EFt,{globalConfig:e})}),_.jsx(Cp,{path:"/analysis/dashboard",element:_.jsx(cln,{globalConfig:e})}),_.jsx(Cp,{path:"/analysis",element:_.jsx(ZV,{to:"/analysis/dashboard"})}),_.jsx(Cp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(jpe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(kFt,{globalConfig:e})})}),_.jsx(Cp,{path:"/analysis/stats/:studyId",element:_.jsx(ZV,{to:"./table",replace:!0})}),_.jsx(Cp,{path:"/settings",element:_.jsx(Or,{children:_.jsxs(jpe,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(Or.Main,{children:_.jsx(fln,{})})]})})}),_.jsx(Cp,{path:"/login",element:_.jsxs(Or,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(Or.Main,{children:_.jsx(RFt,{})})]})})]})})})})}):null}zB.createRoot(document.getElementById("root")).render(_.jsx(xi.StrictMode,{children:_.jsx(wXe,{children:_.jsx(ybe,{children:_.jsx(mln,{})})})}))});export default gln();
